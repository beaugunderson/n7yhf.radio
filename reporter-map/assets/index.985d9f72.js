(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ln(n){var i=n.default;if(typeof i=="function"){var e=function(){return i.apply(this,arguments)};e.prototype=i.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var s=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:function(){return n[o]}})}),e}var mo={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,i){(function(e,o){o(i)})(Oi,function(e){var o="1.8.0";function s(t){var r,u,l,_;for(u=1,l=arguments.length;u<l;u++){_=arguments[u];for(r in _)t[r]=_[r]}return t}var a=Object.create||function(){function t(){}return function(r){return t.prototype=r,new t}}();function h(t,r){var u=Array.prototype.slice;if(t.bind)return t.bind.apply(t,u.call(arguments,1));var l=u.call(arguments,2);return function(){return t.apply(r,l.length?l.concat(u.call(arguments)):arguments)}}var f=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function c(t,r,u){var l,_,m,T;return T=function(){l=!1,_&&(m.apply(u,_),_=!1)},m=function(){l?_=arguments:(t.apply(u,arguments),setTimeout(T,r),l=!0)},m}function v(t,r,u){var l=r[1],_=r[0],m=l-_;return t===l&&u?t:((t-_)%m+m)%m+_}function w(){return!1}function b(t,r){if(r===!1)return t;var u=Math.pow(10,r===void 0?6:r);return Math.round(t*u)/u}function P(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t){return P(t).split(/\s+/)}function I(t,r){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var u in r)t.options[u]=r[u];return t.options}function F(t,r,u){var l=[];for(var _ in t)l.push(encodeURIComponent(u?_.toUpperCase():_)+"="+encodeURIComponent(t[_]));return(!r||r.indexOf("?")===-1?"?":"&")+l.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function k(t,r){return t.replace(A,function(u,l){var _=r[l];if(_===void 0)throw new Error("No value provided for variable "+u);return typeof _=="function"&&(_=_(r)),_})}var B=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function $(t,r){for(var u=0;u<t.length;u++)if(t[u]===r)return u;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function it(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ct=0;function tt(t){var r=+new Date,u=Math.max(0,16-(r-ct));return ct=r+u,window.setTimeout(t,u)}var J=window.requestAnimationFrame||it("RequestAnimationFrame")||tt,Ht=window.cancelAnimationFrame||it("CancelAnimationFrame")||it("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function St(t,r,u){if(u&&J===tt)t.call(r);else return J.call(window,h(t,r))}function Ot(t){t&&Ht.call(window,t)}var Jt={__proto__:null,extend:s,create:a,bind:h,get lastId(){return f},stamp:d,throttle:c,wrapNum:v,falseFn:w,formatNum:b,trim:P,splitWords:C,setOptions:I,getParamString:F,template:k,isArray:B,indexOf:$,emptyImageUrl:H,requestFn:J,cancelFn:Ht,requestAnimFrame:St,cancelAnimFrame:Ot};function Lt(){}Lt.extend=function(t){var r=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=r.__super__=this.prototype,l=a(u);l.constructor=r,r.prototype=l;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(r[_]=this[_]);return t.statics&&s(r,t.statics),t.includes&&(Gt(t.includes),s.apply(null,[l].concat(t.includes))),s(l,t),delete l.statics,delete l.includes,l.options&&(l.options=u.options?a(u.options):{},s(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,T=l._initHooks.length;m<T;m++)l._initHooks[m].call(this)}},r},Lt.include=function(t){var r=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=r,this.mergeOptions(t.options)),this},Lt.mergeOptions=function(t){return s(this.prototype.options,t),this},Lt.addInitHook=function(t){var r=Array.prototype.slice.call(arguments,1),u=typeof t=="function"?t:function(){this[t].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Gt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=B(t)?t:[t];for(var r=0;r<t.length;r++)t[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var At={on:function(t,r,u){if(typeof t=="object")for(var l in t)this._on(l,t[l],r);else{t=C(t);for(var _=0,m=t.length;_<m;_++)this._on(t[_],r,u)}return this},off:function(t,r,u){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],r);else{t=C(t);for(var _=arguments.length===1,m=0,T=t.length;m<T;m++)_?this._off(t[m]):this._off(t[m],r,u)}return this},_on:function(t,r,u){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}this._events=this._events||{};var l=this._events[t];l||(l=[],this._events[t]=l),u===this&&(u=void 0);for(var _={fn:r,ctx:u},m=l,T=0,D=m.length;T<D;T++)if(m[T].fn===r&&m[T].ctx===u)return;m.push(_)},_off:function(t,r,u){var l,_,m;if(!!this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(_=0,m=l.length;_<m;_++)l[_].fn=w;delete this._events[t];return}if(u===this&&(u=void 0),typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}for(_=0,m=l.length;_<m;_++){var T=l[_];if(T.ctx===u&&T.fn===r){this._firingCount&&(T.fn=w,this._events[t]=l=l.slice()),l.splice(_,1);return}}console.warn("listener not found")}},fire:function(t,r,u){if(!this.listens(t,u))return this;var l=s({},r,{type:t,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var _=this._events[t];if(_){this._firingCount=this._firingCount+1||1;for(var m=0,T=_.length;m<T;m++){var D=_[m];D.fn.call(D.ctx||this,l)}this._firingCount--}}return u&&this._propagateEvent(l),this},listens:function(t,r){typeof t!="string"&&console.warn('"string" type argument expected');var u=this._events&&this._events[t];if(u&&u.length)return!0;if(r){for(var l in this._eventParents)if(this._eventParents[l].listens(t,r))return!0}return!1},once:function(t,r,u){if(typeof t=="object"){for(var l in t)this.once(l,t[l],r);return this}var _=h(function(){this.off(t,r,u).off(t,_,u)},this);return this.on(t,r,u).on(t,_,u)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var r in this._eventParents)this._eventParents[r].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};At.addEventListener=At.on,At.removeEventListener=At.clearAllEventListeners=At.off,At.addOneTimeEventListener=At.once,At.fireEvent=At.fire,At.hasEventListeners=At.listens;var Dt=Lt.extend(At);function Q(t,r,u){this.x=u?Math.round(t):t,this.y=u?Math.round(r):r}var Xt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(t){return this.clone()._add(at(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(at(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Q(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Q(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Xt(this.x),this.y=Xt(this.y),this},distanceTo:function(t){t=at(t);var r=t.x-this.x,u=t.y-this.y;return Math.sqrt(r*r+u*u)},equals:function(t){return t=at(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=at(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function at(t,r,u){return t instanceof Q?t:B(t)?new Q(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Q(t.x,t.y):new Q(t,r,u)}function nt(t,r){if(!!t)for(var u=r?[t,r]:t,l=0,_=u.length;l<_;l++)this.extend(u[l])}nt.prototype={extend:function(t){return t=at(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new Q(this.min.x,this.max.y)},getTopRight:function(){return new Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var r,u;return typeof t[0]=="number"||t instanceof Q?t=at(t):t=xt(t),t instanceof nt?(r=t.min,u=t.max):r=u=t,r.x>=this.min.x&&u.x<=this.max.x&&r.y>=this.min.y&&u.y<=this.max.y},intersects:function(t){t=xt(t);var r=this.min,u=this.max,l=t.min,_=t.max,m=_.x>=r.x&&l.x<=u.x,T=_.y>=r.y&&l.y<=u.y;return m&&T},overlaps:function(t){t=xt(t);var r=this.min,u=this.max,l=t.min,_=t.max,m=_.x>r.x&&l.x<u.x,T=_.y>r.y&&l.y<u.y;return m&&T},isValid:function(){return!!(this.min&&this.max)}};function xt(t,r){return!t||t instanceof nt?t:new nt(t,r)}function kt(t,r){if(!!t)for(var u=r?[t,r]:t,l=0,_=u.length;l<_;l++)this.extend(u[l])}kt.prototype={extend:function(t){var r=this._southWest,u=this._northEast,l,_;if(t instanceof _t)l=t,_=t;else if(t instanceof kt){if(l=t._southWest,_=t._northEast,!l||!_)return this}else return t?this.extend(O(t)||Rt(t)):this;return!r&&!u?(this._southWest=new _t(l.lat,l.lng),this._northEast=new _t(_.lat,_.lng)):(r.lat=Math.min(l.lat,r.lat),r.lng=Math.min(l.lng,r.lng),u.lat=Math.max(_.lat,u.lat),u.lng=Math.max(_.lng,u.lng)),this},pad:function(t){var r=this._southWest,u=this._northEast,l=Math.abs(r.lat-u.lat)*t,_=Math.abs(r.lng-u.lng)*t;return new kt(new _t(r.lat-l,r.lng-_),new _t(u.lat+l,u.lng+_))},getCenter:function(){return new _t((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _t(this.getNorth(),this.getWest())},getSouthEast:function(){return new _t(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof _t||"lat"in t?t=O(t):t=Rt(t);var r=this._southWest,u=this._northEast,l,_;return t instanceof kt?(l=t.getSouthWest(),_=t.getNorthEast()):l=_=t,l.lat>=r.lat&&_.lat<=u.lat&&l.lng>=r.lng&&_.lng<=u.lng},intersects:function(t){t=Rt(t);var r=this._southWest,u=this._northEast,l=t.getSouthWest(),_=t.getNorthEast(),m=_.lat>=r.lat&&l.lat<=u.lat,T=_.lng>=r.lng&&l.lng<=u.lng;return m&&T},overlaps:function(t){t=Rt(t);var r=this._southWest,u=this._northEast,l=t.getSouthWest(),_=t.getNorthEast(),m=_.lat>r.lat&&l.lat<u.lat,T=_.lng>r.lng&&l.lng<u.lng;return m&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,r){return t?(t=Rt(t),this._southWest.equals(t.getSouthWest(),r)&&this._northEast.equals(t.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Rt(t,r){return t instanceof kt?t:new kt(t,r)}function _t(t,r,u){if(isNaN(t)||isNaN(r))throw new Error("Invalid LatLng object: ("+t+", "+r+")");this.lat=+t,this.lng=+r,u!==void 0&&(this.alt=+u)}_t.prototype={equals:function(t,r){if(!t)return!1;t=O(t);var u=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return u<=(r===void 0?1e-9:r)},toString:function(t){return"LatLng("+b(this.lat,t)+", "+b(this.lng,t)+")"},distanceTo:function(t){return q.distance(this,O(t))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(t){var r=180*t/40075017,u=r/Math.cos(Math.PI/180*this.lat);return Rt([this.lat-r,this.lng-u],[this.lat+r,this.lng+u])},clone:function(){return new _t(this.lat,this.lng,this.alt)}};function O(t,r,u){return t instanceof _t?t:B(t)&&typeof t[0]!="object"?t.length===3?new _t(t[0],t[1],t[2]):t.length===2?new _t(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new _t(t.lat,"lng"in t?t.lng:t.lon,t.alt):r===void 0?null:new _t(t,r,u)}var R={latLngToPoint:function(t,r){var u=this.projection.project(t),l=this.scale(r);return this.transformation._transform(u,l)},pointToLatLng:function(t,r){var u=this.scale(r),l=this.transformation.untransform(t,u);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var r=this.projection.bounds,u=this.scale(t),l=this.transformation.transform(r.min,u),_=this.transformation.transform(r.max,u);return new nt(l,_)},infinite:!1,wrapLatLng:function(t){var r=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,u=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new _t(u,r,l)},wrapLatLngBounds:function(t){var r=t.getCenter(),u=this.wrapLatLng(r),l=r.lat-u.lat,_=r.lng-u.lng;if(l===0&&_===0)return t;var m=t.getSouthWest(),T=t.getNorthEast(),D=new _t(m.lat-l,m.lng-_),N=new _t(T.lat-l,T.lng-_);return new kt(D,N)}},q=s({},R,{wrapLng:[-180,180],R:6371e3,distance:function(t,r){var u=Math.PI/180,l=t.lat*u,_=r.lat*u,m=Math.sin((r.lat-t.lat)*u/2),T=Math.sin((r.lng-t.lng)*u/2),D=m*m+Math.cos(l)*Math.cos(_)*T*T,N=2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D));return this.R*N}}),et=6378137,ut={R:et,MAX_LATITUDE:85.0511287798,project:function(t){var r=Math.PI/180,u=this.MAX_LATITUDE,l=Math.max(Math.min(u,t.lat),-u),_=Math.sin(l*r);return new Q(this.R*t.lng*r,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(t){var r=180/Math.PI;return new _t((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*r,t.x*r/this.R)},bounds:function(){var t=et*Math.PI;return new nt([-t,-t],[t,t])}()};function x(t,r,u,l){if(B(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=r,this._c=u,this._d=l}x.prototype={transform:function(t,r){return this._transform(t.clone(),r)},_transform:function(t,r){return r=r||1,t.x=r*(this._a*t.x+this._b),t.y=r*(this._c*t.y+this._d),t},untransform:function(t,r){return r=r||1,new Q((t.x/r-this._b)/this._a,(t.y/r-this._d)/this._c)}};function E(t,r,u,l){return new x(t,r,u,l)}var U=s({},q,{code:"EPSG:3857",projection:ut,transformation:function(){var t=.5/(Math.PI*ut.R);return E(t,.5,-t,.5)}()}),K=s({},U,{code:"EPSG:900913"});function It(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t,r){var u="",l,_,m,T,D,N;for(l=0,m=t.length;l<m;l++){for(D=t[l],_=0,T=D.length;_<T;_++)N=D[_],u+=(_?"L":"M")+N.x+" "+N.y;u+=r?Y.svg?"z":"x":""}return u||"M0 0"}var p=document.documentElement.style,g="ActiveXObject"in window,S=g&&!document.addEventListener,M="msLaunchUri"in navigator&&!("documentMode"in document),j=_e("webkit"),W=_e("android"),lt=_e("android 2")||_e("android 3"),vt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Et=W&&_e("Google")&&vt<537&&!("AudioNode"in window),Ct=!!window.opera,yt=!M&&_e("chrome"),ie=_e("gecko")&&!j&&!Ct&&!g,yn=!yt&&_e("safari"),Di=_e("phantom"),Yo="OTransition"in p,_h=navigator.platform.indexOf("Win")===0,Jo=g&&"transition"in p,gr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!lt,Xo="MozPerspective"in p,gh=!window.L_DISABLE_3D&&(Jo||gr||Xo)&&!Yo&&!Di,Ni=typeof orientation<"u"||_e("mobile"),mh=Ni&&j,vh=Ni&&gr,ts=!window.PointerEvent&&window.MSPointerEvent,es=!!(window.PointerEvent||ts),is="ontouchstart"in window||!!window.TouchEvent,yh=!window.L_NO_TOUCH&&(is||es),wh=Ni&&Ct,bh=Ni&&ie,xh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Eh=function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",w,r),window.removeEventListener("testPassiveEventSupport",w,r)}catch{}return t}(),Sh=function(){return!!document.createElement("canvas").getContext}(),mr=!!(document.createElementNS&&It("svg").createSVGRect),Th=!!mr&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ph=!mr&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var r=t.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}();function _e(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Y={ie:g,ielt9:S,edge:M,webkit:j,android:W,android23:lt,androidStock:Et,opera:Ct,chrome:yt,gecko:ie,safari:yn,phantom:Di,opera12:Yo,win:_h,ie3d:Jo,webkit3d:gr,gecko3d:Xo,any3d:gh,mobile:Ni,mobileWebkit:mh,mobileWebkit3d:vh,msPointer:ts,pointer:es,touch:yh,touchNative:is,mobileOpera:wh,mobileGecko:bh,retina:xh,passiveEvents:Eh,canvas:Sh,svg:mr,vml:Ph,inlineSvg:Th},ns=Y.msPointer?"MSPointerDown":"pointerdown",rs=Y.msPointer?"MSPointerMove":"pointermove",os=Y.msPointer?"MSPointerUp":"pointerup",ss=Y.msPointer?"MSPointerCancel":"pointercancel",vr={touchstart:ns,touchmove:rs,touchend:os,touchcancel:ss},as={touchstart:Mh,touchmove:wn,touchend:wn,touchcancel:wn},fi={},us=!1;function Lh(t,r,u){return r==="touchstart"&&Bh(),as[r]?(u=as[r].bind(this,u),t.addEventListener(vr[r],u,!1),u):(console.warn("wrong event specified:",r),L.Util.falseFn)}function Ah(t,r,u){if(!vr[r]){console.warn("wrong event specified:",r);return}t.removeEventListener(vr[r],u,!1)}function Ih(t){fi[t.pointerId]=t}function Ch(t){fi[t.pointerId]&&(fi[t.pointerId]=t)}function hs(t){delete fi[t.pointerId]}function Bh(){us||(document.addEventListener(ns,Ih,!0),document.addEventListener(rs,Ch,!0),document.addEventListener(os,hs,!0),document.addEventListener(ss,hs,!0),us=!0)}function wn(t,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var u in fi)r.touches.push(fi[u]);r.changedTouches=[r],t(r)}}function Mh(t,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&Qt(r),wn(t,r)}function Oh(t){var r={},u,l;for(l in t)u=t[l],r[l]=u&&u.bind?u.bind(t):u;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var kh=200;function Rh(t,r){t.addEventListener("dblclick",r);var u=0,l;function _(m){if(m.detail!==1){l=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var T=Date.now();T-u<=kh?(l++,l===2&&r(Oh(m))):l=1,u=T}}return t.addEventListener("click",_),{dblclick:r,simDblclick:_}}function Dh(t,r){t.removeEventListener("dblclick",r.dblclick),t.removeEventListener("click",r.simDblclick)}var yr=En(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zi=En(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ls=zi==="webkitTransition"||zi==="OTransition"?zi+"End":"transitionend";function fs(t){return typeof t=="string"?document.getElementById(t):t}function Fi(t,r){var u=t.style[r]||t.currentStyle&&t.currentStyle[r];if((!u||u==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);u=l?l[r]:null}return u==="auto"?null:u}function wt(t,r,u){var l=document.createElement(t);return l.className=r||"",u&&u.appendChild(l),l}function Nt(t){var r=t.parentNode;r&&r.removeChild(t)}function bn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ci(t){var r=t.parentNode;r&&r.lastChild!==t&&r.appendChild(t)}function di(t){var r=t.parentNode;r&&r.firstChild!==t&&r.insertBefore(t,r.firstChild)}function wr(t,r){if(t.classList!==void 0)return t.classList.contains(r);var u=xn(t);return u.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(u)}function ft(t,r){if(t.classList!==void 0)for(var u=C(r),l=0,_=u.length;l<_;l++)t.classList.add(u[l]);else if(!wr(t,r)){var m=xn(t);br(t,(m?m+" ":"")+r)}}function zt(t,r){t.classList!==void 0?t.classList.remove(r):br(t,P((" "+xn(t)+" ").replace(" "+r+" "," ")))}function br(t,r){t.className.baseVal===void 0?t.className=r:t.className.baseVal=r}function xn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function re(t,r){"opacity"in t.style?t.style.opacity=r:"filter"in t.style&&Nh(t,r)}function Nh(t,r){var u=!1,l="DXImageTransform.Microsoft.Alpha";try{u=t.filters.item(l)}catch{if(r===1)return}r=Math.round(r*100),u?(u.Enabled=r!==100,u.Opacity=r):t.style.filter+=" progid:"+l+"(opacity="+r+")"}function En(t){for(var r=document.documentElement.style,u=0;u<t.length;u++)if(t[u]in r)return t[u];return!1}function Ye(t,r,u){var l=r||new Q(0,0);t.style[yr]=(Y.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(u?" scale("+u+")":"")}function Ft(t,r){t._leaflet_pos=r,Y.any3d?Ye(t,r):(t.style.left=r.x+"px",t.style.top=r.y+"px")}function Je(t){return t._leaflet_pos||new Q(0,0)}var Ui,ji,xr;if("onselectstart"in document)Ui=function(){ht(window,"selectstart",Qt)},ji=function(){Bt(window,"selectstart",Qt)};else{var qi=En(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ui=function(){if(qi){var t=document.documentElement.style;xr=t[qi],t[qi]="none"}},ji=function(){qi&&(document.documentElement.style[qi]=xr,xr=void 0)}}function Er(){ht(window,"dragstart",Qt)}function Sr(){Bt(window,"dragstart",Qt)}var Sn,Tr;function Pr(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(Tn(),Sn=t,Tr=t.style.outline,t.style.outline="none",ht(window,"keydown",Tn))}function Tn(){!Sn||(Sn.style.outline=Tr,Sn=void 0,Tr=void 0,Bt(window,"keydown",Tn))}function cs(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Lr(t){var r=t.getBoundingClientRect();return{x:r.width/t.offsetWidth||1,y:r.height/t.offsetHeight||1,boundingClientRect:r}}var zh={__proto__:null,TRANSFORM:yr,TRANSITION:zi,TRANSITION_END:ls,get:fs,getStyle:Fi,create:wt,remove:Nt,empty:bn,toFront:ci,toBack:di,hasClass:wr,addClass:ft,removeClass:zt,setClass:br,getClass:xn,setOpacity:re,testProp:En,setTransform:Ye,setPosition:Ft,getPosition:Je,get disableTextSelection(){return Ui},get enableTextSelection(){return ji},disableImageDrag:Er,enableImageDrag:Sr,preventOutline:Pr,restoreOutline:Tn,getSizedParentNode:cs,getScale:Lr};function ht(t,r,u,l){if(r&&typeof r=="object")for(var _ in r)Ir(t,_,r[_],u);else{r=C(r);for(var m=0,T=r.length;m<T;m++)Ir(t,r[m],u,l)}return this}var ge="_leaflet_events";function Bt(t,r,u,l){if(arguments.length===1)ds(t),delete t[ge];else if(r&&typeof r=="object")for(var _ in r)Cr(t,_,r[_],u);else if(r=C(r),arguments.length===2)ds(t,function(D){return $(r,D)!==-1});else for(var m=0,T=r.length;m<T;m++)Cr(t,r[m],u,l);return this}function ds(t,r){for(var u in t[ge]){var l=u.split(/\d/)[0];(!r||r(l))&&Cr(t,l,null,null,u)}}var Ar={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ir(t,r,u,l){var _=r+d(u)+(l?"_"+d(l):"");if(t[ge]&&t[ge][_])return this;var m=function(D){return u.call(l||t,D||window.event)},T=m;!Y.touchNative&&Y.pointer&&r.indexOf("touch")===0?m=Lh(t,r,m):Y.touch&&r==="dblclick"?m=Rh(t,m):"addEventListener"in t?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?t.addEventListener(Ar[r]||r,m,Y.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(m=function(D){D=D||window.event,Mr(t,D)&&T(D)},t.addEventListener(Ar[r],m,!1)):t.addEventListener(r,T,!1):t.attachEvent("on"+r,m),t[ge]=t[ge]||{},t[ge][_]=m}function Cr(t,r,u,l,_){_=_||r+d(u)+(l?"_"+d(l):"");var m=t[ge]&&t[ge][_];if(!m)return this;!Y.touchNative&&Y.pointer&&r.indexOf("touch")===0?Ah(t,r,m):Y.touch&&r==="dblclick"?Dh(t,m):"removeEventListener"in t?t.removeEventListener(Ar[r]||r,m,!1):t.detachEvent("on"+r,m),t[ge][_]=null}function Xe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Br(t){return Ir(t,"wheel",Xe),this}function Zi(t){return ht(t,"mousedown touchstart dblclick contextmenu",Xe),t._leaflet_disable_click=!0,this}function Qt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ti(t){return Qt(t),Xe(t),this}function ps(t,r){if(!r)return new Q(t.clientX,t.clientY);var u=Lr(r),l=u.boundingClientRect;return new Q((t.clientX-l.left)/u.x-r.clientLeft,(t.clientY-l.top)/u.y-r.clientTop)}var Fh=Y.win&&Y.chrome?2*window.devicePixelRatio:Y.gecko?window.devicePixelRatio:1;function _s(t){return Y.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Fh:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Mr(t,r){var u=r.relatedTarget;if(!u)return!0;try{for(;u&&u!==t;)u=u.parentNode}catch{return!1}return u!==t}var Uh={__proto__:null,on:ht,off:Bt,stopPropagation:Xe,disableScrollPropagation:Br,disableClickPropagation:Zi,preventDefault:Qt,stop:ti,getMousePosition:ps,getWheelDelta:_s,isExternalTarget:Mr,addListener:ht,removeListener:Bt},gs=Dt.extend({run:function(t,r,u,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=Je(t),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=St(this._animate,this),this._step()},_step:function(t){var r=+new Date-this._startTime,u=this._duration*1e3;r<u?this._runFrame(this._easeOut(r/u),t):(this._runFrame(1),this._complete())},_runFrame:function(t,r){var u=this._startPos.add(this._offset.multiplyBy(t));r&&u._round(),Ft(this._el,u),this.fire("step")},_complete:function(){Ot(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),gt=Dt.extend({options:{crs:U,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,r){r=I(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(O(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zi&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,ls,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,r,u){if(r=r===void 0?this._zoom:this._limitZoom(r),t=this._limitCenter(O(t),r,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var l=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,r,u.zoom):this._tryAnimatedPan(t,u.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,r),this},setZoom:function(t,r){return this._loaded?this.setView(this.getCenter(),t,{zoom:r}):(this._zoom=t,this)},zoomIn:function(t,r){return t=t||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,r)},zoomOut:function(t,r){return t=t||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,r)},setZoomAround:function(t,r,u){var l=this.getZoomScale(r),_=this.getSize().divideBy(2),m=t instanceof Q?t:this.latLngToContainerPoint(t),T=m.subtract(_).multiplyBy(1-1/l),D=this.containerPointToLatLng(_.add(T));return this.setView(D,r,{zoom:u})},_getBoundsCenterZoom:function(t,r){r=r||{},t=t.getBounds?t.getBounds():Rt(t);var u=at(r.paddingTopLeft||r.padding||[0,0]),l=at(r.paddingBottomRight||r.padding||[0,0]),_=this.getBoundsZoom(t,!1,u.add(l));if(_=typeof r.maxZoom=="number"?Math.min(r.maxZoom,_):_,_===1/0)return{center:t.getCenter(),zoom:_};var m=l.subtract(u).divideBy(2),T=this.project(t.getSouthWest(),_),D=this.project(t.getNorthEast(),_),N=this.unproject(T.add(D).divideBy(2).add(m),_);return{center:N,zoom:_}},fitBounds:function(t,r){if(t=Rt(t),!t.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(t,r);return this.setView(u.center,u.zoom,r)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,r){return this.setView(t,this._zoom,{pan:r})},panBy:function(t,r){if(t=at(t).round(),r=r||{},!t.x&&!t.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){ft(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,u,r.duration||.25,r.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,r,u){if(u=u||{},u.animate===!1||!Y.any3d)return this.setView(t,r,u);this._stop();var l=this.project(this.getCenter()),_=this.project(t),m=this.getSize(),T=this._zoom;t=O(t),r=r===void 0?T:r;var D=Math.max(m.x,m.y),N=D*this.getZoomScale(T,r),Z=_.distanceTo(l)||1,G=1.42,dt=G*G;function mt(Ut){var Nn=Ut?-1:1,Al=Ut?N:D,Il=N*N-D*D+Nn*dt*dt*Z*Z,Cl=2*Al*dt*Z,Hr=Il/Cl,Ks=Math.sqrt(Hr*Hr+1)-Hr,Bl=Ks<1e-9?-18:Math.log(Ks);return Bl}function Be(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function ii(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}function Dn(Ut){return Be(Ut)/ii(Ut)}var qe=mt(0);function Zr(Ut){return D*(ii(qe)/ii(qe+G*Ut))}function Sl(Ut){return D*(ii(qe)*Dn(qe+G*Ut)-Be(qe))/dt}function Tl(Ut){return 1-Math.pow(1-Ut,1.5)}var Pl=Date.now(),Vs=(mt(1)-qe)/G,Ll=u.duration?1e3*u.duration:1e3*Vs*.8;function $s(){var Ut=(Date.now()-Pl)/Ll,Nn=Tl(Ut)*Vs;Ut<=1?(this._flyToFrame=St($s,this),this._move(this.unproject(l.add(_.subtract(l).multiplyBy(Sl(Nn)/Z)),T),this.getScaleZoom(D/Zr(Nn),T),{flyTo:!0})):this._move(t,r)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),$s.call(this),this},flyToBounds:function(t,r){var u=this._getBoundsCenterZoom(t,r);return this.flyTo(u.center,u.zoom,r)},setMaxBounds:function(t){if(t=Rt(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var r=this.options.minZoom;return this.options.minZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var r=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,r){this._enforcingBounds=!0;var u=this.getCenter(),l=this._limitCenter(u,this._zoom,Rt(t));return u.equals(l)||this.panTo(l,r),this._enforcingBounds=!1,this},panInside:function(t,r){r=r||{};var u=at(r.paddingTopLeft||r.padding||[0,0]),l=at(r.paddingBottomRight||r.padding||[0,0]),_=this.project(this.getCenter()),m=this.project(t),T=this.getPixelBounds(),D=xt([T.min.add(u),T.max.subtract(l)]),N=D.getSize();if(!D.contains(m)){this._enforcingBounds=!0;var Z=m.subtract(D.getCenter()),G=D.extend(m).getSize().subtract(N);_.x+=Z.x<0?-G.x:G.x,_.y+=Z.y<0?-G.y:G.y,this.panTo(this.unproject(_),r),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),l=r.divideBy(2).round(),_=u.divideBy(2).round(),m=l.subtract(_);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=h(this._handleGeolocationResponse,this),u=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,u,t):navigator.geolocation.getCurrentPosition(r,u,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(!!this._container._leaflet_id){var r=t.code,u=t.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(t){if(!!this._container._leaflet_id){var r=t.coords.latitude,u=t.coords.longitude,l=new _t(r,u),_=l.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var T=this.getBoundsZoom(_);this.setView(l,m.maxZoom?Math.min(T,m.maxZoom):T)}var D={latlng:l,bounds:_,timestamp:t.timestamp};for(var N in t.coords)typeof t.coords[N]=="number"&&(D[N]=t.coords[N]);this.fire("locationfound",D)}},addHandler:function(t,r){if(!r)return this;var u=this[t]=new r(this);return this._handlers.push(u),this.options[t]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Nt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ot(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Nt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,r){var u="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=wt("div",u,r||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),r=this.unproject(t.getBottomLeft()),u=this.unproject(t.getTopRight());return new kt(r,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,r,u){t=Rt(t),u=at(u||[0,0]);var l=this.getZoom()||0,_=this.getMinZoom(),m=this.getMaxZoom(),T=t.getNorthWest(),D=t.getSouthEast(),N=this.getSize().subtract(u),Z=xt(this.project(D,l),this.project(T,l)).getSize(),G=Y.any3d?this.options.zoomSnap:1,dt=N.x/Z.x,mt=N.y/Z.y,Be=r?Math.max(dt,mt):Math.min(dt,mt);return l=this.getScaleZoom(Be,l),G&&(l=Math.round(l/(G/100))*(G/100),l=r?Math.ceil(l/G)*G:Math.floor(l/G)*G),Math.max(_,Math.min(m,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,r){var u=this._getTopLeftPoint(t,r);return new nt(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,r){var u=this.options.crs;return r=r===void 0?this._zoom:r,u.scale(t)/u.scale(r)},getScaleZoom:function(t,r){var u=this.options.crs;r=r===void 0?this._zoom:r;var l=u.zoom(t*u.scale(r));return isNaN(l)?1/0:l},project:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(O(t),r)},unproject:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(at(t),r)},layerPointToLatLng:function(t){var r=at(t).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(t){var r=this.project(O(t))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(O(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Rt(t))},distance:function(t,r){return this.options.crs.distance(O(t),O(r))},containerPointToLayerPoint:function(t){return at(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return at(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var r=this.containerPointToLayerPoint(at(t));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(O(t)))},mouseEventToContainerPoint:function(t){return ps(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var r=this._container=fs(t);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(r,"scroll",this._onScroll,this),this._containerId=d(r)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,ft(t,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Fi(t,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ft(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ft(t.markerPane,"leaflet-zoom-hide"),ft(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,r){Ft(this._mapPane,new Q(0,0));var u=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var l=this._zoom!==r;this._moveStart(l,!1)._move(t,r)._moveEnd(l),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(t,r){return t&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(t,r,u,l){r===void 0&&(r=this._zoom);var _=this._zoom!==r;return this._zoom=r,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?u&&u.pinch&&this.fire("zoom",u):((_||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ot(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Ft(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var r=t?Bt:ht;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ot(this._resizeRequest),this._resizeRequest=St(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,r){for(var u=[],l,_=r==="mouseout"||r==="mouseover",m=t.target||t.srcElement,T=!1;m;){if(l=this._targets[d(m)],l&&(r==="click"||r==="preclick")&&this._draggableMoved(l)){T=!0;break}if(l&&l.listens(r,!0)&&(_&&!Mr(m,t)||(u.push(l),_))||m===this._container)break;m=m.parentNode}return!u.length&&!T&&!_&&this.listens(r,!0)&&(u=[this]),u},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var r=t.target||t.srcElement;if(!(!this._loaded||r._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(r))){var u=t.type;u==="mousedown"&&Pr(r),this._fireDOMEvent(t,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,r,u){if(t.type==="click"){var l=s({},t);l.type="preclick",this._fireDOMEvent(l,l.type,u)}var _=this._findEventTargets(t,r);if(u){for(var m=[],T=0;T<u.length;T++)u[T].listens(r,!0)&&m.push(u[T]);_=m.concat(_)}if(!!_.length){r==="contextmenu"&&Qt(t);var D=_[0],N={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Z=D.getLatLng&&(!D._radius||D._radius<=10);N.containerPoint=Z?this.latLngToContainerPoint(D.getLatLng()):this.mouseEventToContainerPoint(t),N.layerPoint=this.containerPointToLayerPoint(N.containerPoint),N.latlng=Z?D.getLatLng():this.layerPointToLatLng(N.layerPoint)}for(T=0;T<_.length;T++)if(_[T].fire(r,N,!0),N.originalEvent._stopped||_[T].options.bubblingMouseEvents===!1&&$(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,r=this._handlers.length;t<r;t++)this._handlers[t].disable()},whenReady:function(t,r){return this._loaded?t.call(r||this,{target:this}):this.on("load",t,r),this},_getMapPanePos:function(){return Je(this._mapPane)||new Q(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,r){var u=t&&r!==void 0?this._getNewPixelOrigin(t,r):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,r){var u=this.getSize()._divideBy(2);return this.project(t,r)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,r,u){var l=this._getNewPixelOrigin(u,r);return this.project(t,r)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,r,u){var l=this._getNewPixelOrigin(u,r);return xt([this.project(t.getSouthWest(),r)._subtract(l),this.project(t.getNorthWest(),r)._subtract(l),this.project(t.getSouthEast(),r)._subtract(l),this.project(t.getNorthEast(),r)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,r,u){if(!u)return t;var l=this.project(t,r),_=this.getSize().divideBy(2),m=new nt(l.subtract(_),l.add(_)),T=this._getBoundsOffset(m,u,r);return T.round().equals([0,0])?t:this.unproject(l.add(T),r)},_limitOffset:function(t,r){if(!r)return t;var u=this.getPixelBounds(),l=new nt(u.min.add(t),u.max.add(t));return t.add(this._getBoundsOffset(l,r))},_getBoundsOffset:function(t,r,u){var l=xt(this.project(r.getNorthEast(),u),this.project(r.getSouthWest(),u)),_=l.min.subtract(t.min),m=l.max.subtract(t.max),T=this._rebound(_.x,-m.x),D=this._rebound(_.y,-m.y);return new Q(T,D)},_rebound:function(t,r){return t+r>0?Math.round(t-r)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(r))},_limitZoom:function(t){var r=this.getMinZoom(),u=this.getMaxZoom(),l=Y.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(r,Math.min(u,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,r){var u=this._getCenterOffset(t)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,r),!0)},_createAnimProxy:function(){var t=this._proxy=wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(r){var u=yr,l=this._proxy.style[u];Ye(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),l===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Nt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),r=this.getZoom();Ye(this._proxy,this.project(t,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,r,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(r),_=this._getCenterOffset(t)._divideBy(1-1/l);return u.animate!==!0&&!this.getSize().contains(_)?!1:(St(function(){this._moveStart(!0,!1)._animateZoom(t,r,!0)},this),!0)},_animateZoom:function(t,r,u,l){!this._mapPane||(u&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=r,ft(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:r,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jh(t,r){return new gt(t,r)}var he=Lt.extend({options:{position:"topright"},initialize:function(t){I(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var r=this._map;return r&&r.removeControl(this),this.options.position=t,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var r=this._container=this.onAdd(t),u=this.getPosition(),l=t._controlCorners[u];return ft(r,"leaflet-control"),u.indexOf("bottom")!==-1?l.insertBefore(r,l.firstChild):l.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Nt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Hi=function(t){return new he(t)};gt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},r="leaflet-",u=this._controlContainer=wt("div",r+"control-container",this._container);function l(_,m){var T=r+_+" "+r+m;t[_+m]=wt("div",T,u)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Nt(this._controlCorners[t]);Nt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ms=he.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,r,u,l){return u<l?-1:l<u?1:0}},initialize:function(t,r,u){I(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in r)this._addLayer(r[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return he.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,r){return this._addLayer(t,r),this._map?this._update():this},addOverlay:function(t,r){return this._addLayer(t,r,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var r=this._getLayer(d(t));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){ft(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ft(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",r=this._container=wt("div",t),u=this.options.collapsed;r.setAttribute("aria-haspopup",!0),Zi(r),Br(r);var l=this._section=wt("section",t+"-list");u&&(this._map.on("click",this.collapse,this),ht(r,{mouseenter:function(){ht(l,"click",Qt),this.expand(),setTimeout(function(){Bt(l,"click",Qt)})},mouseleave:this.collapse},this));var _=this._layersLink=wt("a",t+"-toggle",r);_.href="#",_.title="Layers",_.setAttribute("role","button"),ht(_,"click",Qt),ht(_,"focus",this.expand,this),u||this.expand(),this._baseLayersList=wt("div",t+"-base",l),this._separator=wt("div",t+"-separator",l),this._overlaysList=wt("div",t+"-overlays",l),r.appendChild(l)},_getLayer:function(t){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&d(this._layers[r].layer)===t)return this._layers[r]},_addLayer:function(t,r,u){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:r,overlay:u}),this.options.sortLayers&&this._layers.sort(h(function(l,_){return this.options.sortFunction(l.layer,_.layer,l.name,_.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bn(this._baseLayersList),bn(this._overlaysList),this._layerControlInputs=[];var t,r,u,l,_=0;for(u=0;u<this._layers.length;u++)l=this._layers[u],this._addItem(l),r=r||l.overlay,t=t||!l.overlay,_+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&_>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=r&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var r=this._getLayer(d(t.target)),u=r.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;u&&this._map.fire(u,r)},_createRadioElement:function(t,r){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(r?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=u,l.firstChild},_addItem:function(t){var r=document.createElement("label"),u=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=u):l=this._createRadioElement("leaflet-base-layers_"+d(this),u),this._layerControlInputs.push(l),l.layerId=d(t.layer),ht(l,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+t.name;var m=document.createElement("span");r.appendChild(m),m.appendChild(l),m.appendChild(_);var T=t.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){var t=this._layerControlInputs,r,u,l=[],_=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)r=t[m],u=this._getLayer(r.layerId).layer,r.checked?l.push(u):r.checked||_.push(u);for(m=0;m<_.length;m++)this._map.hasLayer(_[m])&&this._map.removeLayer(_[m]);for(m=0;m<l.length;m++)this._map.hasLayer(l[m])||this._map.addLayer(l[m]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,r,u,l=this._map.getZoom(),_=t.length-1;_>=0;_--)r=t[_],u=this._getLayer(r.layerId).layer,r.disabled=u.options.minZoom!==void 0&&l<u.options.minZoom||u.options.maxZoom!==void 0&&l>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),qh=function(t,r,u){return new ms(t,r,u)},Or=he.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var r="leaflet-control-zoom",u=wt("div",r+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,r+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,r+"-out",u,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,r,u,l,_){var m=wt("a",u,l);return m.innerHTML=t,m.href="#",m.title=r,m.setAttribute("role","button"),m.setAttribute("aria-label",r),Zi(m),ht(m,"click",ti),ht(m,"click",_,this),ht(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,r="leaflet-disabled";zt(this._zoomInButton,r),zt(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ft(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ft(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});gt.mergeOptions({zoomControl:!0}),gt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Or,this.addControl(this.zoomControl))});var Zh=function(t){return new Or(t)},vs=he.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var r="leaflet-control-scale",u=wt("div",r),l=this.options;return this._addScales(l,r+"-line",u),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),u},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,r,u){t.metric&&(this._mScale=wt("div",r,u)),t.imperial&&(this._iScale=wt("div",r,u))},_update:function(){var t=this._map,r=t.getSize().y/2,u=t.distance(t.containerPointToLatLng([0,r]),t.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(u)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var r=this._getRoundNum(t),u=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,u,r/t)},_updateImperial:function(t){var r=t*3.2808399,u,l,_;r>5280?(u=r/5280,l=this._getRoundNum(u),this._updateScale(this._iScale,l+" mi",l/u)):(_=this._getRoundNum(r),this._updateScale(this._iScale,_+" ft",_/r))},_updateScale:function(t,r,u){t.style.width=Math.round(this.options.maxWidth*u)+"px",t.innerHTML=r},_getRoundNum:function(t){var r=Math.pow(10,(Math.floor(t)+"").length-1),u=t/r;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,r*u}}),Hh=function(t){return new vs(t)},Wh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',kr=he.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?Wh+" ":"")+"Leaflet</a>"},initialize:function(t){I(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=wt("div","leaflet-control-attribution"),Zi(this._container);for(var r in t._layers)t._layers[r].getAttribution&&this.addAttribution(t._layers[r].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var r in this._attributions)this._attributions[r]&&t.push(r);var u=[];this.options.prefix&&u.push(this.options.prefix),t.length&&u.push(t.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});gt.mergeOptions({attributionControl:!0}),gt.addInitHook(function(){this.options.attributionControl&&new kr().addTo(this)});var Vh=function(t){return new kr(t)};he.Layers=ms,he.Zoom=Or,he.Scale=vs,he.Attribution=kr,Hi.layers=qh,Hi.zoom=Zh,Hi.scale=Hh,Hi.attribution=Vh;var me=Lt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});me.addTo=function(t,r){return t.addHandler(r,this),this};var $h={Events:At},ys=Y.touch?"touchstart mousedown":"mousedown",Ue=Dt.extend({options:{clickTolerance:3},initialize:function(t,r,u,l){I(this,l),this._element=t,this._dragStartTarget=r||t,this._preventOutline=u},enable:function(){this._enabled||(ht(this._dragStartTarget,ys,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Ue._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,ys,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!!this._enabled&&(this._moved=!1,!wr(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Ue._dragging===this&&this.finishDrag();return}if(!(Ue._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Ue._dragging=this,this._preventOutline&&Pr(this._element),Er(),Ui(),!this._moving)){this.fire("down");var r=t.touches?t.touches[0]:t,u=cs(this._element);this._startPoint=new Q(r.clientX,r.clientY),this._startPos=Je(this._element),this._parentScale=Lr(u);var l=t.type==="mousedown";ht(document,l?"mousemove":"touchmove",this._onMove,this),ht(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(!!this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var r=t.touches&&t.touches.length===1?t.touches[0]:t,u=new Q(r.clientX,r.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Qt(t),this._moved||(this.fire("dragstart"),this._moved=!0,ft(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ft(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Ft(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(t){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),Sr(),ji(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Ue._dragging=!1}});function ws(t,r){if(!r||!t.length)return t.slice();var u=r*r;return t=Qh(t,u),t=Gh(t,u),t}function bs(t,r,u){return Math.sqrt(Wi(t,r,u,!0))}function Kh(t,r,u){return Wi(t,r,u)}function Gh(t,r){var u=t.length,l=typeof Uint8Array!=void 0+""?Uint8Array:Array,_=new l(u);_[0]=_[u-1]=1,Rr(t,_,r,0,u-1);var m,T=[];for(m=0;m<u;m++)_[m]&&T.push(t[m]);return T}function Rr(t,r,u,l,_){var m=0,T,D,N;for(D=l+1;D<=_-1;D++)N=Wi(t[D],t[l],t[_],!0),N>m&&(T=D,m=N);m>u&&(r[T]=1,Rr(t,r,u,l,T),Rr(t,r,u,T,_))}function Qh(t,r){for(var u=[t[0]],l=1,_=0,m=t.length;l<m;l++)Yh(t[l],t[_])>r&&(u.push(t[l]),_=l);return _<m-1&&u.push(t[m-1]),u}var xs;function Es(t,r,u,l,_){var m=l?xs:ei(t,u),T=ei(r,u),D,N,Z;for(xs=T;;){if(!(m|T))return[t,r];if(m&T)return!1;D=m||T,N=Pn(t,r,D,u,_),Z=ei(N,u),D===m?(t=N,m=Z):(r=N,T=Z)}}function Pn(t,r,u,l,_){var m=r.x-t.x,T=r.y-t.y,D=l.min,N=l.max,Z,G;return u&8?(Z=t.x+m*(N.y-t.y)/T,G=N.y):u&4?(Z=t.x+m*(D.y-t.y)/T,G=D.y):u&2?(Z=N.x,G=t.y+T*(N.x-t.x)/m):u&1&&(Z=D.x,G=t.y+T*(D.x-t.x)/m),new Q(Z,G,_)}function ei(t,r){var u=0;return t.x<r.min.x?u|=1:t.x>r.max.x&&(u|=2),t.y<r.min.y?u|=4:t.y>r.max.y&&(u|=8),u}function Yh(t,r){var u=r.x-t.x,l=r.y-t.y;return u*u+l*l}function Wi(t,r,u,l){var _=r.x,m=r.y,T=u.x-_,D=u.y-m,N=T*T+D*D,Z;return N>0&&(Z=((t.x-_)*T+(t.y-m)*D)/N,Z>1?(_=u.x,m=u.y):Z>0&&(_+=T*Z,m+=D*Z)),T=t.x-_,D=t.y-m,l?T*T+D*D:new Q(_,m)}function Le(t){return!B(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ss(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Le(t)}var Jh={__proto__:null,simplify:ws,pointToSegmentDistance:bs,closestPointOnSegment:Kh,clipSegment:Es,_getEdgeIntersection:Pn,_getBitCode:ei,_sqClosestPointOnSegment:Wi,isFlat:Le,_flat:Ss};function Ts(t,r,u){var l,_=[1,4,2,8],m,T,D,N,Z,G,dt,mt;for(m=0,G=t.length;m<G;m++)t[m]._code=ei(t[m],r);for(D=0;D<4;D++){for(dt=_[D],l=[],m=0,G=t.length,T=G-1;m<G;T=m++)N=t[m],Z=t[T],N._code&dt?Z._code&dt||(mt=Pn(Z,N,dt,r,u),mt._code=ei(mt,r),l.push(mt)):(Z._code&dt&&(mt=Pn(Z,N,dt,r,u),mt._code=ei(mt,r),l.push(mt)),l.push(N));t=l}return t}var Xh={__proto__:null,clipPolygon:Ts},Dr={project:function(t){return new Q(t.lng,t.lat)},unproject:function(t){return new _t(t.y,t.x)},bounds:new nt([-180,-90],[180,90])},Nr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new nt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var r=Math.PI/180,u=this.R,l=t.lat*r,_=this.R_MINOR/u,m=Math.sqrt(1-_*_),T=m*Math.sin(l),D=Math.tan(Math.PI/4-l/2)/Math.pow((1-T)/(1+T),m/2);return l=-u*Math.log(Math.max(D,1e-10)),new Q(t.lng*r*u,l)},unproject:function(t){for(var r=180/Math.PI,u=this.R,l=this.R_MINOR/u,_=Math.sqrt(1-l*l),m=Math.exp(-t.y/u),T=Math.PI/2-2*Math.atan(m),D=0,N=.1,Z;D<15&&Math.abs(N)>1e-7;D++)Z=_*Math.sin(T),Z=Math.pow((1-Z)/(1+Z),_/2),N=Math.PI/2-2*Math.atan(m*Z)-T,T+=N;return new _t(T*r,t.x*r/u)}},tl={__proto__:null,LonLat:Dr,Mercator:Nr,SphericalMercator:ut},el=s({},q,{code:"EPSG:3395",projection:Nr,transformation:function(){var t=.5/(Math.PI*Nr.R);return E(t,.5,-t,.5)}()}),Ps=s({},q,{code:"EPSG:4326",projection:Dr,transformation:E(1/180,1,-1/180,.5)}),il=s({},R,{projection:Dr,transformation:E(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,r){var u=r.lng-t.lng,l=r.lat-t.lat;return Math.sqrt(u*u+l*l)},infinite:!0});R.Earth=q,R.EPSG3395=el,R.EPSG3857=U,R.EPSG900913=K,R.EPSG4326=Ps,R.Simple=il;var le=Dt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var r=t.target;if(!!r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var u=this.getEvents();r.on(u,this),this.once("remove",function(){r.off(u,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});gt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var r=d(t);return this._layers[r]?this:(this._layers[r]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var r=d(t);return this._layers[r]?(this._loaded&&t.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,r){for(var u in this._layers)t.call(r,this._layers[u]);return this},_addLayers:function(t){t=t?B(t)?t:[t]:[];for(var r=0,u=t.length;r<u;r++)this.addLayer(t[r])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var r=d(t);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,r=-1/0,u=this._getZoomSpan();for(var l in this._zoomBoundLayers){var _=this._zoomBoundLayers[l].options;t=_.minZoom===void 0?t:Math.min(t,_.minZoom),r=_.maxZoom===void 0?r:Math.max(r,_.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=t===1/0?void 0:t,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var pi=le.extend({initialize:function(t,r){I(this,r),this._layers={};var u,l;if(t)for(u=0,l=t.length;u<l;u++)this.addLayer(t[u])},addLayer:function(t){var r=this.getLayerId(t);return this._layers[r]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var r=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(t){var r=typeof t=="number"?t:this.getLayerId(t);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var r=Array.prototype.slice.call(arguments,1),u,l;for(u in this._layers)l=this._layers[u],l[t]&&l[t].apply(l,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,r){for(var u in this._layers)t.call(r,this._layers[u]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),nl=function(t,r){return new pi(t,r)},_i=pi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),pi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),pi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new kt;for(var r in this._layers){var u=this._layers[r];t.extend(u.getBounds?u.getBounds():u.getLatLng())}return t}}),rl=function(t,r){return new _i(t,r)},gi=Lt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){I(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,r){var u=this._getIconUrl(t);if(!u){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(u,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,r){var u=this.options,l=u[r+"Size"];typeof l=="number"&&(l=[l,l]);var _=at(l),m=at(r==="shadow"&&u.shadowAnchor||u.iconAnchor||_&&_.divideBy(2,!0));t.className="leaflet-marker-"+r+" "+(u.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),_&&(t.style.width=_.x+"px",t.style.height=_.y+"px")},_createImg:function(t,r){return r=r||document.createElement("img"),r.src=t,r},_getIconUrl:function(t){return Y.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ol(t){return new gi(t)}var Vi=gi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Vi.imagePath!="string"&&(Vi.imagePath=this._detectIconPath()),(this.options.imagePath||Vi.imagePath)+gi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var r=function(u,l,_){var m=l.exec(u);return m&&m[_]};return t=r(t,/^url\((['"])?(.+)\1\)$/,2),t&&r(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=wt("div","leaflet-default-icon-path",document.body),r=Fi(t,"background-image")||Fi(t,"backgroundImage");if(document.body.removeChild(t),r=this._stripUrl(r),r)return r;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Ls=me.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ue(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ft(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var r=this._marker,u=r._map,l=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,m=Je(r._icon),T=u.getPixelBounds(),D=u.getPixelOrigin(),N=xt(T.min._subtract(D).add(_),T.max._subtract(D).subtract(_));if(!N.contains(m)){var Z=at((Math.max(N.max.x,m.x)-N.max.x)/(T.max.x-N.max.x)-(Math.min(N.min.x,m.x)-N.min.x)/(T.min.x-N.min.x),(Math.max(N.max.y,m.y)-N.max.y)/(T.max.y-N.max.y)-(Math.min(N.min.y,m.y)-N.min.y)/(T.min.y-N.min.y)).multiplyBy(l);u.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),Ft(r._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=St(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Ot(this._panRequest),this._panRequest=St(this._adjustPan.bind(this,t)))},_onDrag:function(t){var r=this._marker,u=r._shadow,l=Je(r._icon),_=r._map.layerPointToLatLng(l);u&&Ft(u,l),r._latlng=_,t.latlng=_,t.oldLatLng=this._oldLatLng,r.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Ot(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=le.extend({options:{icon:new Vi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,r){I(this,r),this._latlng=O(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var r=this._latlng;return this._latlng=O(t),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=t.icon.createIcon(this._icon),l=!1;u!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(u.title=t.title),u.tagName==="IMG"&&(u.alt=t.alt||"")),ft(u,r),t.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(u,"focus",this._panOnFocus,this);var _=t.icon.createShadow(this._shadow),m=!1;_!==this._shadow&&(this._removeShadow(),m=!0),_&&(ft(_,r),_.alt=""),this._shadow=_,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),Nt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Nt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Ft(this._icon,t),this._shadow&&Ft(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(r)},_initInteraction:function(){if(!!this.options.interactive&&(ft(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ls)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ls(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&re(this._icon,t),this._shadow&&re(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(!!t){var r=this.options.icon.options,u=r.iconSize?at(r.iconSize):at(0,0),l=r.iconAnchor?at(r.iconAnchor):at(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:u.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sl(t,r){return new Ln(t,r)}var je=le.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return I(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),An=je.extend({options:{fill:!0,radius:10},initialize:function(t,r){I(this,r),this._latlng=O(t),this._radius=this.options.radius},setLatLng:function(t){var r=this._latlng;return this._latlng=O(t),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var r=t&&t.radius||this._radius;return je.prototype.setStyle.call(this,t),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,r=this._radiusY||t,u=this._clickTolerance(),l=[t+u,r+u];this._pxBounds=new nt(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function al(t,r){return new An(t,r)}var zr=An.extend({initialize:function(t,r,u){if(typeof r=="number"&&(r=s({},u,{radius:r})),I(this,r),this._latlng=O(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new kt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:je.prototype.setStyle,_project:function(){var t=this._latlng.lng,r=this._latlng.lat,u=this._map,l=u.options.crs;if(l.distance===q.distance){var _=Math.PI/180,m=this._mRadius/q.R/_,T=u.project([r+m,t]),D=u.project([r-m,t]),N=T.add(D).divideBy(2),Z=u.unproject(N).lat,G=Math.acos((Math.cos(m*_)-Math.sin(r*_)*Math.sin(Z*_))/(Math.cos(r*_)*Math.cos(Z*_)))/_;(isNaN(G)||G===0)&&(G=m/Math.cos(Math.PI/180*r)),this._point=N.subtract(u.getPixelOrigin()),this._radius=isNaN(G)?0:N.x-u.project([Z,t-G]).x,this._radiusY=N.y-T.y}else{var dt=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(dt).x}this._updateBounds()}});function ul(t,r,u){return new zr(t,r,u)}var Ae=je.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,r){I(this,r),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var r=1/0,u=null,l=Wi,_,m,T=0,D=this._parts.length;T<D;T++)for(var N=this._parts[T],Z=1,G=N.length;Z<G;Z++){_=N[Z-1],m=N[Z];var dt=l(t,_,m,!0);dt<r&&(r=dt,u=l(t,_,m))}return u&&(u.distance=Math.sqrt(r)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,r,u,l,_,m,T,D=this._rings[0],N=D.length;if(!N)return null;for(t=0,r=0;t<N-1;t++)r+=D[t].distanceTo(D[t+1])/2;if(r===0)return this._map.layerPointToLatLng(D[0]);for(t=0,l=0;t<N-1;t++)if(_=D[t],m=D[t+1],u=_.distanceTo(m),l+=u,l>r)return T=(l-r)/u,this._map.layerPointToLatLng([m.x-T*(m.x-_.x),m.y-T*(m.y-_.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,r){return r=r||this._defaultShape(),t=O(t),r.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new kt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var r=[],u=Le(t),l=0,_=t.length;l<_;l++)u?(r[l]=O(t[l]),this._bounds.extend(r[l])):r[l]=this._convertLatLngs(t[l]);return r},_project:function(){var t=new nt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),r=new Q(t,t);!this._rawPxBounds||(this._pxBounds=new nt([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(t,r,u){var l=t[0]instanceof _t,_=t.length,m,T;if(l){for(T=[],m=0;m<_;m++)T[m]=this._map.latLngToLayerPoint(t[m]),u.extend(T[m]);r.push(T)}else for(m=0;m<_;m++)this._projectLatlngs(t[m],r,u)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,u,l,_,m,T,D,N;for(u=0,_=0,m=this._rings.length;u<m;u++)for(N=this._rings[u],l=0,T=N.length;l<T-1;l++)D=Es(N[l],N[l+1],t,l,!0),D&&(r[_]=r[_]||[],r[_].push(D[0]),(D[1]!==N[l+1]||l===T-2)&&(r[_].push(D[1]),_++))}},_simplifyPoints:function(){for(var t=this._parts,r=this.options.smoothFactor,u=0,l=t.length;u<l;u++)t[u]=ws(t[u],r)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,r){var u,l,_,m,T,D,N=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(u=0,m=this._parts.length;u<m;u++)for(D=this._parts[u],l=0,T=D.length,_=T-1;l<T;_=l++)if(!(!r&&l===0)&&bs(t,D[_],D[l])<=N)return!0;return!1}});function hl(t,r){return new Ae(t,r)}Ae._flat=Ss;var mi=Ae.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,r,u,l,_,m,T,D,N,Z=this._rings[0],G=Z.length;if(!G)return null;for(m=T=D=0,t=0,r=G-1;t<G;r=t++)u=Z[t],l=Z[r],_=u.y*l.x-l.y*u.x,T+=(u.x+l.x)*_,D+=(u.y+l.y)*_,m+=_*3;return m===0?N=Z[0]:N=[T/m,D/m],this._map.layerPointToLatLng(N)},_convertLatLngs:function(t){var r=Ae.prototype._convertLatLngs.call(this,t),u=r.length;return u>=2&&r[0]instanceof _t&&r[0].equals(r[u-1])&&r.pop(),r},_setLatLngs:function(t){Ae.prototype._setLatLngs.call(this,t),Le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,r=this.options.weight,u=new Q(r,r);if(t=new nt(t.min.subtract(u),t.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,_=this._rings.length,m;l<_;l++)m=Ts(this._rings[l],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var r=!1,u,l,_,m,T,D,N,Z;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,N=this._parts.length;m<N;m++)for(u=this._parts[m],T=0,Z=u.length,D=Z-1;T<Z;D=T++)l=u[T],_=u[D],l.y>t.y!=_.y>t.y&&t.x<(_.x-l.x)*(t.y-l.y)/(_.y-l.y)+l.x&&(r=!r);return r||Ae.prototype._containsPoint.call(this,t,!0)}});function ll(t,r){return new mi(t,r)}var Ie=_i.extend({initialize:function(t,r){I(this,r),this._layers={},t&&this.addData(t)},addData:function(t){var r=B(t)?t:t.features,u,l,_;if(r){for(u=0,l=r.length;u<l;u++)_=r[u],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var T=Fr(t,m);return T?(T.feature=Bn(t),T.defaultOptions=T.options,this.resetStyle(T),m.onEachFeature&&m.onEachFeature(t,T),this.addLayer(T)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(r){this._setLayerStyle(r,t)},this)},_setLayerStyle:function(t,r){t.setStyle&&(typeof r=="function"&&(r=r(t.feature)),t.setStyle(r))}});function Fr(t,r){var u=t.type==="Feature"?t.geometry:t,l=u?u.coordinates:null,_=[],m=r&&r.pointToLayer,T=r&&r.coordsToLatLng||Ur,D,N,Z,G;if(!l&&!u)return null;switch(u.type){case"Point":return D=T(l),As(m,t,D,r);case"MultiPoint":for(Z=0,G=l.length;Z<G;Z++)D=T(l[Z]),_.push(As(m,t,D,r));return new _i(_);case"LineString":case"MultiLineString":return N=In(l,u.type==="LineString"?0:1,T),new Ae(N,r);case"Polygon":case"MultiPolygon":return N=In(l,u.type==="Polygon"?1:2,T),new mi(N,r);case"GeometryCollection":for(Z=0,G=u.geometries.length;Z<G;Z++){var dt=Fr({geometry:u.geometries[Z],type:"Feature",properties:t.properties},r);dt&&_.push(dt)}return new _i(_);default:throw new Error("Invalid GeoJSON object.")}}function As(t,r,u,l){return t?t(r,u):new Ln(u,l&&l.markersInheritOptions&&l)}function Ur(t){return new _t(t[1],t[0],t[2])}function In(t,r,u){for(var l=[],_=0,m=t.length,T;_<m;_++)T=r?In(t[_],r-1,u):(u||Ur)(t[_]),l.push(T);return l}function jr(t,r){return t=O(t),t.alt!==void 0?[b(t.lng,r),b(t.lat,r),b(t.alt,r)]:[b(t.lng,r),b(t.lat,r)]}function Cn(t,r,u,l){for(var _=[],m=0,T=t.length;m<T;m++)_.push(r?Cn(t[m],r-1,u,l):jr(t[m],l));return!r&&u&&_.push(_[0]),_}function vi(t,r){return t.feature?s({},t.feature,{geometry:r}):Bn(r)}function Bn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var qr={toGeoJSON:function(t){return vi(this,{type:"Point",coordinates:jr(this.getLatLng(),t)})}};Ln.include(qr),zr.include(qr),An.include(qr),Ae.include({toGeoJSON:function(t){var r=!Le(this._latlngs),u=Cn(this._latlngs,r?1:0,!1,t);return vi(this,{type:(r?"Multi":"")+"LineString",coordinates:u})}}),mi.include({toGeoJSON:function(t){var r=!Le(this._latlngs),u=r&&!Le(this._latlngs[0]),l=Cn(this._latlngs,u?2:r?1:0,!0,t);return r||(l=[l]),vi(this,{type:(u?"Multi":"")+"Polygon",coordinates:l})}}),pi.include({toMultiPoint:function(t){var r=[];return this.eachLayer(function(u){r.push(u.toGeoJSON(t).geometry.coordinates)}),vi(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(t){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(t);var u=r==="GeometryCollection",l=[];return this.eachLayer(function(_){if(_.toGeoJSON){var m=_.toGeoJSON(t);if(u)l.push(m.geometry);else{var T=Bn(m);T.type==="FeatureCollection"?l.push.apply(l,T.features):l.push(T)}}}),u?vi(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function Is(t,r){return new Ie(t,r)}var fl=Is,Mn=le.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,r,u){this._url=t,this._bounds=Rt(r),I(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ft(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Nt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ci(this._image),this},bringToBack:function(){return this._map&&di(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Rt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",r=this._image=t?this._url:wt("img");if(ft(r,"leaflet-image-layer"),this._zoomAnimated&&ft(r,"leaflet-zoom-animated"),this.options.className&&ft(r,this.options.className),r.onselectstart=w,r.onmousemove=w,r.onload=h(this.fire,this,"load"),r.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(t){var r=this._map.getZoomScale(t.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ye(this._image,u,r)},_reset:function(){var t=this._image,r=new nt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=r.getSize();Ft(t,r.min),t.style.width=u.x+"px",t.style.height=u.y+"px"},_updateOpacity:function(){re(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),cl=function(t,r,u){return new Mn(t,r,u)},Cs=Mn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",r=this._image=t?this._url:wt("video");if(ft(r,"leaflet-image-layer"),this._zoomAnimated&&ft(r,"leaflet-zoom-animated"),this.options.className&&ft(r,this.options.className),r.onselectstart=w,r.onmousemove=w,r.onloadeddata=h(this.fire,this,"load"),t){for(var u=r.getElementsByTagName("source"),l=[],_=0;_<u.length;_++)l.push(u[_].src);this._url=u.length>0?l:[r.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var T=wt("source");T.src=this._url[m],r.appendChild(T)}}});function dl(t,r,u){return new Cs(t,r,u)}var Bs=Mn.extend({_initImage:function(){var t=this._image=this._url;ft(t,"leaflet-image-layer"),this._zoomAnimated&&ft(t,"leaflet-zoom-animated"),this.options.className&&ft(t,this.options.className),t.onselectstart=w,t.onmousemove=w}});function pl(t,r,u){return new Bs(t,r,u)}var ve=le.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,r){I(this,t),this._source=r},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&re(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&re(this._container,1),this.bringToFront(),this.options.interactive&&(ft(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(re(this._container,0),this._removeTimeout=setTimeout(h(Nt,void 0,this._container),200)):Nt(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=O(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ci(this._container),this},bringToBack:function(){return this._map&&di(this._container),this},_prepareOpen:function(t){var r=this._source;if(!r._map)return!1;if(r instanceof _i){r=null;var u=this._source._layers;for(var l in u)if(u[l]._map){r=u[l];break}if(!r)return!1;this._source=r}if(!t)if(r.getCenter)t=r.getCenter();else if(r.getLatLng)t=r.getLatLng();else if(r.getBounds)t=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var t=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")t.innerHTML=r;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),r=at(this.options.offset),u=this._getAnchor();this._zoomAnimated?Ft(this._container,t.add(u)):r=r.add(t).add(u);var l=this._containerBottom=-r.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=l+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});gt.include({_initOverlay:function(t,r,u,l){var _=r;return _ instanceof t||(_=new t(l).setContent(r)),u&&_.setLatLng(u),_}}),le.include({_initOverlay:function(t,r,u,l){var _=u;return _ instanceof t?(I(_,l),_._source=this):(_=r&&!l?r:new t(l,this),_.setContent(u)),_}});var On=ve.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ve.prototype.openOn.call(this,t)},onAdd:function(t){ve.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof je||this._source.on("preclick",Xe))},onRemove:function(t){ve.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof je||this._source.off("preclick",Xe))},getEvents:function(){var t=ve.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",r=this._container=wt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=wt("div",t+"-content-wrapper",r);if(this._contentNode=wt("div",t+"-content",u),Zi(r),Br(this._contentNode),ht(r,"contextmenu",Xe),this._tipContainer=wt("div",t+"-tip-container",r),this._tip=wt("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=wt("a",t+"-close-button",r);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',ht(l,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,r=t.style;r.width="",r.whiteSpace="nowrap";var u=t.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),r.width=u+1+"px",r.whiteSpace="",r.height="";var l=t.offsetHeight,_=this.options.maxHeight,m="leaflet-popup-scrolled";_&&l>_?(r.height=_+"px",ft(t,m)):zt(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),u=this._getAnchor();Ft(this._container,r.add(u))},_adjustPan:function(t){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var r=this._map,u=parseInt(Fi(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+u,_=this._containerWidth,m=new Q(this._containerLeft,-l-this._containerBottom);m._add(Je(this._container));var T=r.layerPointToContainerPoint(m),D=at(this.options.autoPanPadding),N=at(this.options.autoPanPaddingTopLeft||D),Z=at(this.options.autoPanPaddingBottomRight||D),G=r.getSize(),dt=0,mt=0;T.x+_+Z.x>G.x&&(dt=T.x+_-G.x+Z.x),T.x-dt-N.x<0&&(dt=T.x-N.x),T.y+l+Z.y>G.y&&(mt=T.y+l-G.y+Z.y),T.y-mt-N.y<0&&(mt=T.y-N.y),(dt||mt)&&r.fire("autopanstart").panBy([dt,mt],{animate:t&&t.type==="moveend"})}},_getAnchor:function(){return at(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_l=function(t,r){return new On(t,r)};gt.mergeOptions({closePopupOnClick:!0}),gt.include({openPopup:function(t,r,u){return this._initOverlay(On,t,r,u).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),le.include({bindPopup:function(t,r){return this._popup=this._initOverlay(On,this._popup,t,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ti(t);var r=t.layer||t.target;if(this._popup._source===r&&!(r instanceof je)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=r,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var kn=ve.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ve.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ve.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ve.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",r=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wt("div",r)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var r,u,l=this._map,_=this._container,m=l.latLngToContainerPoint(l.getCenter()),T=l.layerPointToContainerPoint(t),D=this.options.direction,N=_.offsetWidth,Z=_.offsetHeight,G=at(this.options.offset),dt=this._getAnchor();D==="top"?(r=N/2,u=Z):D==="bottom"?(r=N/2,u=0):D==="center"?(r=N/2,u=Z/2):D==="right"?(r=0,u=Z/2):D==="left"?(r=N,u=Z/2):T.x<m.x?(D="right",r=0,u=Z/2):(D="left",r=N+(G.x+dt.x)*2,u=Z/2),t=t.subtract(at(r,u,!0)).add(G).add(dt),zt(_,"leaflet-tooltip-right"),zt(_,"leaflet-tooltip-left"),zt(_,"leaflet-tooltip-top"),zt(_,"leaflet-tooltip-bottom"),ft(_,"leaflet-tooltip-"+D),Ft(_,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&re(this._container,t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(r)},_getAnchor:function(){return at(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),gl=function(t,r){return new kn(t,r)};gt.include({openTooltip:function(t,r,u){return this._initOverlay(kn,t,r,u).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),le.include({bindTooltip:function(t,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kn,this._tooltip,t,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var r=t?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[r](u),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var r=t.latlng,u,l;this._tooltip.options.sticky&&t.originalEvent&&(u=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(u),r=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(r)}});var Ms=gi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var r=t&&t.tagName==="DIV"?t:document.createElement("div"),u=this.options;if(u.html instanceof Element?(bn(r),r.appendChild(u.html)):r.innerHTML=u.html!==!1?u.html:"",u.bgPos){var l=at(u.bgPos);r.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function ml(t){return new Ms(t)}gi.Default=Vi;var $i=le.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){I(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Nt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ci(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Q?t:new Q(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var r=this.getPane().children,u=-t(-1/0,1/0),l=0,_=r.length,m;l<_;l++)m=r[l].style.zIndex,r[l]!==this._container&&m&&(u=t(u,+m));isFinite(u)&&(this.options.zIndex=u+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!Y.ielt9){re(this._container,this.options.opacity);var t=+new Date,r=!1,u=!1;for(var l in this._tiles){var _=this._tiles[l];if(!(!_.current||!_.loaded)){var m=Math.min(1,(t-_.loaded)/200);re(_.el,m),m<1?r=!0:(_.active?u=!0:this._onOpaqueTile(_),_.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),r&&(Ot(this._fadeFrame),this._fadeFrame=St(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,r=this.options.maxZoom;if(t!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===t?(this._levels[u].el.style.zIndex=r-Math.abs(t-u),this._onUpdateLevel(u)):(Nt(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var l=this._levels[t],_=this._map;return l||(l=this._levels[t]={},l.el=wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=r,l.origin=_.project(_.unproject(_.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,_.getCenter(),_.getZoom()),w(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(!!this._map){var t,r,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)r=this._tiles[t],r.retain=r.current;for(t in this._tiles)if(r=this._tiles[t],r.current&&!r.active){var l=r.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var r in this._tiles)this._tiles[r].coords.z===t&&this._removeTile(r)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Nt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,r,u,l){var _=Math.floor(t/2),m=Math.floor(r/2),T=u-1,D=new Q(+_,+m);D.z=+T;var N=this._tileCoordsToKey(D),Z=this._tiles[N];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),T>l?this._retainParent(_,m,T,l):!1)},_retainChildren:function(t,r,u,l){for(var _=2*t;_<2*t+2;_++)for(var m=2*r;m<2*r+2;m++){var T=new Q(_,m);T.z=u+1;var D=this._tileCoordsToKey(T),N=this._tiles[D];if(N&&N.active){N.retain=!0;continue}else N&&N.loaded&&(N.retain=!0);u+1<l&&this._retainChildren(_,m,u+1,l)}},_resetView:function(t){var r=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var r=this.options;return r.minNativeZoom!==void 0&&t<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<t?r.maxNativeZoom:t},_setView:function(t,r,u,l){var _=Math.round(r);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var m=this.options.updateWhenZooming&&_!==this._tileZoom;(!l||m)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(t),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(t,r)},_setZoomTransforms:function(t,r){for(var u in this._levels)this._setZoomTransform(this._levels[u],t,r)},_setZoomTransform:function(t,r,u){var l=this._map.getZoomScale(u,t.zoom),_=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(r,u)).round();Y.any3d?Ye(t.el,_,l):Ft(t.el,_)},_resetGrid:function(){var t=this._map,r=t.options.crs,u=this._tileSize=this.getTileSize(),l=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,r.wrapLng[0]],l).x/u.x),Math.ceil(t.project([0,r.wrapLng[1]],l).x/u.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([r.wrapLat[0],0],l).y/u.x),Math.ceil(t.project([r.wrapLat[1],0],l).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var r=this._map,u=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),l=r.getZoomScale(u,this._tileZoom),_=r.project(t,this._tileZoom).floor(),m=r.getSize().divideBy(l*2);return new nt(_.subtract(m),_.add(m))},_update:function(t){var r=this._map;if(!!r){var u=this._clampZoom(r.getZoom());if(t===void 0&&(t=r.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),_=this._pxBoundsToTileRange(l),m=_.getCenter(),T=[],D=this.options.keepBuffer,N=new nt(_.getBottomLeft().subtract([D,-D]),_.getTopRight().add([D,-D]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var G=this._tiles[Z].coords;(G.z!==this._tileZoom||!N.contains(new Q(G.x,G.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(t,u);return}for(var dt=_.min.y;dt<=_.max.y;dt++)for(var mt=_.min.x;mt<=_.max.x;mt++){var Be=new Q(mt,dt);if(Be.z=this._tileZoom,!!this._isValidTile(Be)){var ii=this._tiles[this._tileCoordsToKey(Be)];ii?ii.current=!0:T.push(Be)}}if(T.sort(function(qe,Zr){return qe.distanceTo(m)-Zr.distanceTo(m)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Dn=document.createDocumentFragment();for(mt=0;mt<T.length;mt++)this._addTile(T[mt],Dn);this._level.el.appendChild(Dn)}}}},_isValidTile:function(t){var r=this._map.options.crs;if(!r.infinite){var u=this._globalTileRange;if(!r.wrapLng&&(t.x<u.min.x||t.x>u.max.x)||!r.wrapLat&&(t.y<u.min.y||t.y>u.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return Rt(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var r=this._map,u=this.getTileSize(),l=t.scaleBy(u),_=l.add(u),m=r.unproject(l,t.z),T=r.unproject(_,t.z);return[m,T]},_tileCoordsToBounds:function(t){var r=this._tileCoordsToNwSe(t),u=new kt(r[0],r[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var r=t.split(":"),u=new Q(+r[0],+r[1]);return u.z=+r[2],u},_removeTile:function(t){var r=this._tiles[t];!r||(Nt(r.el),delete this._tiles[t],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ft(t,"leaflet-tile");var r=this.getTileSize();t.style.width=r.x+"px",t.style.height=r.y+"px",t.onselectstart=w,t.onmousemove=w,Y.ielt9&&this.options.opacity<1&&re(t,this.options.opacity)},_addTile:function(t,r){var u=this._getTilePos(t),l=this._tileCoordsToKey(t),_=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(_),this.createTile.length<2&&St(h(this._tileReady,this,t,null,_)),Ft(_,u),this._tiles[l]={el:_,coords:t,current:!0},r.appendChild(_),this.fire("tileloadstart",{tile:_,coords:t})},_tileReady:function(t,r,u){r&&this.fire("tileerror",{error:r,tile:u,coords:t});var l=this._tileCoordsToKey(t);u=this._tiles[l],u&&(u.loaded=+new Date,this._map._fadeAnimated?(re(u.el,0),Ot(this._fadeFrame),this._fadeFrame=St(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),r||(ft(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?St(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var r=new Q(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return r.z=t.z,r},_pxBoundsToTileRange:function(t){var r=this.getTileSize();return new nt(t.min.unscaleBy(r).floor(),t.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function vl(t){return new $i(t)}var yi=$i.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,r){this._url=t,r=I(this,r),r.detectRetina&&Y.retina&&r.maxZoom>0&&(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom++):(r.zoomOffset++,r.maxZoom--),r.minZoom=Math.max(0,r.minZoom)),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,r){return this._url===t&&r===void 0&&(r=!0),this._url=t,r||this.redraw(),this},createTile:function(t,r){var u=document.createElement("img");return ht(u,"load",h(this._tileOnLoad,this,r,u)),ht(u,"error",h(this._tileOnError,this,r,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.setAttribute("role","presentation"),u.src=this.getTileUrl(t),u},getTileUrl:function(t){var r={r:Y.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-t.y;this.options.tms&&(r.y=u),r["-y"]=u}return k(this._url,s(r,this.options))},_tileOnLoad:function(t,r){Y.ielt9?setTimeout(h(t,this,null,r),0):t(null,r)},_tileOnError:function(t,r,u){var l=this.options.errorTileUrl;l&&r.getAttribute("src")!==l&&(r.src=l),t(u,r)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,r=this.options.maxZoom,u=this.options.zoomReverse,l=this.options.zoomOffset;return u&&(t=r-t),t+l},_getSubdomain:function(t){var r=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var t,r;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(r=this._tiles[t].el,r.onload=w,r.onerror=w,!r.complete)){r.src=H;var u=this._tiles[t].coords;Nt(r),delete this._tiles[t],this.fire("tileabort",{tile:r,coords:u})}},_removeTile:function(t){var r=this._tiles[t];if(!!r)return r.el.setAttribute("src",H),$i.prototype._removeTile.call(this,t)},_tileReady:function(t,r,u){if(!(!this._map||u&&u.getAttribute("src")===H))return $i.prototype._tileReady.call(this,t,r,u)}});function Os(t,r){return new yi(t,r)}var ks=yi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,r){this._url=t;var u=s({},this.defaultWmsParams);for(var l in r)l in this.options||(u[l]=r[l]);r=I(this,r);var _=r.detectRetina&&Y.retina?2:1,m=this.getTileSize();u.width=m.x*_,u.height=m.y*_,this.wmsParams=u},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,yi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var r=this._tileCoordsToNwSe(t),u=this._crs,l=xt(u.project(r[0]),u.project(r[1])),_=l.min,m=l.max,T=(this._wmsVersion>=1.3&&this._crs===Ps?[_.y,_.x,m.y,m.x]:[_.x,_.y,m.x,m.y]).join(","),D=yi.prototype.getTileUrl.call(this,t);return D+F(this.wmsParams,D,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(t,r){return s(this.wmsParams,t),r||this.redraw(),this}});function yl(t,r){return new ks(t,r)}yi.WMS=ks,Os.wms=yl;var Ce=le.extend({options:{padding:.1},initialize:function(t){I(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ft(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,r){var u=this._map.getZoomScale(r,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,r),m=l.multiplyBy(-u).add(_).subtract(this._map._getNewPixelOrigin(t,r));Y.any3d?Ye(this._container,m,u):Ft(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,r=this._map.getSize(),u=this._map.containerPointToLayerPoint(r.multiplyBy(-t)).round();this._bounds=new nt(u,u.add(r.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Rs=Ce.extend({options:{tolerance:0},getEvents:function(){var t=Ce.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ce.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ht(t,"mousemove",this._onMouseMove,this),ht(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Ot(this._redrawRequest),delete this._ctx,Nt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var r in this._layers)t=this._layers[r],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ce.prototype._update.call(this);var t=this._bounds,r=this._container,u=t.getSize(),l=Y.retina?2:1;Ft(r,t.min),r.width=l*u.x,r.height=l*u.y,r.style.width=u.x+"px",r.style.height=u.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ce.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var r=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var r=t._order,u=r.next,l=r.prev;u?u.prev=l:this._drawLast=l,l?l.next=u:this._drawFirst=u,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var r=t.options.dashArray.split(/[, ]+/),u=[],l,_;for(_=0;_<r.length;_++){if(l=Number(r[_]),isNaN(l))return;u.push(l)}t.options._dashArray=u}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||St(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var r=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new nt,this._redrawBounds.extend(t._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(t._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var r=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,r=this._redrawBounds;if(this._ctx.save(),r){var u=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!r||t._pxBounds&&t._pxBounds.intersects(r))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,r){if(!!this._drawing){var u,l,_,m,T=t._parts,D=T.length,N=this._ctx;if(!!D){for(N.beginPath(),u=0;u<D;u++){for(l=0,_=T[u].length;l<_;l++)m=T[u][l],N[l?"lineTo":"moveTo"](m.x,m.y);r&&N.closePath()}this._fillStroke(N,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var r=t._point,u=this._ctx,l=Math.max(Math.round(t._radius),1),_=(Math.max(Math.round(t._radiusY),1)||l)/l;_!==1&&(u.save(),u.scale(1,_)),u.beginPath(),u.arc(r.x,r.y/_,l,0,Math.PI*2,!1),_!==1&&u.restore(),this._fillStroke(u,t)}},_fillStroke:function(t,r){var u=r.options;u.fill&&(t.globalAlpha=u.fillOpacity,t.fillStyle=u.fillColor||u.color,t.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(t.setLineDash&&t.setLineDash(r.options&&r.options._dashArray||[]),t.globalAlpha=u.opacity,t.lineWidth=u.weight,t.strokeStyle=u.color,t.lineCap=u.lineCap,t.lineJoin=u.lineJoin,t.stroke())},_onClick:function(t){for(var r=this._map.mouseEventToLayerPoint(t),u,l,_=this._drawFirst;_;_=_.next)u=_.layer,u.options.interactive&&u._containsPoint(r)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(u))&&(l=u);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,r)}},_handleMouseOut:function(t){var r=this._hoveredLayer;r&&(zt(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,r){if(!this._mouseHoverThrottled){for(var u,l,_=this._drawFirst;_;_=_.next)u=_.layer,u.options.interactive&&u._containsPoint(r)&&(l=u);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(ft(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,r,u){this._map._fireDOMEvent(r,u||r.type,t)},_bringToFront:function(t){var r=t._order;if(!!r){var u=r.next,l=r.prev;if(u)u.prev=l;else return;l?l.next=u:u&&(this._drawFirst=u),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(t)}},_bringToBack:function(t){var r=t._order;if(!!r){var u=r.next,l=r.prev;if(l)l.next=u;else return;u?u.prev=l:l&&(this._drawLast=l),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(t)}}});function Ds(t){return Y.canvas?new Rs(t):null}var Ki=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),wl={_initContainer:function(){this._container=wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ce.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var r=t._container=Ki("shape");ft(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",t._path=Ki("path"),r.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var r=t._container;this._container.appendChild(r),t.options.interactive&&t.addInteractiveTarget(r)},_removePath:function(t){var r=t._container;Nt(r),t.removeInteractiveTarget(r),delete this._layers[d(t)]},_updateStyle:function(t){var r=t._stroke,u=t._fill,l=t.options,_=t._container;_.stroked=!!l.stroke,_.filled=!!l.fill,l.stroke?(r||(r=t._stroke=Ki("stroke")),_.appendChild(r),r.weight=l.weight+"px",r.color=l.color,r.opacity=l.opacity,l.dashArray?r.dashStyle=B(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=l.lineCap.replace("butt","flat"),r.joinstyle=l.lineJoin):r&&(_.removeChild(r),t._stroke=null),l.fill?(u||(u=t._fill=Ki("fill")),_.appendChild(u),u.color=l.fillColor||l.color,u.opacity=l.fillOpacity):u&&(_.removeChild(u),t._fill=null)},_updateCircle:function(t){var r=t._point.round(),u=Math.round(t._radius),l=Math.round(t._radiusY||u);this._setPath(t,t._empty()?"M0 0":"AL "+r.x+","+r.y+" "+u+","+l+" 0,"+65535*360)},_setPath:function(t,r){t._path.v=r},_bringToFront:function(t){ci(t._container)},_bringToBack:function(t){di(t._container)}},Rn=Y.vml?Ki:It,Gi=Ce.extend({_initContainer:function(){this._container=Rn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Rn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Nt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ce.prototype._update.call(this);var t=this._bounds,r=t.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,u.setAttribute("width",r.x),u.setAttribute("height",r.y)),Ft(u,t.min),u.setAttribute("viewBox",[t.min.x,t.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(t){var r=t._path=Rn("path");t.options.className&&ft(r,t.options.className),t.options.interactive&&ft(r,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Nt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var r=t._path,u=t.options;!r||(u.stroke?(r.setAttribute("stroke",u.color),r.setAttribute("stroke-opacity",u.opacity),r.setAttribute("stroke-width",u.weight),r.setAttribute("stroke-linecap",u.lineCap),r.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?r.setAttribute("stroke-dasharray",u.dashArray):r.removeAttribute("stroke-dasharray"),u.dashOffset?r.setAttribute("stroke-dashoffset",u.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),u.fill?(r.setAttribute("fill",u.fillColor||u.color),r.setAttribute("fill-opacity",u.fillOpacity),r.setAttribute("fill-rule",u.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(t,r){this._setPath(t,y(t._parts,r))},_updateCircle:function(t){var r=t._point,u=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||u,_="a"+u+","+l+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(r.x-u)+","+r.y+_+u*2+",0 "+_+-u*2+",0 ";this._setPath(t,m)},_setPath:function(t,r){t._path.setAttribute("d",r)},_bringToFront:function(t){ci(t._path)},_bringToBack:function(t){di(t._path)}});Y.vml&&Gi.include(wl);function Ns(t){return Y.svg||Y.vml?new Gi(t):null}gt.include({getRenderer:function(t){var r=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var r=this._paneRenderers[t];return r===void 0&&(r=this._createRenderer({pane:t}),this._paneRenderers[t]=r),r},_createRenderer:function(t){return this.options.preferCanvas&&Ds(t)||Ns(t)}});var zs=mi.extend({initialize:function(t,r){mi.prototype.initialize.call(this,this._boundsToLatLngs(t),r)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Rt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function bl(t,r){return new zs(t,r)}Gi.create=Rn,Gi.pointsToPath=y,Ie.geometryToLayer=Fr,Ie.coordsToLatLng=Ur,Ie.coordsToLatLngs=In,Ie.latLngToCoords=jr,Ie.latLngsToCoords=Cn,Ie.getFeature=vi,Ie.asFeature=Bn,gt.mergeOptions({boxZoom:!0});var Fs=me.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Nt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ui(),Er(),this._startPoint=this._map.mouseEventToContainerPoint(t),ht(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=wt("div","leaflet-zoom-box",this._container),ft(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var r=new nt(this._point,this._startPoint),u=r.getSize();Ft(this._box,r.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Nt(this._box),zt(this._container,"leaflet-crosshair")),ji(),Sr(),Bt(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var r=new kt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});gt.addInitHook("addHandler","boxZoom",Fs),gt.mergeOptions({doubleClickZoom:!0});var Us=me.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var r=this._map,u=r.getZoom(),l=r.options.zoomDelta,_=t.originalEvent.shiftKey?u-l:u+l;r.options.doubleClickZoom==="center"?r.setZoom(_):r.setZoomAround(t.containerPoint,_)}});gt.addInitHook("addHandler","doubleClickZoom",Us),gt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var js=me.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Ue(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ft(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=Rt(this._map.options.maxBounds);this._offsetLimit=xt(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var r=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(r),this._prunePositions(r)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,r){return t-(t-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;t.x<r.min.x&&(t.x=this._viscousLimit(t.x,r.min.x)),t.y<r.min.y&&(t.y=this._viscousLimit(t.y,r.min.y)),t.x>r.max.x&&(t.x=this._viscousLimit(t.x,r.max.x)),t.y>r.max.y&&(t.y=this._viscousLimit(t.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,r=Math.round(t/2),u=this._initialWorldOffset,l=this._draggable._newPos.x,_=(l-r+u)%t+r-u,m=(l+r+u)%t-r-u,T=Math.abs(_+u)<Math.abs(m+u)?_:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(t){var r=this._map,u=r.options,l=!u.inertia||t.noInertia||this._times.length<2;if(r.fire("dragend",t),l)r.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,T=u.easeLinearity,D=_.multiplyBy(T/m),N=D.distanceTo([0,0]),Z=Math.min(u.inertiaMaxSpeed,N),G=D.multiplyBy(Z/N),dt=Z/(u.inertiaDeceleration*T),mt=G.multiplyBy(-dt/2).round();!mt.x&&!mt.y?r.fire("moveend"):(mt=r._limitOffset(mt,r.options.maxBounds),St(function(){r.panBy(mt,{duration:dt,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});gt.addInitHook("addHandler","dragging",js),gt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qs=me.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ht(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,r=document.documentElement,u=t.scrollTop||r.scrollTop,l=t.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(l,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var r=this._panKeys={},u=this.keyCodes,l,_;for(l=0,_=u.left.length;l<_;l++)r[u.left[l]]=[-1*t,0];for(l=0,_=u.right.length;l<_;l++)r[u.right[l]]=[t,0];for(l=0,_=u.down.length;l<_;l++)r[u.down[l]]=[0,t];for(l=0,_=u.up.length;l<_;l++)r[u.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var r=this._zoomKeys={},u=this.keyCodes,l,_;for(l=0,_=u.zoomIn.length;l<_;l++)r[u.zoomIn[l]]=t;for(l=0,_=u.zoomOut.length;l<_;l++)r[u.zoomOut[l]]=-t},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var r=t.keyCode,u=this._map,l;if(r in this._panKeys)(!u._panAnim||!u._panAnim._inProgress)&&(l=this._panKeys[r],t.shiftKey&&(l=at(l).multiplyBy(3)),u.panBy(l),u.options.maxBounds&&u.panInsideBounds(u.options.maxBounds));else if(r in this._zoomKeys)u.setZoom(u.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;ti(t)}}});gt.addInitHook("addHandler","keyboard",qs),gt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zs=me.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var r=_s(t),u=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),l),ti(t)},_performZoom:function(){var t=this._map,r=t.getZoom(),u=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,m=u?Math.ceil(_/u)*u:_,T=t._limitZoom(r+(this._delta>0?m:-m))-r;this._delta=0,this._startTime=null,T&&(t.options.scrollWheelZoom==="center"?t.setZoom(r+T):t.setZoomAround(this._lastMousePos,r+T))}});gt.addInitHook("addHandler","scrollWheelZoom",Zs);var xl=600;gt.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var Hs=me.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var r=t.touches[0];this._startPos=this._newPos=new Q(r.clientX,r.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",Qt),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),xl),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Bt(document,"touchend",Qt),Bt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(t){var r=t.touches[0];this._newPos=new Q(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,r){var u=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});u._simulated=!0,r.target.dispatchEvent(u)}});gt.addInitHook("addHandler","tapHold",Hs),gt.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var Ws=me.extend({addHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var r=this._map;if(!(!t.touches||t.touches.length!==2||r._animatingZoom||this._zooming)){var u=r.mouseEventToContainerPoint(t.touches[0]),l=r.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(u.add(l)._divideBy(2))),this._startDist=u.distanceTo(l),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),Qt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var r=this._map,u=r.mouseEventToContainerPoint(t.touches[0]),l=r.mouseEventToContainerPoint(t.touches[1]),_=u.distanceTo(l)/this._startDist;if(this._zoom=r.getScaleZoom(_,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&_<1||this._zoom>r.getMaxZoom()&&_>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var m=u._add(l)._divideBy(2)._subtract(this._centerPoint);if(_===1&&m.x===0&&m.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),Ot(this._animRequest);var T=h(r._move,r,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=St(T,this,!0),Qt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ot(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});gt.addInitHook("addHandler","touchZoom",Ws),gt.BoxZoom=Fs,gt.DoubleClickZoom=Us,gt.Drag=js,gt.Keyboard=qs,gt.ScrollWheelZoom=Zs,gt.TapHold=Hs,gt.TouchZoom=Ws,e.Bounds=nt,e.Browser=Y,e.CRS=R,e.Canvas=Rs,e.Circle=zr,e.CircleMarker=An,e.Class=Lt,e.Control=he,e.DivIcon=Ms,e.DivOverlay=ve,e.DomEvent=Uh,e.DomUtil=zh,e.Draggable=Ue,e.Evented=Dt,e.FeatureGroup=_i,e.GeoJSON=Ie,e.GridLayer=$i,e.Handler=me,e.Icon=gi,e.ImageOverlay=Mn,e.LatLng=_t,e.LatLngBounds=kt,e.Layer=le,e.LayerGroup=pi,e.LineUtil=Jh,e.Map=gt,e.Marker=Ln,e.Mixin=$h,e.Path=je,e.Point=Q,e.PolyUtil=Xh,e.Polygon=mi,e.Polyline=Ae,e.Popup=On,e.PosAnimation=gs,e.Projection=tl,e.Rectangle=zs,e.Renderer=Ce,e.SVG=Gi,e.SVGOverlay=Bs,e.TileLayer=yi,e.Tooltip=kn,e.Transformation=x,e.Util=Jt,e.VideoOverlay=Cs,e.bind=h,e.bounds=xt,e.canvas=Ds,e.circle=ul,e.circleMarker=al,e.control=Hi,e.divIcon=ml,e.extend=s,e.featureGroup=rl,e.geoJSON=Is,e.geoJson=fl,e.gridLayer=vl,e.icon=ol,e.imageOverlay=cl,e.latLng=O,e.latLngBounds=Rt,e.layerGroup=nl,e.map=jh,e.marker=sl,e.point=at,e.polygon=ll,e.polyline=hl,e.popup=_l,e.rectangle=bl,e.setOptions=I,e.stamp=d,e.svg=Ns,e.svgOverlay=pl,e.tileLayer=Os,e.tooltip=gl,e.transformation=E,e.version=o,e.videoOverlay=dl;var El=window.L;e.noConflict=function(){return window.L=El,this},window.L=e})})(mo,mo.exports);const Co=mo.exports,or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function $a(){throw new Error("setTimeout has not been defined")}function Ka(){throw new Error("clearTimeout has not been defined")}var Ze=$a,He=Ka;typeof or.setTimeout=="function"&&(Ze=setTimeout);typeof or.clearTimeout=="function"&&(He=clearTimeout);function Ga(n){if(Ze===setTimeout)return setTimeout(n,0);if((Ze===$a||!Ze)&&setTimeout)return Ze=setTimeout,setTimeout(n,0);try{return Ze(n,0)}catch{try{return Ze.call(null,n,0)}catch{return Ze.call(this,n,0)}}}function Ml(n){if(He===clearTimeout)return clearTimeout(n);if((He===Ka||!He)&&clearTimeout)return He=clearTimeout,clearTimeout(n);try{return He(n)}catch{try{return He.call(null,n)}catch{return He.call(this,n)}}}var Re=[],Ai=!1,oi,Vn=-1;function Ol(){!Ai||!oi||(Ai=!1,oi.length?Re=oi.concat(Re):Vn=-1,Re.length&&Qa())}function Qa(){if(!Ai){var n=Ga(Ol);Ai=!0;for(var i=Re.length;i;){for(oi=Re,Re=[];++Vn<i;)oi&&oi[Vn].run();Vn=-1,i=Re.length}oi=null,Ai=!1,Ml(n)}}function kl(n){var i=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)i[e-1]=arguments[e];Re.push(new Ya(n,i)),Re.length===1&&!Ai&&Ga(Qa)}function Ya(n,i){this.fun=n,this.array=i}Ya.prototype.run=function(){this.fun.apply(null,this.array)};var Rl="browser",Dl="browser",Nl=!0,zl={},Fl=[],Ul="",jl={},ql={},Zl={};function hi(){}var Hl=hi,Wl=hi,Vl=hi,$l=hi,Kl=hi,Gl=hi,Ql=hi;function Yl(n){throw new Error("process.binding is not supported")}function Jl(){return"/"}function Xl(n){throw new Error("process.chdir is not supported")}function tf(){return 0}var xi=or.performance||{},ef=xi.now||xi.mozNow||xi.msNow||xi.oNow||xi.webkitNow||function(){return new Date().getTime()};function nf(n){var i=ef.call(xi)*.001,e=Math.floor(i),o=Math.floor(i%1*1e9);return n&&(e=e-n[0],o=o-n[1],o<0&&(e--,o+=1e9)),[e,o]}var rf=new Date;function of(){var n=new Date,i=n-rf;return i/1e3}var X={nextTick:kl,title:Rl,browser:Nl,env:zl,argv:Fl,version:Ul,versions:jl,on:Hl,addListener:Wl,once:Vl,off:$l,removeListener:Kl,removeAllListeners:Gl,emit:Ql,binding:Yl,cwd:Jl,chdir:Xl,umask:tf,hrtime:nf,platform:Dl,release:ql,config:Zl,uptime:of},fn={exports:{}},sf;function We(){}We.prototype=Object.create(null);function Pt(){Pt.init.call(this)}Pt.EventEmitter=Pt;Pt.usingDomains=!1;Pt.prototype.domain=void 0;Pt.prototype._events=void 0;Pt.prototype._maxListeners=void 0;Pt.defaultMaxListeners=10;Pt.init=function(){this.domain=null,Pt.usingDomains&&sf.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new We,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Pt.prototype.setMaxListeners=function(i){if(typeof i!="number"||i<0||isNaN(i))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=i,this};function Ja(n){return n._maxListeners===void 0?Pt.defaultMaxListeners:n._maxListeners}Pt.prototype.getMaxListeners=function(){return Ja(this)};function af(n,i,e){if(i)n.call(e);else for(var o=n.length,s=cn(n,o),a=0;a<o;++a)s[a].call(e)}function uf(n,i,e,o){if(i)n.call(e,o);else for(var s=n.length,a=cn(n,s),h=0;h<s;++h)a[h].call(e,o)}function hf(n,i,e,o,s){if(i)n.call(e,o,s);else for(var a=n.length,h=cn(n,a),f=0;f<a;++f)h[f].call(e,o,s)}function lf(n,i,e,o,s,a){if(i)n.call(e,o,s,a);else for(var h=n.length,f=cn(n,h),d=0;d<h;++d)f[d].call(e,o,s,a)}function ff(n,i,e,o){if(i)n.apply(e,o);else for(var s=n.length,a=cn(n,s),h=0;h<s;++h)a[h].apply(e,o)}Pt.prototype.emit=function(i){var e,o,s,a,h,f,d,c=i==="error";if(f=this._events,f)c=c&&f.error==null;else if(!c)return!1;if(d=this.domain,c){if(e=arguments[1],d)e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=d,e.domainThrown=!1,d.emit("error",e);else{if(e instanceof Error)throw e;var v=new Error('Uncaught, unspecified "error" event. ('+e+")");throw v.context=e,v}return!1}if(o=f[i],!o)return!1;var w=typeof o=="function";switch(s=arguments.length,s){case 1:af(o,w,this);break;case 2:uf(o,w,this,arguments[1]);break;case 3:hf(o,w,this,arguments[1],arguments[2]);break;case 4:lf(o,w,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(s-1),h=1;h<s;h++)a[h-1]=arguments[h];ff(o,w,this,a)}return!0};function Xa(n,i,e,o){var s,a,h;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(a=n._events,a?(a.newListener&&(n.emit("newListener",i,e.listener?e.listener:e),a=n._events),h=a[i]):(a=n._events=new We,n._eventsCount=0),!h)h=a[i]=e,++n._eventsCount;else if(typeof h=="function"?h=a[i]=o?[e,h]:[h,e]:o?h.unshift(e):h.push(e),!h.warned&&(s=Ja(n),s&&s>0&&h.length>s)){h.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+i+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=n,f.type=i,f.count=h.length,cf(f)}return n}function cf(n){typeof console.warn=="function"?console.warn(n):console.log(n)}Pt.prototype.addListener=function(i,e){return Xa(this,i,e,!1)};Pt.prototype.on=Pt.prototype.addListener;Pt.prototype.prependListener=function(i,e){return Xa(this,i,e,!0)};function tu(n,i,e){var o=!1;function s(){n.removeListener(i,s),o||(o=!0,e.apply(n,arguments))}return s.listener=e,s}Pt.prototype.once=function(i,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(i,tu(this,i,e)),this};Pt.prototype.prependOnceListener=function(i,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(i,tu(this,i,e)),this};Pt.prototype.removeListener=function(i,e){var o,s,a,h,f;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(s=this._events,!s)return this;if(o=s[i],!o)return this;if(o===e||o.listener&&o.listener===e)--this._eventsCount===0?this._events=new We:(delete s[i],s.removeListener&&this.emit("removeListener",i,o.listener||e));else if(typeof o!="function"){for(a=-1,h=o.length;h-- >0;)if(o[h]===e||o[h].listener&&o[h].listener===e){f=o[h].listener,a=h;break}if(a<0)return this;if(o.length===1){if(o[0]=void 0,--this._eventsCount===0)return this._events=new We,this;delete s[i]}else df(o,a);s.removeListener&&this.emit("removeListener",i,f||e)}return this};Pt.prototype.removeAllListeners=function(i){var e,o;if(o=this._events,!o)return this;if(!o.removeListener)return arguments.length===0?(this._events=new We,this._eventsCount=0):o[i]&&(--this._eventsCount===0?this._events=new We:delete o[i]),this;if(arguments.length===0){for(var s=Object.keys(o),a=0,h;a<s.length;++a)h=s[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=new We,this._eventsCount=0,this}if(e=o[i],typeof e=="function")this.removeListener(i,e);else if(e)do this.removeListener(i,e[e.length-1]);while(e[0]);return this};Pt.prototype.listeners=function(i){var e,o,s=this._events;return s?(e=s[i],e?typeof e=="function"?o=[e.listener||e]:o=pf(e):o=[]):o=[],o};Pt.listenerCount=function(n,i){return typeof n.listenerCount=="function"?n.listenerCount(i):eu.call(n,i)};Pt.prototype.listenerCount=eu;function eu(n){var i=this._events;if(i){var e=i[n];if(typeof e=="function")return 1;if(e)return e.length}return 0}Pt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function df(n,i){for(var e=i,o=e+1,s=n.length;o<s;e+=1,o+=1)n[e]=n[o];n.pop()}function cn(n,i){for(var e=new Array(i);i--;)e[i]=n[i];return e}function pf(n){for(var i=new Array(n.length),e=0;e<i.length;++e)i[e]=n[e].listener||n[e];return i}const _f=Object.freeze(Object.defineProperty({__proto__:null,default:Pt,EventEmitter:Pt},Symbol.toStringTag,{value:"Module"})),dn=ln(_f);var Bo=mf,gf=Object.prototype.hasOwnProperty;function mf(){for(var n={},i=0;i<arguments.length;i++){var e=arguments[i];for(var o in e)gf.call(e,o)&&(n[o]=e[o])}return n}var Ne={exports:{}},iu=dn.EventEmitter,V={},sr={};sr.byteLength=wf;sr.toByteArray=xf;sr.fromByteArray=Tf;var be=[],oe=[],vf=typeof Uint8Array<"u"?Uint8Array:Array,Wr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var wi=0,yf=Wr.length;wi<yf;++wi)be[wi]=Wr[wi],oe[Wr.charCodeAt(wi)]=wi;oe["-".charCodeAt(0)]=62;oe["_".charCodeAt(0)]=63;function nu(n){var i=n.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=i);var o=e===i?0:4-e%4;return[e,o]}function wf(n){var i=nu(n),e=i[0],o=i[1];return(e+o)*3/4-o}function bf(n,i,e){return(i+e)*3/4-e}function xf(n){var i,e=nu(n),o=e[0],s=e[1],a=new vf(bf(n,o,s)),h=0,f=s>0?o-4:o,d;for(d=0;d<f;d+=4)i=oe[n.charCodeAt(d)]<<18|oe[n.charCodeAt(d+1)]<<12|oe[n.charCodeAt(d+2)]<<6|oe[n.charCodeAt(d+3)],a[h++]=i>>16&255,a[h++]=i>>8&255,a[h++]=i&255;return s===2&&(i=oe[n.charCodeAt(d)]<<2|oe[n.charCodeAt(d+1)]>>4,a[h++]=i&255),s===1&&(i=oe[n.charCodeAt(d)]<<10|oe[n.charCodeAt(d+1)]<<4|oe[n.charCodeAt(d+2)]>>2,a[h++]=i>>8&255,a[h++]=i&255),a}function Ef(n){return be[n>>18&63]+be[n>>12&63]+be[n>>6&63]+be[n&63]}function Sf(n,i,e){for(var o,s=[],a=i;a<e;a+=3)o=(n[a]<<16&16711680)+(n[a+1]<<8&65280)+(n[a+2]&255),s.push(Ef(o));return s.join("")}function Tf(n){for(var i,e=n.length,o=e%3,s=[],a=16383,h=0,f=e-o;h<f;h+=a)s.push(Sf(n,h,h+a>f?f:h+a));return o===1?(i=n[e-1],s.push(be[i>>2]+be[i<<4&63]+"==")):o===2&&(i=(n[e-2]<<8)+n[e-1],s.push(be[i>>10]+be[i>>4&63]+be[i<<2&63]+"=")),s.join("")}var Mo={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Mo.read=function(n,i,e,o,s){var a,h,f=s*8-o-1,d=(1<<f)-1,c=d>>1,v=-7,w=e?s-1:0,b=e?-1:1,P=n[i+w];for(w+=b,a=P&(1<<-v)-1,P>>=-v,v+=f;v>0;a=a*256+n[i+w],w+=b,v-=8);for(h=a&(1<<-v)-1,a>>=-v,v+=o;v>0;h=h*256+n[i+w],w+=b,v-=8);if(a===0)a=1-c;else{if(a===d)return h?NaN:(P?-1:1)*(1/0);h=h+Math.pow(2,o),a=a-c}return(P?-1:1)*h*Math.pow(2,a-o)};Mo.write=function(n,i,e,o,s,a){var h,f,d,c=a*8-s-1,v=(1<<c)-1,w=v>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=o?0:a-1,C=o?1:-1,I=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(f=isNaN(i)?1:0,h=v):(h=Math.floor(Math.log(i)/Math.LN2),i*(d=Math.pow(2,-h))<1&&(h--,d*=2),h+w>=1?i+=b/d:i+=b*Math.pow(2,1-w),i*d>=2&&(h++,d/=2),h+w>=v?(f=0,h=v):h+w>=1?(f=(i*d-1)*Math.pow(2,s),h=h+w):(f=i*Math.pow(2,w-1)*Math.pow(2,s),h=0));s>=8;n[e+P]=f&255,P+=C,f/=256,s-=8);for(h=h<<s|f,c+=s;c>0;n[e+P]=h&255,P+=C,h/=256,c-=8);n[e+P-C]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){var i=sr,e=Mo,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=f,n.SlowBuffer=k,n.INSPECT_MAX_BYTES=50;var s=2147483647;n.kMaxLength=s,f.TYPED_ARRAY_SUPPORT=a(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var y=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(y,p),y.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.byteOffset}});function h(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');var p=new Uint8Array(y);return Object.setPrototypeOf(p,f.prototype),p}function f(y,p,g){if(typeof y=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(y)}return d(y,p,g)}f.poolSize=8192;function d(y,p,g){if(typeof y=="string")return b(y,p);if(ArrayBuffer.isView(y))return C(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(U(y,ArrayBuffer)||y&&U(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(U(y,SharedArrayBuffer)||y&&U(y.buffer,SharedArrayBuffer)))return I(y,p,g);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=y.valueOf&&y.valueOf();if(S!=null&&S!==y)return f.from(S,p,g);var M=F(y);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return f.from(y[Symbol.toPrimitive]("string"),p,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}f.from=function(y,p,g){return d(y,p,g)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function c(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function v(y,p,g){return c(y),y<=0?h(y):p!==void 0?typeof g=="string"?h(y).fill(p,g):h(y).fill(p):h(y)}f.alloc=function(y,p,g){return v(y,p,g)};function w(y){return c(y),h(y<0?0:A(y)|0)}f.allocUnsafe=function(y){return w(y)},f.allocUnsafeSlow=function(y){return w(y)};function b(y,p){if((typeof p!="string"||p==="")&&(p="utf8"),!f.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var g=B(y,p)|0,S=h(g),M=S.write(y,p);return M!==g&&(S=S.slice(0,M)),S}function P(y){for(var p=y.length<0?0:A(y.length)|0,g=h(p),S=0;S<p;S+=1)g[S]=y[S]&255;return g}function C(y){if(U(y,Uint8Array)){var p=new Uint8Array(y);return I(p.buffer,p.byteOffset,p.byteLength)}return P(y)}function I(y,p,g){if(p<0||y.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<p+(g||0))throw new RangeError('"length" is outside of buffer bounds');var S;return p===void 0&&g===void 0?S=new Uint8Array(y):g===void 0?S=new Uint8Array(y,p):S=new Uint8Array(y,p,g),Object.setPrototypeOf(S,f.prototype),S}function F(y){if(f.isBuffer(y)){var p=A(y.length)|0,g=h(p);return g.length===0||y.copy(g,0,0,p),g}if(y.length!==void 0)return typeof y.length!="number"||K(y.length)?h(0):P(y);if(y.type==="Buffer"&&Array.isArray(y.data))return P(y.data)}function A(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function k(y){return+y!=y&&(y=0),f.alloc(+y)}f.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==f.prototype},f.compare=function(p,g){if(U(p,Uint8Array)&&(p=f.from(p,p.offset,p.byteLength)),U(g,Uint8Array)&&(g=f.from(g,g.offset,g.byteLength)),!f.isBuffer(p)||!f.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===g)return 0;for(var S=p.length,M=g.length,j=0,W=Math.min(S,M);j<W;++j)if(p[j]!==g[j]){S=p[j],M=g[j];break}return S<M?-1:M<S?1:0},f.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(p,g){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return f.alloc(0);var S;if(g===void 0)for(g=0,S=0;S<p.length;++S)g+=p[S].length;var M=f.allocUnsafe(g),j=0;for(S=0;S<p.length;++S){var W=p[S];if(U(W,Uint8Array))j+W.length>M.length?f.from(W).copy(M,j):Uint8Array.prototype.set.call(M,W,j);else if(f.isBuffer(W))W.copy(M,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=W.length}return M};function B(y,p){if(f.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||U(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);var g=y.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&g===0)return 0;for(var M=!1;;)switch(p){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return q(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return x(y).length;default:if(M)return S?-1:q(y).length;p=(""+p).toLowerCase(),M=!0}}f.byteLength=B;function $(y,p,g){var S=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,p>>>=0,g<=p))return"";for(y||(y="utf8");;)switch(y){case"hex":return Xt(this,p,g);case"utf8":case"utf-8":return Lt(this,p,g);case"ascii":return Dt(this,p,g);case"latin1":case"binary":return Q(this,p,g);case"base64":return Jt(this,p,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,p,g);default:if(S)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),S=!0}}f.prototype._isBuffer=!0;function H(y,p,g){var S=y[p];y[p]=y[g],y[g]=S}f.prototype.swap16=function(){var p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var g=0;g<p;g+=2)H(this,g,g+1);return this},f.prototype.swap32=function(){var p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var g=0;g<p;g+=4)H(this,g,g+3),H(this,g+1,g+2);return this},f.prototype.swap64=function(){var p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var g=0;g<p;g+=8)H(this,g,g+7),H(this,g+1,g+6),H(this,g+2,g+5),H(this,g+3,g+4);return this},f.prototype.toString=function(){var p=this.length;return p===0?"":arguments.length===0?Lt(this,0,p):$.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(p){if(!f.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:f.compare(this,p)===0},f.prototype.inspect=function(){var p="",g=n.INSPECT_MAX_BYTES;return p=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(p+=" ... "),"<Buffer "+p+">"},o&&(f.prototype[o]=f.prototype.inspect),f.prototype.compare=function(p,g,S,M,j){if(U(p,Uint8Array)&&(p=f.from(p,p.offset,p.byteLength)),!f.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(g===void 0&&(g=0),S===void 0&&(S=p?p.length:0),M===void 0&&(M=0),j===void 0&&(j=this.length),g<0||S>p.length||M<0||j>this.length)throw new RangeError("out of range index");if(M>=j&&g>=S)return 0;if(M>=j)return-1;if(g>=S)return 1;if(g>>>=0,S>>>=0,M>>>=0,j>>>=0,this===p)return 0;for(var W=j-M,lt=S-g,vt=Math.min(W,lt),Et=this.slice(M,j),Ct=p.slice(g,S),yt=0;yt<vt;++yt)if(Et[yt]!==Ct[yt]){W=Et[yt],lt=Ct[yt];break}return W<lt?-1:lt<W?1:0};function it(y,p,g,S,M){if(y.length===0)return-1;if(typeof g=="string"?(S=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,K(g)&&(g=M?0:y.length-1),g<0&&(g=y.length+g),g>=y.length){if(M)return-1;g=y.length-1}else if(g<0)if(M)g=0;else return-1;if(typeof p=="string"&&(p=f.from(p,S)),f.isBuffer(p))return p.length===0?-1:ct(y,p,g,S,M);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(y,p,g):Uint8Array.prototype.lastIndexOf.call(y,p,g):ct(y,[p],g,S,M);throw new TypeError("val must be string, number or Buffer")}function ct(y,p,g,S,M){var j=1,W=y.length,lt=p.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(y.length<2||p.length<2)return-1;j=2,W/=2,lt/=2,g/=2}function vt(yn,Di){return j===1?yn[Di]:yn.readUInt16BE(Di*j)}var Et;if(M){var Ct=-1;for(Et=g;Et<W;Et++)if(vt(y,Et)===vt(p,Ct===-1?0:Et-Ct)){if(Ct===-1&&(Ct=Et),Et-Ct+1===lt)return Ct*j}else Ct!==-1&&(Et-=Et-Ct),Ct=-1}else for(g+lt>W&&(g=W-lt),Et=g;Et>=0;Et--){for(var yt=!0,ie=0;ie<lt;ie++)if(vt(y,Et+ie)!==vt(p,ie)){yt=!1;break}if(yt)return Et}return-1}f.prototype.includes=function(p,g,S){return this.indexOf(p,g,S)!==-1},f.prototype.indexOf=function(p,g,S){return it(this,p,g,S,!0)},f.prototype.lastIndexOf=function(p,g,S){return it(this,p,g,S,!1)};function tt(y,p,g,S){g=Number(g)||0;var M=y.length-g;S?(S=Number(S),S>M&&(S=M)):S=M;var j=p.length;S>j/2&&(S=j/2);for(var W=0;W<S;++W){var lt=parseInt(p.substr(W*2,2),16);if(K(lt))return W;y[g+W]=lt}return W}function J(y,p,g,S){return E(q(p,y.length-g),y,g,S)}function Ht(y,p,g,S){return E(et(p),y,g,S)}function St(y,p,g,S){return E(x(p),y,g,S)}function Ot(y,p,g,S){return E(ut(p,y.length-g),y,g,S)}f.prototype.write=function(p,g,S,M){if(g===void 0)M="utf8",S=this.length,g=0;else if(S===void 0&&typeof g=="string")M=g,S=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(S)?(S=S>>>0,M===void 0&&(M="utf8")):(M=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var j=this.length-g;if((S===void 0||S>j)&&(S=j),p.length>0&&(S<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");for(var W=!1;;)switch(M){case"hex":return tt(this,p,g,S);case"utf8":case"utf-8":return J(this,p,g,S);case"ascii":case"latin1":case"binary":return Ht(this,p,g,S);case"base64":return St(this,p,g,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,p,g,S);default:if(W)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),W=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Jt(y,p,g){return p===0&&g===y.length?i.fromByteArray(y):i.fromByteArray(y.slice(p,g))}function Lt(y,p,g){g=Math.min(y.length,g);for(var S=[],M=p;M<g;){var j=y[M],W=null,lt=j>239?4:j>223?3:j>191?2:1;if(M+lt<=g){var vt,Et,Ct,yt;switch(lt){case 1:j<128&&(W=j);break;case 2:vt=y[M+1],(vt&192)===128&&(yt=(j&31)<<6|vt&63,yt>127&&(W=yt));break;case 3:vt=y[M+1],Et=y[M+2],(vt&192)===128&&(Et&192)===128&&(yt=(j&15)<<12|(vt&63)<<6|Et&63,yt>2047&&(yt<55296||yt>57343)&&(W=yt));break;case 4:vt=y[M+1],Et=y[M+2],Ct=y[M+3],(vt&192)===128&&(Et&192)===128&&(Ct&192)===128&&(yt=(j&15)<<18|(vt&63)<<12|(Et&63)<<6|Ct&63,yt>65535&&yt<1114112&&(W=yt))}}W===null?(W=65533,lt=1):W>65535&&(W-=65536,S.push(W>>>10&1023|55296),W=56320|W&1023),S.push(W),M+=lt}return At(S)}var Gt=4096;function At(y){var p=y.length;if(p<=Gt)return String.fromCharCode.apply(String,y);for(var g="",S=0;S<p;)g+=String.fromCharCode.apply(String,y.slice(S,S+=Gt));return g}function Dt(y,p,g){var S="";g=Math.min(y.length,g);for(var M=p;M<g;++M)S+=String.fromCharCode(y[M]&127);return S}function Q(y,p,g){var S="";g=Math.min(y.length,g);for(var M=p;M<g;++M)S+=String.fromCharCode(y[M]);return S}function Xt(y,p,g){var S=y.length;(!p||p<0)&&(p=0),(!g||g<0||g>S)&&(g=S);for(var M="",j=p;j<g;++j)M+=It[y[j]];return M}function at(y,p,g){for(var S=y.slice(p,g),M="",j=0;j<S.length-1;j+=2)M+=String.fromCharCode(S[j]+S[j+1]*256);return M}f.prototype.slice=function(p,g){var S=this.length;p=~~p,g=g===void 0?S:~~g,p<0?(p+=S,p<0&&(p=0)):p>S&&(p=S),g<0?(g+=S,g<0&&(g=0)):g>S&&(g=S),g<p&&(g=p);var M=this.subarray(p,g);return Object.setPrototypeOf(M,f.prototype),M};function nt(y,p,g){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+p>g)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(p,g,S){p=p>>>0,g=g>>>0,S||nt(p,g,this.length);for(var M=this[p],j=1,W=0;++W<g&&(j*=256);)M+=this[p+W]*j;return M},f.prototype.readUintBE=f.prototype.readUIntBE=function(p,g,S){p=p>>>0,g=g>>>0,S||nt(p,g,this.length);for(var M=this[p+--g],j=1;g>0&&(j*=256);)M+=this[p+--g]*j;return M},f.prototype.readUint8=f.prototype.readUInt8=function(p,g){return p=p>>>0,g||nt(p,1,this.length),this[p]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(p,g){return p=p>>>0,g||nt(p,2,this.length),this[p]|this[p+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(p,g){return p=p>>>0,g||nt(p,2,this.length),this[p]<<8|this[p+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(p,g){return p=p>>>0,g||nt(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(p,g){return p=p>>>0,g||nt(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},f.prototype.readIntLE=function(p,g,S){p=p>>>0,g=g>>>0,S||nt(p,g,this.length);for(var M=this[p],j=1,W=0;++W<g&&(j*=256);)M+=this[p+W]*j;return j*=128,M>=j&&(M-=Math.pow(2,8*g)),M},f.prototype.readIntBE=function(p,g,S){p=p>>>0,g=g>>>0,S||nt(p,g,this.length);for(var M=g,j=1,W=this[p+--M];M>0&&(j*=256);)W+=this[p+--M]*j;return j*=128,W>=j&&(W-=Math.pow(2,8*g)),W},f.prototype.readInt8=function(p,g){return p=p>>>0,g||nt(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},f.prototype.readInt16LE=function(p,g){p=p>>>0,g||nt(p,2,this.length);var S=this[p]|this[p+1]<<8;return S&32768?S|4294901760:S},f.prototype.readInt16BE=function(p,g){p=p>>>0,g||nt(p,2,this.length);var S=this[p+1]|this[p]<<8;return S&32768?S|4294901760:S},f.prototype.readInt32LE=function(p,g){return p=p>>>0,g||nt(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},f.prototype.readInt32BE=function(p,g){return p=p>>>0,g||nt(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},f.prototype.readFloatLE=function(p,g){return p=p>>>0,g||nt(p,4,this.length),e.read(this,p,!0,23,4)},f.prototype.readFloatBE=function(p,g){return p=p>>>0,g||nt(p,4,this.length),e.read(this,p,!1,23,4)},f.prototype.readDoubleLE=function(p,g){return p=p>>>0,g||nt(p,8,this.length),e.read(this,p,!0,52,8)},f.prototype.readDoubleBE=function(p,g){return p=p>>>0,g||nt(p,8,this.length),e.read(this,p,!1,52,8)};function xt(y,p,g,S,M,j){if(!f.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>M||p<j)throw new RangeError('"value" argument is out of bounds');if(g+S>y.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(p,g,S,M){if(p=+p,g=g>>>0,S=S>>>0,!M){var j=Math.pow(2,8*S)-1;xt(this,p,g,S,j,0)}var W=1,lt=0;for(this[g]=p&255;++lt<S&&(W*=256);)this[g+lt]=p/W&255;return g+S},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(p,g,S,M){if(p=+p,g=g>>>0,S=S>>>0,!M){var j=Math.pow(2,8*S)-1;xt(this,p,g,S,j,0)}var W=S-1,lt=1;for(this[g+W]=p&255;--W>=0&&(lt*=256);)this[g+W]=p/lt&255;return g+S},f.prototype.writeUint8=f.prototype.writeUInt8=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,1,255,0),this[g]=p&255,g+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,2,65535,0),this[g]=p&255,this[g+1]=p>>>8,g+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,2,65535,0),this[g]=p>>>8,this[g+1]=p&255,g+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,4,4294967295,0),this[g+3]=p>>>24,this[g+2]=p>>>16,this[g+1]=p>>>8,this[g]=p&255,g+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,4,4294967295,0),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4},f.prototype.writeIntLE=function(p,g,S,M){if(p=+p,g=g>>>0,!M){var j=Math.pow(2,8*S-1);xt(this,p,g,S,j-1,-j)}var W=0,lt=1,vt=0;for(this[g]=p&255;++W<S&&(lt*=256);)p<0&&vt===0&&this[g+W-1]!==0&&(vt=1),this[g+W]=(p/lt>>0)-vt&255;return g+S},f.prototype.writeIntBE=function(p,g,S,M){if(p=+p,g=g>>>0,!M){var j=Math.pow(2,8*S-1);xt(this,p,g,S,j-1,-j)}var W=S-1,lt=1,vt=0;for(this[g+W]=p&255;--W>=0&&(lt*=256);)p<0&&vt===0&&this[g+W+1]!==0&&(vt=1),this[g+W]=(p/lt>>0)-vt&255;return g+S},f.prototype.writeInt8=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,1,127,-128),p<0&&(p=255+p+1),this[g]=p&255,g+1},f.prototype.writeInt16LE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,2,32767,-32768),this[g]=p&255,this[g+1]=p>>>8,g+2},f.prototype.writeInt16BE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,2,32767,-32768),this[g]=p>>>8,this[g+1]=p&255,g+2},f.prototype.writeInt32LE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,4,2147483647,-2147483648),this[g]=p&255,this[g+1]=p>>>8,this[g+2]=p>>>16,this[g+3]=p>>>24,g+4},f.prototype.writeInt32BE=function(p,g,S){return p=+p,g=g>>>0,S||xt(this,p,g,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4};function kt(y,p,g,S,M,j){if(g+S>y.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Rt(y,p,g,S,M){return p=+p,g=g>>>0,M||kt(y,p,g,4),e.write(y,p,g,S,23,4),g+4}f.prototype.writeFloatLE=function(p,g,S){return Rt(this,p,g,!0,S)},f.prototype.writeFloatBE=function(p,g,S){return Rt(this,p,g,!1,S)};function _t(y,p,g,S,M){return p=+p,g=g>>>0,M||kt(y,p,g,8),e.write(y,p,g,S,52,8),g+8}f.prototype.writeDoubleLE=function(p,g,S){return _t(this,p,g,!0,S)},f.prototype.writeDoubleBE=function(p,g,S){return _t(this,p,g,!1,S)},f.prototype.copy=function(p,g,S,M){if(!f.isBuffer(p))throw new TypeError("argument should be a Buffer");if(S||(S=0),!M&&M!==0&&(M=this.length),g>=p.length&&(g=p.length),g||(g=0),M>0&&M<S&&(M=S),M===S||p.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),p.length-g<M-S&&(M=p.length-g+S);var j=M-S;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,S,M):Uint8Array.prototype.set.call(p,this.subarray(S,M),g),j},f.prototype.fill=function(p,g,S,M){if(typeof p=="string"){if(typeof g=="string"?(M=g,g=0,S=this.length):typeof S=="string"&&(M=S,S=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!f.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(p.length===1){var j=p.charCodeAt(0);(M==="utf8"&&j<128||M==="latin1")&&(p=j)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(g<0||this.length<g||this.length<S)throw new RangeError("Out of range index");if(S<=g)return this;g=g>>>0,S=S===void 0?this.length:S>>>0,p||(p=0);var W;if(typeof p=="number")for(W=g;W<S;++W)this[W]=p;else{var lt=f.isBuffer(p)?p:f.from(p,M),vt=lt.length;if(vt===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(W=0;W<S-g;++W)this[W+g]=lt[W%vt]}return this};var O=/[^+/0-9A-Za-z-_]/g;function R(y){if(y=y.split("=")[0],y=y.trim().replace(O,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function q(y,p){p=p||1/0;for(var g,S=y.length,M=null,j=[],W=0;W<S;++W){if(g=y.charCodeAt(W),g>55295&&g<57344){if(!M){if(g>56319){(p-=3)>-1&&j.push(239,191,189);continue}else if(W+1===S){(p-=3)>-1&&j.push(239,191,189);continue}M=g;continue}if(g<56320){(p-=3)>-1&&j.push(239,191,189),M=g;continue}g=(M-55296<<10|g-56320)+65536}else M&&(p-=3)>-1&&j.push(239,191,189);if(M=null,g<128){if((p-=1)<0)break;j.push(g)}else if(g<2048){if((p-=2)<0)break;j.push(g>>6|192,g&63|128)}else if(g<65536){if((p-=3)<0)break;j.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((p-=4)<0)break;j.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return j}function et(y){for(var p=[],g=0;g<y.length;++g)p.push(y.charCodeAt(g)&255);return p}function ut(y,p){for(var g,S,M,j=[],W=0;W<y.length&&!((p-=2)<0);++W)g=y.charCodeAt(W),S=g>>8,M=g%256,j.push(M),j.push(S);return j}function x(y){return i.toByteArray(R(y))}function E(y,p,g,S){for(var M=0;M<S&&!(M+g>=p.length||M>=y.length);++M)p[M+g]=y[M];return M}function U(y,p){return y instanceof p||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===p.name}function K(y){return y!==y}var It=function(){for(var y="0123456789abcdef",p=new Array(256),g=0;g<16;++g)for(var S=g*16,M=0;M<16;++M)p[S+M]=y[g]+y[M];return p}()})(V);var vo;typeof Object.create=="function"?vo=function(i,e){i.super_=e,i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}})}:vo=function(i,e){i.super_=e;var o=function(){};o.prototype=e.prototype,i.prototype=new o,i.prototype.constructor=i};const ru=vo;var Pf=/%[sdj%]/g;function ar(n){if(!Qe(n)){for(var i=[],e=0;e<arguments.length;e++)i.push(Se(arguments[e]));return i.join(" ")}for(var e=1,o=arguments,s=o.length,a=String(n).replace(Pf,function(f){if(f==="%%")return"%";if(e>=s)return f;switch(f){case"%s":return String(o[e++]);case"%d":return Number(o[e++]);case"%j":try{return JSON.stringify(o[e++])}catch{return"[Circular]"}default:return f}}),h=o[e];e<s;h=o[++e])De(h)||!Fe(h)?a+=" "+h:a+=" "+Se(h);return a}function Oo(n,i){if(Ee(or.process))return function(){return Oo(n,i).apply(this,arguments)};if(X.noDeprecation===!0)return n;var e=!1;function o(){if(!e){if(X.throwDeprecation)throw new Error(i);X.traceDeprecation?console.trace(i):console.error(i),e=!0}return n.apply(this,arguments)}return o}var zn={},Vr;function ou(n){if(Ee(Vr)&&(Vr=X.env.NODE_DEBUG||""),n=n.toUpperCase(),!zn[n])if(new RegExp("\\b"+n+"\\b","i").test(Vr)){var i=0;zn[n]=function(){var e=ar.apply(null,arguments);console.error("%s %d: %s",n,i,e)}}else zn[n]=function(){};return zn[n]}function Se(n,i){var e={seen:[],stylize:Af};return arguments.length>=3&&(e.depth=arguments[2]),arguments.length>=4&&(e.colors=arguments[3]),ur(i)?e.showHidden=i:i&&zo(e,i),Ee(e.showHidden)&&(e.showHidden=!1),Ee(e.depth)&&(e.depth=2),Ee(e.colors)&&(e.colors=!1),Ee(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=Lf),Gn(e,n,e.depth)}Se.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Se.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Lf(n,i){var e=Se.styles[i];return e?"\x1B["+Se.colors[e][0]+"m"+n+"\x1B["+Se.colors[e][1]+"m":n}function Af(n,i){return n}function If(n){var i={};return n.forEach(function(e,o){i[e]=!0}),i}function Gn(n,i,e){if(n.customInspect&&i&&rn(i.inspect)&&i.inspect!==Se&&!(i.constructor&&i.constructor.prototype===i)){var o=i.inspect(e,n);return Qe(o)||(o=Gn(n,o,e)),o}var s=Cf(n,i);if(s)return s;var a=Object.keys(i),h=If(a);if(n.showHidden&&(a=Object.getOwnPropertyNames(i)),nn(i)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return $r(i);if(a.length===0){if(rn(i)){var f=i.name?": "+i.name:"";return n.stylize("[Function"+f+"]","special")}if(en(i))return n.stylize(RegExp.prototype.toString.call(i),"regexp");if(Qn(i))return n.stylize(Date.prototype.toString.call(i),"date");if(nn(i))return $r(i)}var d="",c=!1,v=["{","}"];if(ko(i)&&(c=!0,v=["[","]"]),rn(i)){var w=i.name?": "+i.name:"";d=" [Function"+w+"]"}if(en(i)&&(d=" "+RegExp.prototype.toString.call(i)),Qn(i)&&(d=" "+Date.prototype.toUTCString.call(i)),nn(i)&&(d=" "+$r(i)),a.length===0&&(!c||i.length==0))return v[0]+d+v[1];if(e<0)return en(i)?n.stylize(RegExp.prototype.toString.call(i),"regexp"):n.stylize("[Object]","special");n.seen.push(i);var b;return c?b=Bf(n,i,e,h,a):b=a.map(function(P){return yo(n,i,e,h,P,c)}),n.seen.pop(),Mf(b,d,v)}function Cf(n,i){if(Ee(i))return n.stylize("undefined","undefined");if(Qe(i)){var e="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(e,"string")}if(Do(i))return n.stylize(""+i,"number");if(ur(i))return n.stylize(""+i,"boolean");if(De(i))return n.stylize("null","null")}function $r(n){return"["+Error.prototype.toString.call(n)+"]"}function Bf(n,i,e,o,s){for(var a=[],h=0,f=i.length;h<f;++h)lu(i,String(h))?a.push(yo(n,i,e,o,String(h),!0)):a.push("");return s.forEach(function(d){d.match(/^\d+$/)||a.push(yo(n,i,e,o,d,!0))}),a}function yo(n,i,e,o,s,a){var h,f,d;if(d=Object.getOwnPropertyDescriptor(i,s)||{value:i[s]},d.get?d.set?f=n.stylize("[Getter/Setter]","special"):f=n.stylize("[Getter]","special"):d.set&&(f=n.stylize("[Setter]","special")),lu(o,s)||(h="["+s+"]"),f||(n.seen.indexOf(d.value)<0?(De(e)?f=Gn(n,d.value,null):f=Gn(n,d.value,e-1),f.indexOf(`
`)>-1&&(a?f=f.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):f=`
`+f.split(`
`).map(function(c){return"   "+c}).join(`
`))):f=n.stylize("[Circular]","special")),Ee(h)){if(a&&s.match(/^\d+$/))return f;h=JSON.stringify(""+s),h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=n.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=n.stylize(h,"string"))}return h+": "+f}function Mf(n,i,e){var o=n.reduce(function(s,a){return a.indexOf(`
`)>=0,s+a.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?e[0]+(i===""?"":i+`
 `)+" "+n.join(`,
  `)+" "+e[1]:e[0]+i+" "+n.join(", ")+" "+e[1]}function ko(n){return Array.isArray(n)}function ur(n){return typeof n=="boolean"}function De(n){return n===null}function Ro(n){return n==null}function Do(n){return typeof n=="number"}function Qe(n){return typeof n=="string"}function su(n){return typeof n=="symbol"}function Ee(n){return n===void 0}function en(n){return Fe(n)&&No(n)==="[object RegExp]"}function Fe(n){return typeof n=="object"&&n!==null}function Qn(n){return Fe(n)&&No(n)==="[object Date]"}function nn(n){return Fe(n)&&(No(n)==="[object Error]"||n instanceof Error)}function rn(n){return typeof n=="function"}function au(n){return n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||typeof n=="symbol"||typeof n>"u"}function uu(n){return V.Buffer.isBuffer(n)}function No(n){return Object.prototype.toString.call(n)}function Kr(n){return n<10?"0"+n.toString(10):n.toString(10)}var Of=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function kf(){var n=new Date,i=[Kr(n.getHours()),Kr(n.getMinutes()),Kr(n.getSeconds())].join(":");return[n.getDate(),Of[n.getMonth()],i].join(" ")}function hu(){console.log("%s - %s",kf(),ar.apply(null,arguments))}function zo(n,i){if(!i||!Fe(i))return n;for(var e=Object.keys(i),o=e.length;o--;)n[e[o]]=i[e[o]];return n}function lu(n,i){return Object.prototype.hasOwnProperty.call(n,i)}const Rf={inherits:ru,_extend:zo,log:hu,isBuffer:uu,isPrimitive:au,isFunction:rn,isError:nn,isDate:Qn,isObject:Fe,isRegExp:en,isUndefined:Ee,isSymbol:su,isString:Qe,isNumber:Do,isNullOrUndefined:Ro,isNull:De,isBoolean:ur,isArray:ko,inspect:Se,deprecate:Oo,format:ar,debuglog:ou},Df=Object.freeze(Object.defineProperty({__proto__:null,format:ar,deprecate:Oo,debuglog:ou,inspect:Se,isArray:ko,isBoolean:ur,isNull:De,isNullOrUndefined:Ro,isNumber:Do,isString:Qe,isSymbol:su,isUndefined:Ee,isRegExp:en,isObject:Fe,isDate:Qn,isError:nn,isFunction:rn,isPrimitive:au,isBuffer:uu,log:hu,inherits:ru,_extend:zo,default:Rf},Symbol.toStringTag,{value:"Module"})),fu=ln(Df);var Gr,Gs;function Nf(){if(Gs)return Gr;Gs=1;function n(b,P){var C=Object.keys(b);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(b);P&&(I=I.filter(function(F){return Object.getOwnPropertyDescriptor(b,F).enumerable})),C.push.apply(C,I)}return C}function i(b){for(var P=1;P<arguments.length;P++){var C=arguments[P]!=null?arguments[P]:{};P%2?n(Object(C),!0).forEach(function(I){e(b,I,C[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(C)):n(Object(C)).forEach(function(I){Object.defineProperty(b,I,Object.getOwnPropertyDescriptor(C,I))})}return b}function e(b,P,C){return P in b?Object.defineProperty(b,P,{value:C,enumerable:!0,configurable:!0,writable:!0}):b[P]=C,b}function o(b,P){if(!(b instanceof P))throw new TypeError("Cannot call a class as a function")}function s(b,P){for(var C=0;C<P.length;C++){var I=P[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(b,I.key,I)}}function a(b,P,C){return P&&s(b.prototype,P),C&&s(b,C),b}var h=V,f=h.Buffer,d=fu,c=d.inspect,v=c&&c.custom||"inspect";function w(b,P,C){f.prototype.copy.call(b,P,C)}return Gr=function(){function b(){o(this,b),this.head=null,this.tail=null,this.length=0}return a(b,[{key:"push",value:function(C){var I={data:C,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(C){var I={data:C,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var C=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,C}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(C){if(this.length===0)return"";for(var I=this.head,F=""+I.data;I=I.next;)F+=C+I.data;return F}},{key:"concat",value:function(C){if(this.length===0)return f.alloc(0);for(var I=f.allocUnsafe(C>>>0),F=this.head,A=0;F;)w(F.data,I,A),A+=F.data.length,F=F.next;return I}},{key:"consume",value:function(C,I){var F;return C<this.head.data.length?(F=this.head.data.slice(0,C),this.head.data=this.head.data.slice(C)):C===this.head.data.length?F=this.shift():F=I?this._getString(C):this._getBuffer(C),F}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(C){var I=this.head,F=1,A=I.data;for(C-=A.length;I=I.next;){var k=I.data,B=C>k.length?k.length:C;if(B===k.length?A+=k:A+=k.slice(0,C),C-=B,C===0){B===k.length?(++F,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=k.slice(B));break}++F}return this.length-=F,A}},{key:"_getBuffer",value:function(C){var I=f.allocUnsafe(C),F=this.head,A=1;for(F.data.copy(I),C-=F.data.length;F=F.next;){var k=F.data,B=C>k.length?k.length:C;if(k.copy(I,I.length-C,0,B),C-=B,C===0){B===k.length?(++A,F.next?this.head=F.next:this.head=this.tail=null):(this.head=F,F.data=k.slice(B));break}++A}return this.length-=A,I}},{key:v,value:function(C,I){return c(this,i({},I,{depth:0,customInspect:!1}))}}]),b}(),Gr}function zf(n,i){var e=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(i?i(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,X.nextTick(wo,this,n)):X.nextTick(wo,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!i&&a?e._writableState?e._writableState.errorEmitted?X.nextTick($n,e):(e._writableState.errorEmitted=!0,X.nextTick(Qs,e,a)):X.nextTick(Qs,e,a):i?(X.nextTick($n,e),i(a)):X.nextTick($n,e)}),this)}function Qs(n,i){wo(n,i),$n(n)}function $n(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function Ff(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function wo(n,i){n.emit("error",i)}function Uf(n,i){var e=n._readableState,o=n._writableState;e&&e.autoDestroy||o&&o.autoDestroy?n.destroy(i):n.emit("error",i)}var cu={destroy:zf,undestroy:Ff,errorOrDestroy:Uf},li={};function jf(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var du={};function ae(n,i,e){e||(e=Error);function o(a,h,f){return typeof i=="string"?i:i(a,h,f)}var s=function(a){jf(h,a);function h(f,d,c){return a.call(this,o(f,d,c))||this}return h}(e);s.prototype.name=e.name,s.prototype.code=n,du[n]=s}function Ys(n,i){if(Array.isArray(n)){var e=n.length;return n=n.map(function(o){return String(o)}),e>2?"one of ".concat(i," ").concat(n.slice(0,e-1).join(", "),", or ")+n[e-1]:e===2?"one of ".concat(i," ").concat(n[0]," or ").concat(n[1]):"of ".concat(i," ").concat(n[0])}else return"of ".concat(i," ").concat(String(n))}function qf(n,i,e){return n.substr(!e||e<0?0:+e,i.length)===i}function Zf(n,i,e){return(e===void 0||e>n.length)&&(e=n.length),n.substring(e-i.length,e)===i}function Hf(n,i,e){return typeof e!="number"&&(e=0),e+i.length>n.length?!1:n.indexOf(i,e)!==-1}ae("ERR_INVALID_OPT_VALUE",function(n,i){return'The value "'+i+'" is invalid for option "'+n+'"'},TypeError);ae("ERR_INVALID_ARG_TYPE",function(n,i,e){var o;typeof i=="string"&&qf(i,"not ")?(o="must not be",i=i.replace(/^not /,"")):o="must be";var s;if(Zf(n," argument"))s="The ".concat(n," ").concat(o," ").concat(Ys(i,"type"));else{var a=Hf(n,".")?"property":"argument";s='The "'.concat(n,'" ').concat(a," ").concat(o," ").concat(Ys(i,"type"))}return s+=". Received type ".concat(typeof e),s},TypeError);ae("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ae("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"});ae("ERR_STREAM_PREMATURE_CLOSE","Premature close");ae("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"});ae("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ae("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ae("ERR_STREAM_WRITE_AFTER_END","write after end");ae("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ae("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError);ae("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");li.codes=du;var Wf=li.codes.ERR_INVALID_OPT_VALUE;function Vf(n,i,e){return n.highWaterMark!=null?n.highWaterMark:i?n[e]:null}function $f(n,i,e,o){var s=Vf(i,o,e);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var a=o?e:"highWaterMark";throw new Wf(a,s)}return Math.floor(s)}return n.objectMode?16:16*1024}var pu={getHighWaterMark:$f},Te={exports:{}};typeof Object.create=="function"?Te.exports=function(i,e){e&&(i.super_=e,i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:Te.exports=function(i,e){if(e){i.super_=e;var o=function(){};o.prototype=e.prototype,i.prototype=new o,i.prototype.constructor=i}};var Kf=Gf;function Gf(n,i){if(Qr("noDeprecation"))return n;var e=!1;function o(){if(!e){if(Qr("throwDeprecation"))throw new Error(i);Qr("traceDeprecation")?console.trace(i):console.warn(i),e=!0}return n.apply(this,arguments)}return o}function Qr(n){try{if(!Oi.localStorage)return!1}catch{return!1}var i=Oi.localStorage[n];return i==null?!1:String(i).toLowerCase()==="true"}var Yr,Js;function _u(){if(Js)return Yr;Js=1,Yr=tt;function n(O){var R=this;this.next=null,this.entry=null,this.finish=function(){_t(R,O)}}var i;tt.WritableState=it;var e={deprecate:Kf},o=iu,s=V.Buffer,a=Oi.Uint8Array||function(){};function h(O){return s.from(O)}function f(O){return s.isBuffer(O)||O instanceof a}var d=cu,c=pu,v=c.getHighWaterMark,w=li.codes,b=w.ERR_INVALID_ARG_TYPE,P=w.ERR_METHOD_NOT_IMPLEMENTED,C=w.ERR_MULTIPLE_CALLBACK,I=w.ERR_STREAM_CANNOT_PIPE,F=w.ERR_STREAM_DESTROYED,A=w.ERR_STREAM_NULL_VALUES,k=w.ERR_STREAM_WRITE_AFTER_END,B=w.ERR_UNKNOWN_ENCODING,$=d.errorOrDestroy;Te.exports(tt,o);function H(){}function it(O,R,q){i=i||ki(),O=O||{},typeof q!="boolean"&&(q=R instanceof i),this.objectMode=!!O.objectMode,q&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=v(this,O,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var et=O.decodeStrings===!1;this.decodeStrings=!et,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ut){At(R,ut)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}it.prototype.getBuffer=function(){for(var R=this.bufferedRequest,q=[];R;)q.push(R),R=R.next;return q},function(){try{Object.defineProperty(it.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var ct;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ct=Function.prototype[Symbol.hasInstance],Object.defineProperty(tt,Symbol.hasInstance,{value:function(R){return ct.call(this,R)?!0:this!==tt?!1:R&&R._writableState instanceof it}})):ct=function(R){return R instanceof this};function tt(O){i=i||ki();var R=this instanceof i;if(!R&&!ct.call(tt,this))return new tt(O);this._writableState=new it(O,this,R),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),o.call(this)}tt.prototype.pipe=function(){$(this,new I)};function J(O,R){var q=new k;$(O,q),X.nextTick(R,q)}function Ht(O,R,q,et){var ut;return q===null?ut=new A:typeof q!="string"&&!R.objectMode&&(ut=new b("chunk",["string","Buffer"],q)),ut?($(O,ut),X.nextTick(et,ut),!1):!0}tt.prototype.write=function(O,R,q){var et=this._writableState,ut=!1,x=!et.objectMode&&f(O);return x&&!s.isBuffer(O)&&(O=h(O)),typeof R=="function"&&(q=R,R=null),x?R="buffer":R||(R=et.defaultEncoding),typeof q!="function"&&(q=H),et.ending?J(this,q):(x||Ht(this,et,O,q))&&(et.pendingcb++,ut=Ot(this,et,x,O,R,q)),ut},tt.prototype.cork=function(){this._writableState.corked++},tt.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&Xt(this,O))},tt.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new B(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(tt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function St(O,R,q){return!O.objectMode&&O.decodeStrings!==!1&&typeof R=="string"&&(R=s.from(R,q)),R}Object.defineProperty(tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ot(O,R,q,et,ut,x){if(!q){var E=St(R,et,ut);et!==E&&(q=!0,ut="buffer",et=E)}var U=R.objectMode?1:et.length;R.length+=U;var K=R.length<R.highWaterMark;if(K||(R.needDrain=!0),R.writing||R.corked){var It=R.lastBufferedRequest;R.lastBufferedRequest={chunk:et,encoding:ut,isBuf:q,callback:x,next:null},It?It.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else Jt(O,R,!1,U,et,ut,x);return K}function Jt(O,R,q,et,ut,x,E){R.writelen=et,R.writecb=E,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new F("write")):q?O._writev(ut,R.onwrite):O._write(ut,x,R.onwrite),R.sync=!1}function Lt(O,R,q,et,ut){--R.pendingcb,q?(X.nextTick(ut,et),X.nextTick(kt,O,R),O._writableState.errorEmitted=!0,$(O,et)):(ut(et),O._writableState.errorEmitted=!0,$(O,et),kt(O,R))}function Gt(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function At(O,R){var q=O._writableState,et=q.sync,ut=q.writecb;if(typeof ut!="function")throw new C;if(Gt(q),R)Lt(O,q,et,R,ut);else{var x=at(q)||O.destroyed;!x&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&Xt(O,q),et?X.nextTick(Dt,O,q,x,ut):Dt(O,q,x,ut)}}function Dt(O,R,q,et){q||Q(O,R),R.pendingcb--,et(),kt(O,R)}function Q(O,R){R.length===0&&R.needDrain&&(R.needDrain=!1,O.emit("drain"))}function Xt(O,R){R.bufferProcessing=!0;var q=R.bufferedRequest;if(O._writev&&q&&q.next){var et=R.bufferedRequestCount,ut=new Array(et),x=R.corkedRequestsFree;x.entry=q;for(var E=0,U=!0;q;)ut[E]=q,q.isBuf||(U=!1),q=q.next,E+=1;ut.allBuffers=U,Jt(O,R,!0,R.length,ut,"",x.finish),R.pendingcb++,R.lastBufferedRequest=null,x.next?(R.corkedRequestsFree=x.next,x.next=null):R.corkedRequestsFree=new n(R),R.bufferedRequestCount=0}else{for(;q;){var K=q.chunk,It=q.encoding,y=q.callback,p=R.objectMode?1:K.length;if(Jt(O,R,!1,p,K,It,y),q=q.next,R.bufferedRequestCount--,R.writing)break}q===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=q,R.bufferProcessing=!1}tt.prototype._write=function(O,R,q){q(new P("_write()"))},tt.prototype._writev=null,tt.prototype.end=function(O,R,q){var et=this._writableState;return typeof O=="function"?(q=O,O=null,R=null):typeof R=="function"&&(q=R,R=null),O!=null&&this.write(O,R),et.corked&&(et.corked=1,this.uncork()),et.ending||Rt(this,et,q),this},Object.defineProperty(tt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function at(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function nt(O,R){O._final(function(q){R.pendingcb--,q&&$(O,q),R.prefinished=!0,O.emit("prefinish"),kt(O,R)})}function xt(O,R){!R.prefinished&&!R.finalCalled&&(typeof O._final=="function"&&!R.destroyed?(R.pendingcb++,R.finalCalled=!0,X.nextTick(nt,O,R)):(R.prefinished=!0,O.emit("prefinish")))}function kt(O,R){var q=at(R);if(q&&(xt(O,R),R.pendingcb===0&&(R.finished=!0,O.emit("finish"),R.autoDestroy))){var et=O._readableState;(!et||et.autoDestroy&&et.endEmitted)&&O.destroy()}return q}function Rt(O,R,q){R.ending=!0,kt(O,R),q&&(R.finished?X.nextTick(q):O.once("finish",q)),R.ended=!0,O.writable=!1}function _t(O,R,q){var et=O.entry;for(O.entry=null;et;){var ut=et.callback;R.pendingcb--,ut(q),et=et.next}R.corkedRequestsFree.next=O}return Object.defineProperty(tt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(R){!this._writableState||(this._writableState.destroyed=R)}}),tt.prototype.destroy=d.destroy,tt.prototype._undestroy=d.undestroy,tt.prototype._destroy=function(O,R){R(O)},Yr}var Jr,Xs;function ki(){if(Xs)return Jr;Xs=1;var n=Object.keys||function(c){var v=[];for(var w in c)v.push(w);return v};Jr=h;var i=mu(),e=_u();Te.exports(h,i);for(var o=n(e.prototype),s=0;s<o.length;s++){var a=o[s];h.prototype[a]||(h.prototype[a]=e.prototype[a])}function h(c){if(!(this instanceof h))return new h(c);i.call(this,c),e.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",f)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function f(){this._writableState.ended||X.nextTick(d,this)}function d(c){c.end()}return Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=v,this._writableState.destroyed=v)}}),Jr}var Xr={},Fn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ta;function Qf(){return ta||(ta=1,function(n,i){var e=V,o=e.Buffer;function s(h,f){for(var d in h)f[d]=h[d]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=e:(s(e,i),i.Buffer=a);function a(h,f,d){return o(h,f,d)}a.prototype=Object.create(o.prototype),s(o,a),a.from=function(h,f,d){if(typeof h=="number")throw new TypeError("Argument must not be a number");return o(h,f,d)},a.alloc=function(h,f,d){if(typeof h!="number")throw new TypeError("Argument must be a number");var c=o(h);return f!==void 0?typeof d=="string"?c.fill(f,d):c.fill(f):c.fill(0),c},a.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return o(h)},a.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(h)}}(Fn,Fn.exports)),Fn.exports}var ea;function ia(){if(ea)return Xr;ea=1;var n=Qf().Buffer,i=n.isEncoding||function(A){switch(A=""+A,A&&A.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function e(A){if(!A)return"utf8";for(var k;;)switch(A){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return A;default:if(k)return;A=(""+A).toLowerCase(),k=!0}}function o(A){var k=e(A);if(typeof k!="string"&&(n.isEncoding===i||!i(A)))throw new Error("Unknown encoding: "+A);return k||A}Xr.StringDecoder=s;function s(A){this.encoding=o(A);var k;switch(this.encoding){case"utf16le":this.text=w,this.end=b,k=4;break;case"utf8":this.fillLast=d,k=4;break;case"base64":this.text=P,this.end=C,k=3;break;default:this.write=I,this.end=F;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(k)}s.prototype.write=function(A){if(A.length===0)return"";var k,B;if(this.lastNeed){if(k=this.fillLast(A),k===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<A.length?k?k+this.text(A,B):this.text(A,B):k||""},s.prototype.end=v,s.prototype.text=c,s.prototype.fillLast=function(A){if(this.lastNeed<=A.length)return A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,A.length),this.lastNeed-=A.length};function a(A){return A<=127?0:A>>5===6?2:A>>4===14?3:A>>3===30?4:A>>6===2?-1:-2}function h(A,k,B){var $=k.length-1;if($<B)return 0;var H=a(k[$]);return H>=0?(H>0&&(A.lastNeed=H-1),H):--$<B||H===-2?0:(H=a(k[$]),H>=0?(H>0&&(A.lastNeed=H-2),H):--$<B||H===-2?0:(H=a(k[$]),H>=0?(H>0&&(H===2?H=0:A.lastNeed=H-3),H):0))}function f(A,k,B){if((k[0]&192)!==128)return A.lastNeed=0,"\uFFFD";if(A.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return A.lastNeed=1,"\uFFFD";if(A.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return A.lastNeed=2,"\uFFFD"}}function d(A){var k=this.lastTotal-this.lastNeed,B=f(this,A);if(B!==void 0)return B;if(this.lastNeed<=A.length)return A.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);A.copy(this.lastChar,k,0,A.length),this.lastNeed-=A.length}function c(A,k){var B=h(this,A,k);if(!this.lastNeed)return A.toString("utf8",k);this.lastTotal=B;var $=A.length-(B-this.lastNeed);return A.copy(this.lastChar,0,$),A.toString("utf8",k,$)}function v(A){var k=A&&A.length?this.write(A):"";return this.lastNeed?k+"\uFFFD":k}function w(A,k){if((A.length-k)%2===0){var B=A.toString("utf16le",k);if(B){var $=B.charCodeAt(B.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=A[A.length-1],A.toString("utf16le",k,A.length-1)}function b(A){var k=A&&A.length?this.write(A):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,B)}return k}function P(A,k){var B=(A.length-k)%3;return B===0?A.toString("base64",k):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=A[A.length-1]:(this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1]),A.toString("base64",k,A.length-B))}function C(A){var k=A&&A.length?this.write(A):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function I(A){return A.toString(this.encoding)}function F(A){return A&&A.length?this.write(A):""}return Xr}var na=li.codes.ERR_STREAM_PREMATURE_CLOSE;function Yf(n){var i=!1;return function(){if(!i){i=!0;for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];n.apply(this,o)}}}function Jf(){}function Xf(n){return n.setHeader&&typeof n.abort=="function"}function gu(n,i,e){if(typeof i=="function")return gu(n,null,i);i||(i={}),e=Yf(e||Jf);var o=i.readable||i.readable!==!1&&n.readable,s=i.writable||i.writable!==!1&&n.writable,a=function(){n.writable||f()},h=n._writableState&&n._writableState.finished,f=function(){s=!1,h=!0,o||e.call(n)},d=n._readableState&&n._readableState.endEmitted,c=function(){o=!1,d=!0,s||e.call(n)},v=function(C){e.call(n,C)},w=function(){var C;if(o&&!d)return(!n._readableState||!n._readableState.ended)&&(C=new na),e.call(n,C);if(s&&!h)return(!n._writableState||!n._writableState.ended)&&(C=new na),e.call(n,C)},b=function(){n.req.on("finish",f)};return Xf(n)?(n.on("complete",f),n.on("abort",w),n.req?b():n.on("request",b)):s&&!n._writableState&&(n.on("end",a),n.on("close",a)),n.on("end",c),n.on("finish",f),i.error!==!1&&n.on("error",v),n.on("close",w),function(){n.removeListener("complete",f),n.removeListener("abort",w),n.removeListener("request",b),n.req&&n.req.removeListener("finish",f),n.removeListener("end",a),n.removeListener("close",a),n.removeListener("finish",f),n.removeListener("end",c),n.removeListener("error",v),n.removeListener("close",w)}}var Fo=gu,to,ra;function tc(){if(ra)return to;ra=1;var n;function i(A,k,B){return k in A?Object.defineProperty(A,k,{value:B,enumerable:!0,configurable:!0,writable:!0}):A[k]=B,A}var e=Fo,o=Symbol("lastResolve"),s=Symbol("lastReject"),a=Symbol("error"),h=Symbol("ended"),f=Symbol("lastPromise"),d=Symbol("handlePromise"),c=Symbol("stream");function v(A,k){return{value:A,done:k}}function w(A){var k=A[o];if(k!==null){var B=A[c].read();B!==null&&(A[f]=null,A[o]=null,A[s]=null,k(v(B,!1)))}}function b(A){X.nextTick(w,A)}function P(A,k){return function(B,$){A.then(function(){if(k[h]){B(v(void 0,!0));return}k[d](B,$)},$)}}var C=Object.getPrototypeOf(function(){}),I=Object.setPrototypeOf((n={get stream(){return this[c]},next:function(){var k=this,B=this[a];if(B!==null)return Promise.reject(B);if(this[h])return Promise.resolve(v(void 0,!0));if(this[c].destroyed)return new Promise(function(ct,tt){X.nextTick(function(){k[a]?tt(k[a]):ct(v(void 0,!0))})});var $=this[f],H;if($)H=new Promise(P($,this));else{var it=this[c].read();if(it!==null)return Promise.resolve(v(it,!1));H=new Promise(this[d])}return this[f]=H,H}},i(n,Symbol.asyncIterator,function(){return this}),i(n,"return",function(){var k=this;return new Promise(function(B,$){k[c].destroy(null,function(H){if(H){$(H);return}B(v(void 0,!0))})})}),n),C),F=function(k){var B,$=Object.create(I,(B={},i(B,c,{value:k,writable:!0}),i(B,o,{value:null,writable:!0}),i(B,s,{value:null,writable:!0}),i(B,a,{value:null,writable:!0}),i(B,h,{value:k._readableState.endEmitted,writable:!0}),i(B,d,{value:function(it,ct){var tt=$[c].read();tt?($[f]=null,$[o]=null,$[s]=null,it(v(tt,!1))):($[o]=it,$[s]=ct)},writable:!0}),B));return $[f]=null,e(k,function(H){if(H&&H.code!=="ERR_STREAM_PREMATURE_CLOSE"){var it=$[s];it!==null&&($[f]=null,$[o]=null,$[s]=null,it(H)),$[a]=H;return}var ct=$[o];ct!==null&&($[f]=null,$[o]=null,$[s]=null,ct(v(void 0,!0))),$[h]=!0}),k.on("readable",b.bind(null,$)),$};return to=F,to}var eo,oa;function ec(){return oa||(oa=1,eo=function(){throw new Error("Readable.from is not available in the browser")}),eo}var io,sa;function mu(){if(sa)return io;sa=1,io=J;var n;J.ReadableState=tt,dn.EventEmitter;var i=function(E,U){return E.listeners(U).length},e=iu,o=V.Buffer,s=Oi.Uint8Array||function(){};function a(x){return o.from(x)}function h(x){return o.isBuffer(x)||x instanceof s}var f=fu,d;f&&f.debuglog?d=f.debuglog("stream"):d=function(){};var c=Nf(),v=cu,w=pu,b=w.getHighWaterMark,P=li.codes,C=P.ERR_INVALID_ARG_TYPE,I=P.ERR_STREAM_PUSH_AFTER_EOF,F=P.ERR_METHOD_NOT_IMPLEMENTED,A=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,k,B,$;Te.exports(J,e);var H=v.errorOrDestroy,it=["error","close","destroy","pause","resume"];function ct(x,E,U){if(typeof x.prependListener=="function")return x.prependListener(E,U);!x._events||!x._events[E]?x.on(E,U):Array.isArray(x._events[E])?x._events[E].unshift(U):x._events[E]=[U,x._events[E]]}function tt(x,E,U){n=n||ki(),x=x||{},typeof U!="boolean"&&(U=E instanceof n),this.objectMode=!!x.objectMode,U&&(this.objectMode=this.objectMode||!!x.readableObjectMode),this.highWaterMark=b(this,x,"readableHighWaterMark",U),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=x.emitClose!==!1,this.autoDestroy=!!x.autoDestroy,this.destroyed=!1,this.defaultEncoding=x.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,x.encoding&&(k||(k=ia().StringDecoder),this.decoder=new k(x.encoding),this.encoding=x.encoding)}function J(x){if(n=n||ki(),!(this instanceof J))return new J(x);var E=this instanceof n;this._readableState=new tt(x,this,E),this.readable=!0,x&&(typeof x.read=="function"&&(this._read=x.read),typeof x.destroy=="function"&&(this._destroy=x.destroy)),e.call(this)}Object.defineProperty(J.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(E){!this._readableState||(this._readableState.destroyed=E)}}),J.prototype.destroy=v.destroy,J.prototype._undestroy=v.undestroy,J.prototype._destroy=function(x,E){E(x)},J.prototype.push=function(x,E){var U=this._readableState,K;return U.objectMode?K=!0:typeof x=="string"&&(E=E||U.defaultEncoding,E!==U.encoding&&(x=o.from(x,E),E=""),K=!0),Ht(this,x,E,!1,K)},J.prototype.unshift=function(x){return Ht(this,x,null,!0,!1)};function Ht(x,E,U,K,It){d("readableAddChunk",E);var y=x._readableState;if(E===null)y.reading=!1,At(x,y);else{var p;if(It||(p=Ot(y,E)),p)H(x,p);else if(y.objectMode||E&&E.length>0)if(typeof E!="string"&&!y.objectMode&&Object.getPrototypeOf(E)!==o.prototype&&(E=a(E)),K)y.endEmitted?H(x,new A):St(x,y,E,!0);else if(y.ended)H(x,new I);else{if(y.destroyed)return!1;y.reading=!1,y.decoder&&!U?(E=y.decoder.write(E),y.objectMode||E.length!==0?St(x,y,E,!1):Xt(x,y)):St(x,y,E,!1)}else K||(y.reading=!1,Xt(x,y))}return!y.ended&&(y.length<y.highWaterMark||y.length===0)}function St(x,E,U,K){E.flowing&&E.length===0&&!E.sync?(E.awaitDrain=0,x.emit("data",U)):(E.length+=E.objectMode?1:U.length,K?E.buffer.unshift(U):E.buffer.push(U),E.needReadable&&Dt(x)),Xt(x,E)}function Ot(x,E){var U;return!h(E)&&typeof E!="string"&&E!==void 0&&!x.objectMode&&(U=new C("chunk",["string","Buffer","Uint8Array"],E)),U}J.prototype.isPaused=function(){return this._readableState.flowing===!1},J.prototype.setEncoding=function(x){k||(k=ia().StringDecoder);var E=new k(x);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,K="";U!==null;)K+=E.write(U.data),U=U.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};var Jt=1073741824;function Lt(x){return x>=Jt?x=Jt:(x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++),x}function Gt(x,E){return x<=0||E.length===0&&E.ended?0:E.objectMode?1:x!==x?E.flowing&&E.length?E.buffer.head.data.length:E.length:(x>E.highWaterMark&&(E.highWaterMark=Lt(x)),x<=E.length?x:E.ended?E.length:(E.needReadable=!0,0))}J.prototype.read=function(x){d("read",x),x=parseInt(x,10);var E=this._readableState,U=x;if(x!==0&&(E.emittedReadable=!1),x===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return d("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?q(this):Dt(this),null;if(x=Gt(x,E),x===0&&E.ended)return E.length===0&&q(this),null;var K=E.needReadable;d("need readable",K),(E.length===0||E.length-x<E.highWaterMark)&&(K=!0,d("length less than watermark",K)),E.ended||E.reading?(K=!1,d("reading or ended",K)):K&&(d("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(x=Gt(U,E)));var It;return x>0?It=R(x,E):It=null,It===null?(E.needReadable=E.length<=E.highWaterMark,x=0):(E.length-=x,E.awaitDrain=0),E.length===0&&(E.ended||(E.needReadable=!0),U!==x&&E.ended&&q(this)),It!==null&&this.emit("data",It),It};function At(x,E){if(d("onEofChunk"),!E.ended){if(E.decoder){var U=E.decoder.end();U&&U.length&&(E.buffer.push(U),E.length+=E.objectMode?1:U.length)}E.ended=!0,E.sync?Dt(x):(E.needReadable=!1,E.emittedReadable||(E.emittedReadable=!0,Q(x)))}}function Dt(x){var E=x._readableState;d("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(d("emitReadable",E.flowing),E.emittedReadable=!0,X.nextTick(Q,x))}function Q(x){var E=x._readableState;d("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&(E.length||E.ended)&&(x.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,O(x)}function Xt(x,E){E.readingMore||(E.readingMore=!0,X.nextTick(at,x,E))}function at(x,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){var U=E.length;if(d("maybeReadMore read 0"),x.read(0),U===E.length)break}E.readingMore=!1}J.prototype._read=function(x){H(this,new F("_read()"))},J.prototype.pipe=function(x,E){var U=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=x;break;case 1:K.pipes=[K.pipes,x];break;default:K.pipes.push(x);break}K.pipesCount+=1,d("pipe count=%d opts=%j",K.pipesCount,E);var It=(!E||E.end!==!1)&&x!==X.stdout&&x!==X.stderr,y=It?g:Ct;K.endEmitted?X.nextTick(y):U.once("end",y),x.on("unpipe",p);function p(yt,ie){d("onunpipe"),yt===U&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,j())}function g(){d("onend"),x.end()}var S=nt(U);x.on("drain",S);var M=!1;function j(){d("cleanup"),x.removeListener("close",vt),x.removeListener("finish",Et),x.removeListener("drain",S),x.removeListener("error",lt),x.removeListener("unpipe",p),U.removeListener("end",g),U.removeListener("end",Ct),U.removeListener("data",W),M=!0,K.awaitDrain&&(!x._writableState||x._writableState.needDrain)&&S()}U.on("data",W);function W(yt){d("ondata");var ie=x.write(yt);d("dest.write",ie),ie===!1&&((K.pipesCount===1&&K.pipes===x||K.pipesCount>1&&ut(K.pipes,x)!==-1)&&!M&&(d("false write response, pause",K.awaitDrain),K.awaitDrain++),U.pause())}function lt(yt){d("onerror",yt),Ct(),x.removeListener("error",lt),i(x,"error")===0&&H(x,yt)}ct(x,"error",lt);function vt(){x.removeListener("finish",Et),Ct()}x.once("close",vt);function Et(){d("onfinish"),x.removeListener("close",vt),Ct()}x.once("finish",Et);function Ct(){d("unpipe"),U.unpipe(x)}return x.emit("pipe",U),K.flowing||(d("pipe resume"),U.resume()),x};function nt(x){return function(){var U=x._readableState;d("pipeOnDrain",U.awaitDrain),U.awaitDrain&&U.awaitDrain--,U.awaitDrain===0&&i(x,"data")&&(U.flowing=!0,O(x))}}J.prototype.unpipe=function(x){var E=this._readableState,U={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return x&&x!==E.pipes?this:(x||(x=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,x&&x.emit("unpipe",this,U),this);if(!x){var K=E.pipes,It=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var y=0;y<It;y++)K[y].emit("unpipe",this,{hasUnpiped:!1});return this}var p=ut(E.pipes,x);return p===-1?this:(E.pipes.splice(p,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),x.emit("unpipe",this,U),this)},J.prototype.on=function(x,E){var U=e.prototype.on.call(this,x,E),K=this._readableState;return x==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):x==="readable"&&!K.endEmitted&&!K.readableListening&&(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,d("on readable",K.length,K.reading),K.length?Dt(this):K.reading||X.nextTick(kt,this)),U},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(x,E){var U=e.prototype.removeListener.call(this,x,E);return x==="readable"&&X.nextTick(xt,this),U},J.prototype.removeAllListeners=function(x){var E=e.prototype.removeAllListeners.apply(this,arguments);return(x==="readable"||x===void 0)&&X.nextTick(xt,this),E};function xt(x){var E=x._readableState;E.readableListening=x.listenerCount("readable")>0,E.resumeScheduled&&!E.paused?E.flowing=!0:x.listenerCount("data")>0&&x.resume()}function kt(x){d("readable nexttick read 0"),x.read(0)}J.prototype.resume=function(){var x=this._readableState;return x.flowing||(d("resume"),x.flowing=!x.readableListening,Rt(this,x)),x.paused=!1,this};function Rt(x,E){E.resumeScheduled||(E.resumeScheduled=!0,X.nextTick(_t,x,E))}function _t(x,E){d("resume",E.reading),E.reading||x.read(0),E.resumeScheduled=!1,x.emit("resume"),O(x),E.flowing&&!E.reading&&x.read(0)}J.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(x){var E=x._readableState;for(d("flow",E.flowing);E.flowing&&x.read()!==null;);}J.prototype.wrap=function(x){var E=this,U=this._readableState,K=!1;x.on("end",function(){if(d("wrapped end"),U.decoder&&!U.ended){var p=U.decoder.end();p&&p.length&&E.push(p)}E.push(null)}),x.on("data",function(p){if(d("wrapped data"),U.decoder&&(p=U.decoder.write(p)),!(U.objectMode&&p==null)&&!(!U.objectMode&&(!p||!p.length))){var g=E.push(p);g||(K=!0,x.pause())}});for(var It in x)this[It]===void 0&&typeof x[It]=="function"&&(this[It]=function(g){return function(){return x[g].apply(x,arguments)}}(It));for(var y=0;y<it.length;y++)x.on(it[y],this.emit.bind(this,it[y]));return this._read=function(p){d("wrapped _read",p),K&&(K=!1,x.resume())},this},typeof Symbol=="function"&&(J.prototype[Symbol.asyncIterator]=function(){return B===void 0&&(B=tc()),B(this)}),Object.defineProperty(J.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(J.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(J.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),J._fromList=R,Object.defineProperty(J.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function R(x,E){if(E.length===0)return null;var U;return E.objectMode?U=E.buffer.shift():!x||x>=E.length?(E.decoder?U=E.buffer.join(""):E.buffer.length===1?U=E.buffer.first():U=E.buffer.concat(E.length),E.buffer.clear()):U=E.buffer.consume(x,E.decoder),U}function q(x){var E=x._readableState;d("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,X.nextTick(et,E,x))}function et(x,E){if(d("endReadableNT",x.endEmitted,x.length),!x.endEmitted&&x.length===0&&(x.endEmitted=!0,E.readable=!1,E.emit("end"),x.autoDestroy)){var U=E._writableState;(!U||U.autoDestroy&&U.finished)&&E.destroy()}}typeof Symbol=="function"&&(J.from=function(x,E){return $===void 0&&($=ec()),$(J,x,E)});function ut(x,E){for(var U=0,K=x.length;U<K;U++)if(x[U]===E)return U;return-1}return io}var vu=ze,hr=li.codes,ic=hr.ERR_METHOD_NOT_IMPLEMENTED,nc=hr.ERR_MULTIPLE_CALLBACK,rc=hr.ERR_TRANSFORM_ALREADY_TRANSFORMING,oc=hr.ERR_TRANSFORM_WITH_LENGTH_0,lr=ki();Te.exports(ze,lr);function sc(n,i){var e=this._transformState;e.transforming=!1;var o=e.writecb;if(o===null)return this.emit("error",new nc);e.writechunk=null,e.writecb=null,i!=null&&this.push(i),o(n);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function ze(n){if(!(this instanceof ze))return new ze(n);lr.call(this,n),this._transformState={afterTransform:sc.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",ac)}function ac(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(i,e){aa(n,i,e)}):aa(this,null,null)}ze.prototype.push=function(n,i){return this._transformState.needTransform=!1,lr.prototype.push.call(this,n,i)};ze.prototype._transform=function(n,i,e){e(new ic("_transform()"))};ze.prototype._write=function(n,i,e){var o=this._transformState;if(o.writecb=e,o.writechunk=n,o.writeencoding=i,!o.transforming){var s=this._readableState;(o.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};ze.prototype._read=function(n){var i=this._transformState;i.writechunk!==null&&!i.transforming?(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform)):i.needTransform=!0};ze.prototype._destroy=function(n,i){lr.prototype._destroy.call(this,n,function(e){i(e)})};function aa(n,i,e){if(i)return n.emit("error",i);if(e!=null&&n.push(e),n._writableState.length)throw new oc;if(n._transformState.transforming)throw new rc;return n.push(null)}var uc=un,yu=vu;Te.exports(un,yu);function un(n){if(!(this instanceof un))return new un(n);yu.call(this,n)}un.prototype._transform=function(n,i,e){e(null,n)};var no;function hc(n){var i=!1;return function(){i||(i=!0,n.apply(void 0,arguments))}}var wu=li.codes,lc=wu.ERR_MISSING_ARGS,fc=wu.ERR_STREAM_DESTROYED;function ua(n){if(n)throw n}function cc(n){return n.setHeader&&typeof n.abort=="function"}function dc(n,i,e,o){o=hc(o);var s=!1;n.on("close",function(){s=!0}),no===void 0&&(no=Fo),no(n,{readable:i,writable:e},function(h){if(h)return o(h);s=!0,o()});var a=!1;return function(h){if(!s&&!a){if(a=!0,cc(n))return n.abort();if(typeof n.destroy=="function")return n.destroy();o(h||new fc("pipe"))}}}function ha(n){n()}function pc(n,i){return n.pipe(i)}function _c(n){return!n.length||typeof n[n.length-1]!="function"?ua:n.pop()}function gc(){for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];var o=_c(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new lc("streams");var s,a=i.map(function(h,f){var d=f<i.length-1,c=f>0;return dc(h,d,c,function(v){s||(s=v),v&&a.forEach(ha),!d&&(a.forEach(ha),o(s))})});return i.reduce(pc)}var mc=gc;(function(n,i){i=n.exports=mu(),i.Stream=i,i.Readable=i,i.Writable=_u(),i.Duplex=ki(),i.Transform=vu,i.PassThrough=uc,i.finished=Fo,i.pipeline=mc})(Ne,Ne.exports);const vc=Bo,yc=Ne.exports.Readable,wc={objectMode:!0},bc={clean:!0};function Ve(n){if(!(this instanceof Ve))return new Ve(n);this.options=n||{},this.options=vc(bc,n),this._inflights=new Map}Ve.prototype.put=function(n,i){return this._inflights.set(n.messageId,n),i&&i(),this};Ve.prototype.createStream=function(){const n=new yc(wc),i=[];let e=!1,o=0;return this._inflights.forEach(function(s,a){i.push(s)}),n._read=function(){!e&&o<i.length?this.push(i[o++]):this.push(null)},n.destroy=function(){if(e)return;const s=this;e=!0,setTimeout(function(){s.emit("close")},0)},n};Ve.prototype.del=function(n,i){return n=this._inflights.get(n.messageId),n?(this._inflights.delete(n.messageId),i(null,n)):i&&i(new Error("missing packet")),this};Ve.prototype.get=function(n,i){return n=this._inflights.get(n.messageId),n?i(null,n):i&&i(new Error("missing packet")),this};Ve.prototype.close=function(n){this.options.clean&&(this._inflights=null),n&&n()};var bu=Ve;function Ri(n){if(!(this instanceof Ri))return new Ri(n);this.aliasToTopic={},this.max=n}Ri.prototype.put=function(n,i){return i===0||i>this.max?!1:(this.aliasToTopic[i]=n,this.length=Object.keys(this.aliasToTopic).length,!0)};Ri.prototype.getTopicByAlias=function(n){return this.aliasToTopic[n]};Ri.prototype.clear=function(){this.aliasToTopic={}};var xc=Ri,ro,la;function Ec(){return la||(la=1,ro=function(n){n.prototype[Symbol.iterator]=function*(){for(let i=this.head;i;i=i.next)yield i.value}}),ro}var Sc=bt;bt.Node=ai;bt.create=bt;function bt(n){var i=this;if(i instanceof bt||(i=new bt),i.tail=null,i.head=null,i.length=0,n&&typeof n.forEach=="function")n.forEach(function(s){i.push(s)});else if(arguments.length>0)for(var e=0,o=arguments.length;e<o;e++)i.push(arguments[e]);return i}bt.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var i=n.next,e=n.prev;return i&&(i.prev=e),e&&(e.next=i),n===this.head&&(this.head=i),n===this.tail&&(this.tail=e),n.list.length--,n.next=null,n.prev=null,n.list=null,i};bt.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var i=this.head;n.list=this,n.next=i,i&&(i.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};bt.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var i=this.tail;n.list=this,n.prev=i,i&&(i.next=n),this.tail=n,this.head||(this.head=n),this.length++}};bt.prototype.push=function(){for(var n=0,i=arguments.length;n<i;n++)Pc(this,arguments[n]);return this.length};bt.prototype.unshift=function(){for(var n=0,i=arguments.length;n<i;n++)Lc(this,arguments[n]);return this.length};bt.prototype.pop=function(){if(!!this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};bt.prototype.shift=function(){if(!!this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};bt.prototype.forEach=function(n,i){i=i||this;for(var e=this.head,o=0;e!==null;o++)n.call(i,e.value,o,this),e=e.next};bt.prototype.forEachReverse=function(n,i){i=i||this;for(var e=this.tail,o=this.length-1;e!==null;o--)n.call(i,e.value,o,this),e=e.prev};bt.prototype.get=function(n){for(var i=0,e=this.head;e!==null&&i<n;i++)e=e.next;if(i===n&&e!==null)return e.value};bt.prototype.getReverse=function(n){for(var i=0,e=this.tail;e!==null&&i<n;i++)e=e.prev;if(i===n&&e!==null)return e.value};bt.prototype.map=function(n,i){i=i||this;for(var e=new bt,o=this.head;o!==null;)e.push(n.call(i,o.value,this)),o=o.next;return e};bt.prototype.mapReverse=function(n,i){i=i||this;for(var e=new bt,o=this.tail;o!==null;)e.push(n.call(i,o.value,this)),o=o.prev;return e};bt.prototype.reduce=function(n,i){var e,o=this.head;if(arguments.length>1)e=i;else if(this.head)o=this.head.next,e=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;o!==null;s++)e=n(e,o.value,s),o=o.next;return e};bt.prototype.reduceReverse=function(n,i){var e,o=this.tail;if(arguments.length>1)e=i;else if(this.tail)o=this.tail.prev,e=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;o!==null;s--)e=n(e,o.value,s),o=o.prev;return e};bt.prototype.toArray=function(){for(var n=new Array(this.length),i=0,e=this.head;e!==null;i++)n[i]=e.value,e=e.next;return n};bt.prototype.toArrayReverse=function(){for(var n=new Array(this.length),i=0,e=this.tail;e!==null;i++)n[i]=e.value,e=e.prev;return n};bt.prototype.slice=function(n,i){i=i||this.length,i<0&&(i+=this.length),n=n||0,n<0&&(n+=this.length);var e=new bt;if(i<n||i<0)return e;n<0&&(n=0),i>this.length&&(i=this.length);for(var o=0,s=this.head;s!==null&&o<n;o++)s=s.next;for(;s!==null&&o<i;o++,s=s.next)e.push(s.value);return e};bt.prototype.sliceReverse=function(n,i){i=i||this.length,i<0&&(i+=this.length),n=n||0,n<0&&(n+=this.length);var e=new bt;if(i<n||i<0)return e;n<0&&(n=0),i>this.length&&(i=this.length);for(var o=this.length,s=this.tail;s!==null&&o>i;o--)s=s.prev;for(;s!==null&&o>n;o--,s=s.prev)e.push(s.value);return e};bt.prototype.splice=function(n,i,...e){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var o=0,s=this.head;s!==null&&o<n;o++)s=s.next;for(var a=[],o=0;s&&o<i;o++)a.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var o=0;o<e.length;o++)s=Tc(this,s,e[o]);return a};bt.prototype.reverse=function(){for(var n=this.head,i=this.tail,e=n;e!==null;e=e.prev){var o=e.prev;e.prev=e.next,e.next=o}return this.head=i,this.tail=n,this};function Tc(n,i,e){var o=i===n.head?new ai(e,null,i,n):new ai(e,i,i.next,n);return o.next===null&&(n.tail=o),o.prev===null&&(n.head=o),n.length++,o}function Pc(n,i){n.tail=new ai(i,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function Lc(n,i){n.head=new ai(i,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function ai(n,i,e,o){if(!(this instanceof ai))return new ai(n,i,e,o);this.list=o,this.value=n,i?(i.next=this,this.prev=i):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}try{Ec()(bt)}catch{}const Ac=Sc,ri=Symbol("max"),ke=Symbol("length"),bi=Symbol("lengthCalculator"),on=Symbol("allowStale"),si=Symbol("maxAge"),Oe=Symbol("dispose"),fa=Symbol("noDisposeOnSet"),qt=Symbol("lruList"),fe=Symbol("cache"),xu=Symbol("updateAgeOnGet"),oo=()=>1;class Ic{constructor(i){if(typeof i=="number"&&(i={max:i}),i||(i={}),i.max&&(typeof i.max!="number"||i.max<0))throw new TypeError("max must be a non-negative number");this[ri]=i.max||1/0;const e=i.length||oo;if(this[bi]=typeof e!="function"?oo:e,this[on]=i.stale||!1,i.maxAge&&typeof i.maxAge!="number")throw new TypeError("maxAge must be a number");this[si]=i.maxAge||0,this[Oe]=i.dispose,this[fa]=i.noDisposeOnSet||!1,this[xu]=i.updateAgeOnGet||!1,this.reset()}set max(i){if(typeof i!="number"||i<0)throw new TypeError("max must be a non-negative number");this[ri]=i||1/0,Qi(this)}get max(){return this[ri]}set allowStale(i){this[on]=!!i}get allowStale(){return this[on]}set maxAge(i){if(typeof i!="number")throw new TypeError("maxAge must be a non-negative number");this[si]=i,Qi(this)}get maxAge(){return this[si]}set lengthCalculator(i){typeof i!="function"&&(i=oo),i!==this[bi]&&(this[bi]=i,this[ke]=0,this[qt].forEach(e=>{e.length=this[bi](e.value,e.key),this[ke]+=e.length})),Qi(this)}get lengthCalculator(){return this[bi]}get length(){return this[ke]}get itemCount(){return this[qt].length}rforEach(i,e){e=e||this;for(let o=this[qt].tail;o!==null;){const s=o.prev;ca(this,i,o,e),o=s}}forEach(i,e){e=e||this;for(let o=this[qt].head;o!==null;){const s=o.next;ca(this,i,o,e),o=s}}keys(){return this[qt].toArray().map(i=>i.key)}values(){return this[qt].toArray().map(i=>i.value)}reset(){this[Oe]&&this[qt]&&this[qt].length&&this[qt].forEach(i=>this[Oe](i.key,i.value)),this[fe]=new Map,this[qt]=new Ac,this[ke]=0}dump(){return this[qt].map(i=>Yn(this,i)?!1:{k:i.key,v:i.value,e:i.now+(i.maxAge||0)}).toArray().filter(i=>i)}dumpLru(){return this[qt]}set(i,e,o){if(o=o||this[si],o&&typeof o!="number")throw new TypeError("maxAge must be a number");const s=o?Date.now():0,a=this[bi](e,i);if(this[fe].has(i)){if(a>this[ri])return Ii(this,this[fe].get(i)),!1;const d=this[fe].get(i).value;return this[Oe]&&(this[fa]||this[Oe](i,d.value)),d.now=s,d.maxAge=o,d.value=e,this[ke]+=a-d.length,d.length=a,this.get(i),Qi(this),!0}const h=new Cc(i,e,a,s,o);return h.length>this[ri]?(this[Oe]&&this[Oe](i,e),!1):(this[ke]+=h.length,this[qt].unshift(h),this[fe].set(i,this[qt].head),Qi(this),!0)}has(i){if(!this[fe].has(i))return!1;const e=this[fe].get(i).value;return!Yn(this,e)}get(i){return so(this,i,!0)}peek(i){return so(this,i,!1)}pop(){const i=this[qt].tail;return i?(Ii(this,i),i.value):null}del(i){Ii(this,this[fe].get(i))}load(i){this.reset();const e=Date.now();for(let o=i.length-1;o>=0;o--){const s=i[o],a=s.e||0;if(a===0)this.set(s.k,s.v);else{const h=a-e;h>0&&this.set(s.k,s.v,h)}}}prune(){this[fe].forEach((i,e)=>so(this,e,!1))}}const so=(n,i,e)=>{const o=n[fe].get(i);if(o){const s=o.value;if(Yn(n,s)){if(Ii(n,o),!n[on])return}else e&&(n[xu]&&(o.value.now=Date.now()),n[qt].unshiftNode(o));return s.value}},Yn=(n,i)=>{if(!i||!i.maxAge&&!n[si])return!1;const e=Date.now()-i.now;return i.maxAge?e>i.maxAge:n[si]&&e>n[si]},Qi=n=>{if(n[ke]>n[ri])for(let i=n[qt].tail;n[ke]>n[ri]&&i!==null;){const e=i.prev;Ii(n,i),i=e}},Ii=(n,i)=>{if(i){const e=i.value;n[Oe]&&n[Oe](e.key,e.value),n[ke]-=e.length,n[fe].delete(e.key),n[qt].removeNode(i)}};class Cc{constructor(i,e,o,s,a){this.key=i,this.value=e,this.length=o,this.now=s,this.maxAge=a||0}}const ca=(n,i,e,o)=>{let s=e.value;Yn(n,s)&&(Ii(n,e),n[on]||(s=void 0)),s&&i.call(o,s.value,s.key,n)};var Bc=Ic,Eu={},Mc=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),$t=function(){function n(i){i===void 0&&(i=n.NORMAL),this.iteratorType=i}return n.NORMAL=!1,n.REVERSE=!0,n}(),pn=function(){function n(){this.length=0}return n.prototype.size=function(){return this.length},n.prototype.empty=function(){return this.length===0},n}(),Uo=function(n){Mc(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i}(pn),Oc=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),kc=function(n){Oc(i,n);function i(e){e===void 0&&(e=[]);var o=n.call(this)||this;return o.stack=[],e.forEach(function(s){return o.push(s)}),o}return i.prototype.clear=function(){this.length=0,this.stack.length=0},i.prototype.push=function(e){this.stack.push(e),this.length+=1},i.prototype.pop=function(){this.stack.pop(),this.length>0&&(this.length-=1)},i.prototype.top=function(){return this.stack[this.length-1]},i}(pn);const Rc=kc;var Dc=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Nc=function(n){Dc(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i}(Uo);const fr=Nc;function Wt(n,i,e){if(n<i||n>e)throw new RangeError}var zc=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Su=function(n){zc(i,n);function i(e,o,s,a,h){var f=n.call(this,h)||this;return f.node=e,f.size=o,f.getElementByPos=s,f.setElementByPos=a,f.iteratorType===$t.NORMAL?(f.pre=function(){if(this.node===0)throw new RangeError("Deque iterator access denied!");return this.node-=1,this},f.next=function(){if(this.node===this.size())throw new RangeError("Deque Iterator access denied!");return this.node+=1,this}):(f.pre=function(){if(this.node===this.size()-1)throw new RangeError("Deque iterator access denied!");return this.node+=1,this},f.next=function(){if(this.node===-1)throw new RangeError("Deque iterator access denied!");return this.node-=1,this}),f}return Object.defineProperty(i.prototype,"pointer",{get:function(){return Wt(this.node,0,this.size()-1),this.getElementByPos(this.node)},set:function(e){Wt(this.node,0,this.size()-1),this.setElementByPos(this.node,e)},enumerable:!1,configurable:!0}),i.prototype.equals=function(e){return this.node===e.node},i}($t),Tu=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Fc=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(v){return d([c,v])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(n,e)}catch(v){c=[6,v],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Uc=globalThis&&globalThis.__read||function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var o=e.call(n),s,a=[],h;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(h)throw h.error}}return a},jc=globalThis&&globalThis.__spreadArray||function(n,i,e){if(e||arguments.length===2)for(var o=0,s=i.length,a;o<s;o++)(a||!(o in i))&&(a||(a=Array.prototype.slice.call(i,0,o)),a[o]=i[o]);return n.concat(a||Array.prototype.slice.call(i))},Ei=function(n){Tu(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.copy=function(){return new i(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)},i}(Su),qc=function(n){Tu(i,n);function i(e,o){e===void 0&&(e=[]),o===void 0&&(o=1<<12);var s=n.call(this)||this;s.first=0,s.curFirst=0,s.last=0,s.curLast=0,s.bucketNum=0,s.map=[];var a;if("size"in e)typeof e.size=="number"?a=e.size:a=e.size();else if("length"in e)a=e.length;else throw new RangeError("Can't get container's size!");s.bucketSize=o,s.bucketNum=Math.max(Math.ceil(a/s.bucketSize),1);for(var h=0;h<s.bucketNum;++h)s.map.push(new Array(s.bucketSize));var f=Math.ceil(a/s.bucketSize);return s.first=s.last=(s.bucketNum>>1)-(f>>1),s.curFirst=s.curLast=s.bucketSize-a%s.bucketSize>>1,e.forEach(function(d){return s.pushBack(d)}),s.size=s.size.bind(s),s.getElementByPos=s.getElementByPos.bind(s),s.setElementByPos=s.setElementByPos.bind(s),s}return i.prototype.reAllocate=function(){for(var e=[],o=Math.max(this.bucketNum>>1,1),s=0;s<o;++s)e[s]=new Array(this.bucketSize);for(var s=this.first;s<this.bucketNum;++s)e[e.length]=this.map[s];for(var s=0;s<this.last;++s)e[e.length]=this.map[s];e[e.length]=jc([],Uc(this.map[this.last]),!1),this.first=o,this.last=e.length-1;for(var s=0;s<o;++s)e[e.length]=new Array(this.bucketSize);this.map=e,this.bucketNum=e.length},i.prototype.getElementIndex=function(e){var o=this.curFirst+e+1,s=o%this.bucketSize,a=s-1,h=this.first+(o-s)/this.bucketSize;return s===0&&(h-=1),h%=this.bucketNum,a<0&&(a+=this.bucketSize),{curNodeBucketIndex:h,curNodePointerIndex:a}},i.prototype.clear=function(){this.map=[[]],this.bucketNum=1,this.first=this.last=this.length=0,this.curFirst=this.curLast=this.bucketSize>>1},i.prototype.front=function(){return this.map[this.first][this.curFirst]},i.prototype.back=function(){return this.map[this.last][this.curLast]},i.prototype.begin=function(){return new Ei(0,this.size,this.getElementByPos,this.setElementByPos)},i.prototype.end=function(){return new Ei(this.length,this.size,this.getElementByPos,this.setElementByPos)},i.prototype.rBegin=function(){return new Ei(this.length-1,this.size,this.getElementByPos,this.setElementByPos,$t.REVERSE)},i.prototype.rEnd=function(){return new Ei(-1,this.size,this.getElementByPos,this.setElementByPos,$t.REVERSE)},i.prototype.pushBack=function(e){this.length&&(this.curLast<this.bucketSize-1?this.curLast+=1:this.last<this.bucketNum-1?(this.last+=1,this.curLast=0):(this.last=0,this.curLast=0),this.last===this.first&&this.curLast===this.curFirst&&this.reAllocate()),this.length+=1,this.map[this.last][this.curLast]=e},i.prototype.popBack=function(){!this.length||(this.map[this.last][this.curLast]=void 0,this.length!==1&&(this.curLast>0?this.curLast-=1:this.last>0?(this.last-=1,this.curLast=this.bucketSize-1):(this.last=this.bucketNum-1,this.curLast=this.bucketSize-1)),this.length-=1)},i.prototype.pushFront=function(e){this.length&&(this.curFirst>0?this.curFirst-=1:this.first>0?(this.first-=1,this.curFirst=this.bucketSize-1):(this.first=this.bucketNum-1,this.curFirst=this.bucketSize-1),this.first===this.last&&this.curFirst===this.curLast&&this.reAllocate()),this.length+=1,this.map[this.first][this.curFirst]=e},i.prototype.popFront=function(){!this.length||(this.map[this.first][this.curFirst]=void 0,this.length!==1&&(this.curFirst<this.bucketSize-1?this.curFirst+=1:this.first<this.bucketNum-1?(this.first+=1,this.curFirst=0):(this.first=0,this.curFirst=0)),this.length-=1)},i.prototype.forEach=function(e){for(var o=0;o<this.length;++o)e(this.getElementByPos(o),o)},i.prototype.getElementByPos=function(e){Wt(e,0,this.length-1);var o=this.getElementIndex(e),s=o.curNodeBucketIndex,a=o.curNodePointerIndex;return this.map[s][a]},i.prototype.setElementByPos=function(e,o){Wt(e,0,this.length-1);var s=this.getElementIndex(e),a=s.curNodeBucketIndex,h=s.curNodePointerIndex;this.map[a][h]=o},i.prototype.insert=function(e,o,s){if(s===void 0&&(s=1),Wt(e,0,this.length),e===0)for(;s--;)this.pushFront(o);else if(e===this.length)for(;s--;)this.pushBack(o);else{for(var a=[],h=e;h<this.length;++h)a.push(this.getElementByPos(h));this.cut(e-1);for(var h=0;h<s;++h)this.pushBack(o);for(var h=0;h<a.length;++h)this.pushBack(a[h])}},i.prototype.cut=function(e){if(e<0){this.clear();return}var o=this.getElementIndex(e),s=o.curNodeBucketIndex,a=o.curNodePointerIndex;this.last=s,this.curLast=a,this.length=e+1},i.prototype.eraseElementByPos=function(e){var o=this;if(Wt(e,0,this.length-1),e===0)this.popFront();else if(e===this.length-1)this.popBack();else{for(var s=[],a=e+1;a<this.length;++a)s.push(this.getElementByPos(a));this.cut(e),this.popBack(),s.forEach(function(h){return o.pushBack(h)})}},i.prototype.eraseElementByValue=function(e){if(!!this.length){for(var o=[],s=0;s<this.length;++s){var a=this.getElementByPos(s);a!==e&&o.push(a)}for(var h=o.length,s=0;s<h;++s)this.setElementByPos(s,o[s]);this.cut(h-1)}},i.prototype.eraseElementByIterator=function(e){var o=e.node;return this.eraseElementByPos(o),e=e.next(),e},i.prototype.find=function(e){for(var o=0;o<this.length;++o)if(this.getElementByPos(o)===e)return new Ei(o,this.size,this.getElementByPos,this.setElementByPos);return this.end()},i.prototype.reverse=function(){for(var e=0,o=this.length-1;e<o;){var s=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(o)),this.setElementByPos(o,s),e+=1,o-=1}},i.prototype.unique=function(){if(!(this.length<=1)){for(var e=1,o=this.getElementByPos(0),s=1;s<this.length;++s){var a=this.getElementByPos(s);a!==o&&(o=a,this.setElementByPos(e++,a))}for(;this.length>e;)this.popBack()}},i.prototype.sort=function(e){for(var o=[],s=0;s<this.length;++s)o.push(this.getElementByPos(s));o.sort(e);for(var s=0;s<this.length;++s)this.setElementByPos(s,o[s])},i.prototype.shrinkToFit=function(){if(!!this.length){var e=[];this.forEach(function(s){return e.push(s)}),this.bucketNum=Math.max(Math.ceil(this.length/this.bucketSize),1),this.length=this.first=this.last=this.curFirst=this.curLast=0,this.map=[];for(var o=0;o<this.bucketNum;++o)this.map.push(new Array(this.bucketSize));for(var o=0;o<e.length;++o)this.pushBack(e[o])}},i.prototype[Symbol.iterator]=function(){return function(){var e;return Fc(this,function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return e<this.length?[4,this.getElementByPos(e)]:[3,4];case 2:o.sent(),o.label=3;case 3:return++e,[3,1];case 4:return[2]}})}.bind(this)()},i}(fr);const Pu=qc;var Zc=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Hc=function(n){Zc(i,n);function i(e){e===void 0&&(e=[]);var o=n.call(this)||this;return o.queue=new Pu(e),o.length=o.queue.size(),o}return i.prototype.clear=function(){this.queue.clear(),this.length=0},i.prototype.push=function(e){this.queue.pushBack(e),this.length+=1},i.prototype.pop=function(){this.queue.popFront(),this.length&&(this.length-=1)},i.prototype.front=function(){return this.queue.front()},i}(pn);const Wc=Hc;var Vc=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Un=globalThis&&globalThis.__read||function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var o=e.call(n),s,a=[],h;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(h)throw h.error}}return a},$c=globalThis&&globalThis.__spreadArray||function(n,i,e){if(e||arguments.length===2)for(var o=0,s=i.length,a;o<s;o++)(a||!(o in i))&&(a||(a=Array.prototype.slice.call(i,0,o)),a[o]=i[o]);return n.concat(a||Array.prototype.slice.call(i))},Kc=function(n){Vc(i,n);function i(e,o,s){var a;e===void 0&&(e=[]),o===void 0&&(o=function(P,C){return P>C?-1:P<C?1:0}),s===void 0&&(s=!0);var h=n.call(this)||this;h.cmp=o,Array.isArray(e)?h.priorityQueue=s?$c([],Un(e),!1):e:(h.priorityQueue=[],e.forEach(function(P){return h.priorityQueue.push(P)})),h.length=h.priorityQueue.length;for(var f=h.length-1>>1;f>=0;--f)for(var d=f,c=d<<1|1;c<h.length;){var v=c,w=v+1,b=v;if(w<h.length&&h.cmp(h.priorityQueue[v],h.priorityQueue[w])>0&&(b=w),h.cmp(h.priorityQueue[d],h.priorityQueue[b])<=0)break;a=Un([h.priorityQueue[b],h.priorityQueue[d]],2),h.priorityQueue[d]=a[0],h.priorityQueue[b]=a[1],d=b,c=d<<1|1}return h}return i.prototype.adjust=function(e){var o,s,a=e<<1|1,h=(e<<1)+2;a<this.length&&this.cmp(this.priorityQueue[e],this.priorityQueue[a])>0&&(o=Un([this.priorityQueue[a],this.priorityQueue[e]],2),this.priorityQueue[e]=o[0],this.priorityQueue[a]=o[1]),h<this.length&&this.cmp(this.priorityQueue[e],this.priorityQueue[h])>0&&(s=Un([this.priorityQueue[h],this.priorityQueue[e]],2),this.priorityQueue[e]=s[0],this.priorityQueue[h]=s[1])},i.prototype.clear=function(){this.length=0,this.priorityQueue.length=0},i.prototype.push=function(e){if(this.priorityQueue.push(e),this.length+=1,this.length!==1)for(var o=this.length-1;o>0;){var s=o-1>>1;if(this.cmp(this.priorityQueue[s],e)<=0)break;this.adjust(s),o=s}},i.prototype.pop=function(){if(!!this.length){var e=this.priorityQueue[this.length-1];this.length-=1;for(var o=0;o<this.length;){var s=o<<1|1,a=(o<<1)+2;if(s>=this.length)break;var h=s;if(a<this.length&&this.cmp(this.priorityQueue[s],this.priorityQueue[a])>0&&(h=a),this.cmp(this.priorityQueue[h],e)>=0)break;this.priorityQueue[o]=this.priorityQueue[h],o=h}this.priorityQueue[o]=e,this.priorityQueue.pop()}},i.prototype.top=function(){return this.priorityQueue[0]},i}(pn);const Gc=Kc;var Lu=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Qc=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(v){return d([c,v])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(n,e)}catch(v){c=[6,v],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},da=globalThis&&globalThis.__read||function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var o=e.call(n),s,a=[],h;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(h)throw h.error}}return a},pa=globalThis&&globalThis.__spreadArray||function(n,i,e){if(e||arguments.length===2)for(var o=0,s=i.length,a;o<s;o++)(a||!(o in i))&&(a||(a=Array.prototype.slice.call(i,0,o)),a[o]=i[o]);return n.concat(a||Array.prototype.slice.call(i))},Yc=globalThis&&globalThis.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],o=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Si=function(n){Lu(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.copy=function(){return new i(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)},i}(Su),Jc=function(n){Lu(i,n);function i(e,o){e===void 0&&(e=[]),o===void 0&&(o=!0);var s=n.call(this)||this;return Array.isArray(e)?(s.vector=o?pa([],da(e),!1):e,s.length=e.length):(s.vector=[],e.forEach(function(a){return s.pushBack(a)})),s.size=s.size.bind(s),s.getElementByPos=s.getElementByPos.bind(s),s.setElementByPos=s.setElementByPos.bind(s),s}return i.prototype.clear=function(){this.length=0,this.vector.length=0},i.prototype.begin=function(){return new Si(0,this.size,this.getElementByPos,this.setElementByPos)},i.prototype.end=function(){return new Si(this.length,this.size,this.getElementByPos,this.setElementByPos)},i.prototype.rBegin=function(){return new Si(this.length-1,this.size,this.getElementByPos,this.setElementByPos,$t.REVERSE)},i.prototype.rEnd=function(){return new Si(-1,this.size,this.getElementByPos,this.setElementByPos,$t.REVERSE)},i.prototype.front=function(){return this.vector[0]},i.prototype.back=function(){return this.vector[this.length-1]},i.prototype.forEach=function(e){for(var o=0;o<this.length;++o)e(this.vector[o],o)},i.prototype.getElementByPos=function(e){return Wt(e,0,this.length-1),this.vector[e]},i.prototype.eraseElementByPos=function(e){Wt(e,0,this.length-1),this.vector.splice(e,1),this.length-=1},i.prototype.eraseElementByValue=function(e){for(var o=0,s=0;s<this.length;++s)this.vector[s]!==e&&(this.vector[o++]=this.vector[s]);this.length=this.vector.length=o},i.prototype.eraseElementByIterator=function(e){var o=e.node;return e=e.next(),this.eraseElementByPos(o),e},i.prototype.pushBack=function(e){this.vector.push(e),this.length+=1},i.prototype.popBack=function(){!this.length||(this.vector.pop(),this.length-=1)},i.prototype.setElementByPos=function(e,o){Wt(e,0,this.length-1),this.vector[e]=o},i.prototype.insert=function(e,o,s){var a;s===void 0&&(s=1),Wt(e,0,this.length),(a=this.vector).splice.apply(a,pa([e,0],da(new Array(s).fill(o)),!1)),this.length+=s},i.prototype.find=function(e){for(var o=0;o<this.length;++o)if(this.vector[o]===e)return new Si(o,this.size,this.getElementByPos,this.getElementByPos);return this.end()},i.prototype.reverse=function(){this.vector.reverse()},i.prototype.unique=function(){for(var e=1,o=1;o<this.length;++o)this.vector[o]!==this.vector[o-1]&&(this.vector[e++]=this.vector[o]);this.length=this.vector.length=e},i.prototype.sort=function(e){this.vector.sort(e)},i.prototype[Symbol.iterator]=function(){return function(){return Qc(this,function(e){switch(e.label){case 0:return[5,Yc(this.vector)];case 1:return[2,e.sent()]}})}.bind(this)()},i}(fr);const jt=Jc;var Au=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),Xc=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(v){return d([c,v])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(n,e)}catch(v){c=[6,v],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Yi=function(){function n(i){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=i}return n}(),Ti=function(n){Au(i,n);function i(e,o,s){var a=n.call(this,s)||this;return a.node=e,a.header=o,a.iteratorType===$t.NORMAL?(a.pre=function(){if(this.node.pre===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre,this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next,this}):(a.pre=function(){if(this.node.next===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next,this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre,this}),a}return Object.defineProperty(i.prototype,"pointer",{get:function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node.value},set:function(e){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");this.node.value=e},enumerable:!1,configurable:!0}),i.prototype.equals=function(e){return this.node===e.node},i.prototype.copy=function(){return new i(this.node,this.header,this.iteratorType)},i}($t),td=function(n){Au(i,n);function i(e){e===void 0&&(e=[]);var o=n.call(this)||this;return o.header=new Yi,o.head=void 0,o.tail=void 0,e.forEach(function(s){return o.pushBack(s)}),o}return i.prototype.clear=function(){this.length=0,this.head=this.tail=void 0,this.header.pre=this.header.next=void 0},i.prototype.begin=function(){return new Ti(this.head||this.header,this.header)},i.prototype.end=function(){return new Ti(this.header,this.header)},i.prototype.rBegin=function(){return new Ti(this.tail||this.header,this.header,$t.REVERSE)},i.prototype.rEnd=function(){return new Ti(this.header,this.header,$t.REVERSE)},i.prototype.front=function(){return this.head?this.head.value:void 0},i.prototype.back=function(){return this.tail?this.tail.value:void 0},i.prototype.forEach=function(e){if(!!this.length)for(var o=this.head,s=0;o!==this.header;)e(o.value,s++),o=o.next},i.prototype.getElementByPos=function(e){Wt(e,0,this.length-1);for(var o=this.head;e--;)o=o.next;return o.value},i.prototype.eraseElementByPos=function(e){if(Wt(e,0,this.length-1),e===0)this.popFront();else if(e===this.length-1)this.popBack();else{for(var o=this.head;e--;)o=o.next;o=o;var s=o.pre,a=o.next;a.pre=s,s.next=a,this.length-=1}},i.prototype.eraseElementByValue=function(e){for(;this.head&&this.head.value===e;)this.popFront();for(;this.tail&&this.tail.value===e;)this.popBack();if(!!this.head)for(var o=this.head;o!==this.header;){if(o.value===e){var s=o.pre,a=o.next;a&&(a.pre=s),s&&(s.next=a),this.length-=1}o=o.next}},i.prototype.eraseElementByIterator=function(e){var o=e.node;if(o===this.header)throw new RangeError("Invalid iterator");if(e=e.next(),this.head===o)this.popFront();else if(this.tail===o)this.popBack();else{var s=o.pre,a=o.next;a&&(a.pre=s),s&&(s.next=a),this.length-=1}return e},i.prototype.pushBack=function(e){this.length+=1;var o=new Yi(e);this.tail?(this.tail.next=o,o.pre=this.tail,this.tail=o):(this.head=this.tail=o,this.header.next=this.head,this.head.pre=this.header),this.tail.next=this.header,this.header.pre=this.tail},i.prototype.popBack=function(){!this.tail||(this.length-=1,this.head===this.tail?(this.head=this.tail=void 0,this.header.next=void 0):(this.tail=this.tail.pre,this.tail&&(this.tail.next=void 0)),this.header.pre=this.tail,this.tail&&(this.tail.next=this.header))},i.prototype.setElementByPos=function(e,o){Wt(e,0,this.length-1);for(var s=this.head;e--;)s=s.next;s.value=o},i.prototype.insert=function(e,o,s){if(s===void 0&&(s=1),Wt(e,0,this.length),!(s<=0))if(e===0)for(;s--;)this.pushFront(o);else if(e===this.length)for(;s--;)this.pushBack(o);else{for(var a=this.head,h=1;h<e;++h)a=a.next;var f=a.next;for(this.length+=s;s--;)a.next=new Yi(o),a.next.pre=a,a=a.next;a.next=f,f&&(f.pre=a)}},i.prototype.find=function(e){if(!this.head)return this.end();for(var o=this.head;o!==this.header;){if(o.value===e)return new Ti(o,this.header);o=o.next}return this.end()},i.prototype.reverse=function(){if(!(this.length<=1))for(var e=this.head,o=this.tail,s=0;s<<1<this.length;){var a=e.value;e.value=o.value,o.value=a,e=e.next,o=o.pre,s+=1}},i.prototype.unique=function(){if(!(this.length<=1))for(var e=this.head;e!==this.header;){for(var o=e;o.next&&o.value===o.next.value;)o=o.next,this.length-=1;e.next=o.next,e.next&&(e.next.pre=e),e=e.next}},i.prototype.sort=function(e){if(!(this.length<=1)){var o=[];this.forEach(function(a){return o.push(a)}),o.sort(e);var s=this.head;o.forEach(function(a){s.value=a,s=s.next})}},i.prototype.pushFront=function(e){this.length+=1;var o=new Yi(e);this.head?(o.next=this.head,this.head.pre=o,this.head=o):(this.head=this.tail=o,this.tail.next=this.header,this.header.pre=this.tail),this.header.next=this.head,this.head.pre=this.header},i.prototype.popFront=function(){!this.head||(this.length-=1,this.head===this.tail?(this.head=this.tail=void 0,this.header.pre=this.tail):(this.head=this.head.next,this.head&&(this.head.pre=this.header)),this.header.next=this.head)},i.prototype.merge=function(e){var o=this;if(!this.head){e.forEach(function(a){return o.pushBack(a)});return}var s=this.head;e.forEach(function(a){for(;s&&s!==o.header&&s.value<=a;)s=s.next;if(s===o.header)o.pushBack(a),s=o.tail;else if(s===o.head)o.pushFront(a),s=o.head;else{o.length+=1;var h=s.pre;h.next=new Yi(a),h.next.pre=h,h.next.next=s,s.pre=h.next}})},i.prototype[Symbol.iterator]=function(){return function(){var e;return Xc(this,function(o){switch(o.label){case 0:if(!this.head)return[2];e=this.head,o.label=1;case 1:return e===this.header?[3,3]:[4,e.value];case 2:return o.sent(),e=e.next,[3,1];case 3:return[2]}})}.bind(this)()},i}(fr);const ed=td;var id=function(){function n(i,e){this.color=!0,this.key=void 0,this.value=void 0,this.left=void 0,this.right=void 0,this.parent=void 0,this.key=i,this.value=e}return n.prototype.pre=function(){var i=this;if(i.color===n.RED&&i.parent.parent===i)i=i.right;else if(i.left)for(i=i.left;i.right;)i=i.right;else{for(var e=i.parent;e.left===i;)i=e,e=i.parent;i=e}return i},n.prototype.next=function(){var i=this;if(i.right)for(i=i.right;i.left;)i=i.left;else{for(var e=i.parent;e.right===i;)i=e,e=i.parent;i.right!==e&&(i=e)}return i},n.prototype.rotateLeft=function(){var i=this.parent,e=this.right,o=e.left;return i.parent===this?i.parent=e:i.left===this?i.left=e:i.right=e,e.parent=i,e.left=this,this.parent=e,this.right=o,o&&(o.parent=this),e},n.prototype.rotateRight=function(){var i=this.parent,e=this.left,o=e.right;return i.parent===this?i.parent=e:i.left===this?i.left=e:i.right=e,e.parent=i,e.right=this,this.parent=e,this.left=o,o&&(o.parent=this),e},n.prototype.remove=function(){var i=this.parent;this===i.left?i.left=void 0:i.right=void 0},n.RED=!0,n.BLACK=!1,n}();const ot=id;var nd=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),_a=globalThis&&globalThis.__read||function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var o=e.call(n),s,a=[],h;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(h)throw h.error}}return a},rd=function(n){nd(i,n);function i(e){e===void 0&&(e=function(s,a){return s<a?-1:s>a?1:0});var o=n.call(this)||this;return o.root=void 0,o.header=new ot,o.inOrderTraversal=function(s,a){if(s===void 0)return!1;var h=o.inOrderTraversal(s.left,a);return h||a(s)?!0:o.inOrderTraversal(s.right,a)},o.cmp=e,o}return i.prototype._lowerBound=function(e,o){for(var s;e;){var a=this.cmp(e.key,o);if(a<0)e=e.right;else if(a>0)s=e,e=e.left;else return e}return s===void 0?this.header:s},i.prototype._upperBound=function(e,o){for(var s;e;){var a=this.cmp(e.key,o);a<=0?e=e.right:a>0&&(s=e,e=e.left)}return s===void 0?this.header:s},i.prototype._reverseLowerBound=function(e,o){for(var s;e;){var a=this.cmp(e.key,o);if(a<0)s=e,e=e.right;else if(a>0)e=e.left;else return e}return s===void 0?this.header:s},i.prototype._reverseUpperBound=function(e,o){for(var s;e;){var a=this.cmp(e.key,o);a<0?(s=e,e=e.right):a>=0&&(e=e.left)}return s===void 0?this.header:s},i.prototype.eraseNodeSelfBalance=function(e){for(;;){var o=e.parent;if(o===this.header)return;if(e.color===ot.RED){e.color=ot.BLACK;return}if(e===o.left){var s=o.right;if(s.color===ot.RED)s.color=ot.BLACK,o.color=ot.RED,o===this.root?this.root=o.rotateLeft():o.rotateLeft();else if(s.color===ot.BLACK)if(s.right&&s.right.color===ot.RED){s.color=o.color,o.color=ot.BLACK,s.right.color=ot.BLACK,o===this.root?this.root=o.rotateLeft():o.rotateLeft();return}else s.left&&s.left.color===ot.RED?(s.color=ot.RED,s.left.color=ot.BLACK,s.rotateRight()):(s.color=ot.RED,e=o)}else{var s=o.left;if(s.color===ot.RED)s.color=ot.BLACK,o.color=ot.RED,o===this.root?this.root=o.rotateRight():o.rotateRight();else if(s.left&&s.left.color===ot.RED){s.color=o.color,o.color=ot.BLACK,s.left.color=ot.BLACK,o===this.root?this.root=o.rotateRight():o.rotateRight();return}else s.right&&s.right.color===ot.RED?(s.color=ot.RED,s.right.color=ot.BLACK,s.rotateLeft()):(s.color=ot.RED,e=o)}}},i.prototype.eraseNode=function(e){var o,s;if(this.length===1){this.clear();return}for(var a=e;a.left||a.right;){if(a.right)for(a=a.right;a.left;)a=a.left;else a.left&&(a=a.left);o=_a([a.key,e.key],2),e.key=o[0],a.key=o[1],s=_a([a.value,e.value],2),e.value=s[0],a.value=s[1],e=a}this.header.left===a?this.header.left=a.parent:this.header.right===a&&(this.header.right=a.parent),this.eraseNodeSelfBalance(a),a.remove(),this.length-=1,this.root.color=ot.BLACK},i.prototype.insertNodeSelfBalance=function(e){for(;;){var o=e.parent;if(o.color===ot.BLACK)return;var s=o.parent;if(o===s.left){var a=s.right;if(a&&a.color===ot.RED){if(a.color=o.color=ot.BLACK,s===this.root)return;s.color=ot.RED,e=s;continue}else if(e===o.right){if(e.color=ot.BLACK,e.left&&(e.left.parent=o),e.right&&(e.right.parent=s),o.right=e.left,s.left=e.right,e.left=o,e.right=s,s===this.root)this.root=e,this.header.parent=e;else{var h=s.parent;h.left===s?h.left=e:h.right=e}e.parent=s.parent,o.parent=e,s.parent=e}else o.color=ot.BLACK,s===this.root?this.root=s.rotateRight():s.rotateRight();s.color=ot.RED}else{var a=s.left;if(a&&a.color===ot.RED){if(a.color=o.color=ot.BLACK,s===this.root)return;s.color=ot.RED,e=s;continue}else if(e===o.left){if(e.color=ot.BLACK,e.left&&(e.left.parent=s),e.right&&(e.right.parent=o),s.right=e.left,o.left=e.right,e.left=s,e.right=o,s===this.root)this.root=e,this.header.parent=e;else{var h=s.parent;h.left===s?h.left=e:h.right=e}e.parent=s.parent,o.parent=e,s.parent=e}else o.color=ot.BLACK,s===this.root?this.root=s.rotateLeft():s.rotateLeft();s.color=ot.RED}return}},i.prototype.findElementNode=function(e,o){for(;e;){var s=this.cmp(e.key,o);if(s<0)e=e.right;else if(s>0)e=e.left;else return e}return e},i.prototype.set=function(e,o,s){if(this.root===void 0){this.length+=1,this.root=new ot(e,o),this.root.color=ot.BLACK,this.root.parent=this.header,this.header.parent=this.root,this.header.left=this.root,this.header.right=this.root;return}var a,h=this.header.left,f=this.cmp(h.key,e);if(f===0){h.value=o;return}else if(f>0)h.left=new ot(e,o),h.left.parent=h,a=h.left,this.header.left=a;else{var d=this.header.right,c=this.cmp(d.key,e);if(c===0){d.value=o;return}else if(c<0)d.right=new ot(e,o),d.right.parent=d,a=d.right,this.header.right=a;else{if(s!==void 0){var v=s.node;if(v!==this.header){var w=this.cmp(v.key,e);if(w===0){v.value=o;return}else if(w>0){var b=v.pre(),P=this.cmp(b.key,e);if(P===0){b.value=o;return}else P<0&&(a=new ot(e,o),b.right===void 0?(b.right=a,a.parent=b):(v.left=a,a.parent=v))}}}if(a===void 0)for(a=this.root;;){var C=this.cmp(a.key,e);if(C>0){if(a.left===void 0){a.left=new ot(e,o),a.left.parent=a,a=a.left;break}a=a.left}else if(C<0){if(a.right===void 0){a.right=new ot(e,o),a.right.parent=a,a=a.right;break}a=a.right}else{a.value=o;return}}}}this.length+=1,this.insertNodeSelfBalance(a)},i.prototype.clear=function(){this.length=0,this.root=void 0,this.header.parent=void 0,this.header.left=this.header.right=void 0},i.prototype.updateKeyByIterator=function(e,o){var s=e.node;if(s===this.header)throw new TypeError("Invalid iterator!");if(this.length===1)return s.key=o,!0;if(s===this.header.left)return this.cmp(s.next().key,o)>0?(s.key=o,!0):!1;if(s===this.header.right)return this.cmp(s.pre().key,o)<0?(s.key=o,!0):!1;var a=s.pre().key;if(this.cmp(a,o)>=0)return!1;var h=s.next().key;return this.cmp(h,o)<=0?!1:(s.key=o,!0)},i.prototype.eraseElementByPos=function(e){var o=this;Wt(e,0,this.length-1);var s=0;this.inOrderTraversal(this.root,function(a){return e===s?(o.eraseNode(a),!0):(s+=1,!1)})},i.prototype.eraseElementByKey=function(e){if(!!this.length){var o=this.findElementNode(this.root,e);o!==void 0&&this.eraseNode(o)}},i.prototype.eraseElementByIterator=function(e){var o=e.node;if(o===this.header)throw new RangeError("Invalid iterator");return o.right===void 0&&(e=e.next()),this.eraseNode(o),e},i.prototype.getHeight=function(){if(!this.length)return 0;var e=function(o){return o?Math.max(e(o.left),e(o.right))+1:0};return e(this.root)},i}(Uo);const jo=rd;var od=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),sd=function(n){od(i,n);function i(e,o,s){var a=n.call(this,s)||this;return a.node=e,a.header=o,a.iteratorType===$t.NORMAL?(a.pre=function(){if(this.node===this.header.left)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre(),this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next(),this}):(a.pre=function(){if(this.node===this.header.right)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next(),this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre(),this}),a}return i.prototype.equals=function(e){return this.node===e.node},i}($t);const Iu=sd;var Cu=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),ad=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(v){return d([c,v])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(n,e)}catch(v){c=[6,v],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},jn=globalThis&&globalThis.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],o=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ye=function(n){Cu(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"pointer",{get:function(){if(this.node===this.header)throw new RangeError("OrderedSet iterator access denied!");return this.node.key},enumerable:!1,configurable:!0}),i.prototype.copy=function(){return new i(this.node,this.header,this.iteratorType)},i}(Iu),ud=function(n){Cu(i,n);function i(e,o){e===void 0&&(e=[]);var s=n.call(this,o)||this;return s.iterationFunc=function(a){return ad(this,function(h){switch(h.label){case 0:return a===void 0?[2]:[5,jn(this.iterationFunc(a.left))];case 1:return h.sent(),[4,a.key];case 2:return h.sent(),[5,jn(this.iterationFunc(a.right))];case 3:return h.sent(),[2]}})},e.forEach(function(a){return s.insert(a)}),s.iterationFunc=s.iterationFunc.bind(s),s}return i.prototype.begin=function(){return new ye(this.header.left||this.header,this.header)},i.prototype.end=function(){return new ye(this.header,this.header)},i.prototype.rBegin=function(){return new ye(this.header.right||this.header,this.header,$t.REVERSE)},i.prototype.rEnd=function(){return new ye(this.header,this.header,$t.REVERSE)},i.prototype.front=function(){return this.header.left?this.header.left.key:void 0},i.prototype.back=function(){return this.header.right?this.header.right.key:void 0},i.prototype.forEach=function(e){var o,s,a=0;try{for(var h=jn(this),f=h.next();!f.done;f=h.next()){var d=f.value;e(d,a++)}}catch(c){o={error:c}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}},i.prototype.getElementByPos=function(e){var o,s;Wt(e,0,this.length-1);var a,h=0;try{for(var f=jn(this),d=f.next();!d.done;d=f.next()){var c=d.value;h===e&&(a=c),h+=1}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return a},i.prototype.insert=function(e,o){this.set(e,void 0,o)},i.prototype.find=function(e){var o=this.findElementNode(this.root,e);return o!==void 0?new ye(o,this.header):this.end()},i.prototype.lowerBound=function(e){var o=this._lowerBound(this.root,e);return new ye(o,this.header)},i.prototype.upperBound=function(e){var o=this._upperBound(this.root,e);return new ye(o,this.header)},i.prototype.reverseLowerBound=function(e){var o=this._reverseLowerBound(this.root,e);return new ye(o,this.header)},i.prototype.reverseUpperBound=function(e){var o=this._reverseUpperBound(this.root,e);return new ye(o,this.header)},i.prototype.union=function(e){var o=this;e.forEach(function(s){return o.insert(s)})},i.prototype[Symbol.iterator]=function(){return this.iterationFunc(this.root)},i}(jo);const ni=ud;var Bu=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),hd=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(v){return d([c,v])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(n,e)}catch(v){c=[6,v],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ga=globalThis&&globalThis.__read||function(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var o=e.call(n),s,a=[],h;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(h)throw h.error}}return a},qn=globalThis&&globalThis.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],o=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},we=function(n){Bu(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(i.prototype,"pointer",{get:function(){var e=this;if(this.node===this.header)throw new RangeError("OrderedMap iterator access denied");return new Proxy([],{get:function(o,s){if(s==="0")return e.node.key;if(s==="1")return e.node.value},set:function(o,s,a){if(s!=="1")throw new TypeError("props must be 1");return e.node.value=a,!0}})},enumerable:!1,configurable:!0}),i.prototype.copy=function(){return new i(this.node,this.header,this.iteratorType)},i}(Iu),ld=function(n){Bu(i,n);function i(e,o){e===void 0&&(e=[]);var s=n.call(this,o)||this;return s.iterationFunc=function(a){return hd(this,function(h){switch(h.label){case 0:return a===void 0?[2]:[5,qn(this.iterationFunc(a.left))];case 1:return h.sent(),[4,[a.key,a.value]];case 2:return h.sent(),[5,qn(this.iterationFunc(a.right))];case 3:return h.sent(),[2]}})},s.iterationFunc=s.iterationFunc.bind(s),e.forEach(function(a){var h=ga(a,2),f=h[0],d=h[1];return s.setElement(f,d)}),s}return i.prototype.begin=function(){return new we(this.header.left||this.header,this.header)},i.prototype.end=function(){return new we(this.header,this.header)},i.prototype.rBegin=function(){return new we(this.header.right||this.header,this.header,$t.REVERSE)},i.prototype.rEnd=function(){return new we(this.header,this.header,$t.REVERSE)},i.prototype.front=function(){if(!!this.length){var e=this.header.left;return[e.key,e.value]}},i.prototype.back=function(){if(!!this.length){var e=this.header.right;return[e.key,e.value]}},i.prototype.forEach=function(e){var o,s,a=0;try{for(var h=qn(this),f=h.next();!f.done;f=h.next()){var d=f.value;e(d,a++)}}catch(c){o={error:c}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}},i.prototype.lowerBound=function(e){var o=this._lowerBound(this.root,e);return new we(o,this.header)},i.prototype.upperBound=function(e){var o=this._upperBound(this.root,e);return new we(o,this.header)},i.prototype.reverseLowerBound=function(e){var o=this._reverseLowerBound(this.root,e);return new we(o,this.header)},i.prototype.reverseUpperBound=function(e){var o=this._reverseUpperBound(this.root,e);return new we(o,this.header)},i.prototype.setElement=function(e,o,s){this.set(e,o,s)},i.prototype.find=function(e){var o=this.findElementNode(this.root,e);return o!==void 0?new we(o,this.header):this.end()},i.prototype.getElementByKey=function(e){var o=this.findElementNode(this.root,e);return o?o.value:void 0},i.prototype.getElementByPos=function(e){var o,s;Wt(e,0,this.length-1);var a,h=0;try{for(var f=qn(this),d=f.next();!d.done;d=f.next()){var c=d.value;if(h===e){a=c;break}h+=1}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return a},i.prototype.union=function(e){var o=this;e.forEach(function(s){var a=ga(s,2),h=a[0],f=a[1];return o.setElement(h,f)})},i.prototype[Symbol.iterator]=function(){return this.iterationFunc(this.root)},i}(jo);const Me=ld;var fd=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),cd=function(n){fd(i,n);function i(e,o){e===void 0&&(e=16),o===void 0&&(o=function(a){var h;typeof a!="string"?h=JSON.stringify(a):h=a;for(var f=0,d=h.length,c=0;c<d;c++){var v=h.charCodeAt(c);f=(f<<5)-f+v,f|=0}return f>>>0});var s=n.call(this)||this;if(e<16||(e&e-1)!==0)throw new RangeError("InitBucketNum range error");return s.bucketNum=s.initBucketNum=e,s.hashFunc=o,s}return i.prototype.clear=function(){this.length=0,this.bucketNum=this.initBucketNum,this.hashTable=[]},i.sigma=.75,i.treeifyThreshold=8,i.untreeifyThreshold=6,i.minTreeifySize=64,i.maxBucketNum=1<<30,i}(pn);const Zt=cd;var dd=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),pd=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(v){return d([c,v])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(n,e)}catch(v){c=[6,v],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},_d=globalThis&&globalThis.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],o=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},gd=function(n){dd(i,n);function i(e,o,s){e===void 0&&(e=[]);var a=n.call(this,o,s)||this;return a.hashTable=[],e.forEach(function(h){return a.insert(h)}),a}return i.prototype.reAllocate=function(){var e=this;if(!(this.bucketNum>=Zt.maxBucketNum)){var o=[],s=this.bucketNum;this.bucketNum<<=1;for(var a=Object.keys(this.hashTable),h=a.length,f=function(v){var w=parseInt(a[v]),b=d.hashTable[w],P=b.size();if(P===0)return"continue";if(P===1){var C=b.front();return o[d.hashFunc(C)&d.bucketNum-1]=new jt([C],!1),"continue"}var I=[],F=[];b.forEach(function(A){var k=e.hashFunc(A);(k&s)===0?I.push(A):F.push(A)}),b instanceof ni?(I.length>Zt.untreeifyThreshold?o[w]=new ni(I):I.length&&(o[w]=new jt(I,!1)),F.length>Zt.untreeifyThreshold?o[w+s]=new ni(F):F.length&&(o[w+s]=new jt(F,!1))):(I.length>=Zt.treeifyThreshold?o[w]=new ni(I):I.length&&(o[w]=new jt(I,!1)),F.length>=Zt.treeifyThreshold?o[w+s]=new ni(F):F.length&&(o[w+s]=new jt(F,!1)))},d=this,c=0;c<h;++c)f(c);this.hashTable=o}},i.prototype.forEach=function(e){for(var o=Object.values(this.hashTable),s=o.length,a=0,h=0;h<s;++h)o[h].forEach(function(f){return e(f,a++)})},i.prototype.insert=function(e){var o=this.hashFunc(e)&this.bucketNum-1,s=this.hashTable[o];if(!s)this.hashTable[o]=new jt([e],!1),this.length+=1;else{var a=s.size();if(s instanceof jt){if(!s.find(e).equals(s.end()))return;if(s.pushBack(e),a+1>=Zt.treeifyThreshold){if(this.bucketNum<=Zt.minTreeifySize){this.length+=1,this.reAllocate();return}this.hashTable[o]=new ni(s)}this.length+=1}else{s.insert(e);var h=s.size();this.length+=h-a}}this.length>this.bucketNum*Zt.sigma&&this.reAllocate()},i.prototype.eraseElementByKey=function(e){var o=this.hashFunc(e)&this.bucketNum-1,s=this.hashTable[o];if(!!s){var a=s.size();if(a!==0)if(s instanceof jt){s.eraseElementByValue(e);var h=s.size();this.length+=h-a}else{s.eraseElementByKey(e);var h=s.size();this.length+=h-a,h<=Zt.untreeifyThreshold&&(this.hashTable[o]=new jt(s))}}},i.prototype.find=function(e){var o=this.hashFunc(e)&this.bucketNum-1,s=this.hashTable[o];return s?!s.find(e).equals(s.end()):!1},i.prototype[Symbol.iterator]=function(){return function(){var e,o,s,a,h,f,d,c,v,w;return pd(this,function(b){switch(b.label){case 0:e=Object.values(this.hashTable),o=e.length,s=0,b.label=1;case 1:if(!(s<o))return[3,10];a=e[s],b.label=2;case 2:b.trys.push([2,7,8,9]),h=(v=void 0,_d(a)),f=h.next(),b.label=3;case 3:return f.done?[3,6]:(d=f.value,[4,d]);case 4:b.sent(),b.label=5;case 5:return f=h.next(),[3,3];case 6:return[3,9];case 7:return c=b.sent(),v={error:c},[3,9];case 8:try{f&&!f.done&&(w=h.return)&&w.call(h)}finally{if(v)throw v.error}return[7];case 9:return++s,[3,1];case 10:return[2]}})}.bind(this)()},i}(Zt);const md=gd;var vd=globalThis&&globalThis.__extends||function(){var n=function(i,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(i,e);function o(){this.constructor=i}i.prototype=e===null?Object.create(e):(o.prototype=e.prototype,new o)}}(),yd=globalThis&&globalThis.__generator||function(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(v){return d([c,v])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;e;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,s=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=i.call(n,e)}catch(v){c=[6,v],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ji=globalThis&&globalThis.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],o=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},wd=function(n){vd(i,n);function i(e,o,s){e===void 0&&(e=[]);var a=n.call(this,o,s)||this;return a.hashTable=[],e.forEach(function(h){return a.setElement(h[0],h[1])}),a}return i.prototype.reAllocate=function(){var e=this;if(!(this.bucketNum>=Zt.maxBucketNum)){var o=[],s=this.bucketNum;this.bucketNum<<=1;for(var a=Object.keys(this.hashTable),h=a.length,f=function(v){var w=parseInt(a[v]),b=d.hashTable[w],P=b.size();if(P===0)return"continue";if(P===1){var C=b.front();return o[d.hashFunc(C[0])&d.bucketNum-1]=new jt([C],!1),"continue"}var I=[],F=[];b.forEach(function(A){var k=e.hashFunc(A[0]);(k&s)===0?I.push(A):F.push(A)}),b instanceof Me?(I.length>Zt.untreeifyThreshold?o[w]=new Me(I):I.length&&(o[w]=new jt(I,!1)),F.length>Zt.untreeifyThreshold?o[w+s]=new Me(F):F.length&&(o[w+s]=new jt(F,!1))):(I.length>=Zt.treeifyThreshold?o[w]=new Me(I):I.length&&(o[w]=new jt(I,!1)),F.length>=Zt.treeifyThreshold?o[w+s]=new Me(F):F.length&&(o[w+s]=new jt(F,!1)))},d=this,c=0;c<h;++c)f(c);this.hashTable=o}},i.prototype.forEach=function(e){for(var o=Object.values(this.hashTable),s=o.length,a=0,h=0;h<s;++h)o[h].forEach(function(f){return e(f,a++)})},i.prototype.setElement=function(e,o){var s,a,h=this.hashFunc(e)&this.bucketNum-1,f=this.hashTable[h];if(!f)this.length+=1,this.hashTable[h]=new jt([[e,o]],!1);else{var d=f.size();if(f instanceof jt){try{for(var c=Ji(f),v=c.next();!v.done;v=c.next()){var w=v.value;if(w[0]===e){w[1]=o;return}}}catch(P){s={error:P}}finally{try{v&&!v.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(f.pushBack([e,o]),d+1>=i.treeifyThreshold){if(this.bucketNum<=i.minTreeifySize){this.length+=1,this.reAllocate();return}this.hashTable[h]=new Me(this.hashTable[h])}this.length+=1}else{f.setElement(e,o);var b=f.size();this.length+=b-d}}this.length>this.bucketNum*i.sigma&&this.reAllocate()},i.prototype.getElementByKey=function(e){var o,s,a=this.hashFunc(e)&this.bucketNum-1,h=this.hashTable[a];if(!!h){if(h instanceof Me)return h.getElementByKey(e);try{for(var f=Ji(h),d=f.next();!d.done;d=f.next()){var c=d.value;if(c[0]===e)return c[1]}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}},i.prototype.eraseElementByKey=function(e){var o,s,a=this.hashFunc(e)&this.bucketNum-1,h=this.hashTable[a];if(!!h)if(h instanceof jt){var f=0;try{for(var d=Ji(h),c=d.next();!c.done;c=d.next()){var v=c.value;if(v[0]===e){h.eraseElementByPos(f),this.length-=1;return}f+=1}}catch(P){o={error:P}}finally{try{c&&!c.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}}else{var w=h.size();h.eraseElementByKey(e);var b=h.size();this.length+=b-w,b<=Zt.untreeifyThreshold&&(this.hashTable[a]=new jt(h))}},i.prototype.find=function(e){var o,s,a=this.hashFunc(e)&this.bucketNum-1,h=this.hashTable[a];if(!h)return!1;if(h instanceof Me)return!h.find(e).equals(h.end());try{for(var f=Ji(h),d=f.next();!d.done;d=f.next()){var c=d.value;if(c[0]===e)return!0}}catch(v){o={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return!1},i.prototype[Symbol.iterator]=function(){return function(){var e,o,s,a,h,f,d,c,v,w;return yd(this,function(b){switch(b.label){case 0:e=Object.values(this.hashTable),o=e.length,s=0,b.label=1;case 1:if(!(s<o))return[3,10];a=e[s],b.label=2;case 2:b.trys.push([2,7,8,9]),h=(v=void 0,Ji(a)),f=h.next(),b.label=3;case 3:return f.done?[3,6]:(d=f.value,[4,d]);case 4:b.sent(),b.label=5;case 5:return f=h.next(),[3,3];case 6:return[3,9];case 7:return c=b.sent(),v={error:c},[3,9];case 8:try{f&&!f.done&&(w=h.return)&&w.call(h)}finally{if(v)throw v.error}return[7];case 9:return++s,[3,1];case 10:return[2]}})}.bind(this)()},i}(Zt);const bd=wd,xd=Object.freeze(Object.defineProperty({__proto__:null,Stack:Rc,Queue:Wc,PriorityQueue:Gc,Vector:jt,VectorIterator:Si,LinkList:ed,LinkListIterator:Ti,Deque:Pu,DequeIterator:Ei,OrderedSet:ni,OrderedSetIterator:ye,OrderedMap:Me,OrderedMapIterator:we,HashSet:md,HashMap:bd,Container:Uo,ContainerIterator:$t,SequentialContainer:fr,TreeContainer:jo,HashContainer:Zt},Symbol.toStringTag,{value:"Module"})),Ed=ln(xd);var pe={exports:{}},ao,ma;function Sd(){if(ma)return ao;ma=1;var n=1e3,i=n*60,e=i*60,o=e*24,s=o*7,a=o*365.25;ao=function(v,w){w=w||{};var b=typeof v;if(b==="string"&&v.length>0)return h(v);if(b==="number"&&isFinite(v))return w.long?d(v):f(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function h(v){if(v=String(v),!(v.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(!!w){var b=parseFloat(w[1]),P=(w[2]||"ms").toLowerCase();switch(P){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*s;case"days":case"day":case"d":return b*o;case"hours":case"hour":case"hrs":case"hr":case"h":return b*e;case"minutes":case"minute":case"mins":case"min":case"m":return b*i;case"seconds":case"second":case"secs":case"sec":case"s":return b*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function f(v){var w=Math.abs(v);return w>=o?Math.round(v/o)+"d":w>=e?Math.round(v/e)+"h":w>=i?Math.round(v/i)+"m":w>=n?Math.round(v/n)+"s":v+"ms"}function d(v){var w=Math.abs(v);return w>=o?c(v,w,o,"day"):w>=e?c(v,w,e,"hour"):w>=i?c(v,w,i,"minute"):w>=n?c(v,w,n,"second"):v+" ms"}function c(v,w,b,P){var C=w>=b*1.5;return Math.round(v/b)+" "+P+(C?"s":"")}return ao}function Td(n){e.debug=e,e.default=e,e.coerce=d,e.disable=a,e.enable=s,e.enabled=h,e.humanize=Sd(),e.destroy=c,Object.keys(n).forEach(v=>{e[v]=n[v]}),e.names=[],e.skips=[],e.formatters={};function i(v){let w=0;for(let b=0;b<v.length;b++)w=(w<<5)-w+v.charCodeAt(b),w|=0;return e.colors[Math.abs(w)%e.colors.length]}e.selectColor=i;function e(v){let w,b=null,P,C;function I(...F){if(!I.enabled)return;const A=I,k=Number(new Date),B=k-(w||k);A.diff=B,A.prev=w,A.curr=k,w=k,F[0]=e.coerce(F[0]),typeof F[0]!="string"&&F.unshift("%O");let $=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,(it,ct)=>{if(it==="%%")return"%";$++;const tt=e.formatters[ct];if(typeof tt=="function"){const J=F[$];it=tt.call(A,J),F.splice($,1),$--}return it}),e.formatArgs.call(A,F),(A.log||e.log).apply(A,F)}return I.namespace=v,I.useColors=e.useColors(),I.color=e.selectColor(v),I.extend=o,I.destroy=e.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(P!==e.namespaces&&(P=e.namespaces,C=e.enabled(v)),C),set:F=>{b=F}}),typeof e.init=="function"&&e.init(I),I}function o(v,w){const b=e(this.namespace+(typeof w>"u"?":":w)+v);return b.log=this.log,b}function s(v){e.save(v),e.namespaces=v,e.names=[],e.skips=[];let w;const b=(typeof v=="string"?v:"").split(/[\s,]+/),P=b.length;for(w=0;w<P;w++)!b[w]||(v=b[w].replace(/\*/g,".*?"),v[0]==="-"?e.skips.push(new RegExp("^"+v.slice(1)+"$")):e.names.push(new RegExp("^"+v+"$")))}function a(){const v=[...e.names.map(f),...e.skips.map(f).map(w=>"-"+w)].join(",");return e.enable(""),v}function h(v){if(v[v.length-1]==="*")return!0;let w,b;for(w=0,b=e.skips.length;w<b;w++)if(e.skips[w].test(v))return!1;for(w=0,b=e.names.length;w<b;w++)if(e.names[w].test(v))return!0;return!1}function f(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}function d(v){return v instanceof Error?v.stack||v.message:v}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var Pd=Td;(function(n,i){i.formatArgs=o,i.save=s,i.load=a,i.useColors=e,i.storage=h(),i.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;d.splice(1,0,c,"color: inherit");let v=0,w=0;d[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(v++,b==="%c"&&(w=v))}),d.splice(w,0,c)}i.log=console.debug||console.log||(()=>{});function s(d){try{d?i.storage.setItem("debug",d):i.storage.removeItem("debug")}catch{}}function a(){let d;try{d=i.storage.getItem("debug")}catch{}return!d&&typeof X<"u"&&"env"in X&&(d=X.env.DEBUG),d}function h(){try{return localStorage}catch{}}n.exports=Pd(i);const{formatters:f}=n.exports;f.j=function(d){try{return JSON.stringify(d)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(pe,pe.exports);const Ld=Ed.OrderedSet,xe=pe.exports("number-allocator:trace"),Ad=pe.exports("number-allocator:error");function te(n,i){this.low=n,this.high=i}te.prototype.equals=function(n){return this.low===n.low&&this.high===n.high};te.prototype.compare=function(n){return this.low<n.low&&this.high<n.low?-1:n.low<this.low&&n.high<this.low?1:0};function Pe(n,i){if(!(this instanceof Pe))return new Pe(n,i);this.min=n,this.max=i,this.ss=new Ld([],(e,o)=>e.compare(o)),xe("Create"),this.clear()}Pe.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low};Pe.prototype.alloc=function(){if(this.ss.size()===0)return xe("alloc():empty"),null;const n=this.ss.begin(),i=n.pointer.low,e=n.pointer.high,o=i;return o+1<=e?this.ss.updateKeyByIterator(n,new te(i+1,e)):this.ss.eraseElementByPos(0),xe("alloc():"+o),o};Pe.prototype.use=function(n){const i=new te(n,n),e=this.ss.lowerBound(i);if(!e.equals(this.ss.end())){const o=e.pointer.low,s=e.pointer.high;return e.pointer.equals(i)?(this.ss.eraseElementByIterator(e),xe("use():"+n),!0):o>n?!1:o===n?(this.ss.updateKeyByIterator(e,new te(o+1,s)),xe("use():"+n),!0):s===n?(this.ss.updateKeyByIterator(e,new te(o,s-1)),xe("use():"+n),!0):(this.ss.updateKeyByIterator(e,new te(n+1,s)),this.ss.insert(new te(o,n-1)),xe("use():"+n),!0)}return xe("use():failed"),!1};Pe.prototype.free=function(n){if(n<this.min||n>this.max){Ad("free():"+n+" is out of range");return}const i=new te(n,n),e=this.ss.upperBound(i);if(e.equals(this.ss.end())){if(e.equals(this.ss.begin())){this.ss.insert(i);return}e.pre();const o=e.pointer.high;e.pointer.high+1===n?this.ss.updateKeyByIterator(e,new te(o,n)):this.ss.insert(i)}else if(e.equals(this.ss.begin()))if(n+1===e.pointer.low){const o=e.pointer.high-1,s=e.pointer.high;this.ss.updateKeyByIterator(e,new te(o,s))}else this.ss.insert(i);else{const o=e.pointer.low,s=e.pointer.high;e.pre();const a=e.pointer.low;if(e.pointer.high+1===n)if(n+1===o){this.ss.eraseElementByIterator(e);const f=e.pointer.high;this.ss.updateKeyByIterator(e,new te(a,f))}else this.ss.updateKeyByIterator(e,new te(a,n));else n+1===o?(this.ss.eraseElementByIterator(e.next()),this.ss.insert(new te(n,s))):this.ss.insert(i)}xe("free():"+n)};Pe.prototype.clear=function(){xe("clear()"),this.ss.clear(),this.ss.insert(new te(this.min,this.max))};Pe.prototype.intervalCount=function(){return this.ss.size()};Pe.prototype.dump=function(){console.log("length:"+this.ss.size());for(const n of this.ss)console.log(n)};var Id=Pe;const Cd=Id;Eu.NumberAllocator=Cd;const Bd=Bc,Md=Eu.NumberAllocator;function $e(n){if(!(this instanceof $e))return new $e(n);n>0&&(this.aliasToTopic=new Bd({max:n}),this.topicToAlias={},this.numberAllocator=new Md(1,n),this.max=n,this.length=0)}$e.prototype.put=function(n,i){if(i===0||i>this.max)return!1;const e=this.aliasToTopic.get(i);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(i,n),this.topicToAlias[n]=i,this.numberAllocator.use(i),this.length=this.aliasToTopic.length,!0};$e.prototype.getTopicByAlias=function(n){return this.aliasToTopic.get(n)};$e.prototype.getAliasByTopic=function(n){const i=this.topicToAlias[n];return typeof i<"u"&&this.aliasToTopic.get(i),i};$e.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0};$e.prototype.getLruAlias=function(){const n=this.numberAllocator.firstVacant();return n||this.aliasToTopic.keys()[this.aliasToTopic.length-1]};var Od=$e,cr={},dr={exports:{}};const{Buffer:ce}=V,Mu=Symbol.for("BufferList");function Mt(n){if(!(this instanceof Mt))return new Mt(n);Mt._init.call(this,n)}Mt._init=function(i){Object.defineProperty(this,Mu,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)};Mt.prototype._new=function(i){return new Mt(i)};Mt.prototype._offset=function(i){if(i===0)return[0,0];let e=0;for(let o=0;o<this._bufs.length;o++){const s=e+this._bufs[o].length;if(i<s||o===this._bufs.length-1)return[o,i-e];e=s}};Mt.prototype._reverseOffset=function(n){const i=n[0];let e=n[1];for(let o=0;o<i;o++)e+=this._bufs[o].length;return e};Mt.prototype.get=function(i){if(i>this.length||i<0)return;const e=this._offset(i);return this._bufs[e[0]][e[1]]};Mt.prototype.slice=function(i,e){return typeof i=="number"&&i<0&&(i+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,i,e)};Mt.prototype.copy=function(i,e,o,s){if((typeof o!="number"||o<0)&&(o=0),(typeof s!="number"||s>this.length)&&(s=this.length),o>=this.length||s<=0)return i||ce.alloc(0);const a=!!i,h=this._offset(o),f=s-o;let d=f,c=a&&e||0,v=h[1];if(o===0&&s===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:ce.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(i,c),c+=this._bufs[w].length;return i}if(d<=this._bufs[h[0]].length-v)return a?this._bufs[h[0]].copy(i,e,v,v+d):this._bufs[h[0]].slice(v,v+d);a||(i=ce.allocUnsafe(f));for(let w=h[0];w<this._bufs.length;w++){const b=this._bufs[w].length-v;if(d>b)this._bufs[w].copy(i,c,v),c+=b;else{this._bufs[w].copy(i,c,v,v+d),c+=b;break}d-=b,v&&(v=0)}return i.length>c?i.slice(0,c):i};Mt.prototype.shallowSlice=function(i,e){if(i=i||0,e=typeof e!="number"?this.length:e,i<0&&(i+=this.length),e<0&&(e+=this.length),i===e)return this._new();const o=this._offset(i),s=this._offset(e),a=this._bufs.slice(o[0],s[0]+1);return s[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,s[1]),o[1]!==0&&(a[0]=a[0].slice(o[1])),this._new(a)};Mt.prototype.toString=function(i,e,o){return this.slice(e,o).toString(i)};Mt.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;)if(i>=this._bufs[0].length)i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}return this};Mt.prototype.duplicate=function(){const i=this._new();for(let e=0;e<this._bufs.length;e++)i.append(this._bufs[e]);return i};Mt.prototype.append=function(i){if(i==null)return this;if(i.buffer)this._appendBuffer(ce.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let e=0;e<i.length;e++)this.append(i[e]);else if(this._isBufferList(i))for(let e=0;e<i._bufs.length;e++)this.append(i._bufs[e]);else typeof i=="number"&&(i=i.toString()),this._appendBuffer(ce.from(i));return this};Mt.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length};Mt.prototype.indexOf=function(n,i,e){if(e===void 0&&typeof i=="string"&&(e=i,i=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=ce.from([n]):typeof n=="string"?n=ce.from(n,e):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=ce.from(n.buffer,n.byteOffset,n.byteLength):ce.isBuffer(n)||(n=ce.from(n)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),n.length===0)return i>this.length?this.length:i;const o=this._offset(i);let s=o[0],a=o[1];for(;s<this._bufs.length;s++){const h=this._bufs[s];for(;a<h.length;)if(h.length-a>=n.length){const d=h.indexOf(n,a);if(d!==-1)return this._reverseOffset([s,d]);a=h.length-n.length+1}else{const d=this._reverseOffset([s,a]);if(this._match(d,n))return d;a++}a=0}return-1};Mt.prototype._match=function(n,i){if(this.length-n<i.length)return!1;for(let e=0;e<i.length;e++)if(this.get(n+e)!==i[e])return!1;return!0};(function(){const n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const i in n)(function(e){n[e]===null?Mt.prototype[e]=function(o,s){return this.slice(o,o+s)[e](0,s)}:Mt.prototype[e]=function(o=0){return this.slice(o,o+n[e])[e](0)}})(i)})();Mt.prototype._isBufferList=function(i){return i instanceof Mt||Mt.isBufferList(i)};Mt.isBufferList=function(i){return i!=null&&i[Mu]};var kd=Mt;const qo=Ne.exports.Duplex,Rd=Te.exports,_n=kd;function Yt(n){if(!(this instanceof Yt))return new Yt(n);if(typeof n=="function"){this._callback=n;const i=function(o){this._callback&&(this._callback(o),this._callback=null)}.bind(this);this.on("pipe",function(o){o.on("error",i)}),this.on("unpipe",function(o){o.removeListener("error",i)}),n=null}_n._init.call(this,n),qo.call(this)}Rd(Yt,qo);Object.assign(Yt.prototype,_n.prototype);Yt.prototype._new=function(i){return new Yt(i)};Yt.prototype._write=function(i,e,o){this._appendBuffer(i),typeof o=="function"&&o()};Yt.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)};Yt.prototype.end=function(i){qo.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)};Yt.prototype._destroy=function(i,e){this._bufs.length=0,this.length=0,e(i)};Yt.prototype._isBufferList=function(i){return i instanceof Yt||i instanceof _n||Yt.isBufferList(i)};Yt.isBufferList=_n.isBufferList;dr.exports=Yt;dr.exports.BufferListStream=Yt;dr.exports.BufferList=_n;class Dd{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}var Nd=Dd,Zo={exports:{}};(function(n){const i=n.exports;i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},i.codes={};for(const o in i.types){const s=i.types[o];i.codes[s]=o}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.VARBYTEINT_MASK=127,i.VARBYTEINT_FIN_MASK=128,i.VARBYTEINT_MAX=268435455,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=V.Buffer.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=V.Buffer.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=V.Buffer.from([i.codes.connect<<i.CMD_SHIFT]),i.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},i.propertiesCodes={};for(const o in i.properties){const s=i.properties[o];i.propertiesCodes[s]=o}i.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function e(o){return[0,1,2].map(s=>[0,1].map(a=>[0,1].map(h=>{const f=V.Buffer.alloc(1);return f.writeUInt8(i.codes[o]<<i.CMD_SHIFT|(a?i.DUP_MASK:0)|s<<i.QOS_SHIFT|h,0,!0),f})))}i.PUBLISH_HEADER=e("publish"),i.SUBSCRIBE_HEADER=e("subscribe"),i.SUBSCRIBE_OPTIONS_QOS_MASK=3,i.SUBSCRIBE_OPTIONS_NL_MASK=1,i.SUBSCRIBE_OPTIONS_NL_SHIFT=2,i.SUBSCRIBE_OPTIONS_RAP_MASK=1,i.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,i.SUBSCRIBE_OPTIONS_RH_MASK=3,i.SUBSCRIBE_OPTIONS_RH_SHIFT=4,i.SUBSCRIBE_OPTIONS_RH=[0,16,32],i.SUBSCRIBE_OPTIONS_NL=4,i.SUBSCRIBE_OPTIONS_RAP=8,i.SUBSCRIBE_OPTIONS_QOS=[0,1,2],i.UNSUBSCRIBE_HEADER=e("unsubscribe"),i.ACKS={unsuback:e("unsuback"),puback:e("puback"),pubcomp:e("pubcomp"),pubrel:e("pubrel"),pubrec:e("pubrec")},i.SUBACK_HEADER=V.Buffer.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=V.Buffer.from([3]),i.VERSION4=V.Buffer.from([4]),i.VERSION5=V.Buffer.from([5]),i.VERSION131=V.Buffer.from([131]),i.VERSION132=V.Buffer.from([132]),i.QOS=[0,1,2].map(o=>V.Buffer.from([o])),i.EMPTY={pingreq:V.Buffer.from([i.codes.pingreq<<4,0]),pingresp:V.Buffer.from([i.codes.pingresp<<4,0]),disconnect:V.Buffer.from([i.codes.disconnect<<4,0])}})(Zo);const zd=dr.exports,Fd=dn,va=Nd,Tt=Zo.exports,rt=pe.exports("mqtt-packet:parser");class Jn extends Fd{constructor(){super(),this.parser=this.constructor.parser}static parser(i){return this instanceof Jn?(this.settings=i||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Jn().parser(i)}_resetState(){rt("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new va,this.error=null,this._list=zd(),this._stateCounter=0}parse(i){for(this.error&&this._resetState(),this._list.append(i),rt("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,rt("parse: state complete. _stateCounter is now: %d",this._stateCounter),rt("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return rt("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const i=this._list.readUInt8(0);return this.packet.cmd=Tt.types[i>>Tt.CMD_SHIFT],this.packet.retain=(i&Tt.RETAIN_MASK)!==0,this.packet.qos=i>>Tt.QOS_SHIFT&Tt.QOS_MASK,this.packet.dup=(i&Tt.DUP_MASK)!==0,rt("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const i=this._parseVarByteNum(!0);return i&&(this.packet.length=i.value,this._list.consume(i.bytes)),rt("_parseLength %d",i.value),!!i}_parsePayload(){rt("_parsePayload: payload %O",this._list);let i=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}i=!0}return rt("_parsePayload complete result: %s",i),i}_parseConnect(){rt("_parseConnect");let i,e,o,s;const a={},h=this.packet,f=this._parseString();if(f===null)return this._emitError(new Error("Cannot parse protocolId"));if(f!=="MQTT"&&f!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(h.protocolId=f,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(h.protocolVersion=this._list.readUInt8(this._pos),h.protocolVersion>=128&&(h.bridgeMode=!0,h.protocolVersion=h.protocolVersion-128),h.protocolVersion!==3&&h.protocolVersion!==4&&h.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.username=this._list.readUInt8(this._pos)&Tt.USERNAME_MASK,a.password=this._list.readUInt8(this._pos)&Tt.PASSWORD_MASK,a.will=this._list.readUInt8(this._pos)&Tt.WILL_FLAG_MASK,a.will&&(h.will={},h.will.retain=(this._list.readUInt8(this._pos)&Tt.WILL_RETAIN_MASK)!==0,h.will.qos=(this._list.readUInt8(this._pos)&Tt.WILL_QOS_MASK)>>Tt.WILL_QOS_SHIFT),h.clean=(this._list.readUInt8(this._pos)&Tt.CLEAN_SESSION_MASK)!==0,this._pos++,h.keepalive=this._parseNum(),h.keepalive===-1)return this._emitError(new Error("Packet too short"));if(h.protocolVersion===5){const c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}const d=this._parseString();if(d===null)return this._emitError(new Error("Packet too short"));if(h.clientId=d,rt("_parseConnect: packet.clientId: %s",h.clientId),a.will){if(h.protocolVersion===5){const c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.will.properties=c)}if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse will topic"));if(h.will.topic=i,rt("_parseConnect: packet.will.topic: %s",h.will.topic),e=this._parseBuffer(),e===null)return this._emitError(new Error("Cannot parse will payload"));h.will.payload=e,rt("_parseConnect: packet.will.paylaod: %s",h.will.payload)}if(a.username){if(s=this._parseString(),s===null)return this._emitError(new Error("Cannot parse username"));h.username=s,rt("_parseConnect: packet.username: %s",h.username)}if(a.password){if(o=this._parseBuffer(),o===null)return this._emitError(new Error("Cannot parse password"));h.password=o}return this.settings=h,rt("_parseConnect: complete"),h}_parseConnack(){rt("_parseConnack");const i=this.packet;if(this._list.length<1)return null;if(i.sessionPresent=!!(this._list.readUInt8(this._pos++)&Tt.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?i.reasonCode=this._list.readUInt8(this._pos++):i.reasonCode=0;else{if(this._list.length<2)return null;i.returnCode=this._list.readUInt8(this._pos++)}if(i.returnCode===-1||i.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.properties=e)}rt("_parseConnack: complete")}_parsePublish(){rt("_parsePublish");const i=this.packet;if(i.topic=this._parseString(),i.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(i.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.properties=e)}i.payload=this._list.slice(this._pos,i.length),rt("_parsePublish: payload from buffer list: %o",i.payload)}}_parseSubscribe(){rt("_parseSubscribe");const i=this.packet;let e,o,s,a,h,f,d;if(i.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(i.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(i.properties=c)}for(;this._pos<i.length;){if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=i.length)return this._emitError(new Error("Malformed Subscribe Payload"));o=this._parseByte(),s=o&Tt.SUBSCRIBE_OPTIONS_QOS_MASK,f=(o>>Tt.SUBSCRIBE_OPTIONS_NL_SHIFT&Tt.SUBSCRIBE_OPTIONS_NL_MASK)!==0,h=(o>>Tt.SUBSCRIBE_OPTIONS_RAP_SHIFT&Tt.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,a=o>>Tt.SUBSCRIBE_OPTIONS_RH_SHIFT&Tt.SUBSCRIBE_OPTIONS_RH_MASK,d={topic:e,qos:s},this.settings.protocolVersion===5?(d.nl=f,d.rap=h,d.rh=a):this.settings.bridgeMode&&(d.rh=0,d.rap=!0,d.nl=!0),rt("_parseSubscribe: push subscription `%s` to subscription",d),i.subscriptions.push(d)}}}_parseSuback(){rt("_parseSuback");const i=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.properties=e)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){rt("_parseUnsubscribe");const i=this.packet;if(i.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.properties=e)}for(;this._pos<i.length;){const e=this._parseString();if(e===null)return this._emitError(new Error("Cannot parse topic"));rt("_parseUnsubscribe: push topic `%s` to unsubscriptions",e),i.unsubscriptions.push(e)}}}_parseUnsuback(){rt("_parseUnsuback");const i=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(i.properties=e),i.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){rt("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const i=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(i.length>2?(i.reasonCode=this._parseByte(),rt("_parseConfirmation: packet.reasonCode `%d`",i.reasonCode)):i.reasonCode=0,i.length>3)){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.properties=e)}return!0}_parseDisconnect(){const i=this.packet;if(rt("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?i.reasonCode=this._parseByte():i.reasonCode=0;const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.properties=e)}return rt("_parseDisconnect result: true"),!0}_parseAuth(){rt("_parseAuth");const i=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));i.reasonCode=this._parseByte();const e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(i.properties=e),rt("_parseAuth: result: true"),!0}_parseMessageId(){const i=this.packet;return i.messageId=this._parseNum(),i.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(rt("_parseMessageId: packet.messageId %d",i.messageId),!0)}_parseString(i){const e=this._parseNum(),o=e+this._pos;if(e===-1||o>this._list.length||o>this.packet.length)return null;const s=this._list.toString("utf8",this._pos,o);return this._pos+=e,rt("_parseString: result: %s",s),s}_parseStringPair(){return rt("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const i=this._parseNum(),e=i+this._pos;if(i===-1||e>this._list.length||e>this.packet.length)return null;const o=this._list.slice(this._pos,e);return this._pos+=i,rt("_parseBuffer: result: %o",o),o}_parseNum(){if(this._list.length-this._pos<2)return-1;const i=this._list.readUInt16BE(this._pos);return this._pos+=2,rt("_parseNum: result: %s",i),i}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const i=this._list.readUInt32BE(this._pos);return this._pos+=4,rt("_parse4ByteNum: result: %s",i),i}_parseVarByteNum(i){rt("_parseVarByteNum");const e=4;let o=0,s=1,a=0,h=!1,f;const d=this._pos?this._pos:0;for(;o<e&&d+o<this._list.length;){if(f=this._list.readUInt8(d+o++),a+=s*(f&Tt.VARBYTEINT_MASK),s*=128,(f&Tt.VARBYTEINT_FIN_MASK)===0){h=!0;break}if(this._list.length<=o)break}return!h&&o===e&&this._list.length>=o&&this._emitError(new Error("Invalid variable byte integer")),d&&(this._pos+=o),h=h?i?{bytes:o,value:a}:a:!1,rt("_parseVarByteNum: result: %o",h),h}_parseByte(){let i;return this._pos<this._list.length&&(i=this._list.readUInt8(this._pos),this._pos++),rt("_parseByte: result: %o",i),i}_parseByType(i){switch(rt("_parseByType: type: %s",i),i){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){rt("_parseProperties");const i=this._parseVarByteNum(),o=this._pos+i,s={};for(;this._pos<o;){const a=this._parseByte();if(!a)return this._emitError(new Error("Cannot parse property code type")),!1;const h=Tt.propertiesCodes[a];if(!h)return this._emitError(new Error("Unknown property")),!1;if(h==="userProperties"){s[h]||(s[h]=Object.create(null));const f=this._parseByType(Tt.propertiesTypes[h]);if(s[h][f.name])if(Array.isArray(s[h][f.name]))s[h][f.name].push(f.value);else{const d=s[h][f.name];s[h][f.name]=[d],s[h][f.name].push(f.value)}else s[h][f.name]=f.value;continue}s[h]?Array.isArray(s[h])?s[h].push(this._parseByType(Tt.propertiesTypes[h])):(s[h]=[s[h]],s[h].push(this._parseByType(Tt.propertiesTypes[h]))):s[h]=this._parseByType(Tt.propertiesTypes[h])}return s}_newPacket(){return rt("_newPacket"),this.packet&&(this._list.consume(this.packet.length),rt("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),rt("_newPacket: new packet"),this.packet=new va,this._pos=0,!0}_emitError(i){rt("_emitError"),this.error=i,this.emit("error",i)}}var Ud=Jn;const jd=65536,Ou={},qd=V.Buffer.isBuffer(V.Buffer.from([1,2]).subarray(0,1));function ku(n){const i=V.Buffer.allocUnsafe(2);return i.writeUInt8(n>>8,0),i.writeUInt8(n&255,0+1),i}function Zd(){for(let n=0;n<jd;n++)Ou[n]=ku(n)}function Hd(n){let e=0,o=0;const s=V.Buffer.allocUnsafe(4);do e=n%128|0,n=n/128|0,n>0&&(e=e|128),s.writeUInt8(e,o++);while(n>0&&o<4);return n>0&&(o=0),qd?s.subarray(0,o):s.slice(0,o)}function Wd(n){const i=V.Buffer.allocUnsafe(4);return i.writeUInt32BE(n,0),i}var Vd={cache:Ou,generateCache:Zd,generateNumber:ku,genBufVariableByteInt:Hd,generate4ByteBuffer:Wd},bo={exports:{}};typeof X>"u"||!X.version||X.version.indexOf("v0.")===0||X.version.indexOf("v1.")===0&&X.version.indexOf("v1.8.")!==0?bo.exports={nextTick:$d}:bo.exports=X;function $d(n,i,e,o){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,a,h;switch(s){case 0:case 1:return X.nextTick(n);case 2:return X.nextTick(function(){n.call(null,i)});case 3:return X.nextTick(function(){n.call(null,i,e)});case 4:return X.nextTick(function(){n.call(null,i,e,o)});default:for(a=new Array(s-1),h=0;h<a.length;)a[h++]=arguments[h];return X.nextTick(function(){n.apply(null,a)})}}const st=Zo.exports,Kd=V.Buffer.allocUnsafe(0),Gd=V.Buffer.from([0]),gn=Vd,Qd=bo.exports.nextTick,se=pe.exports("mqtt-packet:writeToStream"),Xn=gn.cache,Yd=gn.generateNumber,Jd=gn.generateCache,xo=gn.genBufVariableByteInt,Xd=gn.generate4ByteBuffer;let ee=Eo,tr=!0;function Ru(n,i,e){switch(se("generate called"),i.cork&&(i.cork(),Qd(tp,i)),tr&&(tr=!1,Jd()),se("generate: packet.cmd: %s",n.cmd),n.cmd){case"connect":return ep(n,i);case"connack":return ip(n,i,e);case"publish":return np(n,i,e);case"puback":case"pubrec":case"pubrel":case"pubcomp":return rp(n,i,e);case"subscribe":return op(n,i,e);case"suback":return sp(n,i,e);case"unsubscribe":return ap(n,i,e);case"unsuback":return up(n,i,e);case"pingreq":case"pingresp":return hp(n,i);case"disconnect":return lp(n,i,e);case"auth":return fp(n,i,e);default:return i.emit("error",new Error("Unknown command")),!1}}Object.defineProperty(Ru,"cacheNumbers",{get(){return ee===Eo},set(n){n?((!Xn||Object.keys(Xn).length===0)&&(tr=!0),ee=Eo):(tr=!1,ee=cp)}});function tp(n){n.uncork()}function ep(n,i,e){const o=n||{},s=o.protocolId||"MQTT";let a=o.protocolVersion||4;const h=o.will;let f=o.clean;const d=o.keepalive||0,c=o.clientId||"",v=o.username,w=o.password,b=o.properties;f===void 0&&(f=!0);let P=0;if(!s||typeof s!="string"&&!V.Buffer.isBuffer(s))return i.emit("error",new Error("Invalid protocolId")),!1;if(P+=s.length+2,a!==3&&a!==4&&a!==5)return i.emit("error",new Error("Invalid protocol version")),!1;if(P+=1,(typeof c=="string"||V.Buffer.isBuffer(c))&&(c||a>=4)&&(c||f))P+=V.Buffer.byteLength(c)+2;else{if(a<4)return i.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(f*1===0)return i.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof d!="number"||d<0||d>65535||d%1!==0)return i.emit("error",new Error("Invalid keepalive")),!1;if(P+=2,P+=1,a===5){var C=Ke(i,b);if(!C)return!1;P+=C.length}if(h){if(typeof h!="object")return i.emit("error",new Error("Invalid will")),!1;if(!h.topic||typeof h.topic!="string")return i.emit("error",new Error("Invalid will topic")),!1;if(P+=V.Buffer.byteLength(h.topic)+2,P+=2,h.payload)if(h.payload.length>=0)typeof h.payload=="string"?P+=V.Buffer.byteLength(h.payload):P+=h.payload.length;else return i.emit("error",new Error("Invalid will payload")),!1;var I={};if(a===5){if(I=Ke(i,h.properties),!I)return!1;P+=I.length}}let F=!1;if(v!=null)if(Ea(v))F=!0,P+=V.Buffer.byteLength(v)+2;else return i.emit("error",new Error("Invalid username")),!1;if(w!=null){if(!F)return i.emit("error",new Error("Username is required to use password")),!1;if(Ea(w))P+=Du(w)+2;else return i.emit("error",new Error("Invalid password")),!1}i.write(st.CONNECT_HEADER),ue(i,P),Pi(i,s),o.bridgeMode&&(a+=128),i.write(a===131?st.VERSION131:a===132?st.VERSION132:a===4?st.VERSION4:a===5?st.VERSION5:st.VERSION3);let A=0;return A|=v!=null?st.USERNAME_MASK:0,A|=w!=null?st.PASSWORD_MASK:0,A|=h&&h.retain?st.WILL_RETAIN_MASK:0,A|=h&&h.qos?h.qos<<st.WILL_QOS_SHIFT:0,A|=h?st.WILL_FLAG_MASK:0,A|=f?st.CLEAN_SESSION_MASK:0,i.write(V.Buffer.from([A])),ee(i,d),a===5&&C.write(),Pi(i,c),h&&(a===5&&I.write(),ui(i,h.topic),Pi(i,h.payload)),v!=null&&Pi(i,v),w!=null&&Pi(i,w),!0}function ip(n,i,e){const o=e?e.protocolVersion:4,s=n||{},a=o===5?s.reasonCode:s.returnCode,h=s.properties;let f=2;if(typeof a!="number")return i.emit("error",new Error("Invalid return code")),!1;let d=null;if(o===5){if(d=Ke(i,h),!d)return!1;f+=d.length}return i.write(st.CONNACK_HEADER),ue(i,f),i.write(s.sessionPresent?st.SESSIONPRESENT_HEADER:Gd),i.write(V.Buffer.from([a])),d!=null&&d.write(),!0}function np(n,i,e){se("publish: packet: %o",n);const o=e?e.protocolVersion:4,s=n||{},a=s.qos||0,h=s.retain?st.RETAIN_MASK:0,f=s.topic,d=s.payload||Kd,c=s.messageId,v=s.properties;let w=0;if(typeof f=="string")w+=V.Buffer.byteLength(f)+2;else if(V.Buffer.isBuffer(f))w+=f.length+2;else return i.emit("error",new Error("Invalid topic")),!1;if(V.Buffer.isBuffer(d)?w+=d.length:w+=V.Buffer.byteLength(d),a&&typeof c!="number")return i.emit("error",new Error("Invalid messageId")),!1;a&&(w+=2);let b=null;if(o===5){if(b=Ke(i,v),!b)return!1;w+=b.length}return i.write(st.PUBLISH_HEADER[a][s.dup?1:0][h?1:0]),ue(i,w),ee(i,Du(f)),i.write(f),a>0&&ee(i,c),b!=null&&b.write(),se("publish: payload: %o",d),i.write(d)}function rp(n,i,e){const o=e?e.protocolVersion:4,s=n||{},a=s.cmd||"puback",h=s.messageId,f=s.dup&&a==="pubrel"?st.DUP_MASK:0;let d=0;const c=s.reasonCode,v=s.properties;let w=o===5?3:2;if(a==="pubrel"&&(d=1),typeof h!="number")return i.emit("error",new Error("Invalid messageId")),!1;let b=null;if(o===5&&typeof v=="object"){if(b=mn(i,v,e,w),!b)return!1;w+=b.length}return i.write(st.ACKS[a][d][f][0]),ue(i,w),ee(i,h),o===5&&i.write(V.Buffer.from([c])),b!==null&&b.write(),!0}function op(n,i,e){se("subscribe: packet: ");const o=e?e.protocolVersion:4,s=n||{},a=s.dup?st.DUP_MASK:0,h=s.messageId,f=s.subscriptions,d=s.properties;let c=0;if(typeof h!="number")return i.emit("error",new Error("Invalid messageId")),!1;c+=2;let v=null;if(o===5){if(v=Ke(i,d),!v)return!1;c+=v.length}if(typeof f=="object"&&f.length)for(let b=0;b<f.length;b+=1){const P=f[b].topic,C=f[b].qos;if(typeof P!="string")return i.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof C!="number")return i.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(o===5){if(typeof(f[b].nl||!1)!="boolean")return i.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(f[b].rap||!1)!="boolean")return i.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const A=f[b].rh||0;if(typeof A!="number"||A>2)return i.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}c+=V.Buffer.byteLength(P)+2+1}else return i.emit("error",new Error("Invalid subscriptions")),!1;se("subscribe: writing to stream: %o",st.SUBSCRIBE_HEADER),i.write(st.SUBSCRIBE_HEADER[1][a?1:0][0]),ue(i,c),ee(i,h),v!==null&&v.write();let w=!0;for(const b of f){const P=b.topic,C=b.qos,I=+b.nl,F=+b.rap,A=b.rh;let k;ui(i,P),k=st.SUBSCRIBE_OPTIONS_QOS[C],o===5&&(k|=I?st.SUBSCRIBE_OPTIONS_NL:0,k|=F?st.SUBSCRIBE_OPTIONS_RAP:0,k|=A?st.SUBSCRIBE_OPTIONS_RH[A]:0),w=i.write(V.Buffer.from([k]))}return w}function sp(n,i,e){const o=e?e.protocolVersion:4,s=n||{},a=s.messageId,h=s.granted,f=s.properties;let d=0;if(typeof a!="number")return i.emit("error",new Error("Invalid messageId")),!1;if(d+=2,typeof h=="object"&&h.length)for(let v=0;v<h.length;v+=1){if(typeof h[v]!="number")return i.emit("error",new Error("Invalid qos vector")),!1;d+=1}else return i.emit("error",new Error("Invalid qos vector")),!1;let c=null;if(o===5){if(c=mn(i,f,e,d),!c)return!1;d+=c.length}return i.write(st.SUBACK_HEADER),ue(i,d),ee(i,a),c!==null&&c.write(),i.write(V.Buffer.from(h))}function ap(n,i,e){const o=e?e.protocolVersion:4,s=n||{},a=s.messageId,h=s.dup?st.DUP_MASK:0,f=s.unsubscriptions,d=s.properties;let c=0;if(typeof a!="number")return i.emit("error",new Error("Invalid messageId")),!1;if(c+=2,typeof f=="object"&&f.length)for(let b=0;b<f.length;b+=1){if(typeof f[b]!="string")return i.emit("error",new Error("Invalid unsubscriptions")),!1;c+=V.Buffer.byteLength(f[b])+2}else return i.emit("error",new Error("Invalid unsubscriptions")),!1;let v=null;if(o===5){if(v=Ke(i,d),!v)return!1;c+=v.length}i.write(st.UNSUBSCRIBE_HEADER[1][h?1:0][0]),ue(i,c),ee(i,a),v!==null&&v.write();let w=!0;for(let b=0;b<f.length;b++)w=ui(i,f[b]);return w}function up(n,i,e){const o=e?e.protocolVersion:4,s=n||{},a=s.messageId,h=s.dup?st.DUP_MASK:0,f=s.granted,d=s.properties,c=s.cmd,v=0;let w=2;if(typeof a!="number")return i.emit("error",new Error("Invalid messageId")),!1;if(o===5)if(typeof f=="object"&&f.length)for(let P=0;P<f.length;P+=1){if(typeof f[P]!="number")return i.emit("error",new Error("Invalid qos vector")),!1;w+=1}else return i.emit("error",new Error("Invalid qos vector")),!1;let b=null;if(o===5){if(b=mn(i,d,e,w),!b)return!1;w+=b.length}return i.write(st.ACKS[c][v][h][0]),ue(i,w),ee(i,a),b!==null&&b.write(),o===5&&i.write(V.Buffer.from(f)),!0}function hp(n,i,e){return i.write(st.EMPTY[n.cmd])}function lp(n,i,e){const o=e?e.protocolVersion:4,s=n||{},a=s.reasonCode,h=s.properties;let f=o===5?1:0,d=null;if(o===5){if(d=mn(i,h,e,f),!d)return!1;f+=d.length}return i.write(V.Buffer.from([st.codes.disconnect<<4])),ue(i,f),o===5&&i.write(V.Buffer.from([a])),d!==null&&d.write(),!0}function fp(n,i,e){const o=e?e.protocolVersion:4,s=n||{},a=s.reasonCode,h=s.properties;let f=o===5?1:0;o!==5&&i.emit("error",new Error("Invalid mqtt version for auth packet"));const d=mn(i,h,e,f);return d?(f+=d.length,i.write(V.Buffer.from([st.codes.auth<<4])),ue(i,f),i.write(V.Buffer.from([a])),d!==null&&d.write(),!0):!1}const ya={};function ue(n,i){if(i>st.VARBYTEINT_MAX)return n.emit("error",new Error(`Invalid variable byte integer: ${i}`)),!1;let e=ya[i];return e||(e=xo(i),i<16384&&(ya[i]=e)),se("writeVarByteInt: writing to stream: %o",e),n.write(e)}function ui(n,i){const e=V.Buffer.byteLength(i);return ee(n,e),se("writeString: %s",i),n.write(i,"utf8")}function wa(n,i,e){ui(n,i),ui(n,e)}function Eo(n,i){return se("writeNumberCached: number: %d",i),se("writeNumberCached: %o",Xn[i]),n.write(Xn[i])}function cp(n,i){const e=Yd(i);return se("writeNumberGenerated: %o",e),n.write(e)}function dp(n,i){const e=Xd(i);return se("write4ByteNumber: %o",e),n.write(e)}function Pi(n,i){typeof i=="string"?ui(n,i):i?(ee(n,i.length),n.write(i)):ee(n,0)}function Ke(n,i){if(typeof i!="object"||i.length!=null)return{length:1,write(){xa(n,{},0)}};let e=0;function o(a,h){const f=st.propertiesTypes[a];let d=0;switch(f){case"byte":{if(typeof h!="boolean")return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=1+1;break}case"int8":{if(typeof h!="number"||h<0||h>255)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=1+1;break}case"binary":{if(h&&h===null)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=1+V.Buffer.byteLength(h)+2;break}case"int16":{if(typeof h!="number"||h<0||h>65535)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=1+2;break}case"int32":{if(typeof h!="number"||h<0||h>4294967295)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=1+4;break}case"var":{if(typeof h!="number"||h<0||h>268435455)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=1+V.Buffer.byteLength(xo(h));break}case"string":{if(typeof h!="string")return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=1+2+V.Buffer.byteLength(h.toString());break}case"pair":{if(typeof h!="object")return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;d+=Object.getOwnPropertyNames(h).reduce((c,v)=>{const w=h[v];return Array.isArray(w)?c+=w.reduce((b,P)=>(b+=1+2+V.Buffer.byteLength(v.toString())+2+V.Buffer.byteLength(P.toString()),b),0):c+=1+2+V.Buffer.byteLength(v.toString())+2+V.Buffer.byteLength(h[v].toString()),c},0);break}default:return n.emit("error",new Error(`Invalid property ${a}: ${h}`)),!1}return d}if(i)for(const a in i){let h=0,f=0;const d=i[a];if(Array.isArray(d))for(let c=0;c<d.length;c++){if(f=o(a,d[c]),!f)return!1;h+=f}else{if(f=o(a,d),!f)return!1;h=f}if(!h)return!1;e+=h}return{length:V.Buffer.byteLength(xo(e))+e,write(){xa(n,i,e)}}}function mn(n,i,e,o){const s=["reasonString","userProperties"],a=e&&e.properties&&e.properties.maximumPacketSize?e.properties.maximumPacketSize:0;let h=Ke(n,i);if(a)for(;o+h.length>a;){const f=s.shift();if(f&&i[f])delete i[f],h=Ke(n,i);else return!1}return h}function ba(n,i,e){switch(st.propertiesTypes[i]){case"byte":{n.write(V.Buffer.from([st.properties[i]])),n.write(V.Buffer.from([+e]));break}case"int8":{n.write(V.Buffer.from([st.properties[i]])),n.write(V.Buffer.from([e]));break}case"binary":{n.write(V.Buffer.from([st.properties[i]])),Pi(n,e);break}case"int16":{n.write(V.Buffer.from([st.properties[i]])),ee(n,e);break}case"int32":{n.write(V.Buffer.from([st.properties[i]])),dp(n,e);break}case"var":{n.write(V.Buffer.from([st.properties[i]])),ue(n,e);break}case"string":{n.write(V.Buffer.from([st.properties[i]])),ui(n,e);break}case"pair":{Object.getOwnPropertyNames(e).forEach(s=>{const a=e[s];Array.isArray(a)?a.forEach(h=>{n.write(V.Buffer.from([st.properties[i]])),wa(n,s.toString(),h.toString())}):(n.write(V.Buffer.from([st.properties[i]])),wa(n,s.toString(),a.toString()))});break}default:return n.emit("error",new Error(`Invalid property ${i} value: ${e}`)),!1}}function xa(n,i,e){ue(n,e);for(const o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&i[o]!==null){const s=i[o];if(Array.isArray(s))for(let a=0;a<s.length;a++)ba(n,o,s[a]);else ba(n,o,s)}}function Du(n){return n?n instanceof V.Buffer?n.length:V.Buffer.byteLength(n):0}function Ea(n){return typeof n=="string"||n instanceof V.Buffer}var Nu=Ru;const pp=Nu,_p=dn;function gp(n,i){const e=new mp;return pp(n,e,i),e.concat()}class mp extends _p{constructor(){super(),this._array=new Array(20),this._i=0}write(i){return this._array[this._i++]=i,!0}concat(){let i=0;const e=new Array(this._array.length),o=this._array;let s=0,a;for(a=0;a<o.length&&o[a]!==void 0;a++)typeof o[a]!="string"?e[a]=o[a].length:e[a]=V.Buffer.byteLength(o[a]),i+=e[a];const h=V.Buffer.allocUnsafe(i);for(a=0;a<o.length&&o[a]!==void 0;a++)typeof o[a]!="string"?(o[a].copy(h,s),s+=e[a]):(h.write(o[a],s),s+=e[a]);return h}}var vp=gp;cr.parser=Ud.parser;cr.generate=vp;cr.writeToStream=Nu;function Ge(){if(!(this instanceof Ge))return new Ge;this.nextId=Math.max(1,Math.floor(Math.random()*65535))}Ge.prototype.allocate=function(){const n=this.nextId++;return this.nextId===65536&&(this.nextId=1),n};Ge.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1};Ge.prototype.register=function(n){return!0};Ge.prototype.deallocate=function(n){};Ge.prototype.clear=function(){};var yp=Ge;function wp(n,i,e){var o=this;this._callback=n,this._args=e,this._interval=setInterval(n,i,this._args),this.reschedule=function(s){s||(s=o._interval),o._interval&&clearInterval(o._interval),o._interval=setInterval(o._callback,s,o._args)},this.clear=function(){o._interval&&(clearInterval(o._interval),o._interval=void 0)},this.destroy=function(){o._interval&&clearInterval(o._interval),o._callback=void 0,o._interval=void 0,o._args=void 0}}function bp(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var n;if(arguments.length>0){n=new Array(arguments.length-2);for(var i=0;i<n.length;i++)n[i]=arguments[i+2]}return new wp(arguments[0],arguments[1],n)}var xp=bp,Ep=Sp;function Ci(n){return n instanceof V.Buffer?V.Buffer.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function Sp(n){if(n=n||{},n.circles)return Tp(n);return n.proto?o:e;function i(s,a){for(var h=Object.keys(s),f=new Array(h.length),d=0;d<h.length;d++){var c=h[d],v=s[c];typeof v!="object"||v===null?f[c]=v:v instanceof Date?f[c]=new Date(v):ArrayBuffer.isView(v)?f[c]=Ci(v):f[c]=a(v)}return f}function e(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return i(s,e);if(s instanceof Map)return new Map(i(Array.from(s),e));if(s instanceof Set)return new Set(i(Array.from(s),e));var a={};for(var h in s)if(Object.hasOwnProperty.call(s,h)!==!1){var f=s[h];typeof f!="object"||f===null?a[h]=f:f instanceof Date?a[h]=new Date(f):f instanceof Map?a[h]=new Map(i(Array.from(f),e)):f instanceof Set?a[h]=new Set(i(Array.from(f),e)):ArrayBuffer.isView(f)?a[h]=Ci(f):a[h]=e(f)}return a}function o(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return i(s,o);if(s instanceof Map)return new Map(i(Array.from(s),o));if(s instanceof Set)return new Set(i(Array.from(s),o));var a={};for(var h in s){var f=s[h];typeof f!="object"||f===null?a[h]=f:f instanceof Date?a[h]=new Date(f):f instanceof Map?a[h]=new Map(i(Array.from(f),o)):f instanceof Set?a[h]=new Set(i(Array.from(f),o)):ArrayBuffer.isView(f)?a[h]=Ci(f):a[h]=o(f)}return a}}function Tp(n){var i=[],e=[];return n.proto?a:s;function o(h,f){for(var d=Object.keys(h),c=new Array(d.length),v=0;v<d.length;v++){var w=d[v],b=h[w];if(typeof b!="object"||b===null)c[w]=b;else if(b instanceof Date)c[w]=new Date(b);else if(ArrayBuffer.isView(b))c[w]=Ci(b);else{var P=i.indexOf(b);P!==-1?c[w]=e[P]:c[w]=f(b)}}return c}function s(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return o(h,s);if(h instanceof Map)return new Map(o(Array.from(h),s));if(h instanceof Set)return new Set(o(Array.from(h),s));var f={};i.push(h),e.push(f);for(var d in h)if(Object.hasOwnProperty.call(h,d)!==!1){var c=h[d];if(typeof c!="object"||c===null)f[d]=c;else if(c instanceof Date)f[d]=new Date(c);else if(c instanceof Map)f[d]=new Map(o(Array.from(c),s));else if(c instanceof Set)f[d]=new Set(o(Array.from(c),s));else if(ArrayBuffer.isView(c))f[d]=Ci(c);else{var v=i.indexOf(c);v!==-1?f[d]=e[v]:f[d]=s(c)}}return i.pop(),e.pop(),f}function a(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return o(h,a);if(h instanceof Map)return new Map(o(Array.from(h),a));if(h instanceof Set)return new Set(o(Array.from(h),a));var f={};i.push(h),e.push(f);for(var d in h){var c=h[d];if(typeof c!="object"||c===null)f[d]=c;else if(c instanceof Date)f[d]=new Date(c);else if(c instanceof Map)f[d]=new Map(o(Array.from(c),a));else if(c instanceof Set)f[d]=new Set(o(Array.from(c),a));else if(ArrayBuffer.isView(c))f[d]=Ci(c);else{var v=i.indexOf(c);v!==-1?f[d]=e[v]:f[d]=a(c)}}return i.pop(),e.pop(),f}}var Pp=Ep();function Lp(n){const i=n.split("/");for(let e=0;e<i.length;e++)if(i[e]!=="+"){if(i[e]==="#")return e===i.length-1;if(i[e].indexOf("+")!==-1||i[e].indexOf("#")!==-1)return!1}return!0}function Ap(n){if(n.length===0)return"empty_topic_list";for(let i=0;i<n.length;i++)if(!Lp(n[i]))return n[i];return null}var Ip={validateTopics:Ap};const zu=dn.EventEmitter,er=bu,Cp=xc,Bp=Od,Fu=cr,Mp=yp,Op=Ne.exports.Writable,kp=Te.exports,Rp=xp,Uu=Pp,ju=Ip,pr=Bo,z=pe.exports("mqttjs:client"),Ho=X?X.nextTick:function(n){setTimeout(n,0)},Wo=Oi.setImmediate||function(n){Ho(n)},Sa={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0},Dp=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],ir={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function Np(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function zp(n,i){if(n.options.protocolVersion===5&&i.cmd==="publish"){let e;i.properties&&(e=i.properties.topicAlias);const o=i.topic.toString();if(n.topicAliasSend)if(e){if(o.length!==0&&(z("applyTopicAlias :: register topic: %s - alias: %d",o,e),!n.topicAliasSend.put(o,e)))return z("applyTopicAlias :: error out of range. topic: %s - alias: %d",o,e),new Error("Sending Topic Alias out of range")}else o.length!==0&&(n.options.autoAssignTopicAlias?(e=n.topicAliasSend.getAliasByTopic(o),e?(i.topic="",i.properties={...i.properties,topicAlias:e},z("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",o,e)):(e=n.topicAliasSend.getLruAlias(),n.topicAliasSend.put(o,e),i.properties={...i.properties,topicAlias:e},z("applyTopicAlias :: auto assign topic: %s - alias: %d",o,e))):n.options.autoUseTopicAlias&&(e=n.topicAliasSend.getAliasByTopic(o),e&&(i.topic="",i.properties={...i.properties,topicAlias:e},z("applyTopicAlias :: auto use topic: %s - alias: %d",o,e))));else if(e)return z("applyTopicAlias :: error out of range. topic: %s - alias: %d",o,e),new Error("Sending Topic Alias out of range")}}function qu(n,i){let e;i.properties&&(e=i.properties.topicAlias);let o=i.topic.toString();if(o.length===0){if(typeof e>"u")return new Error("Unregistered Topic Alias");if(o=n.topicAliasSend.getTopicByAlias(e),typeof o>"u")return new Error("Unregistered Topic Alias");i.topic=o}e&&delete i.properties.topicAlias}function Bi(n,i,e){z("sendPacket :: packet: %O",i),z("sendPacket :: emitting `packetsend`"),n.emit("packetsend",i),z("sendPacket :: writing to stream");const o=Fu.writeToStream(i,n.stream,n.options);z("sendPacket :: writeToStream result %s",o),!o&&e&&e!==Vt?(z("sendPacket :: handle events on `drain` once through callback."),n.stream.once("drain",e)):e&&(z("sendPacket :: invoking cb"),e())}function Fp(n){n&&(z("flush: queue exists? %b",!!n),Object.keys(n).forEach(function(i){typeof n[i].cb=="function"&&(n[i].cb(new Error("Connection closed")),delete n[i])}))}function Up(n){n&&(z("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(n).forEach(function(i){n[i].volatile&&typeof n[i].cb=="function"&&(n[i].cb(new Error("Connection closed")),delete n[i])}))}function Ta(n,i,e,o){z("storeAndSend :: store packet with cmd %s to outgoingStore",i.cmd);let s=i,a;if(s.cmd==="publish"&&(s=Uu(i),a=qu(n,s),a))return e&&e(a);n.outgoingStore.put(s,function(f){if(f)return e&&e(f);o(),Bi(n,i,e)})}function Vt(n){z("nop ::",n)}function pt(n,i){let e;const o=this;if(!(this instanceof pt))return new pt(n,i);this.options=i||{};for(e in Sa)typeof this.options[e]>"u"?this.options[e]=Sa[e]:this.options[e]=i[e];z("MqttClient :: options.protocol",i.protocol),z("MqttClient :: options.protocolVersion",i.protocolVersion),z("MqttClient :: options.username",i.username),z("MqttClient :: options.keepalive",i.keepalive),z("MqttClient :: options.reconnectPeriod",i.reconnectPeriod),z("MqttClient :: options.rejectUnauthorized",i.rejectUnauthorized),z("MqttClient :: options.topicAliasMaximum",i.topicAliasMaximum),this.options.clientId=typeof i.clientId=="string"?i.clientId:Np(),z("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=i.protocolVersion===5&&i.customHandleAcks?i.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=n,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new Mp:this.options.messageIdProvider,this.outgoingStore=i.outgoingStore||new er,this.incomingStore=i.incomingStore||new er,this.queueQoSZero=i.queueQoSZero===void 0?!0:i.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,i.topicAliasMaximum>0&&(i.topicAliasMaximum>65535?z("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new Cp(i.topicAliasMaximum)),this.on("connect",function(){const s=this.queue;function a(){const h=s.shift();z("deliver :: entry %o",h);let f=null;if(!h){o._resubscribe();return}f=h.packet,z("deliver :: call _sendPacket for %o",f);let d=!0;f.messageId&&f.messageId!==0&&(o.messageIdProvider.register(f.messageId)||(d=!1)),d?o._sendPacket(f,function(c){h.cb&&h.cb(c),a()}):(z("messageId: %d has already used. The message is skipped and removed.",f.messageId),a())}z("connect :: sending queued packets"),a()}),this.on("close",function(){z("close :: connected set to `false`"),this.connected=!1,z("close :: clearing connackTimer"),clearTimeout(this.connackTimer),z("close :: clearing ping timer"),o.pingTimer!==null&&(o.pingTimer.clear(),o.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),z("close :: calling _setupReconnect"),this._setupReconnect()}),zu.call(this),z("MqttClient :: setting up stream"),this._setupStream()}kp(pt,zu);pt.prototype._setupStream=function(){const n=this,i=new Op,e=Fu.parser(this.options);let o=null;const s=[];z("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),z("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),e.on("packet",function(c){z("parser :: on packet push to packets array."),s.push(c)});function a(){if(s.length)Ho(h);else{const c=o;o=null,c()}}function h(){z("work :: getting next packet in queue");const c=s.shift();if(c)z("work :: packet pulled from queue"),n._handlePacket(c,a);else{z("work :: no packets in queue");const v=o;o=null,z("work :: done flag is %s",!!v),v&&v()}}i._write=function(c,v,w){o=w,z("writable stream :: parsing buffer"),e.parse(c),h()};function f(c){z("streamErrorHandler :: error",c.message),Dp.includes(c.code)?(z("streamErrorHandler :: emitting error"),n.emit("error",c)):Vt(c)}z("_setupStream :: pipe stream to writable stream"),this.stream.pipe(i),this.stream.on("error",f),this.stream.on("close",function(){z("(%s)stream :: on close",n.options.clientId),Up(n.outgoing),z("stream: emit close to MqttClient"),n.emit("close")}),z("_setupStream: sending packet `connect`");const d=Object.create(this.options);if(d.cmd="connect",this.topicAliasRecv&&(d.properties||(d.properties={}),this.topicAliasRecv&&(d.properties.topicAliasMaximum=this.topicAliasRecv.max)),Bi(this,d),e.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return n.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const c=pr({cmd:"auth",reasonCode:0},this.options.authPacket);Bi(this,c)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){z("!!connectTimeout hit!! Calling _cleanUp with force `true`"),n._cleanUp(!0)},this.options.connectTimeout)};pt.prototype._handlePacket=function(n,i){const e=this.options;if(e.protocolVersion===5&&e.properties&&e.properties.maximumPacketSize&&e.properties.maximumPacketSize<n.length)return this.emit("error",new Error("exceeding packets size "+n.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(z("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",n),n.cmd){case"publish":this._handlePublish(n,i);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(n),i();break;case"pubrel":this._handlePubrel(n,i);break;case"connack":this._handleConnack(n),i();break;case"auth":this._handleAuth(n),i();break;case"pingresp":this._handlePingresp(n),i();break;case"disconnect":this._handleDisconnect(n),i();break}};pt.prototype._checkDisconnecting=function(n){return this.disconnecting&&(n&&n!==Vt?n(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting};pt.prototype.publish=function(n,i,e,o){z("publish :: message `%s` to topic `%s`",i,n);const s=this.options;if(typeof e=="function"&&(o=e,e=null),e=pr({qos:0,retain:!1,dup:!1},e),this._checkDisconnecting(o))return this;const h=this,f=function(){let d=0;if((e.qos===1||e.qos===2)&&(d=h._nextId(),d===null))return z("No messageId left"),!1;const c={cmd:"publish",topic:n,payload:i,qos:e.qos,retain:e.retain,messageId:d,dup:e.dup};switch(s.protocolVersion===5&&(c.properties=e.properties),z("publish :: qos",e.qos),e.qos){case 1:case 2:h.outgoing[c.messageId]={volatile:!1,cb:o||Vt},z("MqttClient:publish: packet cmd: %s",c.cmd),h._sendPacket(c,void 0,e.cbStorePut);break;default:z("MqttClient:publish: packet cmd: %s",c.cmd),h._sendPacket(c,o,e.cbStorePut);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!f())&&this._storeProcessingQueue.push({invoke:f,cbStorePut:e.cbStorePut,callback:o}),this};pt.prototype.subscribe=function(){const n=this,i=new Array(arguments.length);for(let w=0;w<arguments.length;w++)i[w]=arguments[w];const e=[];let o=i.shift();const s=o.resubscribe;let a=i.pop()||Vt,h=i.pop();const f=this.options.protocolVersion;delete o.resubscribe,typeof o=="string"&&(o=[o]),typeof a!="function"&&(h=a,a=Vt);const d=ju.validateTopics(o);if(d!==null)return Wo(a,new Error("Invalid topic "+d)),this;if(this._checkDisconnecting(a))return z("subscribe: discconecting true"),this;const c={qos:0};if(f===5&&(c.nl=!1,c.rap=!1,c.rh=0),h=pr(c,h),Array.isArray(o)?o.forEach(function(w){if(z("subscribe: array topic %s",w),!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,w)||n._resubscribeTopics[w].qos<h.qos||s){const b={topic:w,qos:h.qos};f===5&&(b.nl=h.nl,b.rap=h.rap,b.rh=h.rh,b.properties=h.properties),z("subscribe: pushing topic `%s` and qos `%s` to subs list",b.topic,b.qos),e.push(b)}}):Object.keys(o).forEach(function(w){if(z("subscribe: object topic %s",w),!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,w)||n._resubscribeTopics[w].qos<o[w].qos||s){const b={topic:w,qos:o[w].qos};f===5&&(b.nl=o[w].nl,b.rap=o[w].rap,b.rh=o[w].rh,b.properties=h.properties),z("subscribe: pushing `%s` to subs list",b),e.push(b)}}),!e.length)return a(null,[]),this;const v=function(){const w=n._nextId();if(w===null)return z("No messageId left"),!1;const b={cmd:"subscribe",subscriptions:e,qos:1,retain:!1,dup:!1,messageId:w};if(h.properties&&(b.properties=h.properties),n.options.resubscribe){z("subscribe :: resubscribe true");const P=[];e.forEach(function(C){if(n.options.reconnectPeriod>0){const I={qos:C.qos};f===5&&(I.nl=C.nl||!1,I.rap=C.rap||!1,I.rh=C.rh||0,I.properties=C.properties),n._resubscribeTopics[C.topic]=I,P.push(C.topic)}}),n.messageIdToTopic[b.messageId]=P}return n.outgoing[b.messageId]={volatile:!0,cb:function(P,C){if(!P){const I=C.granted;for(let F=0;F<I.length;F+=1)e[F].qos=I[F]}a(P,e)}},z("subscribe :: call _sendPacket"),n._sendPacket(b),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!v())&&this._storeProcessingQueue.push({invoke:v,callback:a}),this};pt.prototype.unsubscribe=function(){const n=this,i=new Array(arguments.length);for(let f=0;f<arguments.length;f++)i[f]=arguments[f];let e=i.shift(),o=i.pop()||Vt,s=i.pop();typeof e=="string"&&(e=[e]),typeof o!="function"&&(s=o,o=Vt);const a=ju.validateTopics(e);if(a!==null)return Wo(o,new Error("Invalid topic "+a)),this;if(n._checkDisconnecting(o))return this;const h=function(){const f=n._nextId();if(f===null)return z("No messageId left"),!1;const d={cmd:"unsubscribe",qos:1,messageId:f};return typeof e=="string"?d.unsubscriptions=[e]:Array.isArray(e)&&(d.unsubscriptions=e),n.options.resubscribe&&d.unsubscriptions.forEach(function(c){delete n._resubscribeTopics[c]}),typeof s=="object"&&s.properties&&(d.properties=s.properties),n.outgoing[d.messageId]={volatile:!0,cb:o},z("unsubscribe: call _sendPacket"),n._sendPacket(d),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!h())&&this._storeProcessingQueue.push({invoke:h,callback:o}),this};pt.prototype.end=function(n,i,e){const o=this;z("end :: (%s)",this.options.clientId),(n==null||typeof n!="boolean")&&(e=i||Vt,i=n,n=!1,typeof i!="object"&&(e=i,i=null,typeof e!="function"&&(e=Vt))),typeof i!="object"&&(e=i,i=null),z("end :: cb? %s",!!e),e=e||Vt;function s(){z("end :: closeStores: closing incoming and outgoing stores"),o.disconnected=!0,o.incomingStore.close(function(h){o.outgoingStore.close(function(f){if(z("end :: closeStores: emitting end"),o.emit("end"),e){const d=h||f;z("end :: closeStores: invoking callback with args"),e(d)}})}),o._deferredReconnect&&o._deferredReconnect()}function a(){z("end :: (%s) :: finish :: calling _cleanUp with force %s",o.options.clientId,n),o._cleanUp(n,()=>{z("end :: finish :: calling process.nextTick on closeStores"),Ho(s.bind(o))},i)}return this.disconnecting?(e(),this):(this._clearReconnect(),this.disconnecting=!0,!n&&Object.keys(this.outgoing).length>0?(z("end :: (%s) :: calling finish in 10ms once outgoing is empty",o.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,a,10))):(z("end :: (%s) :: immediately calling finish",o.options.clientId),a()),this)};pt.prototype.removeOutgoingMessage=function(n){const i=this.outgoing[n]?this.outgoing[n].cb:null;return delete this.outgoing[n],this.outgoingStore.del({messageId:n},function(){i(new Error("Message removed"))}),this};pt.prototype.reconnect=function(n){z("client reconnect");const i=this,e=function(){n?(i.options.incomingStore=n.incomingStore,i.options.outgoingStore=n.outgoingStore):(i.options.incomingStore=null,i.options.outgoingStore=null),i.incomingStore=i.options.incomingStore||new er,i.outgoingStore=i.options.outgoingStore||new er,i.disconnecting=!1,i.disconnected=!1,i._deferredReconnect=null,i._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=e:e(),this};pt.prototype._reconnect=function(){z("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),z("client already connected. disconnecting first.")):(z("_reconnect: calling _setupStream"),this._setupStream())};pt.prototype._setupReconnect=function(){const n=this;!n.disconnecting&&!n.reconnectTimer&&n.options.reconnectPeriod>0?(this.reconnecting||(z("_setupReconnect :: emit `offline` state"),this.emit("offline"),z("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),z("_setupReconnect :: setting reconnectTimer for %d ms",n.options.reconnectPeriod),n.reconnectTimer=setInterval(function(){z("reconnectTimer :: reconnect triggered!"),n._reconnect()},n.options.reconnectPeriod)):z("_setupReconnect :: doing nothing...")};pt.prototype._clearReconnect=function(){z("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)};pt.prototype._cleanUp=function(n,i){const e=arguments[2];if(i&&(z("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",i)),z("_cleanUp :: forced? %s",n),n)this.options.reconnectPeriod===0&&this.options.clean&&Fp(this.outgoing),z("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const o=pr({cmd:"disconnect"},e);z("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(o,Wo.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(z("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(z("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),i&&!this.connected&&(z("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",i),i())};pt.prototype._sendPacket=function(n,i,e){z("_sendPacket :: (%s) ::  start",this.options.clientId),e=e||Vt,i=i||Vt;const o=zp(this,n);if(o){i(o);return}if(!this.connected){if(n.cmd==="auth"){this._shiftPingInterval(),Bi(this,n,i);return}z("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(n,i,e);return}switch(this._shiftPingInterval(),n.cmd){case"publish":break;case"pubrel":Ta(this,n,i,e);return;default:Bi(this,n,i);return}switch(n.qos){case 2:case 1:Ta(this,n,i,e);break;case 0:default:Bi(this,n,i);break}z("_sendPacket :: (%s) ::  end",this.options.clientId)};pt.prototype._storePacket=function(n,i,e){z("_storePacket :: packet: %o",n),z("_storePacket :: cb? %s",!!i),e=e||Vt;let o=n;if(o.cmd==="publish"){o=Uu(n);const s=qu(this,o);if(s)return i&&i(s)}(o.qos||0)===0&&this.queueQoSZero||o.cmd!=="publish"?this.queue.push({packet:o,cb:i}):o.qos>0?(i=this.outgoing[o.messageId]?this.outgoing[o.messageId].cb:null,this.outgoingStore.put(o,function(s){if(s)return i&&i(s);e()})):i&&i(new Error("No connection to broker"))};pt.prototype._setupPingTimer=function(){z("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const n=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=Rp(function(){n._checkPing()},this.options.keepalive*1e3))};pt.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)};pt.prototype._checkPing=function(){z("_checkPing :: checking ping..."),this.pingResp?(z("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(z("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))};pt.prototype._handlePingresp=function(){this.pingResp=!0};pt.prototype._handleConnack=function(n){z("_handleConnack");const i=this.options,o=i.protocolVersion===5?n.reasonCode:n.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,n.properties){if(n.properties.topicAliasMaximum){if(n.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}n.properties.topicAliasMaximum>0&&(this.topicAliasSend=new Bp(n.properties.topicAliasMaximum))}n.properties.serverKeepAlive&&i.keepalive&&(i.keepalive=n.properties.serverKeepAlive,this._shiftPingInterval()),n.properties.maximumPacketSize&&(i.properties||(i.properties={}),i.properties.maximumPacketSize=n.properties.maximumPacketSize)}if(o===0)this.reconnecting=!1,this._onConnect(n);else if(o>0){const s=new Error("Connection refused: "+ir[o]);s.code=o,this.emit("error",s)}};pt.prototype._handleAuth=function(n){const e=this.options.protocolVersion,o=e===5?n.reasonCode:n.returnCode;if(e!==5){const a=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+e);a.code=o,this.emit("error",a);return}const s=this;this.handleAuth(n,function(a,h){if(a){s.emit("error",a);return}if(o===24)s.reconnecting=!1,s._sendPacket(h);else{const f=new Error("Connection refused: "+ir[o]);a.code=o,s.emit("error",f)}})};pt.prototype.handleAuth=function(n,i){i()};pt.prototype._handlePublish=function(n,i){z("_handlePublish: packet %o",n),i=typeof i<"u"?i:Vt;let e=n.topic.toString();const o=n.payload,s=n.qos,a=n.messageId,h=this,f=this.options,d=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let c;if(n.properties&&(c=n.properties.topicAlias),typeof c<"u")if(e.length===0)if(c>0&&c<=65535){const v=this.topicAliasRecv.getTopicByAlias(c);if(v)e=v,z("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",e,c);else{z("_handlePublish :: unregistered topic alias. alias: %d",c),this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{z("_handlePublish :: topic alias out of range. alias: %d",c),this.emit("error",new Error("Received Topic Alias is out of range"));return}else if(this.topicAliasRecv.put(e,c))z("_handlePublish :: registered topic: %s - alias: %d",e,c);else{z("_handlePublish :: topic alias out of range. alias: %d",c),this.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(z("_handlePublish: qos %d",s),s){case 2:{f.customHandleAcks(e,o,n,function(c,v){if(c instanceof Error||(v=c,c=null),c)return h.emit("error",c);if(d.indexOf(v)===-1)return h.emit("error",new Error("Wrong reason code for pubrec"));v?h._sendPacket({cmd:"pubrec",messageId:a,reasonCode:v},i):h.incomingStore.put(n,function(){h._sendPacket({cmd:"pubrec",messageId:a},i)})});break}case 1:{f.customHandleAcks(e,o,n,function(c,v){if(c instanceof Error||(v=c,c=null),c)return h.emit("error",c);if(d.indexOf(v)===-1)return h.emit("error",new Error("Wrong reason code for puback"));v||h.emit("message",e,o,n),h.handleMessage(n,function(w){if(w)return i&&i(w);h._sendPacket({cmd:"puback",messageId:a,reasonCode:v},i)})});break}case 0:this.emit("message",e,o,n),this.handleMessage(n,i);break;default:z("_handlePublish: unknown QoS. Doing nothing.");break}};pt.prototype.handleMessage=function(n,i){i()};pt.prototype._handleAck=function(n){const i=n.messageId,e=n.cmd;let o=null;const s=this.outgoing[i]?this.outgoing[i].cb:null,a=this;let h;if(!s){z("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(z("_handleAck :: packet type",e),e){case"pubcomp":case"puback":{const f=n.reasonCode;f&&f>0&&f!==16&&(h=new Error("Publish error: "+ir[f]),h.code=f,s(h,n)),delete this.outgoing[i],this.outgoingStore.del(n,s),this.messageIdProvider.deallocate(i),this._invokeStoreProcessingQueue();break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:i};const f=n.reasonCode;f&&f>0&&f!==16?(h=new Error("Publish error: "+ir[f]),h.code=f,s(h,n)):this._sendPacket(o);break}case"suback":{delete this.outgoing[i],this.messageIdProvider.deallocate(i);for(let f=0;f<n.granted.length;f++)if((n.granted[f]&128)!==0){const d=this.messageIdToTopic[i];d&&d.forEach(function(c){delete a._resubscribeTopics[c]})}this._invokeStoreProcessingQueue(),s(null,n);break}case"unsuback":{delete this.outgoing[i],this.messageIdProvider.deallocate(i),this._invokeStoreProcessingQueue(),s(null);break}default:a.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")};pt.prototype._handlePubrel=function(n,i){z("handling pubrel packet"),i=typeof i<"u"?i:Vt;const e=n.messageId,o=this,s={cmd:"pubcomp",messageId:e};o.incomingStore.get(n,function(a,h){a?o._sendPacket(s,i):(o.emit("message",h.topic,h.payload,h),o.handleMessage(h,function(f){if(f)return i(f);o.incomingStore.del(h,Vt),o._sendPacket(s,i)}))})};pt.prototype._handleDisconnect=function(n){this.emit("disconnect",n)};pt.prototype._nextId=function(){return this.messageIdProvider.allocate()};pt.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()};pt.prototype._resubscribe=function(){z("_resubscribe");const n=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&n.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){z("_resubscribe: protocolVersion 5");for(let i=0;i<n.length;i++){const e={};e[n[i]]=this._resubscribeTopics[n[i]],e.resubscribe=!0,this.subscribe(e,{properties:e[n[i]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1};pt.prototype._onConnect=function(n){if(this.disconnected){this.emit("connect",n);return}const i=this;this.connackPacket=n,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;function e(){let o=i.outgoingStore.createStream();function s(){i._storeProcessing=!1,i._packetIdsDuringStoreProcessing={}}i.once("close",a),o.on("error",function(f){s(),i._flushStoreProcessingQueue(),i.removeListener("close",a),i.emit("error",f)});function a(){o.destroy(),o=null,i._flushStoreProcessingQueue(),s()}function h(){if(!o)return;i._storeProcessing=!0;const f=o.read(1);let d;if(!f){o.once("readable",h);return}if(i._packetIdsDuringStoreProcessing[f.messageId]){h();return}!i.disconnecting&&!i.reconnectTimer?(d=i.outgoing[f.messageId]?i.outgoing[f.messageId].cb:null,i.outgoing[f.messageId]={volatile:!1,cb:function(c,v){d&&d(c,v),h()}},i._packetIdsDuringStoreProcessing[f.messageId]=!0,i.messageIdProvider.register(f.messageId)?i._sendPacket(f):z("messageId: %d has already used.",f.messageId)):o.destroy&&o.destroy()}o.on("end",function(){let f=!0;for(const d in i._packetIdsDuringStoreProcessing)if(!i._packetIdsDuringStoreProcessing[d]){f=!1;break}f?(s(),i.removeListener("close",a),i._invokeAllStoreProcessingQueue(),i.emit("connect",n)):e()}),h()}e()};pt.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const n=this._storeProcessingQueue[0];if(n&&n.invoke())return this._storeProcessingQueue.shift(),!0}return!1};pt.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););};pt.prototype._flushStoreProcessingQueue=function(){for(const n of this._storeProcessingQueue)n.cbStorePut&&n.cbStorePut(new Error("Connection closed")),n.callback&&n.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)};var jp=pt;const uo=2147483647,sn=36,Zu=1,So=26,qp=38,Zp=700,Hp=72,Wp=128,Vp="-",$p=/[^\0-\x7E]/,Kp=/[\x2E\u3002\uFF0E\uFF61]/g,Gp={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ho=sn-Zu,Li=Math.floor,lo=String.fromCharCode;function Pa(n){throw new RangeError(Gp[n])}function Qp(n,i){const e=[];let o=n.length;for(;o--;)e[o]=i(n[o]);return e}function Yp(n,i){const e=n.split("@");let o="";e.length>1&&(o=e[0]+"@",n=e[1]),n=n.replace(Kp,".");const s=n.split("."),a=Qp(s,i).join(".");return o+a}function Jp(n){const i=[];let e=0;const o=n.length;for(;e<o;){const s=n.charCodeAt(e++);if(s>=55296&&s<=56319&&e<o){const a=n.charCodeAt(e++);(a&64512)==56320?i.push(((s&1023)<<10)+(a&1023)+65536):(i.push(s),e--)}else i.push(s)}return i}const La=function(n,i){return n+22+75*(n<26)-((i!=0)<<5)},Xp=function(n,i,e){let o=0;for(n=e?Li(n/Zp):n>>1,n+=Li(n/i);n>ho*So>>1;o+=sn)n=Li(n/ho);return Li(o+(ho+1)*n/(n+qp))},t_=function(n){const i=[];n=Jp(n);let e=n.length,o=Wp,s=0,a=Hp;for(const d of n)d<128&&i.push(lo(d));let h=i.length,f=h;for(h&&i.push(Vp);f<e;){let d=uo;for(const v of n)v>=o&&v<d&&(d=v);const c=f+1;d-o>Li((uo-s)/c)&&Pa("overflow"),s+=(d-o)*c,o=d;for(const v of n)if(v<o&&++s>uo&&Pa("overflow"),v==o){let w=s;for(let b=sn;;b+=sn){const P=b<=a?Zu:b>=a+So?So:b-a;if(w<P)break;const C=w-P,I=sn-P;i.push(lo(La(P+C%I,0))),w=Li(C/I)}i.push(lo(La(w,0))),a=Xp(s,c,f==h),s=0,++f}++s,++o}return i.join("")},e_=function(n){return Yp(n,function(i){return $p.test(i)?"xn--"+t_(i):i})};function i_(n,i){return Object.prototype.hasOwnProperty.call(n,i)}var Hu=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function Xi(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}}function n_(n,i,e,o){return i=i||"&",e=e||"=",n===null&&(n=void 0),typeof n=="object"?Aa(r_(n),function(s){var a=encodeURIComponent(Xi(s))+e;return Hu(n[s])?Aa(n[s],function(h){return a+encodeURIComponent(Xi(h))}).join(i):a+encodeURIComponent(Xi(n[s]))}).join(i):o?encodeURIComponent(Xi(o))+e+encodeURIComponent(Xi(n)):""}function Aa(n,i){if(n.map)return n.map(i);for(var e=[],o=0;o<n.length;o++)e.push(i(n[o],o));return e}var r_=Object.keys||function(n){var i=[];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&i.push(e);return i};function Ia(n,i,e,o){i=i||"&",e=e||"=";var s={};if(typeof n!="string"||n.length===0)return s;var a=/\+/g;n=n.split(i);var h=1e3;o&&typeof o.maxKeys=="number"&&(h=o.maxKeys);var f=n.length;h>0&&f>h&&(f=h);for(var d=0;d<f;++d){var c=n[d].replace(a,"%20"),v=c.indexOf(e),w,b,P,C;v>=0?(w=c.substr(0,v),b=c.substr(v+1)):(w=c,b=""),P=decodeURIComponent(w),C=decodeURIComponent(b),i_(s,P)?Hu(s[P])?s[P].push(C):s[P]=[s[P],C]:s[P]=C}return s}const o_={parse:vn,resolve:$u,resolveObject:Ku,format:Vu,Url:de};function de(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s_=/^([a-z0-9.+-]+:)/i,a_=/:[0-9]*$/,u_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h_=["<",">",'"',"`"," ","\r",`
`,"	"],l_=["{","}","|","\\","^","`"].concat(h_),To=["'"].concat(l_),Ca=["%","/","?",";","#"].concat(To),Ba=["/","?","#"],f_=255,Ma=/^[+a-z0-9A-Z_-]{0,63}$/,c_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,d_={javascript:!0,"javascript:":!0},Po={javascript:!0,"javascript:":!0},Mi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function vn(n,i,e){if(n&&Fe(n)&&n instanceof de)return n;var o=new de;return o.parse(n,i,e),o}de.prototype.parse=function(n,i,e){return Wu(this,n,i,e)};function Wu(n,i,e,o){if(!Qe(i))throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var s=i.indexOf("?"),a=s!==-1&&s<i.indexOf("#")?"?":"#",h=i.split(a),f=/\\/g;h[0]=h[0].replace(f,"/"),i=h.join(a);var d=i;if(d=d.trim(),!o&&i.split("#").length===1){var c=u_.exec(d);if(c)return n.path=d,n.href=d,n.pathname=c[1],c[2]?(n.search=c[2],e?n.query=Ia(n.search.substr(1)):n.query=n.search.substr(1)):e&&(n.search="",n.query={}),n}var v=s_.exec(d);if(v){v=v[0];var w=v.toLowerCase();n.protocol=w,d=d.substr(v.length)}if(o||v||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var b=d.substr(0,2)==="//";b&&!(v&&Po[v])&&(d=d.substr(2),n.slashes=!0)}var P,C,I,F;if(!Po[v]&&(b||v&&!Mi[v])){var A=-1;for(P=0;P<Ba.length;P++)C=d.indexOf(Ba[P]),C!==-1&&(A===-1||C<A)&&(A=C);var k,B;for(A===-1?B=d.lastIndexOf("@"):B=d.lastIndexOf("@",A),B!==-1&&(k=d.slice(0,B),d=d.slice(B+1),n.auth=decodeURIComponent(k)),A=-1,P=0;P<Ca.length;P++)C=d.indexOf(Ca[P]),C!==-1&&(A===-1||C<A)&&(A=C);A===-1&&(A=d.length),n.host=d.slice(0,A),d=d.slice(A),Gu(n),n.hostname=n.hostname||"";var $=n.hostname[0]==="["&&n.hostname[n.hostname.length-1]==="]";if(!$){var H=n.hostname.split(/\./);for(P=0,I=H.length;P<I;P++){var it=H[P];if(!!it&&!it.match(Ma)){for(var ct="",tt=0,J=it.length;tt<J;tt++)it.charCodeAt(tt)>127?ct+="x":ct+=it[tt];if(!ct.match(Ma)){var Ht=H.slice(0,P),St=H.slice(P+1),Ot=it.match(c_);Ot&&(Ht.push(Ot[1]),St.unshift(Ot[2])),St.length&&(d="/"+St.join(".")+d),n.hostname=Ht.join(".");break}}}}n.hostname.length>f_?n.hostname="":n.hostname=n.hostname.toLowerCase(),$||(n.hostname=e_(n.hostname)),F=n.port?":"+n.port:"";var Jt=n.hostname||"";n.host=Jt+F,n.href+=n.host,$&&(n.hostname=n.hostname.substr(1,n.hostname.length-2),d[0]!=="/"&&(d="/"+d))}if(!d_[w])for(P=0,I=To.length;P<I;P++){var Lt=To[P];if(d.indexOf(Lt)!==-1){var Gt=encodeURIComponent(Lt);Gt===Lt&&(Gt=escape(Lt)),d=d.split(Lt).join(Gt)}}var At=d.indexOf("#");At!==-1&&(n.hash=d.substr(At),d=d.slice(0,At));var Dt=d.indexOf("?");if(Dt!==-1?(n.search=d.substr(Dt),n.query=d.substr(Dt+1),e&&(n.query=Ia(n.query)),d=d.slice(0,Dt)):e&&(n.search="",n.query={}),d&&(n.pathname=d),Mi[w]&&n.hostname&&!n.pathname&&(n.pathname="/"),n.pathname||n.search){F=n.pathname||"";var Q=n.search||"";n.path=F+Q}return n.href=Vo(n),n}function Vu(n){return Qe(n)&&(n=Wu({},n)),Vo(n)}function Vo(n){var i=n.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var e=n.protocol||"",o=n.pathname||"",s=n.hash||"",a=!1,h="";n.host?a=i+n.host:n.hostname&&(a=i+(n.hostname.indexOf(":")===-1?n.hostname:"["+this.hostname+"]"),n.port&&(a+=":"+n.port)),n.query&&Fe(n.query)&&Object.keys(n.query).length&&(h=n_(n.query));var f=n.search||h&&"?"+h||"";return e&&e.substr(-1)!==":"&&(e+=":"),n.slashes||(!e||Mi[e])&&a!==!1?(a="//"+(a||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):a||(a=""),s&&s.charAt(0)!=="#"&&(s="#"+s),f&&f.charAt(0)!=="?"&&(f="?"+f),o=o.replace(/[?#]/g,function(d){return encodeURIComponent(d)}),f=f.replace("#","%23"),e+a+o+f+s}de.prototype.format=function(){return Vo(this)};function $u(n,i){return vn(n,!1,!0).resolve(i)}de.prototype.resolve=function(n){return this.resolveObject(vn(n,!1,!0)).format()};function Ku(n,i){return n?vn(n,!1,!0).resolveObject(i):i}de.prototype.resolveObject=function(n){if(Qe(n)){var i=new de;i.parse(n,!1,!0),n=i}for(var e=new de,o=Object.keys(this),s=0;s<o.length;s++){var a=o[s];e[a]=this[a]}if(e.hash=n.hash,n.href==="")return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var h=Object.keys(n),f=0;f<h.length;f++){var d=h[f];d!=="protocol"&&(e[d]=n[d])}return Mi[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}var c;if(n.protocol&&n.protocol!==e.protocol){if(!Mi[n.protocol]){for(var v=Object.keys(n),w=0;w<v.length;w++){var b=v[w];e[b]=n[b]}return e.href=e.format(),e}if(e.protocol=n.protocol,!n.host&&!Po[n.protocol]){for(c=(n.pathname||"").split("/");c.length&&!(n.host=c.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),c[0]!==""&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}else e.pathname=n.pathname;if(e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,e.pathname||e.search){var P=e.pathname||"",C=e.search||"";e.path=P+C}return e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var I=e.pathname&&e.pathname.charAt(0)==="/",F=n.host||n.pathname&&n.pathname.charAt(0)==="/",A=F||I||e.host&&n.pathname,k=A,B=e.pathname&&e.pathname.split("/")||[],$=e.protocol&&!Mi[e.protocol];c=n.pathname&&n.pathname.split("/")||[],$&&(e.hostname="",e.port=null,e.host&&(B[0]===""?B[0]=e.host:B.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(c[0]===""?c[0]=n.host:c.unshift(n.host)),n.host=null),A=A&&(c[0]===""||B[0]===""));var H;if(F)e.host=n.host||n.host===""?n.host:e.host,e.hostname=n.hostname||n.hostname===""?n.hostname:e.hostname,e.search=n.search,e.query=n.query,B=c;else if(c.length)B||(B=[]),B.pop(),B=B.concat(c),e.search=n.search,e.query=n.query;else if(!Ro(n.search))return $&&(e.hostname=e.host=B.shift(),H=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1,H&&(e.auth=H.shift(),e.host=e.hostname=H.shift())),e.search=n.search,e.query=n.query,(!De(e.pathname)||!De(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!B.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var it=B.slice(-1)[0],ct=(e.host||n.host||B.length>1)&&(it==="."||it==="..")||it==="",tt=0,J=B.length;J>=0;J--)it=B[J],it==="."?B.splice(J,1):it===".."?(B.splice(J,1),tt++):tt&&(B.splice(J,1),tt--);if(!A&&!k)for(;tt--;tt)B.unshift("..");A&&B[0]!==""&&(!B[0]||B[0].charAt(0)!=="/")&&B.unshift(""),ct&&B.join("/").substr(-1)!=="/"&&B.push("");var Ht=B[0]===""||B[0]&&B[0].charAt(0)==="/";return $&&(e.hostname=e.host=Ht?"":B.length?B.shift():"",H=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1,H&&(e.auth=H.shift(),e.host=e.hostname=H.shift())),A=A||e.host&&B.length,A&&!Ht&&B.unshift(""),B.length?e.pathname=B.join("/"):(e.pathname=null,e.path=null),(!De(e.pathname)||!De(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e};de.prototype.parseHost=function(){return Gu(this)};function Gu(n){var i=n.host,e=a_.exec(i);e&&(e=e[0],e!==":"&&(n.port=e.substr(1)),i=i.substr(0,i.length-e.length)),i&&(n.hostname=i)}const p_=Object.freeze(Object.defineProperty({__proto__:null,parse:vn,resolve:$u,resolveObject:Ku,format:Vu,default:o_,Url:de},Symbol.toStringTag,{value:"Module"})),__=ln(p_),g_={},m_=Object.freeze(Object.defineProperty({__proto__:null,default:g_},Symbol.toStringTag,{value:"Module"})),Lo=ln(m_);var fo,Oa;function ka(){if(Oa)return fo;Oa=1;const n=Lo,i=pe.exports("mqttjs:tcp");function e(o,s){s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";const a=s.port,h=s.hostname;return i("port %d and host %s",a,h),n.createConnection(a,h)}return fo=e,fo}var co,Ra;function po(){if(Ra)return co;Ra=1;const n=Lo,i=Lo,e=pe.exports("mqttjs:tls");function o(s,a){a.port=a.port||8883,a.host=a.hostname||a.host||"localhost",i.isIP(a.host)===0&&(a.servername=a.host),a.rejectUnauthorized=a.rejectUnauthorized!==!1,delete a.path,e("port %d host %s rejectUnauthorized %b",a.port,a.host,a.rejectUnauthorized);const h=n.connect(a);h.on("secureConnect",function(){a.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",f)});function f(d){a.rejectUnauthorized&&s.emit("error",d),h.end()}return h.on("error",f),h}return co=o,co}var $o={exports:{}},v_=Qu;function Qu(n,i){if(n&&i)return Qu(n)(i);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(o){e[o]=n[o]}),e;function e(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];var a=n.apply(this,o),h=o[o.length-1];return typeof a=="function"&&a!==h&&Object.keys(h).forEach(function(f){a[f]=h[f]}),a}}var Yu=v_;$o.exports=Yu(Kn);$o.exports.strict=Yu(Ju);Kn.proto=Kn(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Kn(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Ju(this)},configurable:!0})});function Kn(n){var i=function(){return i.called?i.value:(i.called=!0,i.value=n.apply(this,arguments))};return i.called=!1,i}function Ju(n){var i=function(){if(i.called)throw new Error(i.onceError);return i.called=!0,i.value=n.apply(this,arguments)},e=n.name||"Function wrapped with `once`";return i.onceError=e+" shouldn't be called more than once",i.called=!1,i}var y_=$o.exports,w_=function(){},b_=function(n){return n.setHeader&&typeof n.abort=="function"},x_=function(n){return n.stdio&&Array.isArray(n.stdio)&&n.stdio.length===3},Xu=function(n,i,e){if(typeof i=="function")return Xu(n,null,i);i||(i={}),e=y_(e||w_);var o=n._writableState,s=n._readableState,a=i.readable||i.readable!==!1&&n.readable,h=i.writable||i.writable!==!1&&n.writable,f=!1,d=function(){n.writable||c()},c=function(){h=!1,a||e.call(n)},v=function(){a=!1,h||e.call(n)},w=function(F){e.call(n,F?new Error("exited with error code: "+F):null)},b=function(F){e.call(n,F)},P=function(){X.nextTick(C)},C=function(){if(!f){if(a&&!(s&&s.ended&&!s.destroyed))return e.call(n,new Error("premature close"));if(h&&!(o&&o.ended&&!o.destroyed))return e.call(n,new Error("premature close"))}},I=function(){n.req.on("finish",c)};return b_(n)?(n.on("complete",c),n.on("abort",P),n.req?I():n.on("request",I)):h&&!o&&(n.on("end",d),n.on("close",d)),x_(n)&&n.on("exit",w),n.on("end",v),n.on("finish",c),i.error!==!1&&n.on("error",b),n.on("close",P),function(){f=!0,n.removeListener("complete",c),n.removeListener("abort",P),n.removeListener("request",I),n.req&&n.req.removeListener("finish",c),n.removeListener("end",d),n.removeListener("close",d),n.removeListener("finish",c),n.removeListener("exit",w),n.removeListener("end",v),n.removeListener("error",b),n.removeListener("close",P)}},E_=Xu,S_=T_;function T_(n){var i=n._readableState;return i?i.objectMode||typeof n._duplexState=="number"?n.read():n.read(P_(i)):null}function P_(n){return n.buffer.length?n.buffer.head?n.buffer.head.data.length:n.buffer[0].length:n.length}var _r=Ne.exports,th=E_,L_=Te.exports,A_=S_,eh=V.Buffer.from&&V.Buffer.from!==Uint8Array.from?V.Buffer.from([0]):new V.Buffer([0]),Ao=function(n,i){n._corked?n.once("uncork",i):i()},I_=function(n,i){n._autoDestroy&&n.destroy(i)},ih=function(n,i){return function(e){e?I_(n,e.message==="premature close"?null:e):i&&!n._ended&&n.end()}},C_=function(n,i){if(!n||n._writableState&&n._writableState.finished)return i();if(n._writableState)return n.end(i);n.end(),i()},B_=function(){},M_=function(n){return new _r.Readable({objectMode:!0,highWaterMark:16}).wrap(n)},Kt=function(n,i,e){if(!(this instanceof Kt))return new Kt(n,i,e);_r.Duplex.call(this,e),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!e||e.autoDestroy!==!1,this._forwardDestroy=!e||e.destroy!==!1,this._forwardEnd=!e||e.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,n&&this.setWritable(n),i&&this.setReadable(i)};L_(Kt,_r.Duplex);Kt.obj=function(n,i,e){return e||(e={}),e.objectMode=!0,e.highWaterMark=16,new Kt(n,i,e)};Kt.prototype.cork=function(){++this._corked===1&&this.emit("cork")};Kt.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};Kt.prototype.setWritable=function(n){if(this._unwrite&&this._unwrite(),this.destroyed){n&&n.destroy&&n.destroy();return}if(n===null||n===!1){this.end();return}var i=this,e=th(n,{writable:!0,readable:!1},ih(this,this._forwardEnd)),o=function(){var a=i._ondrain;i._ondrain=null,a&&a()},s=function(){i._writable.removeListener("drain",o),e()};this._unwrite&&X.nextTick(o),this._writable=n,this._writable.on("drain",o),this._unwrite=s,this.uncork()};Kt.prototype.setReadable=function(n){if(this._unread&&this._unread(),this.destroyed){n&&n.destroy&&n.destroy();return}if(n===null||n===!1){this.push(null),this.resume();return}var i=this,e=th(n,{writable:!1,readable:!0},ih(this)),o=function(){i._forward()},s=function(){i.push(null)},a=function(){i._readable2.removeListener("readable",o),i._readable2.removeListener("end",s),e()};this._drained=!0,this._readable=n,this._readable2=n._readableState?n:M_(n),this._readable2.on("readable",o),this._readable2.on("end",s),this._unread=a,this._forward()};Kt.prototype._read=function(){this._drained=!0,this._forward()};Kt.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var n;this._drained&&(n=A_(this._readable2))!==null;)this.destroyed||(this._drained=this.push(n));this._forwarding=!1}};Kt.prototype.destroy=function(n,i){if(i||(i=B_),this.destroyed)return i(null);this.destroyed=!0;var e=this;X.nextTick(function(){e._destroy(n),i(null)})};Kt.prototype._destroy=function(n){if(n){var i=this._ondrain;this._ondrain=null,i?i(n):this.emit("error",n)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};Kt.prototype._write=function(n,i,e){if(!this.destroyed){if(this._corked)return Ao(this,this._write.bind(this,n,i,e));if(n===eh)return this._finish(e);if(!this._writable)return e();this._writable.write(n)===!1?this._ondrain=e:this.destroyed||e()}};Kt.prototype._finish=function(n){var i=this;this.emit("preend"),Ao(this,function(){C_(i._forwardEnd&&i._writable,function(){i._writableState.prefinished===!1&&(i._writableState.prefinished=!0),i.emit("prefinish"),Ao(i,n)})})};Kt.prototype.end=function(n,i,e){return typeof n=="function"?this.end(null,null,n):typeof i=="function"?this.end(n,null,i):(this._ended=!0,n&&this.write(n),!this._writableState.ending&&!this._writableState.destroyed&&this.write(eh),_r.Writable.prototype.end.call(this,e))};var Ko=Kt,_o,Da;function Na(){if(Da)return _o;Da=1;const{Buffer:n}=V,i=Ne.exports.Transform,e=Ko;let o,s,a;function h(){const w=new i;return w._write=function(b,P,C){o.send({data:b.buffer,success:function(){C()},fail:function(I){C(new Error(I))}})},w._flush=function(P){o.close({success:function(){P()}})},w}function f(w){w.hostname||(w.hostname="localhost"),w.path||(w.path="/"),w.wsOptions||(w.wsOptions={})}function d(w,b){const P=w.protocol==="wxs"?"wss":"ws";let C=P+"://"+w.hostname+w.path;return w.port&&w.port!==80&&w.port!==443&&(C=P+"://"+w.hostname+":"+w.port+w.path),typeof w.transformWsUrl=="function"&&(C=w.transformWsUrl(C,w,b)),C}function c(){o.onOpen(function(){a.setReadable(s),a.setWritable(s),a.emit("connect")}),o.onMessage(function(w){let b=w.data;b instanceof ArrayBuffer?b=n.from(b):b=n.from(b,"utf8"),s.push(b)}),o.onClose(function(){a.end(),a.destroy()}),o.onError(function(w){a.destroy(new Error(w.errMsg))})}function v(w,b){if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");const P=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";f(b);const C=d(b,w);o=wx.connectSocket({url:C,protocols:[P]}),s=h(),a=e.obj(),a._destroy=function(F,A){o.close({success:function(){A&&A(F)}})};const I=a.destroy;return a.destroy=function(){a.destroy=I;const F=this;setTimeout(function(){o.close({fail:function(){F._destroy(new Error)}})},0)}.bind(a),c(),a}return _o=v,_o}var go,za;function Fa(){if(za)return go;za=1;const{Buffer:n}=V,i=Ne.exports.Transform,e=Ko;let o,s,a,h=!1;function f(){const b=new i;return b._write=function(P,C,I){o.sendSocketMessage({data:P.buffer,success:function(){I()},fail:function(){I(new Error)}})},b._flush=function(C){o.closeSocket({success:function(){C()}})},b}function d(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function c(b,P){const C=b.protocol==="alis"?"wss":"ws";let I=C+"://"+b.hostname+b.path;return b.port&&b.port!==80&&b.port!==443&&(I=C+"://"+b.hostname+":"+b.port+b.path),typeof b.transformWsUrl=="function"&&(I=b.transformWsUrl(I,b,P)),I}function v(){h||(h=!0,o.onSocketOpen(function(){a.setReadable(s),a.setWritable(s),a.emit("connect")}),o.onSocketMessage(function(b){if(typeof b.data=="string"){const P=n.from(b.data,"base64");s.push(P)}else{const P=new FileReader;P.addEventListener("load",function(){let C=P.result;C instanceof ArrayBuffer?C=n.from(C):C=n.from(C,"utf8"),s.push(C)}),P.readAsArrayBuffer(b.data)}}),o.onSocketClose(function(){a.end(),a.destroy()}),o.onSocketError(function(b){a.destroy(b)}))}function w(b,P){if(P.hostname=P.hostname||P.host,!P.hostname)throw new Error("Could not determine host. Specify host manually.");const C=P.protocolId==="MQIsdp"&&P.protocolVersion===3?"mqttv3.1":"mqtt";d(P);const I=c(P,b);return o=P.my,o.connectSocket({url:I,protocols:C}),s=f(),a=e.obj(),v(),a}return go=w,go}var nr={exports:{}},O_=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};const{Buffer:tn}=V,nh=O_,an=pe.exports("mqttjs:ws"),k_=Ko,R_=Ne.exports.Transform,D_=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],rh=typeof X<"u"&&X.title==="browser"||typeof __webpack_require__=="function";function oh(n,i){let e=n.protocol+"://"+n.hostname+":"+n.port+n.path;return typeof n.transformWsUrl=="function"&&(e=n.transformWsUrl(e,n,i)),e}function sh(n){const i=n;return n.hostname||(i.hostname="localhost"),n.port||(n.protocol==="wss"?i.port=443:i.port=80),n.path||(i.path="/"),n.wsOptions||(i.wsOptions={}),!rh&&n.protocol==="wss"&&D_.forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&!Object.prototype.hasOwnProperty.call(n.wsOptions,e)&&(i.wsOptions[e]=n[e])}),i}function N_(n){const i=sh(n);if(i.hostname||(i.hostname=i.host),!i.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const e=new URL(document.URL);i.hostname=e.hostname,i.port||(i.port=e.port)}return i.objectMode===void 0&&(i.objectMode=!(i.binary===!0||i.binary===void 0)),i}function z_(n,i,e){an("createWebSocket"),an("protocol: "+e.protocolId+" "+e.protocolVersion);const o=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt";return an("creating new Websocket for url: "+i+" and protocol: "+o),new nh(i,[o],e.wsOptions)}function F_(n,i){const e=i.protocolId==="MQIsdp"&&i.protocolVersion===3?"mqttv3.1":"mqtt",o=oh(i,n),s=new WebSocket(o,[e]);return s.binaryType="arraybuffer",s}function U_(n,i){an("streamBuilder");const e=sh(i),o=oh(e,n),s=z_(n,o,e),a=nh.createWebSocketStream(s,e.wsOptions);return a.url=o,s.on("close",()=>{a.destroy()}),a}function j_(n,i){an("browserStreamBuilder");let e;const s=N_(i).browserBufferSize||1024*512,a=i.browserBufferTimeout||1e3,h=!i.objectMode,f=F_(n,i),d=v(i,F,A);i.objectMode||(d._writev=I),d.on("close",()=>{f.close()});const c=typeof f.addEventListener<"u";f.readyState===f.OPEN?e=d:(e=e=k_(void 0,void 0,i),i.objectMode||(e._writev=I),c?f.addEventListener("open",w):f.onopen=w),e.socket=f,c?(f.addEventListener("close",b),f.addEventListener("error",P),f.addEventListener("message",C)):(f.onclose=b,f.onerror=P,f.onmessage=C);function v(k,B,$){const H=new R_({objectModeMode:k.objectMode});return H._write=B,H._flush=$,H}function w(){e.setReadable(d),e.setWritable(d),e.emit("connect")}function b(){e.end(),e.destroy()}function P(k){e.destroy(k)}function C(k){let B=k.data;B instanceof ArrayBuffer?B=tn.from(B):B=tn.from(B,"utf8"),d.push(B)}function I(k,B){const $=new Array(k.length);for(let H=0;H<k.length;H++)typeof k[H].chunk=="string"?$[H]=tn.from(k[H],"utf8"):$[H]=k[H].chunk;this._write(tn.concat($),"binary",B)}function F(k,B,$){f.bufferedAmount>s&&setTimeout(F,a,k,B,$),h&&typeof k=="string"&&(k=tn.from(k,"utf8"));try{f.send(k)}catch(H){return $(H)}$()}function A(k){f.close(),k()}return e}rh?nr.exports=j_:nr.exports=U_;const ah=jp,q_=bu,Z_=__,H_=Bo,Ua=pe.exports("mqttjs"),ne={};typeof X<"u"&&X.title!=="browser"||typeof __webpack_require__!="function"?(ne.mqtt=ka(),ne.tcp=ka(),ne.ssl=po(),ne.tls=po(),ne.mqtts=po()):(ne.wx=Na(),ne.wxs=Na(),ne.ali=Fa(),ne.alis=Fa());ne.ws=nr.exports;ne.wss=nr.exports;function W_(n){let i;n.auth&&(i=n.auth.match(/^(.+):(.+)$/),i?(n.username=i[1],n.password=i[2]):n.username=n.auth)}function uh(n,i){if(Ua("connecting to an MQTT broker..."),typeof n=="object"&&!i&&(i=n,n=null),i=i||{},n){const s=Z_.parse(n,!0);if(s.port!=null&&(s.port=Number(s.port)),i=H_(s,i),i.protocol===null)throw new Error("Missing protocol");i.protocol=i.protocol.replace(/:$/,"")}if(W_(i),i.query&&typeof i.query.clientId=="string"&&(i.clientId=i.query.clientId),i.cert&&i.key)if(i.protocol){if(["mqtts","wss","wxs","alis"].indexOf(i.protocol)===-1)switch(i.protocol){case"mqtt":i.protocol="mqtts";break;case"ws":i.protocol="wss";break;case"wx":i.protocol="wxs";break;case"ali":i.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+i.protocol+'"!')}}else throw new Error("Missing secure protocol key");if(!ne[i.protocol]){const s=["mqtts","wss"].indexOf(i.protocol)!==-1;i.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(a,h){return s&&h%2===0?!1:typeof ne[a]=="function"})[0]}if(i.clean===!1&&!i.clientId)throw new Error("Missing clientId for unclean clients");i.protocol&&(i.defaultProtocol=i.protocol);function e(s){return i.servers&&((!s._reconnectCount||s._reconnectCount===i.servers.length)&&(s._reconnectCount=0),i.host=i.servers[s._reconnectCount].host,i.port=i.servers[s._reconnectCount].port,i.protocol=i.servers[s._reconnectCount].protocol?i.servers[s._reconnectCount].protocol:i.defaultProtocol,i.hostname=i.host,s._reconnectCount++),Ua("calling streambuilder for",i.protocol),ne[i.protocol](s,i)}const o=new ah(e,i);return o.on("error",function(){}),o}fn.exports=uh;fn.exports.connect=uh;fn.exports.MqttClient=ah;fn.exports.Store=q_;var hh=65,lh=function(i){return i.match(/^[A-Ra-r][A-Ra-r]\d\d[A-Xa-x][A-Xa-x]/)!==null},Zn=function(i){return i.toUpperCase().charCodeAt(0)-hh},Hn=function(i){return String.fromCharCode(i+hh)},Io=function(i){if(i+="ll",!lh(i))throw new Error("Input is not valid locator string");var e=Zn(i[0])*20,o=Zn(i[1])*10,s=Number.parseInt(i[2])*2,a=Number.parseInt(i[3]),h=(Zn(i[4])+.5)/12,f=(Zn(i[5])+.5)/24;return[o+a+f-90,e+s+h-180]},Wn=function(i){return i%360*Math.PI/180},V_=function(i){return i/Math.PI*180%360},fh=function(i,e){var o=Io(i),s=Io(e),a=Wn(s[0]-o[0]),h=Wn(s[1]-o[1]),f=Wn(o[0]),d=Wn(s[0]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(h/2),2)*Math.cos(f)*Math.cos(d),v=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),w=h*Math.cos(f)*Math.cos(d),b=Math.sin(d)-Math.sin(f)*Math.cos(v),P=Math.atan2(w,b);return P<0&&(P+=2*Math.PI),{km:v*6371,deg:V_(P)}},$_=function(i,e){return fh(i,e).km},K_=function(i,e){return i>=-90&&i<=90&&e>=-180&&e<=180},G_=function(i,e){if(!K_(i,e))throw new Error("Input is not a valid coordinate");var o=e+180,s=i+90,a=Hn(Math.floor(o/20)),h=Hn(Math.floor(s/10)),f=Math.floor(o%20/2),d=Math.floor(s%10),c=Hn(Math.floor(o%20%2*12)).toLowerCase(),v=Hn((s%10-d)*24).toLowerCase();return a+h+f+d+c+v},ja={isValidLocatorString:lh,locatorToLatLng:Io,distance:$_,bearingDistance:fh,latLngToLocator:G_};function Q_(n,i,e){e===void 0&&(e={});var o={type:"Feature"};return(e.id===0||e.id)&&(o.id=e.id),e.bbox&&(o.bbox=e.bbox),o.properties=i||{},o.geometry=n,o}function qa(n,i,e){if(e===void 0&&(e={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Za(n[0])||!Za(n[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:n};return Q_(o,i,e)}function Za(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function Ha(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var Wa=Math.PI/180,Va=180/Math.PI,hn=function(n,i){this.lon=n,this.lat=i,this.x=Wa*n,this.y=Wa*i};hn.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};hn.prototype.antipode=function(){var n=-1*this.lat,i=this.lon<0?180+this.lon:(180-this.lon)*-1;return new hn(i,n)};var ch=function(){this.coords=[],this.length=0};ch.prototype.move_to=function(n){this.length++,this.coords.push(n)};var Go=function(n){this.properties=n||{},this.geometries=[]};Go.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],i=0;i<this.geometries.length;i++)n.push(this.geometries[i].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}};Go.prototype.wkt=function(){for(var n="",i="LINESTRING(",e=function(a){i+=a[0]+" "+a[1]+","},o=0;o<this.geometries.length;o++){if(this.geometries[o].coords.length===0)return"LINESTRING(empty)";var s=this.geometries[o].coords;s.forEach(e),n+=i.substring(0,i.length-1)+")"}return n};var Qo=function(n,i,e){if(!n||n.x===void 0||n.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!i||i.x===void 0||i.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new hn(n.x,n.y),this.end=new hn(i.x,i.y),this.properties=e||{};var o=this.start.x-this.end.x,s=this.start.y-this.end.y,a=Math.pow(Math.sin(s/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(o/2),2);if(this.g=2*Math.asin(Math.sqrt(a)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+i.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+i)};Qo.prototype.interpolate=function(n){var i=Math.sin((1-n)*this.g)/Math.sin(this.g),e=Math.sin(n*this.g)/Math.sin(this.g),o=i*Math.cos(this.start.y)*Math.cos(this.start.x)+e*Math.cos(this.end.y)*Math.cos(this.end.x),s=i*Math.cos(this.start.y)*Math.sin(this.start.x)+e*Math.cos(this.end.y)*Math.sin(this.end.x),a=i*Math.sin(this.start.y)+e*Math.sin(this.end.y),h=Va*Math.atan2(a,Math.sqrt(Math.pow(o,2)+Math.pow(s,2))),f=Va*Math.atan2(s,o);return[f,h]};Qo.prototype.Arc=function(n,i){var e=[];if(!n||n<=2)e.push([this.start.lon,this.start.lat]),e.push([this.end.lon,this.end.lat]);else for(var o=1/(n-1),s=0;s<n;++s){var a=o*s,h=this.interpolate(a);e.push(h)}for(var f=!1,d=0,c=i&&i.offset?i.offset:10,v=180-c,w=-180+c,b=360-c,P=1;P<e.length;++P){var C=e[P-1][0],I=e[P][0],F=Math.abs(I-C);F>b&&(I>v&&C<w||C>v&&I<w)?f=!0:F>d&&(d=F)}var A=[];if(f&&d<c){var k=[];A.push(k);for(var B=0;B<e.length;++B){var $=parseFloat(e[B][0]);if(B>0&&Math.abs($-e[B-1][0])>b){var H=parseFloat(e[B-1][0]),it=parseFloat(e[B-1][1]),ct=parseFloat(e[B][0]),tt=parseFloat(e[B][1]);if(H>-180&&H<w&&ct===180&&B+1<e.length&&e[B-1][0]>-180&&e[B-1][0]<w){k.push([-180,e[B][1]]),B++,k.push([e[B][0],e[B][1]]);continue}else if(H>v&&H<180&&ct===-180&&B+1<e.length&&e[B-1][0]>v&&e[B-1][0]<180){k.push([180,e[B][1]]),B++,k.push([e[B][0],e[B][1]]);continue}if(H<w&&ct>v){var J=H;H=ct,ct=J;var Ht=it;it=tt,tt=Ht}if(H>v&&ct<w&&(ct+=360),H<=180&&ct>=180&&H<ct){var St=(180-H)/(ct-H),Ot=St*tt+(1-St)*it;k.push([e[B-1][0]>v?180:-180,Ot]),k=[],k.push([e[B-1][0]>v?-180:180,Ot]),A.push(k)}else k=[],A.push(k);k.push([$,e[B][1]])}else k.push([e[B][0],e[B][1]])}}else{var Jt=[];A.push(Jt);for(var Lt=0;Lt<e.length;++Lt)Jt.push([e[Lt][0],e[Lt][1]])}for(var Gt=new Go(this.properties),At=0;At<A.length;++At){var Dt=new ch;Gt.geometries.push(Dt);for(var Q=A[At],Xt=0;Xt<Q.length;++Xt)Dt.move_to(Q[Xt])}return Gt};function Y_(n,i,e){if(e=e||{},typeof e!="object")throw new Error("options is invalid");var o=e.properties,s=e.npoints,a=e.offset;n=Ha(n),i=Ha(i),o=o||{},s=s||100,a=a||10;var h=new Qo({x:n[0],y:n[1]},{x:i[0],y:i[1]},o),f=h.Arc(s,{offset:a});return f.json()}const dh=Co.map("map").setView([0,0],3);Co.tileLayer("https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap",maxZoom:19,noWrap:!0}).addTo(dh);function J_(n){return{sequenceNumber:n.sq,frequency:n.f,mode:n.md,snr:n.rp,timestamp:n.t,callSender:n.sc,callReceiver:n.rc,locatorSender:n.sl,locatorReceiver:n.rl,countrySender:n.sa,countryReceiver:n.ra,band:n.b}}const X_=["70cm","2m","6m","10m","12m","15m","17m","20m","30m","40m","60m","80m","160m"],tg=["rgb(1,196,114)","rgb(226,105,138)","rgb(236,130,46)","rgb(149,73,182)","rgb(137,149,118)","rgb(54,109,165)","rgb(214,6,26)","rgb(43,25,217)","rgb(174,227,154)","rgb(252,209,7)","rgb(84,178,252)","rgb(233,210,156)","rgb(44,92,57)"],ph="wss://mqtt.pskreporter.info:1886";console.log(`Connecting to ${ph}`);const rr=fn.exports.connect(ph);rr.on("connect",()=>{rr.subscribe("pskr/filter/v2/+/FT8/#",n=>{n?console.error(`Error subscribing: ${n.message}`):console.log("Subscribed.")})});rr.on("error",n=>console.error(n));rr.on("message",(n,i)=>{var w;const e=J_(JSON.parse(i.toString())),[o,s]=ja.locatorToLatLng(e.locatorSender),[a,h]=ja.locatorToLatLng(e.locatorReceiver),f=qa([s,o]),d=qa([h,a]),c=Y_(f,d),v=X_.indexOf(e.band);v===-1&&console.log("Band without corresponding color:",e.band),!c.geometry.coordinates.some(([b,P])=>Number.isNaN(b)||Number.isNaN(P))&&Co.geoJSON(c).setStyle({color:(w=tg[v])!=null?w:"black",opacity:.75,weight:1}).addTo(dh)});
//# sourceMappingURL=index.985d9f72.js.map
