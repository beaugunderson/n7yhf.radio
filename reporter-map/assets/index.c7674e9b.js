(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jr(n){var e=n.default;if(typeof e=="function"){var i=function(){return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var s=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(i,o,s.get?s:{enumerable:!0,get:function(){return n[o]}})}),i}var Dr={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(i,o){o(e)})(vi,function(i){var o="1.8.0";function s(t){var r,u,l,p;for(u=1,l=arguments.length;u<l;u++){p=arguments[u];for(r in p)t[r]=p[r]}return t}var a=Object.create||function(){function t(){}return function(r){return t.prototype=r,new t}}();function h(t,r){var u=Array.prototype.slice;if(t.bind)return t.bind.apply(t,u.call(arguments,1));var l=u.call(arguments,2);return function(){return t.apply(r,l.length?l.concat(u.call(arguments)):arguments)}}var f=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function c(t,r,u){var l,p,m,T;return T=function(){l=!1,p&&(m.apply(u,p),p=!1)},m=function(){l?p=arguments:(t.apply(u,arguments),setTimeout(T,r),l=!0)},m}function y(t,r,u){var l=r[1],p=r[0],m=l-p;return t===l&&u?t:((t-p)%m+m)%m+p}function w(){return!1}function b(t,r){if(r===!1)return t;var u=Math.pow(10,r===void 0?6:r);return Math.round(t*u)/u}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function O(t){return A(t).split(/\s+/)}function C(t,r){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var u in r)t.options[u]=r[u];return t.options}function Z(t,r,u){var l=[];for(var p in t)l.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(t[p]));return(!r||r.indexOf("?")===-1?"?":"&")+l.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function R(t,r){return t.replace(P,function(u,l){var p=r[l];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(r)),p})}var N=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function $(t,r){for(var u=0;u<t.length;u++)if(t[u]===r)return u;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function gt(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var vt=0;function st(t){var r=+new Date,u=Math.max(0,16-(r-vt));return vt=r+u,window.setTimeout(t,u)}var it=window.requestAnimationFrame||gt("RequestAnimationFrame")||st,ue=window.cancelAnimationFrame||gt("CancelAnimationFrame")||gt("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Bt(t,r,u){if(u&&it===st)t.call(r);else return it.call(window,h(t,r))}function Rt(t){t&&ue.call(window,t)}var ee={__proto__:null,extend:s,create:a,bind:h,get lastId(){return f},stamp:g,throttle:c,wrapNum:y,falseFn:w,formatNum:b,trim:A,splitWords:O,setOptions:C,getParamString:Z,template:R,isArray:N,indexOf:$,emptyImageUrl:V,requestFn:it,cancelFn:ue,requestAnimFrame:Bt,cancelAnimFrame:Rt};function Dt(){}Dt.extend=function(t){var r=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=r.__super__=this.prototype,l=a(u);l.constructor=r,r.prototype=l;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(r[p]=this[p]);return t.statics&&s(r,t.statics),t.includes&&(ie(t.includes),s.apply(null,[l].concat(t.includes))),s(l,t),delete l.statics,delete l.includes,l.options&&(l.options=u.options?a(u.options):{},s(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,T=l._initHooks.length;m<T;m++)l._initHooks[m].call(this)}},r},Dt.include=function(t){var r=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=r,this.mergeOptions(t.options)),this},Dt.mergeOptions=function(t){return s(this.prototype.options,t),this},Dt.addInitHook=function(t){var r=Array.prototype.slice.call(arguments,1),u=typeof t=="function"?t:function(){this[t].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function ie(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=N(t)?t:[t];for(var r=0;r<t.length;r++)t[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var kt={on:function(t,r,u){if(typeof t=="object")for(var l in t)this._on(l,t[l],r);else{t=O(t);for(var p=0,m=t.length;p<m;p++)this._on(t[p],r,u)}return this},off:function(t,r,u){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],r);else{t=O(t);for(var p=arguments.length===1,m=0,T=t.length;m<T;m++)p?this._off(t[m]):this._off(t[m],r,u)}return this},_on:function(t,r,u){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}this._events=this._events||{};var l=this._events[t];l||(l=[],this._events[t]=l),u===this&&(u=void 0);for(var p={fn:r,ctx:u},m=l,T=0,k=m.length;T<k;T++)if(m[T].fn===r&&m[T].ctx===u)return;m.push(p)},_off:function(t,r,u){var l,p,m;if(!!this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(p=0,m=l.length;p<m;p++)l[p].fn=w;delete this._events[t];return}if(u===this&&(u=void 0),typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}for(p=0,m=l.length;p<m;p++){var T=l[p];if(T.ctx===u&&T.fn===r){this._firingCount&&(T.fn=w,this._events[t]=l=l.slice()),l.splice(p,1);return}}console.warn("listener not found")}},fire:function(t,r,u){if(!this.listens(t,u))return this;var l=s({},r,{type:t,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var p=this._events[t];if(p){this._firingCount=this._firingCount+1||1;for(var m=0,T=p.length;m<T;m++){var k=p[m];k.fn.call(k.ctx||this,l)}this._firingCount--}}return u&&this._propagateEvent(l),this},listens:function(t,r){typeof t!="string"&&console.warn('"string" type argument expected');var u=this._events&&this._events[t];if(u&&u.length)return!0;if(r){for(var l in this._eventParents)if(this._eventParents[l].listens(t,r))return!0}return!1},once:function(t,r,u){if(typeof t=="object"){for(var l in t)this.once(l,t[l],r);return this}var p=h(function(){this.off(t,r,u).off(t,p,u)},this);return this.on(t,r,u).on(t,p,u)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var r in this._eventParents)this._eventParents[r].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};kt.addEventListener=kt.on,kt.removeEventListener=kt.clearAllEventListeners=kt.off,kt.addOneTimeEventListener=kt.once,kt.fireEvent=kt.fire,kt.hasEventListeners=kt.listens;var Zt=Dt.extend(kt);function Y(t,r,u){this.x=u?Math.round(t):t,this.y=u?Math.round(r):r}var Qt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(t){return this.clone()._add(ot(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(ot(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Y(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Y(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Qt(this.x),this.y=Qt(this.y),this},distanceTo:function(t){t=ot(t);var r=t.x-this.x,u=t.y-this.y;return Math.sqrt(r*r+u*u)},equals:function(t){return t=ot(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=ot(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function ot(t,r,u){return t instanceof Y?t:N(t)?new Y(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Y(t.x,t.y):new Y(t,r,u)}function tt(t,r){if(!!t)for(var u=r?[t,r]:t,l=0,p=u.length;l<p;l++)this.extend(u[l])}tt.prototype={extend:function(t){return t=ot(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new Y(this.min.x,this.max.y)},getTopRight:function(){return new Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var r,u;return typeof t[0]=="number"||t instanceof Y?t=ot(t):t=xt(t),t instanceof tt?(r=t.min,u=t.max):r=u=t,r.x>=this.min.x&&u.x<=this.max.x&&r.y>=this.min.y&&u.y<=this.max.y},intersects:function(t){t=xt(t);var r=this.min,u=this.max,l=t.min,p=t.max,m=p.x>=r.x&&l.x<=u.x,T=p.y>=r.y&&l.y<=u.y;return m&&T},overlaps:function(t){t=xt(t);var r=this.min,u=this.max,l=t.min,p=t.max,m=p.x>r.x&&l.x<u.x,T=p.y>r.y&&l.y<u.y;return m&&T},isValid:function(){return!!(this.min&&this.max)}};function xt(t,r){return!t||t instanceof tt?t:new tt(t,r)}function Ct(t,r){if(!!t)for(var u=r?[t,r]:t,l=0,p=u.length;l<p;l++)this.extend(u[l])}Ct.prototype={extend:function(t){var r=this._southWest,u=this._northEast,l,p;if(t instanceof dt)l=t,p=t;else if(t instanceof Ct){if(l=t._southWest,p=t._northEast,!l||!p)return this}else return t?this.extend(B(t)||Mt(t)):this;return!r&&!u?(this._southWest=new dt(l.lat,l.lng),this._northEast=new dt(p.lat,p.lng)):(r.lat=Math.min(l.lat,r.lat),r.lng=Math.min(l.lng,r.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(t){var r=this._southWest,u=this._northEast,l=Math.abs(r.lat-u.lat)*t,p=Math.abs(r.lng-u.lng)*t;return new Ct(new dt(r.lat-l,r.lng-p),new dt(u.lat+l,u.lng+p))},getCenter:function(){return new dt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new dt(this.getNorth(),this.getWest())},getSouthEast:function(){return new dt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof dt||"lat"in t?t=B(t):t=Mt(t);var r=this._southWest,u=this._northEast,l,p;return t instanceof Ct?(l=t.getSouthWest(),p=t.getNorthEast()):l=p=t,l.lat>=r.lat&&p.lat<=u.lat&&l.lng>=r.lng&&p.lng<=u.lng},intersects:function(t){t=Mt(t);var r=this._southWest,u=this._northEast,l=t.getSouthWest(),p=t.getNorthEast(),m=p.lat>=r.lat&&l.lat<=u.lat,T=p.lng>=r.lng&&l.lng<=u.lng;return m&&T},overlaps:function(t){t=Mt(t);var r=this._southWest,u=this._northEast,l=t.getSouthWest(),p=t.getNorthEast(),m=p.lat>r.lat&&l.lat<u.lat,T=p.lng>r.lng&&l.lng<u.lng;return m&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,r){return t?(t=Mt(t),this._southWest.equals(t.getSouthWest(),r)&&this._northEast.equals(t.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Mt(t,r){return t instanceof Ct?t:new Ct(t,r)}function dt(t,r,u){if(isNaN(t)||isNaN(r))throw new Error("Invalid LatLng object: ("+t+", "+r+")");this.lat=+t,this.lng=+r,u!==void 0&&(this.alt=+u)}dt.prototype={equals:function(t,r){if(!t)return!1;t=B(t);var u=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return u<=(r===void 0?1e-9:r)},toString:function(t){return"LatLng("+b(this.lat,t)+", "+b(this.lng,t)+")"},distanceTo:function(t){return q.distance(this,B(t))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(t){var r=180*t/40075017,u=r/Math.cos(Math.PI/180*this.lat);return Mt([this.lat-r,this.lng-u],[this.lat+r,this.lng+u])},clone:function(){return new dt(this.lat,this.lng,this.alt)}};function B(t,r,u){return t instanceof dt?t:N(t)&&typeof t[0]!="object"?t.length===3?new dt(t[0],t[1],t[2]):t.length===2?new dt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new dt(t.lat,"lng"in t?t.lng:t.lon,t.alt):r===void 0?null:new dt(t,r,u)}var M={latLngToPoint:function(t,r){var u=this.projection.project(t),l=this.scale(r);return this.transformation._transform(u,l)},pointToLatLng:function(t,r){var u=this.scale(r),l=this.transformation.untransform(t,u);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var r=this.projection.bounds,u=this.scale(t),l=this.transformation.transform(r.min,u),p=this.transformation.transform(r.max,u);return new tt(l,p)},infinite:!1,wrapLatLng:function(t){var r=this.wrapLng?y(t.lng,this.wrapLng,!0):t.lng,u=this.wrapLat?y(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new dt(u,r,l)},wrapLatLngBounds:function(t){var r=t.getCenter(),u=this.wrapLatLng(r),l=r.lat-u.lat,p=r.lng-u.lng;if(l===0&&p===0)return t;var m=t.getSouthWest(),T=t.getNorthEast(),k=new dt(m.lat-l,m.lng-p),D=new dt(T.lat-l,T.lng-p);return new Ct(k,D)}},q=s({},M,{wrapLng:[-180,180],R:6371e3,distance:function(t,r){var u=Math.PI/180,l=t.lat*u,p=r.lat*u,m=Math.sin((r.lat-t.lat)*u/2),T=Math.sin((r.lng-t.lng)*u/2),k=m*m+Math.cos(l)*Math.cos(p)*T*T,D=2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k));return this.R*D}}),J=6378137,at={R:J,MAX_LATITUDE:85.0511287798,project:function(t){var r=Math.PI/180,u=this.MAX_LATITUDE,l=Math.max(Math.min(u,t.lat),-u),p=Math.sin(l*r);return new Y(this.R*t.lng*r,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(t){var r=180/Math.PI;return new dt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*r,t.x*r/this.R)},bounds:function(){var t=J*Math.PI;return new tt([-t,-t],[t,t])}()};function x(t,r,u,l){if(N(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=r,this._c=u,this._d=l}x.prototype={transform:function(t,r){return this._transform(t.clone(),r)},_transform:function(t,r){return r=r||1,t.x=r*(this._a*t.x+this._b),t.y=r*(this._c*t.y+this._d),t},untransform:function(t,r){return r=r||1,new Y((t.x/r-this._b)/this._a,(t.y/r-this._d)/this._c)}};function E(t,r,u,l){return new x(t,r,u,l)}var F=s({},q,{code:"EPSG:3857",projection:at,transformation:function(){var t=.5/(Math.PI*at.R);return E(t,.5,-t,.5)}()}),K=s({},F,{code:"EPSG:900913"});function Pt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t,r){var u="",l,p,m,T,k,D;for(l=0,m=t.length;l<m;l++){for(k=t[l],p=0,T=k.length;p<T;p++)D=k[p],u+=(p?"L":"M")+D.x+" "+D.y;u+=r?Q.svg?"z":"x":""}return u||"M0 0"}var d=document.documentElement.style,_="ActiveXObject"in window,S=_&&!document.addEventListener,I="msLaunchUri"in navigator&&!("documentMode"in document),U=pe("webkit"),H=pe("android"),ht=pe("android 2")||pe("android 3"),mt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Et=H&&pe("Google")&&mt<537&&!("AudioNode"in window),Lt=!!window.opera,yt=!I&&pe("chrome"),Xt=pe("gecko")&&!U&&!Lt&&!_,Yi=!yt&&pe("safari"),xi=pe("phantom"),ro="OTransition"in d,Qa=navigator.platform.indexOf("Win")===0,oo=_&&"transition"in d,qn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ht,so="MozPerspective"in d,Ya=!window.L_DISABLE_3D&&(oo||qn||so)&&!ro&&!xi,Ei=typeof orientation<"u"||pe("mobile"),Ja=Ei&&U,Xa=Ei&&qn,ao=!window.PointerEvent&&window.MSPointerEvent,uo=!!(window.PointerEvent||ao),ho="ontouchstart"in window||!!window.TouchEvent,tu=!window.L_NO_TOUCH&&(ho||uo),eu=Ei&&Lt,iu=Ei&&Xt,nu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ru=function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",w,r),window.removeEventListener("testPassiveEventSupport",w,r)}catch{}return t}(),ou=function(){return!!document.createElement("canvas").getContext}(),jn=!!(document.createElementNS&&Pt("svg").createSVGRect),su=!!jn&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),au=!jn&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var r=t.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}();function pe(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Q={ie:_,ielt9:S,edge:I,webkit:U,android:H,android23:ht,androidStock:Et,opera:Lt,chrome:yt,gecko:Xt,safari:Yi,phantom:xi,opera12:ro,win:Qa,ie3d:oo,webkit3d:qn,gecko3d:so,any3d:Ya,mobile:Ei,mobileWebkit:Ja,mobileWebkit3d:Xa,msPointer:ao,pointer:uo,touch:tu,touchNative:ho,mobileOpera:eu,mobileGecko:iu,retina:nu,passiveEvents:ru,canvas:ou,svg:jn,vml:au,inlineSvg:su},lo=Q.msPointer?"MSPointerDown":"pointerdown",fo=Q.msPointer?"MSPointerMove":"pointermove",co=Q.msPointer?"MSPointerUp":"pointerup",po=Q.msPointer?"MSPointerCancel":"pointercancel",Hn={touchstart:lo,touchmove:fo,touchend:co,touchcancel:po},_o={touchstart:du,touchmove:Ji,touchend:Ji,touchcancel:Ji},ti={},go=!1;function uu(t,r,u){return r==="touchstart"&&cu(),_o[r]?(u=_o[r].bind(this,u),t.addEventListener(Hn[r],u,!1),u):(console.warn("wrong event specified:",r),L.Util.falseFn)}function hu(t,r,u){if(!Hn[r]){console.warn("wrong event specified:",r);return}t.removeEventListener(Hn[r],u,!1)}function lu(t){ti[t.pointerId]=t}function fu(t){ti[t.pointerId]&&(ti[t.pointerId]=t)}function mo(t){delete ti[t.pointerId]}function cu(){go||(document.addEventListener(lo,lu,!0),document.addEventListener(fo,fu,!0),document.addEventListener(co,mo,!0),document.addEventListener(po,mo,!0),go=!0)}function Ji(t,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var u in ti)r.touches.push(ti[u]);r.changedTouches=[r],t(r)}}function du(t,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&Kt(r),Ji(t,r)}function pu(t){var r={},u,l;for(l in t)u=t[l],r[l]=u&&u.bind?u.bind(t):u;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var _u=200;function gu(t,r){t.addEventListener("dblclick",r);var u=0,l;function p(m){if(m.detail!==1){l=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var T=Date.now();T-u<=_u?(l++,l===2&&r(pu(m))):l=1,u=T}}return t.addEventListener("click",p),{dblclick:r,simDblclick:p}}function mu(t,r){t.removeEventListener("dblclick",r.dblclick),t.removeEventListener("click",r.simDblclick)}var Wn=en(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Si=en(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vo=Si==="webkitTransition"||Si==="OTransition"?Si+"End":"transitionend";function yo(t){return typeof t=="string"?document.getElementById(t):t}function Ti(t,r){var u=t.style[r]||t.currentStyle&&t.currentStyle[r];if((!u||u==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);u=l?l[r]:null}return u==="auto"?null:u}function wt(t,r,u){var l=document.createElement(t);return l.className=r||"",u&&u.appendChild(l),l}function Ot(t){var r=t.parentNode;r&&r.removeChild(t)}function Xi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ei(t){var r=t.parentNode;r&&r.lastChild!==t&&r.appendChild(t)}function ii(t){var r=t.parentNode;r&&r.firstChild!==t&&r.insertBefore(t,r.firstChild)}function Vn(t,r){if(t.classList!==void 0)return t.classList.contains(r);var u=tn(t);return u.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(u)}function lt(t,r){if(t.classList!==void 0)for(var u=O(r),l=0,p=u.length;l<p;l++)t.classList.add(u[l]);else if(!Vn(t,r)){var m=tn(t);$n(t,(m?m+" ":"")+r)}}function Nt(t,r){t.classList!==void 0?t.classList.remove(r):$n(t,A((" "+tn(t)+" ").replace(" "+r+" "," ")))}function $n(t,r){t.className.baseVal===void 0?t.className=r:t.className.baseVal=r}function tn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function ne(t,r){"opacity"in t.style?t.style.opacity=r:"filter"in t.style&&vu(t,r)}function vu(t,r){var u=!1,l="DXImageTransform.Microsoft.Alpha";try{u=t.filters.item(l)}catch{if(r===1)return}r=Math.round(r*100),u?(u.Enabled=r!==100,u.Opacity=r):t.style.filter+=" progid:"+l+"(opacity="+r+")"}function en(t){for(var r=document.documentElement.style,u=0;u<t.length;u++)if(t[u]in r)return t[u];return!1}function qe(t,r,u){var l=r||new Y(0,0);t.style[Wn]=(Q.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(u?" scale("+u+")":"")}function zt(t,r){t._leaflet_pos=r,Q.any3d?qe(t,r):(t.style.left=r.x+"px",t.style.top=r.y+"px")}function je(t){return t._leaflet_pos||new Y(0,0)}var Pi,Li,Kn;if("onselectstart"in document)Pi=function(){ut(window,"selectstart",Kt)},Li=function(){At(window,"selectstart",Kt)};else{var Ai=en(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Pi=function(){if(Ai){var t=document.documentElement.style;Kn=t[Ai],t[Ai]="none"}},Li=function(){Ai&&(document.documentElement.style[Ai]=Kn,Kn=void 0)}}function Gn(){ut(window,"dragstart",Kt)}function Qn(){At(window,"dragstart",Kt)}var nn,Yn;function Jn(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(rn(),nn=t,Yn=t.style.outline,t.style.outline="none",ut(window,"keydown",rn))}function rn(){!nn||(nn.style.outline=Yn,nn=void 0,Yn=void 0,At(window,"keydown",rn))}function wo(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Xn(t){var r=t.getBoundingClientRect();return{x:r.width/t.offsetWidth||1,y:r.height/t.offsetHeight||1,boundingClientRect:r}}var yu={__proto__:null,TRANSFORM:Wn,TRANSITION:Si,TRANSITION_END:vo,get:yo,getStyle:Ti,create:wt,remove:Ot,empty:Xi,toFront:ei,toBack:ii,hasClass:Vn,addClass:lt,removeClass:Nt,setClass:$n,getClass:tn,setOpacity:ne,testProp:en,setTransform:qe,setPosition:zt,getPosition:je,get disableTextSelection(){return Pi},get enableTextSelection(){return Li},disableImageDrag:Gn,enableImageDrag:Qn,preventOutline:Jn,restoreOutline:rn,getSizedParentNode:wo,getScale:Xn};function ut(t,r,u,l){if(r&&typeof r=="object")for(var p in r)er(t,p,r[p],u);else{r=O(r);for(var m=0,T=r.length;m<T;m++)er(t,r[m],u,l)}return this}var _e="_leaflet_events";function At(t,r,u,l){if(arguments.length===1)bo(t),delete t[_e];else if(r&&typeof r=="object")for(var p in r)ir(t,p,r[p],u);else if(r=O(r),arguments.length===2)bo(t,function(k){return $(r,k)!==-1});else for(var m=0,T=r.length;m<T;m++)ir(t,r[m],u,l);return this}function bo(t,r){for(var u in t[_e]){var l=u.split(/\d/)[0];(!r||r(l))&&ir(t,l,null,null,u)}}var tr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function er(t,r,u,l){var p=r+g(u)+(l?"_"+g(l):"");if(t[_e]&&t[_e][p])return this;var m=function(k){return u.call(l||t,k||window.event)},T=m;!Q.touchNative&&Q.pointer&&r.indexOf("touch")===0?m=uu(t,r,m):Q.touch&&r==="dblclick"?m=gu(t,m):"addEventListener"in t?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?t.addEventListener(tr[r]||r,m,Q.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(m=function(k){k=k||window.event,rr(t,k)&&T(k)},t.addEventListener(tr[r],m,!1)):t.addEventListener(r,T,!1):t.attachEvent("on"+r,m),t[_e]=t[_e]||{},t[_e][p]=m}function ir(t,r,u,l,p){p=p||r+g(u)+(l?"_"+g(l):"");var m=t[_e]&&t[_e][p];if(!m)return this;!Q.touchNative&&Q.pointer&&r.indexOf("touch")===0?hu(t,r,m):Q.touch&&r==="dblclick"?mu(t,m):"removeEventListener"in t?t.removeEventListener(tr[r]||r,m,!1):t.detachEvent("on"+r,m),t[_e][p]=null}function He(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function nr(t){return er(t,"wheel",He),this}function Ii(t){return ut(t,"mousedown touchstart dblclick contextmenu",He),t._leaflet_disable_click=!0,this}function Kt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function We(t){return Kt(t),He(t),this}function xo(t,r){if(!r)return new Y(t.clientX,t.clientY);var u=Xn(r),l=u.boundingClientRect;return new Y((t.clientX-l.left)/u.x-r.clientLeft,(t.clientY-l.top)/u.y-r.clientTop)}var wu=Q.win&&Q.chrome?2*window.devicePixelRatio:Q.gecko?window.devicePixelRatio:1;function Eo(t){return Q.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/wu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function rr(t,r){var u=r.relatedTarget;if(!u)return!0;try{for(;u&&u!==t;)u=u.parentNode}catch{return!1}return u!==t}var bu={__proto__:null,on:ut,off:At,stopPropagation:He,disableScrollPropagation:nr,disableClickPropagation:Ii,preventDefault:Kt,stop:We,getMousePosition:xo,getWheelDelta:Eo,isExternalTarget:rr,addListener:ut,removeListener:At},So=Zt.extend({run:function(t,r,u,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=je(t),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=Bt(this._animate,this),this._step()},_step:function(t){var r=+new Date-this._startTime,u=this._duration*1e3;r<u?this._runFrame(this._easeOut(r/u),t):(this._runFrame(1),this._complete())},_runFrame:function(t,r){var u=this._startPos.add(this._offset.multiplyBy(t));r&&u._round(),zt(this._el,u),this.fire("step")},_complete:function(){Rt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),pt=Zt.extend({options:{crs:F,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,r){r=C(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(B(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Si&&Q.any3d&&!Q.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ut(this._proxy,vo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,r,u){if(r=r===void 0?this._zoom:this._limitZoom(r),t=this._limitCenter(B(t),r,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var l=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,r,u.zoom):this._tryAnimatedPan(t,u.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,r),this},setZoom:function(t,r){return this._loaded?this.setView(this.getCenter(),t,{zoom:r}):(this._zoom=t,this)},zoomIn:function(t,r){return t=t||(Q.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,r)},zoomOut:function(t,r){return t=t||(Q.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,r)},setZoomAround:function(t,r,u){var l=this.getZoomScale(r),p=this.getSize().divideBy(2),m=t instanceof Y?t:this.latLngToContainerPoint(t),T=m.subtract(p).multiplyBy(1-1/l),k=this.containerPointToLatLng(p.add(T));return this.setView(k,r,{zoom:u})},_getBoundsCenterZoom:function(t,r){r=r||{},t=t.getBounds?t.getBounds():Mt(t);var u=ot(r.paddingTopLeft||r.padding||[0,0]),l=ot(r.paddingBottomRight||r.padding||[0,0]),p=this.getBoundsZoom(t,!1,u.add(l));if(p=typeof r.maxZoom=="number"?Math.min(r.maxZoom,p):p,p===1/0)return{center:t.getCenter(),zoom:p};var m=l.subtract(u).divideBy(2),T=this.project(t.getSouthWest(),p),k=this.project(t.getNorthEast(),p),D=this.unproject(T.add(k).divideBy(2).add(m),p);return{center:D,zoom:p}},fitBounds:function(t,r){if(t=Mt(t),!t.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(t,r);return this.setView(u.center,u.zoom,r)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,r){return this.setView(t,this._zoom,{pan:r})},panBy:function(t,r){if(t=ot(t).round(),r=r||{},!t.x&&!t.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new So,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){lt(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,u,r.duration||.25,r.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,r,u){if(u=u||{},u.animate===!1||!Q.any3d)return this.setView(t,r,u);this._stop();var l=this.project(this.getCenter()),p=this.project(t),m=this.getSize(),T=this._zoom;t=B(t),r=r===void 0?T:r;var k=Math.max(m.x,m.y),D=k*this.getZoomScale(T,r),j=p.distanceTo(l)||1,G=1.42,ft=G*G;function _t(Ft){var gn=Ft?-1:1,hh=Ft?D:k,lh=D*D-k*k+gn*ft*ft*j*j,fh=2*hh*ft*j,gr=lh/fh,is=Math.sqrt(gr*gr+1)-gr,ch=is<1e-9?-18:Math.log(is);return ch}function Ae(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function $e(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}function _n(Ft){return Ae(Ft)/$e(Ft)}var De=_t(0);function _r(Ft){return k*($e(De)/$e(De+G*Ft))}function oh(Ft){return k*($e(De)*_n(De+G*Ft)-Ae(De))/ft}function sh(Ft){return 1-Math.pow(1-Ft,1.5)}var ah=Date.now(),ts=(_t(1)-De)/G,uh=u.duration?1e3*u.duration:1e3*ts*.8;function es(){var Ft=(Date.now()-ah)/uh,gn=sh(Ft)*ts;Ft<=1?(this._flyToFrame=Bt(es,this),this._move(this.unproject(l.add(p.subtract(l).multiplyBy(oh(gn)/j)),T),this.getScaleZoom(k/_r(gn),T),{flyTo:!0})):this._move(t,r)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),es.call(this),this},flyToBounds:function(t,r){var u=this._getBoundsCenterZoom(t,r);return this.flyTo(u.center,u.zoom,r)},setMaxBounds:function(t){if(t=Mt(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var r=this.options.minZoom;return this.options.minZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var r=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,r){this._enforcingBounds=!0;var u=this.getCenter(),l=this._limitCenter(u,this._zoom,Mt(t));return u.equals(l)||this.panTo(l,r),this._enforcingBounds=!1,this},panInside:function(t,r){r=r||{};var u=ot(r.paddingTopLeft||r.padding||[0,0]),l=ot(r.paddingBottomRight||r.padding||[0,0]),p=this.project(this.getCenter()),m=this.project(t),T=this.getPixelBounds(),k=xt([T.min.add(u),T.max.subtract(l)]),D=k.getSize();if(!k.contains(m)){this._enforcingBounds=!0;var j=m.subtract(k.getCenter()),G=k.extend(m).getSize().subtract(D);p.x+=j.x<0?-G.x:G.x,p.y+=j.y<0?-G.y:G.y,this.panTo(this.unproject(p),r),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),l=r.divideBy(2).round(),p=u.divideBy(2).round(),m=l.subtract(p);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=h(this._handleGeolocationResponse,this),u=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,u,t):navigator.geolocation.getCurrentPosition(r,u,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(!!this._container._leaflet_id){var r=t.code,u=t.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(t){if(!!this._container._leaflet_id){var r=t.coords.latitude,u=t.coords.longitude,l=new dt(r,u),p=l.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var T=this.getBoundsZoom(p);this.setView(l,m.maxZoom?Math.min(T,m.maxZoom):T)}var k={latlng:l,bounds:p,timestamp:t.timestamp};for(var D in t.coords)typeof t.coords[D]=="number"&&(k[D]=t.coords[D]);this.fire("locationfound",k)}},addHandler:function(t,r){if(!r)return this;var u=this[t]=new r(this);return this._handlers.push(u),this.options[t]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Rt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ot(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,r){var u="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=wt("div",u,r||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),r=this.unproject(t.getBottomLeft()),u=this.unproject(t.getTopRight());return new Ct(r,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,r,u){t=Mt(t),u=ot(u||[0,0]);var l=this.getZoom()||0,p=this.getMinZoom(),m=this.getMaxZoom(),T=t.getNorthWest(),k=t.getSouthEast(),D=this.getSize().subtract(u),j=xt(this.project(k,l),this.project(T,l)).getSize(),G=Q.any3d?this.options.zoomSnap:1,ft=D.x/j.x,_t=D.y/j.y,Ae=r?Math.max(ft,_t):Math.min(ft,_t);return l=this.getScaleZoom(Ae,l),G&&(l=Math.round(l/(G/100))*(G/100),l=r?Math.ceil(l/G)*G:Math.floor(l/G)*G),Math.max(p,Math.min(m,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,r){var u=this._getTopLeftPoint(t,r);return new tt(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,r){var u=this.options.crs;return r=r===void 0?this._zoom:r,u.scale(t)/u.scale(r)},getScaleZoom:function(t,r){var u=this.options.crs;r=r===void 0?this._zoom:r;var l=u.zoom(t*u.scale(r));return isNaN(l)?1/0:l},project:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(B(t),r)},unproject:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(ot(t),r)},layerPointToLatLng:function(t){var r=ot(t).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(t){var r=this.project(B(t))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Mt(t))},distance:function(t,r){return this.options.crs.distance(B(t),B(r))},containerPointToLayerPoint:function(t){return ot(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return ot(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var r=this.containerPointToLayerPoint(ot(t));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return xo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var r=this._container=yo(t);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ut(r,"scroll",this._onScroll,this),this._containerId=g(r)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Q.any3d,lt(t,"leaflet-container"+(Q.touch?" leaflet-touch":"")+(Q.retina?" leaflet-retina":"")+(Q.ielt9?" leaflet-oldie":"")+(Q.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=Ti(t,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),zt(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lt(t.markerPane,"leaflet-zoom-hide"),lt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,r){zt(this._mapPane,new Y(0,0));var u=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var l=this._zoom!==r;this._moveStart(l,!1)._move(t,r)._moveEnd(l),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(t,r){return t&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(t,r,u,l){r===void 0&&(r=this._zoom);var p=this._zoom!==r;return this._zoom=r,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Rt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){zt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var r=t?At:ut;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),Q.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Rt(this._resizeRequest),this._resizeRequest=Bt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,r){for(var u=[],l,p=r==="mouseout"||r==="mouseover",m=t.target||t.srcElement,T=!1;m;){if(l=this._targets[g(m)],l&&(r==="click"||r==="preclick")&&this._draggableMoved(l)){T=!0;break}if(l&&l.listens(r,!0)&&(p&&!rr(m,t)||(u.push(l),p))||m===this._container)break;m=m.parentNode}return!u.length&&!T&&!p&&this.listens(r,!0)&&(u=[this]),u},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var r=t.target||t.srcElement;if(!(!this._loaded||r._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(r))){var u=t.type;u==="mousedown"&&Jn(r),this._fireDOMEvent(t,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,r,u){if(t.type==="click"){var l=s({},t);l.type="preclick",this._fireDOMEvent(l,l.type,u)}var p=this._findEventTargets(t,r);if(u){for(var m=[],T=0;T<u.length;T++)u[T].listens(r,!0)&&m.push(u[T]);p=m.concat(p)}if(!!p.length){r==="contextmenu"&&Kt(t);var k=p[0],D={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var j=k.getLatLng&&(!k._radius||k._radius<=10);D.containerPoint=j?this.latLngToContainerPoint(k.getLatLng()):this.mouseEventToContainerPoint(t),D.layerPoint=this.containerPointToLayerPoint(D.containerPoint),D.latlng=j?k.getLatLng():this.layerPointToLatLng(D.layerPoint)}for(T=0;T<p.length;T++)if(p[T].fire(r,D,!0),D.originalEvent._stopped||p[T].options.bubblingMouseEvents===!1&&$(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,r=this._handlers.length;t<r;t++)this._handlers[t].disable()},whenReady:function(t,r){return this._loaded?t.call(r||this,{target:this}):this.on("load",t,r),this},_getMapPanePos:function(){return je(this._mapPane)||new Y(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,r){var u=t&&r!==void 0?this._getNewPixelOrigin(t,r):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,r){var u=this.getSize()._divideBy(2);return this.project(t,r)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,r,u){var l=this._getNewPixelOrigin(u,r);return this.project(t,r)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,r,u){var l=this._getNewPixelOrigin(u,r);return xt([this.project(t.getSouthWest(),r)._subtract(l),this.project(t.getNorthWest(),r)._subtract(l),this.project(t.getSouthEast(),r)._subtract(l),this.project(t.getNorthEast(),r)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,r,u){if(!u)return t;var l=this.project(t,r),p=this.getSize().divideBy(2),m=new tt(l.subtract(p),l.add(p)),T=this._getBoundsOffset(m,u,r);return T.round().equals([0,0])?t:this.unproject(l.add(T),r)},_limitOffset:function(t,r){if(!r)return t;var u=this.getPixelBounds(),l=new tt(u.min.add(t),u.max.add(t));return t.add(this._getBoundsOffset(l,r))},_getBoundsOffset:function(t,r,u){var l=xt(this.project(r.getNorthEast(),u),this.project(r.getSouthWest(),u)),p=l.min.subtract(t.min),m=l.max.subtract(t.max),T=this._rebound(p.x,-m.x),k=this._rebound(p.y,-m.y);return new Y(T,k)},_rebound:function(t,r){return t+r>0?Math.round(t-r)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(r))},_limitZoom:function(t){var r=this.getMinZoom(),u=this.getMaxZoom(),l=Q.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(r,Math.min(u,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,r){var u=this._getCenterOffset(t)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,r),!0)},_createAnimProxy:function(){var t=this._proxy=wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(r){var u=Wn,l=this._proxy.style[u];qe(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),l===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),r=this.getZoom();qe(this._proxy,this.project(t,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,r,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(r),p=this._getCenterOffset(t)._divideBy(1-1/l);return u.animate!==!0&&!this.getSize().contains(p)?!1:(Bt(function(){this._moveStart(!0,!1)._animateZoom(t,r,!0)},this),!0)},_animateZoom:function(t,r,u,l){!this._mapPane||(u&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=r,lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:r,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function xu(t,r){return new pt(t,r)}var he=Dt.extend({options:{position:"topright"},initialize:function(t){C(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var r=this._map;return r&&r.removeControl(this),this.options.position=t,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var r=this._container=this.onAdd(t),u=this.getPosition(),l=t._controlCorners[u];return lt(r,"leaflet-control"),u.indexOf("bottom")!==-1?l.insertBefore(r,l.firstChild):l.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Bi=function(t){return new he(t)};pt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},r="leaflet-",u=this._controlContainer=wt("div",r+"control-container",this._container);function l(p,m){var T=r+p+" "+r+m;t[p+m]=wt("div",T,u)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ot(this._controlCorners[t]);Ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var To=he.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,r,u,l){return u<l?-1:l<u?1:0}},initialize:function(t,r,u){C(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in r)this._addLayer(r[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return he.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,r){return this._addLayer(t,r),this._map?this._update():this},addOverlay:function(t,r){return this._addLayer(t,r,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var r=this._getLayer(g(t));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",r=this._container=wt("div",t),u=this.options.collapsed;r.setAttribute("aria-haspopup",!0),Ii(r),nr(r);var l=this._section=wt("section",t+"-list");u&&(this._map.on("click",this.collapse,this),ut(r,{mouseenter:function(){ut(l,"click",Kt),this.expand(),setTimeout(function(){At(l,"click",Kt)})},mouseleave:this.collapse},this));var p=this._layersLink=wt("a",t+"-toggle",r);p.href="#",p.title="Layers",p.setAttribute("role","button"),ut(p,"click",Kt),ut(p,"focus",this.expand,this),u||this.expand(),this._baseLayersList=wt("div",t+"-base",l),this._separator=wt("div",t+"-separator",l),this._overlaysList=wt("div",t+"-overlays",l),r.appendChild(l)},_getLayer:function(t){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&g(this._layers[r].layer)===t)return this._layers[r]},_addLayer:function(t,r,u){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:r,overlay:u}),this.options.sortLayers&&this._layers.sort(h(function(l,p){return this.options.sortFunction(l.layer,p.layer,l.name,p.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xi(this._baseLayersList),Xi(this._overlaysList),this._layerControlInputs=[];var t,r,u,l,p=0;for(u=0;u<this._layers.length;u++)l=this._layers[u],this._addItem(l),r=r||l.overlay,t=t||!l.overlay,p+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&p>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=r&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var r=this._getLayer(g(t.target)),u=r.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;u&&this._map.fire(u,r)},_createRadioElement:function(t,r){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(r?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=u,l.firstChild},_addItem:function(t){var r=document.createElement("label"),u=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=u):l=this._createRadioElement("leaflet-base-layers_"+g(this),u),this._layerControlInputs.push(l),l.layerId=g(t.layer),ut(l,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+t.name;var m=document.createElement("span");r.appendChild(m),m.appendChild(l),m.appendChild(p);var T=t.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){var t=this._layerControlInputs,r,u,l=[],p=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)r=t[m],u=this._getLayer(r.layerId).layer,r.checked?l.push(u):r.checked||p.push(u);for(m=0;m<p.length;m++)this._map.hasLayer(p[m])&&this._map.removeLayer(p[m]);for(m=0;m<l.length;m++)this._map.hasLayer(l[m])||this._map.addLayer(l[m]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,r,u,l=this._map.getZoom(),p=t.length-1;p>=0;p--)r=t[p],u=this._getLayer(r.layerId).layer,r.disabled=u.options.minZoom!==void 0&&l<u.options.minZoom||u.options.maxZoom!==void 0&&l>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Eu=function(t,r,u){return new To(t,r,u)},or=he.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var r="leaflet-control-zoom",u=wt("div",r+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,r+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,r+"-out",u,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,r,u,l,p){var m=wt("a",u,l);return m.innerHTML=t,m.href="#",m.title=r,m.setAttribute("role","button"),m.setAttribute("aria-label",r),Ii(m),ut(m,"click",We),ut(m,"click",p,this),ut(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,r="leaflet-disabled";Nt(this._zoomInButton,r),Nt(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(lt(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(lt(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});pt.mergeOptions({zoomControl:!0}),pt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new or,this.addControl(this.zoomControl))});var Su=function(t){return new or(t)},Po=he.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var r="leaflet-control-scale",u=wt("div",r),l=this.options;return this._addScales(l,r+"-line",u),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),u},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,r,u){t.metric&&(this._mScale=wt("div",r,u)),t.imperial&&(this._iScale=wt("div",r,u))},_update:function(){var t=this._map,r=t.getSize().y/2,u=t.distance(t.containerPointToLatLng([0,r]),t.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(u)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var r=this._getRoundNum(t),u=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,u,r/t)},_updateImperial:function(t){var r=t*3.2808399,u,l,p;r>5280?(u=r/5280,l=this._getRoundNum(u),this._updateScale(this._iScale,l+" mi",l/u)):(p=this._getRoundNum(r),this._updateScale(this._iScale,p+" ft",p/r))},_updateScale:function(t,r,u){t.style.width=Math.round(this.options.maxWidth*u)+"px",t.innerHTML=r},_getRoundNum:function(t){var r=Math.pow(10,(Math.floor(t)+"").length-1),u=t/r;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,r*u}}),Tu=function(t){return new Po(t)},Pu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',sr=he.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Q.inlineSvg?Pu+" ":"")+"Leaflet</a>"},initialize:function(t){C(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=wt("div","leaflet-control-attribution"),Ii(this._container);for(var r in t._layers)t._layers[r].getAttribution&&this.addAttribution(t._layers[r].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var r in this._attributions)this._attributions[r]&&t.push(r);var u=[];this.options.prefix&&u.push(this.options.prefix),t.length&&u.push(t.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});pt.mergeOptions({attributionControl:!0}),pt.addInitHook(function(){this.options.attributionControl&&new sr().addTo(this)});var Lu=function(t){return new sr(t)};he.Layers=To,he.Zoom=or,he.Scale=Po,he.Attribution=sr,Bi.layers=Eu,Bi.zoom=Su,Bi.scale=Tu,Bi.attribution=Lu;var ge=Dt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ge.addTo=function(t,r){return t.addHandler(r,this),this};var Au={Events:kt},Lo=Q.touch?"touchstart mousedown":"mousedown",Oe=Zt.extend({options:{clickTolerance:3},initialize:function(t,r,u,l){C(this,l),this._element=t,this._dragStartTarget=r||t,this._preventOutline=u},enable:function(){this._enabled||(ut(this._dragStartTarget,Lo,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Oe._dragging===this&&this.finishDrag(!0),At(this._dragStartTarget,Lo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!!this._enabled&&(this._moved=!1,!Vn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Oe._dragging===this&&this.finishDrag();return}if(!(Oe._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Oe._dragging=this,this._preventOutline&&Jn(this._element),Gn(),Pi(),!this._moving)){this.fire("down");var r=t.touches?t.touches[0]:t,u=wo(this._element);this._startPoint=new Y(r.clientX,r.clientY),this._startPos=je(this._element),this._parentScale=Xn(u);var l=t.type==="mousedown";ut(document,l?"mousemove":"touchmove",this._onMove,this),ut(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(!!this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var r=t.touches&&t.touches.length===1?t.touches[0]:t,u=new Y(r.clientX,r.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Kt(t),this._moved||(this.fire("dragstart"),this._moved=!0,lt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),zt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(t){Nt(document.body,"leaflet-dragging"),this._lastTarget&&(Nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),At(document,"mousemove touchmove",this._onMove,this),At(document,"mouseup touchend touchcancel",this._onUp,this),Qn(),Li(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Oe._dragging=!1}});function Ao(t,r){if(!r||!t.length)return t.slice();var u=r*r;return t=Cu(t,u),t=Bu(t,u),t}function Io(t,r,u){return Math.sqrt(Ci(t,r,u,!0))}function Iu(t,r,u){return Ci(t,r,u)}function Bu(t,r){var u=t.length,l=typeof Uint8Array!=void 0+""?Uint8Array:Array,p=new l(u);p[0]=p[u-1]=1,ar(t,p,r,0,u-1);var m,T=[];for(m=0;m<u;m++)p[m]&&T.push(t[m]);return T}function ar(t,r,u,l,p){var m=0,T,k,D;for(k=l+1;k<=p-1;k++)D=Ci(t[k],t[l],t[p],!0),D>m&&(T=k,m=D);m>u&&(r[T]=1,ar(t,r,u,l,T),ar(t,r,u,T,p))}function Cu(t,r){for(var u=[t[0]],l=1,p=0,m=t.length;l<m;l++)Mu(t[l],t[p])>r&&(u.push(t[l]),p=l);return p<m-1&&u.push(t[m-1]),u}var Bo;function Co(t,r,u,l,p){var m=l?Bo:Ve(t,u),T=Ve(r,u),k,D,j;for(Bo=T;;){if(!(m|T))return[t,r];if(m&T)return!1;k=m||T,D=on(t,r,k,u,p),j=Ve(D,u),k===m?(t=D,m=j):(r=D,T=j)}}function on(t,r,u,l,p){var m=r.x-t.x,T=r.y-t.y,k=l.min,D=l.max,j,G;return u&8?(j=t.x+m*(D.y-t.y)/T,G=D.y):u&4?(j=t.x+m*(k.y-t.y)/T,G=k.y):u&2?(j=D.x,G=t.y+T*(D.x-t.x)/m):u&1&&(j=k.x,G=t.y+T*(k.x-t.x)/m),new Y(j,G,p)}function Ve(t,r){var u=0;return t.x<r.min.x?u|=1:t.x>r.max.x&&(u|=2),t.y<r.min.y?u|=4:t.y>r.max.y&&(u|=8),u}function Mu(t,r){var u=r.x-t.x,l=r.y-t.y;return u*u+l*l}function Ci(t,r,u,l){var p=r.x,m=r.y,T=u.x-p,k=u.y-m,D=T*T+k*k,j;return D>0&&(j=((t.x-p)*T+(t.y-m)*k)/D,j>1?(p=u.x,m=u.y):j>0&&(p+=T*j,m+=k*j)),T=t.x-p,k=t.y-m,l?T*T+k*k:new Y(p,m)}function Se(t){return!N(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Mo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Se(t)}var ku={__proto__:null,simplify:Ao,pointToSegmentDistance:Io,closestPointOnSegment:Iu,clipSegment:Co,_getEdgeIntersection:on,_getBitCode:Ve,_sqClosestPointOnSegment:Ci,isFlat:Se,_flat:Mo};function ko(t,r,u){var l,p=[1,4,2,8],m,T,k,D,j,G,ft,_t;for(m=0,G=t.length;m<G;m++)t[m]._code=Ve(t[m],r);for(k=0;k<4;k++){for(ft=p[k],l=[],m=0,G=t.length,T=G-1;m<G;T=m++)D=t[m],j=t[T],D._code&ft?j._code&ft||(_t=on(j,D,ft,r,u),_t._code=Ve(_t,r),l.push(_t)):(j._code&ft&&(_t=on(j,D,ft,r,u),_t._code=Ve(_t,r),l.push(_t)),l.push(D));t=l}return t}var Ou={__proto__:null,clipPolygon:ko},ur={project:function(t){return new Y(t.lng,t.lat)},unproject:function(t){return new dt(t.y,t.x)},bounds:new tt([-180,-90],[180,90])},hr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new tt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var r=Math.PI/180,u=this.R,l=t.lat*r,p=this.R_MINOR/u,m=Math.sqrt(1-p*p),T=m*Math.sin(l),k=Math.tan(Math.PI/4-l/2)/Math.pow((1-T)/(1+T),m/2);return l=-u*Math.log(Math.max(k,1e-10)),new Y(t.lng*r*u,l)},unproject:function(t){for(var r=180/Math.PI,u=this.R,l=this.R_MINOR/u,p=Math.sqrt(1-l*l),m=Math.exp(-t.y/u),T=Math.PI/2-2*Math.atan(m),k=0,D=.1,j;k<15&&Math.abs(D)>1e-7;k++)j=p*Math.sin(T),j=Math.pow((1-j)/(1+j),p/2),D=Math.PI/2-2*Math.atan(m*j)-T,T+=D;return new dt(T*r,t.x*r/u)}},Ru={__proto__:null,LonLat:ur,Mercator:hr,SphericalMercator:at},Du=s({},q,{code:"EPSG:3395",projection:hr,transformation:function(){var t=.5/(Math.PI*hr.R);return E(t,.5,-t,.5)}()}),Oo=s({},q,{code:"EPSG:4326",projection:ur,transformation:E(1/180,1,-1/180,.5)}),Nu=s({},M,{projection:ur,transformation:E(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,r){var u=r.lng-t.lng,l=r.lat-t.lat;return Math.sqrt(u*u+l*l)},infinite:!0});M.Earth=q,M.EPSG3395=Du,M.EPSG3857=F,M.EPSG900913=K,M.EPSG4326=Oo,M.Simple=Nu;var le=Zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var r=t.target;if(!!r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var u=this.getEvents();r.on(u,this),this.once("remove",function(){r.off(u,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});pt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var r=g(t);return this._layers[r]?this:(this._layers[r]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var r=g(t);return this._layers[r]?(this._loaded&&t.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,r){for(var u in this._layers)t.call(r,this._layers[u]);return this},_addLayers:function(t){t=t?N(t)?t:[t]:[];for(var r=0,u=t.length;r<u;r++)this.addLayer(t[r])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var r=g(t);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,r=-1/0,u=this._getZoomSpan();for(var l in this._zoomBoundLayers){var p=this._zoomBoundLayers[l].options;t=p.minZoom===void 0?t:Math.min(t,p.minZoom),r=p.maxZoom===void 0?r:Math.max(r,p.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=t===1/0?void 0:t,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ni=le.extend({initialize:function(t,r){C(this,r),this._layers={};var u,l;if(t)for(u=0,l=t.length;u<l;u++)this.addLayer(t[u])},addLayer:function(t){var r=this.getLayerId(t);return this._layers[r]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var r=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(t){var r=typeof t=="number"?t:this.getLayerId(t);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var r=Array.prototype.slice.call(arguments,1),u,l;for(u in this._layers)l=this._layers[u],l[t]&&l[t].apply(l,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,r){for(var u in this._layers)t.call(r,this._layers[u]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),zu=function(t,r){return new ni(t,r)},ri=ni.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ni.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ni.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Ct;for(var r in this._layers){var u=this._layers[r];t.extend(u.getBounds?u.getBounds():u.getLatLng())}return t}}),Fu=function(t,r){return new ri(t,r)},oi=Dt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){C(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,r){var u=this._getIconUrl(t);if(!u){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(u,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,r){var u=this.options,l=u[r+"Size"];typeof l=="number"&&(l=[l,l]);var p=ot(l),m=ot(r==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));t.className="leaflet-marker-"+r+" "+(u.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),p&&(t.style.width=p.x+"px",t.style.height=p.y+"px")},_createImg:function(t,r){return r=r||document.createElement("img"),r.src=t,r},_getIconUrl:function(t){return Q.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Uu(t){return new oi(t)}var Mi=oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Mi.imagePath!="string"&&(Mi.imagePath=this._detectIconPath()),(this.options.imagePath||Mi.imagePath)+oi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var r=function(u,l,p){var m=l.exec(u);return m&&m[p]};return t=r(t,/^url\((['"])?(.+)\1\)$/,2),t&&r(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=wt("div","leaflet-default-icon-path",document.body),r=Ti(t,"background-image")||Ti(t,"backgroundImage");if(document.body.removeChild(t),r=this._stripUrl(r),r)return r;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Ro=ge.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Oe(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var r=this._marker,u=r._map,l=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,m=je(r._icon),T=u.getPixelBounds(),k=u.getPixelOrigin(),D=xt(T.min._subtract(k).add(p),T.max._subtract(k).subtract(p));if(!D.contains(m)){var j=ot((Math.max(D.max.x,m.x)-D.max.x)/(T.max.x-D.max.x)-(Math.min(D.min.x,m.x)-D.min.x)/(T.min.x-D.min.x),(Math.max(D.max.y,m.y)-D.max.y)/(T.max.y-D.max.y)-(Math.min(D.min.y,m.y)-D.min.y)/(T.min.y-D.min.y)).multiplyBy(l);u.panBy(j,{animate:!1}),this._draggable._newPos._add(j),this._draggable._startPos._add(j),zt(r._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Bt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Rt(this._panRequest),this._panRequest=Bt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var r=this._marker,u=r._shadow,l=je(r._icon),p=r._map.layerPointToLatLng(l);u&&zt(u,l),r._latlng=p,t.latlng=p,t.oldLatLng=this._oldLatLng,r.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Rt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),sn=le.extend({options:{icon:new Mi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,r){C(this,r),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var r=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=t.icon.createIcon(this._icon),l=!1;u!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(u.title=t.title),u.tagName==="IMG"&&(u.alt=t.alt||"")),lt(u,r),t.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(u,"focus",this._panOnFocus,this);var p=t.icon.createShadow(this._shadow),m=!1;p!==this._shadow&&(this._removeShadow(),m=!0),p&&(lt(p,r),p.alt=""),this._shadow=p,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(this._icon,"focus",this._panOnFocus,this),Ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ot(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&zt(this._icon,t),this._shadow&&zt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(r)},_initInteraction:function(){if(!!this.options.interactive&&(lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ro)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ro(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ne(this._icon,t),this._shadow&&ne(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(!!t){var r=this.options.icon.options,u=r.iconSize?ot(r.iconSize):ot(0,0),l=r.iconAnchor?ot(r.iconAnchor):ot(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:u.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Zu(t,r){return new sn(t,r)}var Re=le.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return C(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),an=Re.extend({options:{fill:!0,radius:10},initialize:function(t,r){C(this,r),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var r=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var r=t&&t.radius||this._radius;return Re.prototype.setStyle.call(this,t),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,r=this._radiusY||t,u=this._clickTolerance(),l=[t+u,r+u];this._pxBounds=new tt(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qu(t,r){return new an(t,r)}var lr=an.extend({initialize:function(t,r,u){if(typeof r=="number"&&(r=s({},u,{radius:r})),C(this,r),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Ct(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Re.prototype.setStyle,_project:function(){var t=this._latlng.lng,r=this._latlng.lat,u=this._map,l=u.options.crs;if(l.distance===q.distance){var p=Math.PI/180,m=this._mRadius/q.R/p,T=u.project([r+m,t]),k=u.project([r-m,t]),D=T.add(k).divideBy(2),j=u.unproject(D).lat,G=Math.acos((Math.cos(m*p)-Math.sin(r*p)*Math.sin(j*p))/(Math.cos(r*p)*Math.cos(j*p)))/p;(isNaN(G)||G===0)&&(G=m/Math.cos(Math.PI/180*r)),this._point=D.subtract(u.getPixelOrigin()),this._radius=isNaN(G)?0:D.x-u.project([j,t-G]).x,this._radiusY=D.y-T.y}else{var ft=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ft).x}this._updateBounds()}});function ju(t,r,u){return new lr(t,r,u)}var Te=Re.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,r){C(this,r),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var r=1/0,u=null,l=Ci,p,m,T=0,k=this._parts.length;T<k;T++)for(var D=this._parts[T],j=1,G=D.length;j<G;j++){p=D[j-1],m=D[j];var ft=l(t,p,m,!0);ft<r&&(r=ft,u=l(t,p,m))}return u&&(u.distance=Math.sqrt(r)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,r,u,l,p,m,T,k=this._rings[0],D=k.length;if(!D)return null;for(t=0,r=0;t<D-1;t++)r+=k[t].distanceTo(k[t+1])/2;if(r===0)return this._map.layerPointToLatLng(k[0]);for(t=0,l=0;t<D-1;t++)if(p=k[t],m=k[t+1],u=p.distanceTo(m),l+=u,l>r)return T=(l-r)/u,this._map.layerPointToLatLng([m.x-T*(m.x-p.x),m.y-T*(m.y-p.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,r){return r=r||this._defaultShape(),t=B(t),r.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Ct,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Se(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var r=[],u=Se(t),l=0,p=t.length;l<p;l++)u?(r[l]=B(t[l]),this._bounds.extend(r[l])):r[l]=this._convertLatLngs(t[l]);return r},_project:function(){var t=new tt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),r=new Y(t,t);!this._rawPxBounds||(this._pxBounds=new tt([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(t,r,u){var l=t[0]instanceof dt,p=t.length,m,T;if(l){for(T=[],m=0;m<p;m++)T[m]=this._map.latLngToLayerPoint(t[m]),u.extend(T[m]);r.push(T)}else for(m=0;m<p;m++)this._projectLatlngs(t[m],r,u)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,u,l,p,m,T,k,D;for(u=0,p=0,m=this._rings.length;u<m;u++)for(D=this._rings[u],l=0,T=D.length;l<T-1;l++)k=Co(D[l],D[l+1],t,l,!0),k&&(r[p]=r[p]||[],r[p].push(k[0]),(k[1]!==D[l+1]||l===T-2)&&(r[p].push(k[1]),p++))}},_simplifyPoints:function(){for(var t=this._parts,r=this.options.smoothFactor,u=0,l=t.length;u<l;u++)t[u]=Ao(t[u],r)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,r){var u,l,p,m,T,k,D=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(u=0,m=this._parts.length;u<m;u++)for(k=this._parts[u],l=0,T=k.length,p=T-1;l<T;p=l++)if(!(!r&&l===0)&&Io(t,k[p],k[l])<=D)return!0;return!1}});function Hu(t,r){return new Te(t,r)}Te._flat=Mo;var si=Te.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,r,u,l,p,m,T,k,D,j=this._rings[0],G=j.length;if(!G)return null;for(m=T=k=0,t=0,r=G-1;t<G;r=t++)u=j[t],l=j[r],p=u.y*l.x-l.y*u.x,T+=(u.x+l.x)*p,k+=(u.y+l.y)*p,m+=p*3;return m===0?D=j[0]:D=[T/m,k/m],this._map.layerPointToLatLng(D)},_convertLatLngs:function(t){var r=Te.prototype._convertLatLngs.call(this,t),u=r.length;return u>=2&&r[0]instanceof dt&&r[0].equals(r[u-1])&&r.pop(),r},_setLatLngs:function(t){Te.prototype._setLatLngs.call(this,t),Se(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Se(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,r=this.options.weight,u=new Y(r,r);if(t=new tt(t.min.subtract(u),t.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,p=this._rings.length,m;l<p;l++)m=ko(this._rings[l],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var r=!1,u,l,p,m,T,k,D,j;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,D=this._parts.length;m<D;m++)for(u=this._parts[m],T=0,j=u.length,k=j-1;T<j;k=T++)l=u[T],p=u[k],l.y>t.y!=p.y>t.y&&t.x<(p.x-l.x)*(t.y-l.y)/(p.y-l.y)+l.x&&(r=!r);return r||Te.prototype._containsPoint.call(this,t,!0)}});function Wu(t,r){return new si(t,r)}var Pe=ri.extend({initialize:function(t,r){C(this,r),this._layers={},t&&this.addData(t)},addData:function(t){var r=N(t)?t:t.features,u,l,p;if(r){for(u=0,l=r.length;u<l;u++)p=r[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var T=fr(t,m);return T?(T.feature=ln(t),T.defaultOptions=T.options,this.resetStyle(T),m.onEachFeature&&m.onEachFeature(t,T),this.addLayer(T)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(r){this._setLayerStyle(r,t)},this)},_setLayerStyle:function(t,r){t.setStyle&&(typeof r=="function"&&(r=r(t.feature)),t.setStyle(r))}});function fr(t,r){var u=t.type==="Feature"?t.geometry:t,l=u?u.coordinates:null,p=[],m=r&&r.pointToLayer,T=r&&r.coordsToLatLng||cr,k,D,j,G;if(!l&&!u)return null;switch(u.type){case"Point":return k=T(l),Do(m,t,k,r);case"MultiPoint":for(j=0,G=l.length;j<G;j++)k=T(l[j]),p.push(Do(m,t,k,r));return new ri(p);case"LineString":case"MultiLineString":return D=un(l,u.type==="LineString"?0:1,T),new Te(D,r);case"Polygon":case"MultiPolygon":return D=un(l,u.type==="Polygon"?1:2,T),new si(D,r);case"GeometryCollection":for(j=0,G=u.geometries.length;j<G;j++){var ft=fr({geometry:u.geometries[j],type:"Feature",properties:t.properties},r);ft&&p.push(ft)}return new ri(p);default:throw new Error("Invalid GeoJSON object.")}}function Do(t,r,u,l){return t?t(r,u):new sn(u,l&&l.markersInheritOptions&&l)}function cr(t){return new dt(t[1],t[0],t[2])}function un(t,r,u){for(var l=[],p=0,m=t.length,T;p<m;p++)T=r?un(t[p],r-1,u):(u||cr)(t[p]),l.push(T);return l}function dr(t,r){return t=B(t),t.alt!==void 0?[b(t.lng,r),b(t.lat,r),b(t.alt,r)]:[b(t.lng,r),b(t.lat,r)]}function hn(t,r,u,l){for(var p=[],m=0,T=t.length;m<T;m++)p.push(r?hn(t[m],r-1,u,l):dr(t[m],l));return!r&&u&&p.push(p[0]),p}function ai(t,r){return t.feature?s({},t.feature,{geometry:r}):ln(r)}function ln(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var pr={toGeoJSON:function(t){return ai(this,{type:"Point",coordinates:dr(this.getLatLng(),t)})}};sn.include(pr),lr.include(pr),an.include(pr),Te.include({toGeoJSON:function(t){var r=!Se(this._latlngs),u=hn(this._latlngs,r?1:0,!1,t);return ai(this,{type:(r?"Multi":"")+"LineString",coordinates:u})}}),si.include({toGeoJSON:function(t){var r=!Se(this._latlngs),u=r&&!Se(this._latlngs[0]),l=hn(this._latlngs,u?2:r?1:0,!0,t);return r||(l=[l]),ai(this,{type:(u?"Multi":"")+"Polygon",coordinates:l})}}),ni.include({toMultiPoint:function(t){var r=[];return this.eachLayer(function(u){r.push(u.toGeoJSON(t).geometry.coordinates)}),ai(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(t){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(t);var u=r==="GeometryCollection",l=[];return this.eachLayer(function(p){if(p.toGeoJSON){var m=p.toGeoJSON(t);if(u)l.push(m.geometry);else{var T=ln(m);T.type==="FeatureCollection"?l.push.apply(l,T.features):l.push(T)}}}),u?ai(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function No(t,r){return new Pe(t,r)}var Vu=No,fn=le.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,r,u){this._url=t,this._bounds=Mt(r),C(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ei(this._image),this},bringToBack:function(){return this._map&&ii(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Mt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",r=this._image=t?this._url:wt("img");if(lt(r,"leaflet-image-layer"),this._zoomAnimated&&lt(r,"leaflet-zoom-animated"),this.options.className&&lt(r,this.options.className),r.onselectstart=w,r.onmousemove=w,r.onload=h(this.fire,this,"load"),r.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(t){var r=this._map.getZoomScale(t.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;qe(this._image,u,r)},_reset:function(){var t=this._image,r=new tt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=r.getSize();zt(t,r.min),t.style.width=u.x+"px",t.style.height=u.y+"px"},_updateOpacity:function(){ne(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),$u=function(t,r,u){return new fn(t,r,u)},zo=fn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",r=this._image=t?this._url:wt("video");if(lt(r,"leaflet-image-layer"),this._zoomAnimated&&lt(r,"leaflet-zoom-animated"),this.options.className&&lt(r,this.options.className),r.onselectstart=w,r.onmousemove=w,r.onloadeddata=h(this.fire,this,"load"),t){for(var u=r.getElementsByTagName("source"),l=[],p=0;p<u.length;p++)l.push(u[p].src);this._url=u.length>0?l:[r.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var T=wt("source");T.src=this._url[m],r.appendChild(T)}}});function Ku(t,r,u){return new zo(t,r,u)}var Fo=fn.extend({_initImage:function(){var t=this._image=this._url;lt(t,"leaflet-image-layer"),this._zoomAnimated&&lt(t,"leaflet-zoom-animated"),this.options.className&&lt(t,this.options.className),t.onselectstart=w,t.onmousemove=w}});function Gu(t,r,u){return new Fo(t,r,u)}var me=le.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,r){C(this,t),this._source=r},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ne(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ne(this._container,1),this.bringToFront(),this.options.interactive&&(lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(ne(this._container,0),this._removeTimeout=setTimeout(h(Ot,void 0,this._container),200)):Ot(this._container),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ei(this._container),this},bringToBack:function(){return this._map&&ii(this._container),this},_prepareOpen:function(t){var r=this._source;if(!r._map)return!1;if(r instanceof ri){r=null;var u=this._source._layers;for(var l in u)if(u[l]._map){r=u[l];break}if(!r)return!1;this._source=r}if(!t)if(r.getCenter)t=r.getCenter();else if(r.getLatLng)t=r.getLatLng();else if(r.getBounds)t=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var t=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")t.innerHTML=r;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),r=ot(this.options.offset),u=this._getAnchor();this._zoomAnimated?zt(this._container,t.add(u)):r=r.add(t).add(u);var l=this._containerBottom=-r.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=l+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});pt.include({_initOverlay:function(t,r,u,l){var p=r;return p instanceof t||(p=new t(l).setContent(r)),u&&p.setLatLng(u),p}}),le.include({_initOverlay:function(t,r,u,l){var p=u;return p instanceof t?(C(p,l),p._source=this):(p=r&&!l?r:new t(l,this),p.setContent(u)),p}});var cn=me.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,me.prototype.openOn.call(this,t)},onAdd:function(t){me.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Re||this._source.on("preclick",He))},onRemove:function(t){me.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Re||this._source.off("preclick",He))},getEvents:function(){var t=me.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",r=this._container=wt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=wt("div",t+"-content-wrapper",r);if(this._contentNode=wt("div",t+"-content",u),Ii(r),nr(this._contentNode),ut(r,"contextmenu",He),this._tipContainer=wt("div",t+"-tip-container",r),this._tip=wt("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=wt("a",t+"-close-button",r);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',ut(l,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,r=t.style;r.width="",r.whiteSpace="nowrap";var u=t.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),r.width=u+1+"px",r.whiteSpace="",r.height="";var l=t.offsetHeight,p=this.options.maxHeight,m="leaflet-popup-scrolled";p&&l>p?(r.height=p+"px",lt(t,m)):Nt(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),u=this._getAnchor();zt(this._container,r.add(u))},_adjustPan:function(t){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var r=this._map,u=parseInt(Ti(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+u,p=this._containerWidth,m=new Y(this._containerLeft,-l-this._containerBottom);m._add(je(this._container));var T=r.layerPointToContainerPoint(m),k=ot(this.options.autoPanPadding),D=ot(this.options.autoPanPaddingTopLeft||k),j=ot(this.options.autoPanPaddingBottomRight||k),G=r.getSize(),ft=0,_t=0;T.x+p+j.x>G.x&&(ft=T.x+p-G.x+j.x),T.x-ft-D.x<0&&(ft=T.x-D.x),T.y+l+j.y>G.y&&(_t=T.y+l-G.y+j.y),T.y-_t-D.y<0&&(_t=T.y-D.y),(ft||_t)&&r.fire("autopanstart").panBy([ft,_t],{animate:t&&t.type==="moveend"})}},_getAnchor:function(){return ot(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qu=function(t,r){return new cn(t,r)};pt.mergeOptions({closePopupOnClick:!0}),pt.include({openPopup:function(t,r,u){return this._initOverlay(cn,t,r,u).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),le.include({bindPopup:function(t,r){return this._popup=this._initOverlay(cn,this._popup,t,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){We(t);var r=t.layer||t.target;if(this._popup._source===r&&!(r instanceof Re)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=r,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var dn=me.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){me.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){me.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=me.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",r=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wt("div",r)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var r,u,l=this._map,p=this._container,m=l.latLngToContainerPoint(l.getCenter()),T=l.layerPointToContainerPoint(t),k=this.options.direction,D=p.offsetWidth,j=p.offsetHeight,G=ot(this.options.offset),ft=this._getAnchor();k==="top"?(r=D/2,u=j):k==="bottom"?(r=D/2,u=0):k==="center"?(r=D/2,u=j/2):k==="right"?(r=0,u=j/2):k==="left"?(r=D,u=j/2):T.x<m.x?(k="right",r=0,u=j/2):(k="left",r=D+(G.x+ft.x)*2,u=j/2),t=t.subtract(ot(r,u,!0)).add(G).add(ft),Nt(p,"leaflet-tooltip-right"),Nt(p,"leaflet-tooltip-left"),Nt(p,"leaflet-tooltip-top"),Nt(p,"leaflet-tooltip-bottom"),lt(p,"leaflet-tooltip-"+k),zt(p,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ne(this._container,t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(r)},_getAnchor:function(){return ot(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yu=function(t,r){return new dn(t,r)};pt.include({openTooltip:function(t,r,u){return this._initOverlay(dn,t,r,u).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),le.include({bindTooltip:function(t,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(dn,this._tooltip,t,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var r=t?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[r](u),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var r=t.latlng,u,l;this._tooltip.options.sticky&&t.originalEvent&&(u=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(u),r=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(r)}});var Uo=oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var r=t&&t.tagName==="DIV"?t:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Xi(r),r.appendChild(u.html)):r.innerHTML=u.html!==!1?u.html:"",u.bgPos){var l=ot(u.bgPos);r.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Ju(t){return new Uo(t)}oi.Default=Mi;var ki=le.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Q.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){C(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ot(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ei(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ii(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Y?t:new Y(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var r=this.getPane().children,u=-t(-1/0,1/0),l=0,p=r.length,m;l<p;l++)m=r[l].style.zIndex,r[l]!==this._container&&m&&(u=t(u,+m));isFinite(u)&&(this.options.zIndex=u+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!Q.ielt9){ne(this._container,this.options.opacity);var t=+new Date,r=!1,u=!1;for(var l in this._tiles){var p=this._tiles[l];if(!(!p.current||!p.loaded)){var m=Math.min(1,(t-p.loaded)/200);ne(p.el,m),m<1?r=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),r&&(Rt(this._fadeFrame),this._fadeFrame=Bt(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,r=this.options.maxZoom;if(t!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===t?(this._levels[u].el.style.zIndex=r-Math.abs(t-u),this._onUpdateLevel(u)):(Ot(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var l=this._levels[t],p=this._map;return l||(l=this._levels[t]={},l.el=wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=r,l.origin=p.project(p.unproject(p.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,p.getCenter(),p.getZoom()),w(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(!!this._map){var t,r,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)r=this._tiles[t],r.retain=r.current;for(t in this._tiles)if(r=this._tiles[t],r.current&&!r.active){var l=r.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var r in this._tiles)this._tiles[r].coords.z===t&&this._removeTile(r)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ot(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,r,u,l){var p=Math.floor(t/2),m=Math.floor(r/2),T=u-1,k=new Y(+p,+m);k.z=+T;var D=this._tileCoordsToKey(k),j=this._tiles[D];return j&&j.active?(j.retain=!0,!0):(j&&j.loaded&&(j.retain=!0),T>l?this._retainParent(p,m,T,l):!1)},_retainChildren:function(t,r,u,l){for(var p=2*t;p<2*t+2;p++)for(var m=2*r;m<2*r+2;m++){var T=new Y(p,m);T.z=u+1;var k=this._tileCoordsToKey(T),D=this._tiles[k];if(D&&D.active){D.retain=!0;continue}else D&&D.loaded&&(D.retain=!0);u+1<l&&this._retainChildren(p,m,u+1,l)}},_resetView:function(t){var r=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var r=this.options;return r.minNativeZoom!==void 0&&t<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<t?r.maxNativeZoom:t},_setView:function(t,r,u,l){var p=Math.round(r);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var m=this.options.updateWhenZooming&&p!==this._tileZoom;(!l||m)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(t),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(t,r)},_setZoomTransforms:function(t,r){for(var u in this._levels)this._setZoomTransform(this._levels[u],t,r)},_setZoomTransform:function(t,r,u){var l=this._map.getZoomScale(u,t.zoom),p=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(r,u)).round();Q.any3d?qe(t.el,p,l):zt(t.el,p)},_resetGrid:function(){var t=this._map,r=t.options.crs,u=this._tileSize=this.getTileSize(),l=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,r.wrapLng[0]],l).x/u.x),Math.ceil(t.project([0,r.wrapLng[1]],l).x/u.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([r.wrapLat[0],0],l).y/u.x),Math.ceil(t.project([r.wrapLat[1],0],l).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var r=this._map,u=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),l=r.getZoomScale(u,this._tileZoom),p=r.project(t,this._tileZoom).floor(),m=r.getSize().divideBy(l*2);return new tt(p.subtract(m),p.add(m))},_update:function(t){var r=this._map;if(!!r){var u=this._clampZoom(r.getZoom());if(t===void 0&&(t=r.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),p=this._pxBoundsToTileRange(l),m=p.getCenter(),T=[],k=this.options.keepBuffer,D=new tt(p.getBottomLeft().subtract([k,-k]),p.getTopRight().add([k,-k]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var j in this._tiles){var G=this._tiles[j].coords;(G.z!==this._tileZoom||!D.contains(new Y(G.x,G.y)))&&(this._tiles[j].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(t,u);return}for(var ft=p.min.y;ft<=p.max.y;ft++)for(var _t=p.min.x;_t<=p.max.x;_t++){var Ae=new Y(_t,ft);if(Ae.z=this._tileZoom,!!this._isValidTile(Ae)){var $e=this._tiles[this._tileCoordsToKey(Ae)];$e?$e.current=!0:T.push(Ae)}}if(T.sort(function(De,_r){return De.distanceTo(m)-_r.distanceTo(m)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _n=document.createDocumentFragment();for(_t=0;_t<T.length;_t++)this._addTile(T[_t],_n);this._level.el.appendChild(_n)}}}},_isValidTile:function(t){var r=this._map.options.crs;if(!r.infinite){var u=this._globalTileRange;if(!r.wrapLng&&(t.x<u.min.x||t.x>u.max.x)||!r.wrapLat&&(t.y<u.min.y||t.y>u.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return Mt(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var r=this._map,u=this.getTileSize(),l=t.scaleBy(u),p=l.add(u),m=r.unproject(l,t.z),T=r.unproject(p,t.z);return[m,T]},_tileCoordsToBounds:function(t){var r=this._tileCoordsToNwSe(t),u=new Ct(r[0],r[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var r=t.split(":"),u=new Y(+r[0],+r[1]);return u.z=+r[2],u},_removeTile:function(t){var r=this._tiles[t];!r||(Ot(r.el),delete this._tiles[t],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){lt(t,"leaflet-tile");var r=this.getTileSize();t.style.width=r.x+"px",t.style.height=r.y+"px",t.onselectstart=w,t.onmousemove=w,Q.ielt9&&this.options.opacity<1&&ne(t,this.options.opacity)},_addTile:function(t,r){var u=this._getTilePos(t),l=this._tileCoordsToKey(t),p=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(p),this.createTile.length<2&&Bt(h(this._tileReady,this,t,null,p)),zt(p,u),this._tiles[l]={el:p,coords:t,current:!0},r.appendChild(p),this.fire("tileloadstart",{tile:p,coords:t})},_tileReady:function(t,r,u){r&&this.fire("tileerror",{error:r,tile:u,coords:t});var l=this._tileCoordsToKey(t);u=this._tiles[l],u&&(u.loaded=+new Date,this._map._fadeAnimated?(ne(u.el,0),Rt(this._fadeFrame),this._fadeFrame=Bt(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),r||(lt(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q.ielt9||!this._map._fadeAnimated?Bt(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var r=new Y(this._wrapX?y(t.x,this._wrapX):t.x,this._wrapY?y(t.y,this._wrapY):t.y);return r.z=t.z,r},_pxBoundsToTileRange:function(t){var r=this.getTileSize();return new tt(t.min.unscaleBy(r).floor(),t.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Xu(t){return new ki(t)}var ui=ki.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,r){this._url=t,r=C(this,r),r.detectRetina&&Q.retina&&r.maxZoom>0&&(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom++):(r.zoomOffset++,r.maxZoom--),r.minZoom=Math.max(0,r.minZoom)),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,r){return this._url===t&&r===void 0&&(r=!0),this._url=t,r||this.redraw(),this},createTile:function(t,r){var u=document.createElement("img");return ut(u,"load",h(this._tileOnLoad,this,r,u)),ut(u,"error",h(this._tileOnError,this,r,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.setAttribute("role","presentation"),u.src=this.getTileUrl(t),u},getTileUrl:function(t){var r={r:Q.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-t.y;this.options.tms&&(r.y=u),r["-y"]=u}return R(this._url,s(r,this.options))},_tileOnLoad:function(t,r){Q.ielt9?setTimeout(h(t,this,null,r),0):t(null,r)},_tileOnError:function(t,r,u){var l=this.options.errorTileUrl;l&&r.getAttribute("src")!==l&&(r.src=l),t(u,r)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,r=this.options.maxZoom,u=this.options.zoomReverse,l=this.options.zoomOffset;return u&&(t=r-t),t+l},_getSubdomain:function(t){var r=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var t,r;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(r=this._tiles[t].el,r.onload=w,r.onerror=w,!r.complete)){r.src=V;var u=this._tiles[t].coords;Ot(r),delete this._tiles[t],this.fire("tileabort",{tile:r,coords:u})}},_removeTile:function(t){var r=this._tiles[t];if(!!r)return r.el.setAttribute("src",V),ki.prototype._removeTile.call(this,t)},_tileReady:function(t,r,u){if(!(!this._map||u&&u.getAttribute("src")===V))return ki.prototype._tileReady.call(this,t,r,u)}});function Zo(t,r){return new ui(t,r)}var qo=ui.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,r){this._url=t;var u=s({},this.defaultWmsParams);for(var l in r)l in this.options||(u[l]=r[l]);r=C(this,r);var p=r.detectRetina&&Q.retina?2:1,m=this.getTileSize();u.width=m.x*p,u.height=m.y*p,this.wmsParams=u},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,ui.prototype.onAdd.call(this,t)},getTileUrl:function(t){var r=this._tileCoordsToNwSe(t),u=this._crs,l=xt(u.project(r[0]),u.project(r[1])),p=l.min,m=l.max,T=(this._wmsVersion>=1.3&&this._crs===Oo?[p.y,p.x,m.y,m.x]:[p.x,p.y,m.x,m.y]).join(","),k=ui.prototype.getTileUrl.call(this,t);return k+Z(this.wmsParams,k,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(t,r){return s(this.wmsParams,t),r||this.redraw(),this}});function th(t,r){return new qo(t,r)}ui.WMS=qo,Zo.wms=th;var Le=le.extend({options:{padding:.1},initialize:function(t){C(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,r){var u=this._map.getZoomScale(r,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,r),m=l.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(t,r));Q.any3d?qe(this._container,m,u):zt(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,r=this._map.getSize(),u=this._map.containerPointToLayerPoint(r.multiplyBy(-t)).round();this._bounds=new tt(u,u.add(r.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),jo=Le.extend({options:{tolerance:0},getEvents:function(){var t=Le.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Le.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ut(t,"mousemove",this._onMouseMove,this),ut(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ut(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Rt(this._redrawRequest),delete this._ctx,Ot(this._container),At(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var r in this._layers)t=this._layers[r],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Le.prototype._update.call(this);var t=this._bounds,r=this._container,u=t.getSize(),l=Q.retina?2:1;zt(r,t.min),r.width=l*u.x,r.height=l*u.y,r.style.width=u.x+"px",r.style.height=u.y+"px",Q.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Le.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var r=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var r=t._order,u=r.next,l=r.prev;u?u.prev=l:this._drawLast=l,l?l.next=u:this._drawFirst=u,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var r=t.options.dashArray.split(/[, ]+/),u=[],l,p;for(p=0;p<r.length;p++){if(l=Number(r[p]),isNaN(l))return;u.push(l)}t.options._dashArray=u}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Bt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var r=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new tt,this._redrawBounds.extend(t._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(t._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var r=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,r=this._redrawBounds;if(this._ctx.save(),r){var u=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!r||t._pxBounds&&t._pxBounds.intersects(r))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,r){if(!!this._drawing){var u,l,p,m,T=t._parts,k=T.length,D=this._ctx;if(!!k){for(D.beginPath(),u=0;u<k;u++){for(l=0,p=T[u].length;l<p;l++)m=T[u][l],D[l?"lineTo":"moveTo"](m.x,m.y);r&&D.closePath()}this._fillStroke(D,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var r=t._point,u=this._ctx,l=Math.max(Math.round(t._radius),1),p=(Math.max(Math.round(t._radiusY),1)||l)/l;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(r.x,r.y/p,l,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,t)}},_fillStroke:function(t,r){var u=r.options;u.fill&&(t.globalAlpha=u.fillOpacity,t.fillStyle=u.fillColor||u.color,t.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(t.setLineDash&&t.setLineDash(r.options&&r.options._dashArray||[]),t.globalAlpha=u.opacity,t.lineWidth=u.weight,t.strokeStyle=u.color,t.lineCap=u.lineCap,t.lineJoin=u.lineJoin,t.stroke())},_onClick:function(t){for(var r=this._map.mouseEventToLayerPoint(t),u,l,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(r)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(u))&&(l=u);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,r)}},_handleMouseOut:function(t){var r=this._hoveredLayer;r&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,r){if(!this._mouseHoverThrottled){for(var u,l,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(r)&&(l=u);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(lt(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,r,u){this._map._fireDOMEvent(r,u||r.type,t)},_bringToFront:function(t){var r=t._order;if(!!r){var u=r.next,l=r.prev;if(u)u.prev=l;else return;l?l.next=u:u&&(this._drawFirst=u),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(t)}},_bringToBack:function(t){var r=t._order;if(!!r){var u=r.next,l=r.prev;if(l)l.next=u;else return;u?u.prev=l:l&&(this._drawLast=l),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(t)}}});function Ho(t){return Q.canvas?new jo(t):null}var Oi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),eh={_initContainer:function(){this._container=wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Le.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var r=t._container=Oi("shape");lt(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",t._path=Oi("path"),r.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var r=t._container;this._container.appendChild(r),t.options.interactive&&t.addInteractiveTarget(r)},_removePath:function(t){var r=t._container;Ot(r),t.removeInteractiveTarget(r),delete this._layers[g(t)]},_updateStyle:function(t){var r=t._stroke,u=t._fill,l=t.options,p=t._container;p.stroked=!!l.stroke,p.filled=!!l.fill,l.stroke?(r||(r=t._stroke=Oi("stroke")),p.appendChild(r),r.weight=l.weight+"px",r.color=l.color,r.opacity=l.opacity,l.dashArray?r.dashStyle=N(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=l.lineCap.replace("butt","flat"),r.joinstyle=l.lineJoin):r&&(p.removeChild(r),t._stroke=null),l.fill?(u||(u=t._fill=Oi("fill")),p.appendChild(u),u.color=l.fillColor||l.color,u.opacity=l.fillOpacity):u&&(p.removeChild(u),t._fill=null)},_updateCircle:function(t){var r=t._point.round(),u=Math.round(t._radius),l=Math.round(t._radiusY||u);this._setPath(t,t._empty()?"M0 0":"AL "+r.x+","+r.y+" "+u+","+l+" 0,"+65535*360)},_setPath:function(t,r){t._path.v=r},_bringToFront:function(t){ei(t._container)},_bringToBack:function(t){ii(t._container)}},pn=Q.vml?Oi:Pt,Ri=Le.extend({_initContainer:function(){this._container=pn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ot(this._container),At(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Le.prototype._update.call(this);var t=this._bounds,r=t.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,u.setAttribute("width",r.x),u.setAttribute("height",r.y)),zt(u,t.min),u.setAttribute("viewBox",[t.min.x,t.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(t){var r=t._path=pn("path");t.options.className&&lt(r,t.options.className),t.options.interactive&&lt(r,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ot(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var r=t._path,u=t.options;!r||(u.stroke?(r.setAttribute("stroke",u.color),r.setAttribute("stroke-opacity",u.opacity),r.setAttribute("stroke-width",u.weight),r.setAttribute("stroke-linecap",u.lineCap),r.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?r.setAttribute("stroke-dasharray",u.dashArray):r.removeAttribute("stroke-dasharray"),u.dashOffset?r.setAttribute("stroke-dashoffset",u.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),u.fill?(r.setAttribute("fill",u.fillColor||u.color),r.setAttribute("fill-opacity",u.fillOpacity),r.setAttribute("fill-rule",u.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(t,r){this._setPath(t,v(t._parts,r))},_updateCircle:function(t){var r=t._point,u=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||u,p="a"+u+","+l+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(r.x-u)+","+r.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(t,m)},_setPath:function(t,r){t._path.setAttribute("d",r)},_bringToFront:function(t){ei(t._path)},_bringToBack:function(t){ii(t._path)}});Q.vml&&Ri.include(eh);function Wo(t){return Q.svg||Q.vml?new Ri(t):null}pt.include({getRenderer:function(t){var r=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var r=this._paneRenderers[t];return r===void 0&&(r=this._createRenderer({pane:t}),this._paneRenderers[t]=r),r},_createRenderer:function(t){return this.options.preferCanvas&&Ho(t)||Wo(t)}});var Vo=si.extend({initialize:function(t,r){si.prototype.initialize.call(this,this._boundsToLatLngs(t),r)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Mt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ih(t,r){return new Vo(t,r)}Ri.create=pn,Ri.pointsToPath=v,Pe.geometryToLayer=fr,Pe.coordsToLatLng=cr,Pe.coordsToLatLngs=un,Pe.latLngToCoords=dr,Pe.latLngsToCoords=hn,Pe.getFeature=ai,Pe.asFeature=ln,pt.mergeOptions({boxZoom:!0});var $o=ge.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Pi(),Gn(),this._startPoint=this._map.mouseEventToContainerPoint(t),ut(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=wt("div","leaflet-zoom-box",this._container),lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var r=new tt(this._point,this._startPoint),u=r.getSize();zt(this._box,r.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Ot(this._box),Nt(this._container,"leaflet-crosshair")),Li(),Qn(),At(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var r=new Ct(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});pt.addInitHook("addHandler","boxZoom",$o),pt.mergeOptions({doubleClickZoom:!0});var Ko=ge.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var r=this._map,u=r.getZoom(),l=r.options.zoomDelta,p=t.originalEvent.shiftKey?u-l:u+l;r.options.doubleClickZoom==="center"?r.setZoom(p):r.setZoomAround(t.containerPoint,p)}});pt.addInitHook("addHandler","doubleClickZoom",Ko),pt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Go=ge.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Oe(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Nt(this._map._container,"leaflet-grab"),Nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=Mt(this._map.options.maxBounds);this._offsetLimit=xt(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var r=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(r),this._prunePositions(r)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,r){return t-(t-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;t.x<r.min.x&&(t.x=this._viscousLimit(t.x,r.min.x)),t.y<r.min.y&&(t.y=this._viscousLimit(t.y,r.min.y)),t.x>r.max.x&&(t.x=this._viscousLimit(t.x,r.max.x)),t.y>r.max.y&&(t.y=this._viscousLimit(t.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,r=Math.round(t/2),u=this._initialWorldOffset,l=this._draggable._newPos.x,p=(l-r+u)%t+r-u,m=(l+r+u)%t-r-u,T=Math.abs(p+u)<Math.abs(m+u)?p:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(t){var r=this._map,u=r.options,l=!u.inertia||t.noInertia||this._times.length<2;if(r.fire("dragend",t),l)r.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,T=u.easeLinearity,k=p.multiplyBy(T/m),D=k.distanceTo([0,0]),j=Math.min(u.inertiaMaxSpeed,D),G=k.multiplyBy(j/D),ft=j/(u.inertiaDeceleration*T),_t=G.multiplyBy(-ft/2).round();!_t.x&&!_t.y?r.fire("moveend"):(_t=r._limitOffset(_t,r.options.maxBounds),Bt(function(){r.panBy(_t,{duration:ft,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});pt.addInitHook("addHandler","dragging",Go),pt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qo=ge.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ut(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),At(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,r=document.documentElement,u=t.scrollTop||r.scrollTop,l=t.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(l,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var r=this._panKeys={},u=this.keyCodes,l,p;for(l=0,p=u.left.length;l<p;l++)r[u.left[l]]=[-1*t,0];for(l=0,p=u.right.length;l<p;l++)r[u.right[l]]=[t,0];for(l=0,p=u.down.length;l<p;l++)r[u.down[l]]=[0,t];for(l=0,p=u.up.length;l<p;l++)r[u.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var r=this._zoomKeys={},u=this.keyCodes,l,p;for(l=0,p=u.zoomIn.length;l<p;l++)r[u.zoomIn[l]]=t;for(l=0,p=u.zoomOut.length;l<p;l++)r[u.zoomOut[l]]=-t},_addHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){At(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var r=t.keyCode,u=this._map,l;if(r in this._panKeys)(!u._panAnim||!u._panAnim._inProgress)&&(l=this._panKeys[r],t.shiftKey&&(l=ot(l).multiplyBy(3)),u.panBy(l),u.options.maxBounds&&u.panInsideBounds(u.options.maxBounds));else if(r in this._zoomKeys)u.setZoom(u.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;We(t)}}});pt.addInitHook("addHandler","keyboard",Qo),pt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Yo=ge.extend({addHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var r=Eo(t),u=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),l),We(t)},_performZoom:function(){var t=this._map,r=t.getZoom(),u=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,m=u?Math.ceil(p/u)*u:p,T=t._limitZoom(r+(this._delta>0?m:-m))-r;this._delta=0,this._startTime=null,T&&(t.options.scrollWheelZoom==="center"?t.setZoom(r+T):t.setZoomAround(this._lastMousePos,r+T))}});pt.addInitHook("addHandler","scrollWheelZoom",Yo);var nh=600;pt.mergeOptions({tapHold:Q.touchNative&&Q.safari&&Q.mobile,tapTolerance:15});var Jo=ge.extend({addHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var r=t.touches[0];this._startPos=this._newPos=new Y(r.clientX,r.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(ut(document,"touchend",Kt),ut(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),nh),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){At(document,"touchend",Kt),At(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)},_onMove:function(t){var r=t.touches[0];this._newPos=new Y(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,r){var u=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});u._simulated=!0,r.target.dispatchEvent(u)}});pt.addInitHook("addHandler","tapHold",Jo),pt.mergeOptions({touchZoom:Q.touch,bounceAtZoomLimits:!0});var Xo=ge.extend({addHooks:function(){lt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var r=this._map;if(!(!t.touches||t.touches.length!==2||r._animatingZoom||this._zooming)){var u=r.mouseEventToContainerPoint(t.touches[0]),l=r.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(u.add(l)._divideBy(2))),this._startDist=u.distanceTo(l),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),Kt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var r=this._map,u=r.mouseEventToContainerPoint(t.touches[0]),l=r.mouseEventToContainerPoint(t.touches[1]),p=u.distanceTo(l)/this._startDist;if(this._zoom=r.getScaleZoom(p,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&p<1||this._zoom>r.getMaxZoom()&&p>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var m=u._add(l)._divideBy(2)._subtract(this._centerPoint);if(p===1&&m.x===0&&m.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),Rt(this._animRequest);var T=h(r._move,r,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=Bt(T,this,!0),Kt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Rt(this._animRequest),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});pt.addInitHook("addHandler","touchZoom",Xo),pt.BoxZoom=$o,pt.DoubleClickZoom=Ko,pt.Drag=Go,pt.Keyboard=Qo,pt.ScrollWheelZoom=Yo,pt.TapHold=Jo,pt.TouchZoom=Xo,i.Bounds=tt,i.Browser=Q,i.CRS=M,i.Canvas=jo,i.Circle=lr,i.CircleMarker=an,i.Class=Dt,i.Control=he,i.DivIcon=Uo,i.DivOverlay=me,i.DomEvent=bu,i.DomUtil=yu,i.Draggable=Oe,i.Evented=Zt,i.FeatureGroup=ri,i.GeoJSON=Pe,i.GridLayer=ki,i.Handler=ge,i.Icon=oi,i.ImageOverlay=fn,i.LatLng=dt,i.LatLngBounds=Ct,i.Layer=le,i.LayerGroup=ni,i.LineUtil=ku,i.Map=pt,i.Marker=sn,i.Mixin=Au,i.Path=Re,i.Point=Y,i.PolyUtil=Ou,i.Polygon=si,i.Polyline=Te,i.Popup=cn,i.PosAnimation=So,i.Projection=Ru,i.Rectangle=Vo,i.Renderer=Le,i.SVG=Ri,i.SVGOverlay=Fo,i.TileLayer=ui,i.Tooltip=dn,i.Transformation=x,i.Util=ee,i.VideoOverlay=zo,i.bind=h,i.bounds=xt,i.canvas=Ho,i.circle=ju,i.circleMarker=qu,i.control=Bi,i.divIcon=Ju,i.extend=s,i.featureGroup=Fu,i.geoJSON=No,i.geoJson=Vu,i.gridLayer=Xu,i.icon=Uu,i.imageOverlay=$u,i.latLng=B,i.latLngBounds=Mt,i.layerGroup=zu,i.map=xu,i.marker=Zu,i.point=ot,i.polygon=Wu,i.polyline=Hu,i.popup=Qu,i.rectangle=ih,i.setOptions=C,i.stamp=g,i.svg=Wo,i.svgOverlay=Gu,i.tileLayer=Zo,i.tooltip=Yu,i.transformation=E,i.version=o,i.videoOverlay=Ku;var rh=window.L;i.noConflict=function(){return window.L=rh,this},window.L=i})})(Dr,Dr.exports);const Hr=Dr.exports,X={},dh=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));var Hi={exports:{}},ph;function Ne(){}Ne.prototype=Object.create(null);function Tt(){Tt.init.call(this)}Tt.EventEmitter=Tt;Tt.usingDomains=!1;Tt.prototype.domain=void 0;Tt.prototype._events=void 0;Tt.prototype._maxListeners=void 0;Tt.defaultMaxListeners=10;Tt.init=function(){this.domain=null,Tt.usingDomains&&ph.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Ne,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Tt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function Ks(n){return n._maxListeners===void 0?Tt.defaultMaxListeners:n._maxListeners}Tt.prototype.getMaxListeners=function(){return Ks(this)};function _h(n,e,i){if(e)n.call(i);else for(var o=n.length,s=Wi(n,o),a=0;a<o;++a)s[a].call(i)}function gh(n,e,i,o){if(e)n.call(i,o);else for(var s=n.length,a=Wi(n,s),h=0;h<s;++h)a[h].call(i,o)}function mh(n,e,i,o,s){if(e)n.call(i,o,s);else for(var a=n.length,h=Wi(n,a),f=0;f<a;++f)h[f].call(i,o,s)}function vh(n,e,i,o,s,a){if(e)n.call(i,o,s,a);else for(var h=n.length,f=Wi(n,h),g=0;g<h;++g)f[g].call(i,o,s,a)}function yh(n,e,i,o){if(e)n.apply(i,o);else for(var s=n.length,a=Wi(n,s),h=0;h<s;++h)a[h].apply(i,o)}Tt.prototype.emit=function(e){var i,o,s,a,h,f,g,c=e==="error";if(f=this._events,f)c=c&&f.error==null;else if(!c)return!1;if(g=this.domain,c){if(i=arguments[1],g)i||(i=new Error('Uncaught, unspecified "error" event')),i.domainEmitter=this,i.domain=g,i.domainThrown=!1,g.emit("error",i);else{if(i instanceof Error)throw i;var y=new Error('Uncaught, unspecified "error" event. ('+i+")");throw y.context=i,y}return!1}if(o=f[e],!o)return!1;var w=typeof o=="function";switch(s=arguments.length,s){case 1:_h(o,w,this);break;case 2:gh(o,w,this,arguments[1]);break;case 3:mh(o,w,this,arguments[1],arguments[2]);break;case 4:vh(o,w,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(s-1),h=1;h<s;h++)a[h-1]=arguments[h];yh(o,w,this,a)}return!0};function Gs(n,e,i,o){var s,a,h;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(a=n._events,a?(a.newListener&&(n.emit("newListener",e,i.listener?i.listener:i),a=n._events),h=a[e]):(a=n._events=new Ne,n._eventsCount=0),!h)h=a[e]=i,++n._eventsCount;else if(typeof h=="function"?h=a[e]=o?[i,h]:[h,i]:o?h.unshift(i):h.push(i),!h.warned&&(s=Ks(n),s&&s>0&&h.length>s)){h.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=n,f.type=e,f.count=h.length,wh(f)}return n}function wh(n){typeof console.warn=="function"?console.warn(n):console.log(n)}Tt.prototype.addListener=function(e,i){return Gs(this,e,i,!1)};Tt.prototype.on=Tt.prototype.addListener;Tt.prototype.prependListener=function(e,i){return Gs(this,e,i,!0)};function Qs(n,e,i){var o=!1;function s(){n.removeListener(e,s),o||(o=!0,i.apply(n,arguments))}return s.listener=i,s}Tt.prototype.once=function(e,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,Qs(this,e,i)),this};Tt.prototype.prependOnceListener=function(e,i){if(typeof i!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Qs(this,e,i)),this};Tt.prototype.removeListener=function(e,i){var o,s,a,h,f;if(typeof i!="function")throw new TypeError('"listener" argument must be a function');if(s=this._events,!s)return this;if(o=s[e],!o)return this;if(o===i||o.listener&&o.listener===i)--this._eventsCount===0?this._events=new Ne:(delete s[e],s.removeListener&&this.emit("removeListener",e,o.listener||i));else if(typeof o!="function"){for(a=-1,h=o.length;h-- >0;)if(o[h]===i||o[h].listener&&o[h].listener===i){f=o[h].listener,a=h;break}if(a<0)return this;if(o.length===1){if(o[0]=void 0,--this._eventsCount===0)return this._events=new Ne,this;delete s[e]}else bh(o,a);s.removeListener&&this.emit("removeListener",e,f||i)}return this};Tt.prototype.removeAllListeners=function(e){var i,o;if(o=this._events,!o)return this;if(!o.removeListener)return arguments.length===0?(this._events=new Ne,this._eventsCount=0):o[e]&&(--this._eventsCount===0?this._events=new Ne:delete o[e]),this;if(arguments.length===0){for(var s=Object.keys(o),a=0,h;a<s.length;++a)h=s[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=new Ne,this._eventsCount=0,this}if(i=o[e],typeof i=="function")this.removeListener(e,i);else if(i)do this.removeListener(e,i[i.length-1]);while(i[0]);return this};Tt.prototype.listeners=function(e){var i,o,s=this._events;return s?(i=s[e],i?typeof i=="function"?o=[i.listener||i]:o=xh(i):o=[]):o=[],o};Tt.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):Ys.call(n,e)};Tt.prototype.listenerCount=Ys;function Ys(n){var e=this._events;if(e){var i=e[n];if(typeof i=="function")return 1;if(i)return i.length}return 0}Tt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function bh(n,e){for(var i=e,o=i+1,s=n.length;o<s;i+=1,o+=1)n[i]=n[o];n.pop()}function Wi(n,e){for(var i=new Array(e);e--;)i[e]=n[e];return i}function xh(n){for(var e=new Array(n.length),i=0;i<e.length;++i)e[i]=n[i].listener||n[i];return e}const Eh=Object.freeze(Object.defineProperty({__proto__:null,default:Tt,EventEmitter:Tt},Symbol.toStringTag,{value:"Module"})),Vi=jr(Eh);var Wr=Th,Sh=Object.prototype.hasOwnProperty;function Th(){for(var n={},e=0;e<arguments.length;e++){var i=arguments[e];for(var o in i)Sh.call(i,o)&&(n[o]=i[o])}return n}var Me={exports:{}},Js=Vi.EventEmitter,W={},On={};On.byteLength=Ah;On.toByteArray=Bh;On.fromByteArray=kh;var we=[],re=[],Ph=typeof Uint8Array<"u"?Uint8Array:Array,mr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var hi=0,Lh=mr.length;hi<Lh;++hi)we[hi]=mr[hi],re[mr.charCodeAt(hi)]=hi;re["-".charCodeAt(0)]=62;re["_".charCodeAt(0)]=63;function Xs(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=n.indexOf("=");i===-1&&(i=e);var o=i===e?0:4-i%4;return[i,o]}function Ah(n){var e=Xs(n),i=e[0],o=e[1];return(i+o)*3/4-o}function Ih(n,e,i){return(e+i)*3/4-i}function Bh(n){var e,i=Xs(n),o=i[0],s=i[1],a=new Ph(Ih(n,o,s)),h=0,f=s>0?o-4:o,g;for(g=0;g<f;g+=4)e=re[n.charCodeAt(g)]<<18|re[n.charCodeAt(g+1)]<<12|re[n.charCodeAt(g+2)]<<6|re[n.charCodeAt(g+3)],a[h++]=e>>16&255,a[h++]=e>>8&255,a[h++]=e&255;return s===2&&(e=re[n.charCodeAt(g)]<<2|re[n.charCodeAt(g+1)]>>4,a[h++]=e&255),s===1&&(e=re[n.charCodeAt(g)]<<10|re[n.charCodeAt(g+1)]<<4|re[n.charCodeAt(g+2)]>>2,a[h++]=e>>8&255,a[h++]=e&255),a}function Ch(n){return we[n>>18&63]+we[n>>12&63]+we[n>>6&63]+we[n&63]}function Mh(n,e,i){for(var o,s=[],a=e;a<i;a+=3)o=(n[a]<<16&16711680)+(n[a+1]<<8&65280)+(n[a+2]&255),s.push(Ch(o));return s.join("")}function kh(n){for(var e,i=n.length,o=i%3,s=[],a=16383,h=0,f=i-o;h<f;h+=a)s.push(Mh(n,h,h+a>f?f:h+a));return o===1?(e=n[i-1],s.push(we[e>>2]+we[e<<4&63]+"==")):o===2&&(e=(n[i-2]<<8)+n[i-1],s.push(we[e>>10]+we[e>>4&63]+we[e<<2&63]+"=")),s.join("")}var Vr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Vr.read=function(n,e,i,o,s){var a,h,f=s*8-o-1,g=(1<<f)-1,c=g>>1,y=-7,w=i?s-1:0,b=i?-1:1,A=n[e+w];for(w+=b,a=A&(1<<-y)-1,A>>=-y,y+=f;y>0;a=a*256+n[e+w],w+=b,y-=8);for(h=a&(1<<-y)-1,a>>=-y,y+=o;y>0;h=h*256+n[e+w],w+=b,y-=8);if(a===0)a=1-c;else{if(a===g)return h?NaN:(A?-1:1)*(1/0);h=h+Math.pow(2,o),a=a-c}return(A?-1:1)*h*Math.pow(2,a-o)};Vr.write=function(n,e,i,o,s,a){var h,f,g,c=a*8-s-1,y=(1<<c)-1,w=y>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=o?0:a-1,O=o?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,h=y):(h=Math.floor(Math.log(e)/Math.LN2),e*(g=Math.pow(2,-h))<1&&(h--,g*=2),h+w>=1?e+=b/g:e+=b*Math.pow(2,1-w),e*g>=2&&(h++,g/=2),h+w>=y?(f=0,h=y):h+w>=1?(f=(e*g-1)*Math.pow(2,s),h=h+w):(f=e*Math.pow(2,w-1)*Math.pow(2,s),h=0));s>=8;n[i+A]=f&255,A+=O,f/=256,s-=8);for(h=h<<s|f,c+=s;c>0;n[i+A]=h&255,A+=O,h/=256,c-=8);n[i+A-O]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){var e=On,i=Vr,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=f,n.SlowBuffer=R,n.INSPECT_MAX_BYTES=50;var s=2147483647;n.kMaxLength=s,f.TYPED_ARRAY_SUPPORT=a(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var v=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(v,d),v.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.byteOffset}});function h(v){if(v>s)throw new RangeError('The value "'+v+'" is invalid for option "size"');var d=new Uint8Array(v);return Object.setPrototypeOf(d,f.prototype),d}function f(v,d,_){if(typeof v=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(v)}return g(v,d,_)}f.poolSize=8192;function g(v,d,_){if(typeof v=="string")return b(v,d);if(ArrayBuffer.isView(v))return O(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(F(v,ArrayBuffer)||v&&F(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(v,SharedArrayBuffer)||v&&F(v.buffer,SharedArrayBuffer)))return C(v,d,_);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=v.valueOf&&v.valueOf();if(S!=null&&S!==v)return f.from(S,d,_);var I=Z(v);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return f.from(v[Symbol.toPrimitive]("string"),d,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}f.from=function(v,d,_){return g(v,d,_)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function c(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function y(v,d,_){return c(v),v<=0?h(v):d!==void 0?typeof _=="string"?h(v).fill(d,_):h(v).fill(d):h(v)}f.alloc=function(v,d,_){return y(v,d,_)};function w(v){return c(v),h(v<0?0:P(v)|0)}f.allocUnsafe=function(v){return w(v)},f.allocUnsafeSlow=function(v){return w(v)};function b(v,d){if((typeof d!="string"||d==="")&&(d="utf8"),!f.isEncoding(d))throw new TypeError("Unknown encoding: "+d);var _=N(v,d)|0,S=h(_),I=S.write(v,d);return I!==_&&(S=S.slice(0,I)),S}function A(v){for(var d=v.length<0?0:P(v.length)|0,_=h(d),S=0;S<d;S+=1)_[S]=v[S]&255;return _}function O(v){if(F(v,Uint8Array)){var d=new Uint8Array(v);return C(d.buffer,d.byteOffset,d.byteLength)}return A(v)}function C(v,d,_){if(d<0||v.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<d+(_||0))throw new RangeError('"length" is outside of buffer bounds');var S;return d===void 0&&_===void 0?S=new Uint8Array(v):_===void 0?S=new Uint8Array(v,d):S=new Uint8Array(v,d,_),Object.setPrototypeOf(S,f.prototype),S}function Z(v){if(f.isBuffer(v)){var d=P(v.length)|0,_=h(d);return _.length===0||v.copy(_,0,0,d),_}if(v.length!==void 0)return typeof v.length!="number"||K(v.length)?h(0):A(v);if(v.type==="Buffer"&&Array.isArray(v.data))return A(v.data)}function P(v){if(v>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return v|0}function R(v){return+v!=v&&(v=0),f.alloc(+v)}f.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==f.prototype},f.compare=function(d,_){if(F(d,Uint8Array)&&(d=f.from(d,d.offset,d.byteLength)),F(_,Uint8Array)&&(_=f.from(_,_.offset,_.byteLength)),!f.isBuffer(d)||!f.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===_)return 0;for(var S=d.length,I=_.length,U=0,H=Math.min(S,I);U<H;++U)if(d[U]!==_[U]){S=d[U],I=_[U];break}return S<I?-1:I<S?1:0},f.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(d,_){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return f.alloc(0);var S;if(_===void 0)for(_=0,S=0;S<d.length;++S)_+=d[S].length;var I=f.allocUnsafe(_),U=0;for(S=0;S<d.length;++S){var H=d[S];if(F(H,Uint8Array))U+H.length>I.length?f.from(H).copy(I,U):Uint8Array.prototype.set.call(I,H,U);else if(f.isBuffer(H))H.copy(I,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=H.length}return I};function N(v,d){if(f.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||F(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);var _=v.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&_===0)return 0;for(var I=!1;;)switch(d){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return q(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return x(v).length;default:if(I)return S?-1:q(v).length;d=(""+d).toLowerCase(),I=!0}}f.byteLength=N;function $(v,d,_){var S=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,d>>>=0,_<=d))return"";for(v||(v="utf8");;)switch(v){case"hex":return Qt(this,d,_);case"utf8":case"utf-8":return Dt(this,d,_);case"ascii":return Zt(this,d,_);case"latin1":case"binary":return Y(this,d,_);case"base64":return ee(this,d,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,d,_);default:if(S)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),S=!0}}f.prototype._isBuffer=!0;function V(v,d,_){var S=v[d];v[d]=v[_],v[_]=S}f.prototype.swap16=function(){var d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _=0;_<d;_+=2)V(this,_,_+1);return this},f.prototype.swap32=function(){var d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _=0;_<d;_+=4)V(this,_,_+3),V(this,_+1,_+2);return this},f.prototype.swap64=function(){var d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _=0;_<d;_+=8)V(this,_,_+7),V(this,_+1,_+6),V(this,_+2,_+5),V(this,_+3,_+4);return this},f.prototype.toString=function(){var d=this.length;return d===0?"":arguments.length===0?Dt(this,0,d):$.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(d){if(!f.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:f.compare(this,d)===0},f.prototype.inspect=function(){var d="",_=n.INSPECT_MAX_BYTES;return d=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(d+=" ... "),"<Buffer "+d+">"},o&&(f.prototype[o]=f.prototype.inspect),f.prototype.compare=function(d,_,S,I,U){if(F(d,Uint8Array)&&(d=f.from(d,d.offset,d.byteLength)),!f.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(_===void 0&&(_=0),S===void 0&&(S=d?d.length:0),I===void 0&&(I=0),U===void 0&&(U=this.length),_<0||S>d.length||I<0||U>this.length)throw new RangeError("out of range index");if(I>=U&&_>=S)return 0;if(I>=U)return-1;if(_>=S)return 1;if(_>>>=0,S>>>=0,I>>>=0,U>>>=0,this===d)return 0;for(var H=U-I,ht=S-_,mt=Math.min(H,ht),Et=this.slice(I,U),Lt=d.slice(_,S),yt=0;yt<mt;++yt)if(Et[yt]!==Lt[yt]){H=Et[yt],ht=Lt[yt];break}return H<ht?-1:ht<H?1:0};function gt(v,d,_,S,I){if(v.length===0)return-1;if(typeof _=="string"?(S=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,K(_)&&(_=I?0:v.length-1),_<0&&(_=v.length+_),_>=v.length){if(I)return-1;_=v.length-1}else if(_<0)if(I)_=0;else return-1;if(typeof d=="string"&&(d=f.from(d,S)),f.isBuffer(d))return d.length===0?-1:vt(v,d,_,S,I);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(v,d,_):Uint8Array.prototype.lastIndexOf.call(v,d,_):vt(v,[d],_,S,I);throw new TypeError("val must be string, number or Buffer")}function vt(v,d,_,S,I){var U=1,H=v.length,ht=d.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(v.length<2||d.length<2)return-1;U=2,H/=2,ht/=2,_/=2}function mt(Yi,xi){return U===1?Yi[xi]:Yi.readUInt16BE(xi*U)}var Et;if(I){var Lt=-1;for(Et=_;Et<H;Et++)if(mt(v,Et)===mt(d,Lt===-1?0:Et-Lt)){if(Lt===-1&&(Lt=Et),Et-Lt+1===ht)return Lt*U}else Lt!==-1&&(Et-=Et-Lt),Lt=-1}else for(_+ht>H&&(_=H-ht),Et=_;Et>=0;Et--){for(var yt=!0,Xt=0;Xt<ht;Xt++)if(mt(v,Et+Xt)!==mt(d,Xt)){yt=!1;break}if(yt)return Et}return-1}f.prototype.includes=function(d,_,S){return this.indexOf(d,_,S)!==-1},f.prototype.indexOf=function(d,_,S){return gt(this,d,_,S,!0)},f.prototype.lastIndexOf=function(d,_,S){return gt(this,d,_,S,!1)};function st(v,d,_,S){_=Number(_)||0;var I=v.length-_;S?(S=Number(S),S>I&&(S=I)):S=I;var U=d.length;S>U/2&&(S=U/2);for(var H=0;H<S;++H){var ht=parseInt(d.substr(H*2,2),16);if(K(ht))return H;v[_+H]=ht}return H}function it(v,d,_,S){return E(q(d,v.length-_),v,_,S)}function ue(v,d,_,S){return E(J(d),v,_,S)}function Bt(v,d,_,S){return E(x(d),v,_,S)}function Rt(v,d,_,S){return E(at(d,v.length-_),v,_,S)}f.prototype.write=function(d,_,S,I){if(_===void 0)I="utf8",S=this.length,_=0;else if(S===void 0&&typeof _=="string")I=_,S=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(S)?(S=S>>>0,I===void 0&&(I="utf8")):(I=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var U=this.length-_;if((S===void 0||S>U)&&(S=U),d.length>0&&(S<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");for(var H=!1;;)switch(I){case"hex":return st(this,d,_,S);case"utf8":case"utf-8":return it(this,d,_,S);case"ascii":case"latin1":case"binary":return ue(this,d,_,S);case"base64":return Bt(this,d,_,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Rt(this,d,_,S);default:if(H)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),H=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(v,d,_){return d===0&&_===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(d,_))}function Dt(v,d,_){_=Math.min(v.length,_);for(var S=[],I=d;I<_;){var U=v[I],H=null,ht=U>239?4:U>223?3:U>191?2:1;if(I+ht<=_){var mt,Et,Lt,yt;switch(ht){case 1:U<128&&(H=U);break;case 2:mt=v[I+1],(mt&192)===128&&(yt=(U&31)<<6|mt&63,yt>127&&(H=yt));break;case 3:mt=v[I+1],Et=v[I+2],(mt&192)===128&&(Et&192)===128&&(yt=(U&15)<<12|(mt&63)<<6|Et&63,yt>2047&&(yt<55296||yt>57343)&&(H=yt));break;case 4:mt=v[I+1],Et=v[I+2],Lt=v[I+3],(mt&192)===128&&(Et&192)===128&&(Lt&192)===128&&(yt=(U&15)<<18|(mt&63)<<12|(Et&63)<<6|Lt&63,yt>65535&&yt<1114112&&(H=yt))}}H===null?(H=65533,ht=1):H>65535&&(H-=65536,S.push(H>>>10&1023|55296),H=56320|H&1023),S.push(H),I+=ht}return kt(S)}var ie=4096;function kt(v){var d=v.length;if(d<=ie)return String.fromCharCode.apply(String,v);for(var _="",S=0;S<d;)_+=String.fromCharCode.apply(String,v.slice(S,S+=ie));return _}function Zt(v,d,_){var S="";_=Math.min(v.length,_);for(var I=d;I<_;++I)S+=String.fromCharCode(v[I]&127);return S}function Y(v,d,_){var S="";_=Math.min(v.length,_);for(var I=d;I<_;++I)S+=String.fromCharCode(v[I]);return S}function Qt(v,d,_){var S=v.length;(!d||d<0)&&(d=0),(!_||_<0||_>S)&&(_=S);for(var I="",U=d;U<_;++U)I+=Pt[v[U]];return I}function ot(v,d,_){for(var S=v.slice(d,_),I="",U=0;U<S.length-1;U+=2)I+=String.fromCharCode(S[U]+S[U+1]*256);return I}f.prototype.slice=function(d,_){var S=this.length;d=~~d,_=_===void 0?S:~~_,d<0?(d+=S,d<0&&(d=0)):d>S&&(d=S),_<0?(_+=S,_<0&&(_=0)):_>S&&(_=S),_<d&&(_=d);var I=this.subarray(d,_);return Object.setPrototypeOf(I,f.prototype),I};function tt(v,d,_){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+d>_)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(d,_,S){d=d>>>0,_=_>>>0,S||tt(d,_,this.length);for(var I=this[d],U=1,H=0;++H<_&&(U*=256);)I+=this[d+H]*U;return I},f.prototype.readUintBE=f.prototype.readUIntBE=function(d,_,S){d=d>>>0,_=_>>>0,S||tt(d,_,this.length);for(var I=this[d+--_],U=1;_>0&&(U*=256);)I+=this[d+--_]*U;return I},f.prototype.readUint8=f.prototype.readUInt8=function(d,_){return d=d>>>0,_||tt(d,1,this.length),this[d]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(d,_){return d=d>>>0,_||tt(d,2,this.length),this[d]|this[d+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(d,_){return d=d>>>0,_||tt(d,2,this.length),this[d]<<8|this[d+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(d,_){return d=d>>>0,_||tt(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(d,_){return d=d>>>0,_||tt(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},f.prototype.readIntLE=function(d,_,S){d=d>>>0,_=_>>>0,S||tt(d,_,this.length);for(var I=this[d],U=1,H=0;++H<_&&(U*=256);)I+=this[d+H]*U;return U*=128,I>=U&&(I-=Math.pow(2,8*_)),I},f.prototype.readIntBE=function(d,_,S){d=d>>>0,_=_>>>0,S||tt(d,_,this.length);for(var I=_,U=1,H=this[d+--I];I>0&&(U*=256);)H+=this[d+--I]*U;return U*=128,H>=U&&(H-=Math.pow(2,8*_)),H},f.prototype.readInt8=function(d,_){return d=d>>>0,_||tt(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},f.prototype.readInt16LE=function(d,_){d=d>>>0,_||tt(d,2,this.length);var S=this[d]|this[d+1]<<8;return S&32768?S|4294901760:S},f.prototype.readInt16BE=function(d,_){d=d>>>0,_||tt(d,2,this.length);var S=this[d+1]|this[d]<<8;return S&32768?S|4294901760:S},f.prototype.readInt32LE=function(d,_){return d=d>>>0,_||tt(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},f.prototype.readInt32BE=function(d,_){return d=d>>>0,_||tt(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},f.prototype.readFloatLE=function(d,_){return d=d>>>0,_||tt(d,4,this.length),i.read(this,d,!0,23,4)},f.prototype.readFloatBE=function(d,_){return d=d>>>0,_||tt(d,4,this.length),i.read(this,d,!1,23,4)},f.prototype.readDoubleLE=function(d,_){return d=d>>>0,_||tt(d,8,this.length),i.read(this,d,!0,52,8)},f.prototype.readDoubleBE=function(d,_){return d=d>>>0,_||tt(d,8,this.length),i.read(this,d,!1,52,8)};function xt(v,d,_,S,I,U){if(!f.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>I||d<U)throw new RangeError('"value" argument is out of bounds');if(_+S>v.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(d,_,S,I){if(d=+d,_=_>>>0,S=S>>>0,!I){var U=Math.pow(2,8*S)-1;xt(this,d,_,S,U,0)}var H=1,ht=0;for(this[_]=d&255;++ht<S&&(H*=256);)this[_+ht]=d/H&255;return _+S},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(d,_,S,I){if(d=+d,_=_>>>0,S=S>>>0,!I){var U=Math.pow(2,8*S)-1;xt(this,d,_,S,U,0)}var H=S-1,ht=1;for(this[_+H]=d&255;--H>=0&&(ht*=256);)this[_+H]=d/ht&255;return _+S},f.prototype.writeUint8=f.prototype.writeUInt8=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,1,255,0),this[_]=d&255,_+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,2,65535,0),this[_]=d&255,this[_+1]=d>>>8,_+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,2,65535,0),this[_]=d>>>8,this[_+1]=d&255,_+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,4,4294967295,0),this[_+3]=d>>>24,this[_+2]=d>>>16,this[_+1]=d>>>8,this[_]=d&255,_+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,4,4294967295,0),this[_]=d>>>24,this[_+1]=d>>>16,this[_+2]=d>>>8,this[_+3]=d&255,_+4},f.prototype.writeIntLE=function(d,_,S,I){if(d=+d,_=_>>>0,!I){var U=Math.pow(2,8*S-1);xt(this,d,_,S,U-1,-U)}var H=0,ht=1,mt=0;for(this[_]=d&255;++H<S&&(ht*=256);)d<0&&mt===0&&this[_+H-1]!==0&&(mt=1),this[_+H]=(d/ht>>0)-mt&255;return _+S},f.prototype.writeIntBE=function(d,_,S,I){if(d=+d,_=_>>>0,!I){var U=Math.pow(2,8*S-1);xt(this,d,_,S,U-1,-U)}var H=S-1,ht=1,mt=0;for(this[_+H]=d&255;--H>=0&&(ht*=256);)d<0&&mt===0&&this[_+H+1]!==0&&(mt=1),this[_+H]=(d/ht>>0)-mt&255;return _+S},f.prototype.writeInt8=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,1,127,-128),d<0&&(d=255+d+1),this[_]=d&255,_+1},f.prototype.writeInt16LE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,2,32767,-32768),this[_]=d&255,this[_+1]=d>>>8,_+2},f.prototype.writeInt16BE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,2,32767,-32768),this[_]=d>>>8,this[_+1]=d&255,_+2},f.prototype.writeInt32LE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,4,2147483647,-2147483648),this[_]=d&255,this[_+1]=d>>>8,this[_+2]=d>>>16,this[_+3]=d>>>24,_+4},f.prototype.writeInt32BE=function(d,_,S){return d=+d,_=_>>>0,S||xt(this,d,_,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[_]=d>>>24,this[_+1]=d>>>16,this[_+2]=d>>>8,this[_+3]=d&255,_+4};function Ct(v,d,_,S,I,U){if(_+S>v.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function Mt(v,d,_,S,I){return d=+d,_=_>>>0,I||Ct(v,d,_,4),i.write(v,d,_,S,23,4),_+4}f.prototype.writeFloatLE=function(d,_,S){return Mt(this,d,_,!0,S)},f.prototype.writeFloatBE=function(d,_,S){return Mt(this,d,_,!1,S)};function dt(v,d,_,S,I){return d=+d,_=_>>>0,I||Ct(v,d,_,8),i.write(v,d,_,S,52,8),_+8}f.prototype.writeDoubleLE=function(d,_,S){return dt(this,d,_,!0,S)},f.prototype.writeDoubleBE=function(d,_,S){return dt(this,d,_,!1,S)},f.prototype.copy=function(d,_,S,I){if(!f.isBuffer(d))throw new TypeError("argument should be a Buffer");if(S||(S=0),!I&&I!==0&&(I=this.length),_>=d.length&&(_=d.length),_||(_=0),I>0&&I<S&&(I=S),I===S||d.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),d.length-_<I-S&&(I=d.length-_+S);var U=I-S;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,S,I):Uint8Array.prototype.set.call(d,this.subarray(S,I),_),U},f.prototype.fill=function(d,_,S,I){if(typeof d=="string"){if(typeof _=="string"?(I=_,_=0,S=this.length):typeof S=="string"&&(I=S,S=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!f.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(d.length===1){var U=d.charCodeAt(0);(I==="utf8"&&U<128||I==="latin1")&&(d=U)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(_<0||this.length<_||this.length<S)throw new RangeError("Out of range index");if(S<=_)return this;_=_>>>0,S=S===void 0?this.length:S>>>0,d||(d=0);var H;if(typeof d=="number")for(H=_;H<S;++H)this[H]=d;else{var ht=f.isBuffer(d)?d:f.from(d,I),mt=ht.length;if(mt===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(H=0;H<S-_;++H)this[H+_]=ht[H%mt]}return this};var B=/[^+/0-9A-Za-z-_]/g;function M(v){if(v=v.split("=")[0],v=v.trim().replace(B,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function q(v,d){d=d||1/0;for(var _,S=v.length,I=null,U=[],H=0;H<S;++H){if(_=v.charCodeAt(H),_>55295&&_<57344){if(!I){if(_>56319){(d-=3)>-1&&U.push(239,191,189);continue}else if(H+1===S){(d-=3)>-1&&U.push(239,191,189);continue}I=_;continue}if(_<56320){(d-=3)>-1&&U.push(239,191,189),I=_;continue}_=(I-55296<<10|_-56320)+65536}else I&&(d-=3)>-1&&U.push(239,191,189);if(I=null,_<128){if((d-=1)<0)break;U.push(_)}else if(_<2048){if((d-=2)<0)break;U.push(_>>6|192,_&63|128)}else if(_<65536){if((d-=3)<0)break;U.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((d-=4)<0)break;U.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return U}function J(v){for(var d=[],_=0;_<v.length;++_)d.push(v.charCodeAt(_)&255);return d}function at(v,d){for(var _,S,I,U=[],H=0;H<v.length&&!((d-=2)<0);++H)_=v.charCodeAt(H),S=_>>8,I=_%256,U.push(I),U.push(S);return U}function x(v){return e.toByteArray(M(v))}function E(v,d,_,S){for(var I=0;I<S&&!(I+_>=d.length||I>=v.length);++I)d[I+_]=v[I];return I}function F(v,d){return v instanceof d||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===d.name}function K(v){return v!==v}var Pt=function(){for(var v="0123456789abcdef",d=new Array(256),_=0;_<16;++_)for(var S=_*16,I=0;I<16;++I)d[S+I]=v[_]+v[I];return d}()})(W);const yi=jr(dh);var vr,ns;function Oh(){if(ns)return vr;ns=1;function n(b,A){var O=Object.keys(b);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(b);A&&(C=C.filter(function(Z){return Object.getOwnPropertyDescriptor(b,Z).enumerable})),O.push.apply(O,C)}return O}function e(b){for(var A=1;A<arguments.length;A++){var O=arguments[A]!=null?arguments[A]:{};A%2?n(Object(O),!0).forEach(function(C){i(b,C,O[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(O)):n(Object(O)).forEach(function(C){Object.defineProperty(b,C,Object.getOwnPropertyDescriptor(O,C))})}return b}function i(b,A,O){return A in b?Object.defineProperty(b,A,{value:O,enumerable:!0,configurable:!0,writable:!0}):b[A]=O,b}function o(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function s(b,A){for(var O=0;O<A.length;O++){var C=A[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}function a(b,A,O){return A&&s(b.prototype,A),O&&s(b,O),b}var h=W,f=h.Buffer,g=yi,c=g.inspect,y=c&&c.custom||"inspect";function w(b,A,O){f.prototype.copy.call(b,A,O)}return vr=function(){function b(){o(this,b),this.head=null,this.tail=null,this.length=0}return a(b,[{key:"push",value:function(O){var C={data:O,next:null};this.length>0?this.tail.next=C:this.head=C,this.tail=C,++this.length}},{key:"unshift",value:function(O){var C={data:O,next:this.head};this.length===0&&(this.tail=C),this.head=C,++this.length}},{key:"shift",value:function(){if(this.length!==0){var O=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,O}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(O){if(this.length===0)return"";for(var C=this.head,Z=""+C.data;C=C.next;)Z+=O+C.data;return Z}},{key:"concat",value:function(O){if(this.length===0)return f.alloc(0);for(var C=f.allocUnsafe(O>>>0),Z=this.head,P=0;Z;)w(Z.data,C,P),P+=Z.data.length,Z=Z.next;return C}},{key:"consume",value:function(O,C){var Z;return O<this.head.data.length?(Z=this.head.data.slice(0,O),this.head.data=this.head.data.slice(O)):O===this.head.data.length?Z=this.shift():Z=C?this._getString(O):this._getBuffer(O),Z}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(O){var C=this.head,Z=1,P=C.data;for(O-=P.length;C=C.next;){var R=C.data,N=O>R.length?R.length:O;if(N===R.length?P+=R:P+=R.slice(0,O),O-=N,O===0){N===R.length?(++Z,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=R.slice(N));break}++Z}return this.length-=Z,P}},{key:"_getBuffer",value:function(O){var C=f.allocUnsafe(O),Z=this.head,P=1;for(Z.data.copy(C),O-=Z.data.length;Z=Z.next;){var R=Z.data,N=O>R.length?R.length:O;if(R.copy(C,C.length-O,0,N),O-=N,O===0){N===R.length?(++P,Z.next?this.head=Z.next:this.head=this.tail=null):(this.head=Z,Z.data=R.slice(N));break}++P}return this.length-=P,C}},{key:y,value:function(O,C){return c(this,e({},C,{depth:0,customInspect:!1}))}}]),b}(),vr}function Rh(n,e){var i=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,X.nextTick(Nr,this,n)):X.nextTick(Nr,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!e&&a?i._writableState?i._writableState.errorEmitted?X.nextTick(Sn,i):(i._writableState.errorEmitted=!0,X.nextTick(rs,i,a)):X.nextTick(rs,i,a):e?(X.nextTick(Sn,i),e(a)):X.nextTick(Sn,i)}),this)}function rs(n,e){Nr(n,e),Sn(n)}function Sn(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function Dh(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Nr(n,e){n.emit("error",e)}function Nh(n,e){var i=n._readableState,o=n._writableState;i&&i.autoDestroy||o&&o.autoDestroy?n.destroy(e):n.emit("error",e)}var ta={destroy:Rh,undestroy:Dh,errorOrDestroy:Nh},Xe={};function zh(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var ea={};function se(n,e,i){i||(i=Error);function o(a,h,f){return typeof e=="string"?e:e(a,h,f)}var s=function(a){zh(h,a);function h(f,g,c){return a.call(this,o(f,g,c))||this}return h}(i);s.prototype.name=i.name,s.prototype.code=n,ea[n]=s}function os(n,e){if(Array.isArray(n)){var i=n.length;return n=n.map(function(o){return String(o)}),i>2?"one of ".concat(e," ").concat(n.slice(0,i-1).join(", "),", or ")+n[i-1]:i===2?"one of ".concat(e," ").concat(n[0]," or ").concat(n[1]):"of ".concat(e," ").concat(n[0])}else return"of ".concat(e," ").concat(String(n))}function Fh(n,e,i){return n.substr(!i||i<0?0:+i,e.length)===e}function Uh(n,e,i){return(i===void 0||i>n.length)&&(i=n.length),n.substring(i-e.length,i)===e}function Zh(n,e,i){return typeof i!="number"&&(i=0),i+e.length>n.length?!1:n.indexOf(e,i)!==-1}se("ERR_INVALID_OPT_VALUE",function(n,e){return'The value "'+e+'" is invalid for option "'+n+'"'},TypeError);se("ERR_INVALID_ARG_TYPE",function(n,e,i){var o;typeof e=="string"&&Fh(e,"not ")?(o="must not be",e=e.replace(/^not /,"")):o="must be";var s;if(Uh(n," argument"))s="The ".concat(n," ").concat(o," ").concat(os(e,"type"));else{var a=Zh(n,".")?"property":"argument";s='The "'.concat(n,'" ').concat(a," ").concat(o," ").concat(os(e,"type"))}return s+=". Received type ".concat(typeof i),s},TypeError);se("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");se("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"});se("ERR_STREAM_PREMATURE_CLOSE","Premature close");se("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"});se("ERR_MULTIPLE_CALLBACK","Callback called multiple times");se("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");se("ERR_STREAM_WRITE_AFTER_END","write after end");se("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);se("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError);se("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Xe.codes=ea;var qh=Xe.codes.ERR_INVALID_OPT_VALUE;function jh(n,e,i){return n.highWaterMark!=null?n.highWaterMark:e?n[i]:null}function Hh(n,e,i,o){var s=jh(e,o,i);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var a=o?i:"highWaterMark";throw new qh(a,s)}return Math.floor(s)}return n.objectMode?16:16*1024}var ia={getHighWaterMark:Hh},xe={exports:{}};typeof Object.create=="function"?xe.exports=function(e,i){i&&(e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:xe.exports=function(e,i){if(i){e.super_=i;var o=function(){};o.prototype=i.prototype,e.prototype=new o,e.prototype.constructor=e}};var Wh=Vh;function Vh(n,e){if(yr("noDeprecation"))return n;var i=!1;function o(){if(!i){if(yr("throwDeprecation"))throw new Error(e);yr("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return n.apply(this,arguments)}return o}function yr(n){try{if(!vi.localStorage)return!1}catch{return!1}var e=vi.localStorage[n];return e==null?!1:String(e).toLowerCase()==="true"}var wr,ss;function na(){if(ss)return wr;ss=1,wr=st;function n(B){var M=this;this.next=null,this.entry=null,this.finish=function(){dt(M,B)}}var e;st.WritableState=gt;var i={deprecate:Wh},o=Js,s=W.Buffer,a=vi.Uint8Array||function(){};function h(B){return s.from(B)}function f(B){return s.isBuffer(B)||B instanceof a}var g=ta,c=ia,y=c.getHighWaterMark,w=Xe.codes,b=w.ERR_INVALID_ARG_TYPE,A=w.ERR_METHOD_NOT_IMPLEMENTED,O=w.ERR_MULTIPLE_CALLBACK,C=w.ERR_STREAM_CANNOT_PIPE,Z=w.ERR_STREAM_DESTROYED,P=w.ERR_STREAM_NULL_VALUES,R=w.ERR_STREAM_WRITE_AFTER_END,N=w.ERR_UNKNOWN_ENCODING,$=g.errorOrDestroy;xe.exports(st,o);function V(){}function gt(B,M,q){e=e||wi(),B=B||{},typeof q!="boolean"&&(q=M instanceof e),this.objectMode=!!B.objectMode,q&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=y(this,B,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var J=B.decodeStrings===!1;this.decodeStrings=!J,this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(at){kt(M,at)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}gt.prototype.getBuffer=function(){for(var M=this.bufferedRequest,q=[];M;)q.push(M),M=M.next;return q},function(){try{Object.defineProperty(gt.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var vt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(vt=Function.prototype[Symbol.hasInstance],Object.defineProperty(st,Symbol.hasInstance,{value:function(M){return vt.call(this,M)?!0:this!==st?!1:M&&M._writableState instanceof gt}})):vt=function(M){return M instanceof this};function st(B){e=e||wi();var M=this instanceof e;if(!M&&!vt.call(st,this))return new st(B);this._writableState=new gt(B,this,M),this.writable=!0,B&&(typeof B.write=="function"&&(this._write=B.write),typeof B.writev=="function"&&(this._writev=B.writev),typeof B.destroy=="function"&&(this._destroy=B.destroy),typeof B.final=="function"&&(this._final=B.final)),o.call(this)}st.prototype.pipe=function(){$(this,new C)};function it(B,M){var q=new R;$(B,q),X.nextTick(M,q)}function ue(B,M,q,J){var at;return q===null?at=new P:typeof q!="string"&&!M.objectMode&&(at=new b("chunk",["string","Buffer"],q)),at?($(B,at),X.nextTick(J,at),!1):!0}st.prototype.write=function(B,M,q){var J=this._writableState,at=!1,x=!J.objectMode&&f(B);return x&&!s.isBuffer(B)&&(B=h(B)),typeof M=="function"&&(q=M,M=null),x?M="buffer":M||(M=J.defaultEncoding),typeof q!="function"&&(q=V),J.ending?it(this,q):(x||ue(this,J,B,q))&&(J.pendingcb++,at=Rt(this,J,x,B,M,q)),at},st.prototype.cork=function(){this._writableState.corked++},st.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,!B.writing&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&Qt(this,B))},st.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new N(M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(st.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Bt(B,M,q){return!B.objectMode&&B.decodeStrings!==!1&&typeof M=="string"&&(M=s.from(M,q)),M}Object.defineProperty(st.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Rt(B,M,q,J,at,x){if(!q){var E=Bt(M,J,at);J!==E&&(q=!0,at="buffer",J=E)}var F=M.objectMode?1:J.length;M.length+=F;var K=M.length<M.highWaterMark;if(K||(M.needDrain=!0),M.writing||M.corked){var Pt=M.lastBufferedRequest;M.lastBufferedRequest={chunk:J,encoding:at,isBuf:q,callback:x,next:null},Pt?Pt.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else ee(B,M,!1,F,J,at,x);return K}function ee(B,M,q,J,at,x,E){M.writelen=J,M.writecb=E,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new Z("write")):q?B._writev(at,M.onwrite):B._write(at,x,M.onwrite),M.sync=!1}function Dt(B,M,q,J,at){--M.pendingcb,q?(X.nextTick(at,J),X.nextTick(Ct,B,M),B._writableState.errorEmitted=!0,$(B,J)):(at(J),B._writableState.errorEmitted=!0,$(B,J),Ct(B,M))}function ie(B){B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0}function kt(B,M){var q=B._writableState,J=q.sync,at=q.writecb;if(typeof at!="function")throw new O;if(ie(q),M)Dt(B,q,J,M,at);else{var x=ot(q)||B.destroyed;!x&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&Qt(B,q),J?X.nextTick(Zt,B,q,x,at):Zt(B,q,x,at)}}function Zt(B,M,q,J){q||Y(B,M),M.pendingcb--,J(),Ct(B,M)}function Y(B,M){M.length===0&&M.needDrain&&(M.needDrain=!1,B.emit("drain"))}function Qt(B,M){M.bufferProcessing=!0;var q=M.bufferedRequest;if(B._writev&&q&&q.next){var J=M.bufferedRequestCount,at=new Array(J),x=M.corkedRequestsFree;x.entry=q;for(var E=0,F=!0;q;)at[E]=q,q.isBuf||(F=!1),q=q.next,E+=1;at.allBuffers=F,ee(B,M,!0,M.length,at,"",x.finish),M.pendingcb++,M.lastBufferedRequest=null,x.next?(M.corkedRequestsFree=x.next,x.next=null):M.corkedRequestsFree=new n(M),M.bufferedRequestCount=0}else{for(;q;){var K=q.chunk,Pt=q.encoding,v=q.callback,d=M.objectMode?1:K.length;if(ee(B,M,!1,d,K,Pt,v),q=q.next,M.bufferedRequestCount--,M.writing)break}q===null&&(M.lastBufferedRequest=null)}M.bufferedRequest=q,M.bufferProcessing=!1}st.prototype._write=function(B,M,q){q(new A("_write()"))},st.prototype._writev=null,st.prototype.end=function(B,M,q){var J=this._writableState;return typeof B=="function"?(q=B,B=null,M=null):typeof M=="function"&&(q=M,M=null),B!=null&&this.write(B,M),J.corked&&(J.corked=1,this.uncork()),J.ending||Mt(this,J,q),this},Object.defineProperty(st.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ot(B){return B.ending&&B.length===0&&B.bufferedRequest===null&&!B.finished&&!B.writing}function tt(B,M){B._final(function(q){M.pendingcb--,q&&$(B,q),M.prefinished=!0,B.emit("prefinish"),Ct(B,M)})}function xt(B,M){!M.prefinished&&!M.finalCalled&&(typeof B._final=="function"&&!M.destroyed?(M.pendingcb++,M.finalCalled=!0,X.nextTick(tt,B,M)):(M.prefinished=!0,B.emit("prefinish")))}function Ct(B,M){var q=ot(M);if(q&&(xt(B,M),M.pendingcb===0&&(M.finished=!0,B.emit("finish"),M.autoDestroy))){var J=B._readableState;(!J||J.autoDestroy&&J.endEmitted)&&B.destroy()}return q}function Mt(B,M,q){M.ending=!0,Ct(B,M),q&&(M.finished?X.nextTick(q):B.once("finish",q)),M.ended=!0,B.writable=!1}function dt(B,M,q){var J=B.entry;for(B.entry=null;J;){var at=J.callback;M.pendingcb--,at(q),J=J.next}M.corkedRequestsFree.next=B}return Object.defineProperty(st.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){!this._writableState||(this._writableState.destroyed=M)}}),st.prototype.destroy=g.destroy,st.prototype._undestroy=g.undestroy,st.prototype._destroy=function(B,M){M(B)},wr}var br,as;function wi(){if(as)return br;as=1;var n=Object.keys||function(c){var y=[];for(var w in c)y.push(w);return y};br=h;var e=oa(),i=na();xe.exports(h,e);for(var o=n(i.prototype),s=0;s<o.length;s++){var a=o[s];h.prototype[a]||(h.prototype[a]=i.prototype[a])}function h(c){if(!(this instanceof h))return new h(c);e.call(this,c),i.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",f)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function f(){this._writableState.ended||X.nextTick(g,this)}function g(c){c.end()}return Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=y,this._writableState.destroyed=y)}}),br}var xr={},mn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var us;function $h(){return us||(us=1,function(n,e){var i=W,o=i.Buffer;function s(h,f){for(var g in h)f[g]=h[g]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=i:(s(i,e),e.Buffer=a);function a(h,f,g){return o(h,f,g)}a.prototype=Object.create(o.prototype),s(o,a),a.from=function(h,f,g){if(typeof h=="number")throw new TypeError("Argument must not be a number");return o(h,f,g)},a.alloc=function(h,f,g){if(typeof h!="number")throw new TypeError("Argument must be a number");var c=o(h);return f!==void 0?typeof g=="string"?c.fill(f,g):c.fill(f):c.fill(0),c},a.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return o(h)},a.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(h)}}(mn,mn.exports)),mn.exports}var hs;function ls(){if(hs)return xr;hs=1;var n=$h().Buffer,e=n.isEncoding||function(P){switch(P=""+P,P&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(P){if(!P)return"utf8";for(var R;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(R)return;P=(""+P).toLowerCase(),R=!0}}function o(P){var R=i(P);if(typeof R!="string"&&(n.isEncoding===e||!e(P)))throw new Error("Unknown encoding: "+P);return R||P}xr.StringDecoder=s;function s(P){this.encoding=o(P);var R;switch(this.encoding){case"utf16le":this.text=w,this.end=b,R=4;break;case"utf8":this.fillLast=g,R=4;break;case"base64":this.text=A,this.end=O,R=3;break;default:this.write=C,this.end=Z;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(R)}s.prototype.write=function(P){if(P.length===0)return"";var R,N;if(this.lastNeed){if(R=this.fillLast(P),R===void 0)return"";N=this.lastNeed,this.lastNeed=0}else N=0;return N<P.length?R?R+this.text(P,N):this.text(P,N):R||""},s.prototype.end=y,s.prototype.text=c,s.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length};function a(P){return P<=127?0:P>>5===6?2:P>>4===14?3:P>>3===30?4:P>>6===2?-1:-2}function h(P,R,N){var $=R.length-1;if($<N)return 0;var V=a(R[$]);return V>=0?(V>0&&(P.lastNeed=V-1),V):--$<N||V===-2?0:(V=a(R[$]),V>=0?(V>0&&(P.lastNeed=V-2),V):--$<N||V===-2?0:(V=a(R[$]),V>=0?(V>0&&(V===2?V=0:P.lastNeed=V-3),V):0))}function f(P,R,N){if((R[0]&192)!==128)return P.lastNeed=0,"\uFFFD";if(P.lastNeed>1&&R.length>1){if((R[1]&192)!==128)return P.lastNeed=1,"\uFFFD";if(P.lastNeed>2&&R.length>2&&(R[2]&192)!==128)return P.lastNeed=2,"\uFFFD"}}function g(P){var R=this.lastTotal-this.lastNeed,N=f(this,P);if(N!==void 0)return N;if(this.lastNeed<=P.length)return P.copy(this.lastChar,R,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,R,0,P.length),this.lastNeed-=P.length}function c(P,R){var N=h(this,P,R);if(!this.lastNeed)return P.toString("utf8",R);this.lastTotal=N;var $=P.length-(N-this.lastNeed);return P.copy(this.lastChar,0,$),P.toString("utf8",R,$)}function y(P){var R=P&&P.length?this.write(P):"";return this.lastNeed?R+"\uFFFD":R}function w(P,R){if((P.length-R)%2===0){var N=P.toString("utf16le",R);if(N){var $=N.charCodeAt(N.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],N.slice(0,-1)}return N}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",R,P.length-1)}function b(P){var R=P&&P.length?this.write(P):"";if(this.lastNeed){var N=this.lastTotal-this.lastNeed;return R+this.lastChar.toString("utf16le",0,N)}return R}function A(P,R){var N=(P.length-R)%3;return N===0?P.toString("base64",R):(this.lastNeed=3-N,this.lastTotal=3,N===1?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",R,P.length-N))}function O(P){var R=P&&P.length?this.write(P):"";return this.lastNeed?R+this.lastChar.toString("base64",0,3-this.lastNeed):R}function C(P){return P.toString(this.encoding)}function Z(P){return P&&P.length?this.write(P):""}return xr}var fs=Xe.codes.ERR_STREAM_PREMATURE_CLOSE;function Kh(n){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];n.apply(this,o)}}}function Gh(){}function Qh(n){return n.setHeader&&typeof n.abort=="function"}function ra(n,e,i){if(typeof e=="function")return ra(n,null,e);e||(e={}),i=Kh(i||Gh);var o=e.readable||e.readable!==!1&&n.readable,s=e.writable||e.writable!==!1&&n.writable,a=function(){n.writable||f()},h=n._writableState&&n._writableState.finished,f=function(){s=!1,h=!0,o||i.call(n)},g=n._readableState&&n._readableState.endEmitted,c=function(){o=!1,g=!0,s||i.call(n)},y=function(O){i.call(n,O)},w=function(){var O;if(o&&!g)return(!n._readableState||!n._readableState.ended)&&(O=new fs),i.call(n,O);if(s&&!h)return(!n._writableState||!n._writableState.ended)&&(O=new fs),i.call(n,O)},b=function(){n.req.on("finish",f)};return Qh(n)?(n.on("complete",f),n.on("abort",w),n.req?b():n.on("request",b)):s&&!n._writableState&&(n.on("end",a),n.on("close",a)),n.on("end",c),n.on("finish",f),e.error!==!1&&n.on("error",y),n.on("close",w),function(){n.removeListener("complete",f),n.removeListener("abort",w),n.removeListener("request",b),n.req&&n.req.removeListener("finish",f),n.removeListener("end",a),n.removeListener("close",a),n.removeListener("finish",f),n.removeListener("end",c),n.removeListener("error",y),n.removeListener("close",w)}}var $r=ra,Er,cs;function Yh(){if(cs)return Er;cs=1;var n;function e(P,R,N){return R in P?Object.defineProperty(P,R,{value:N,enumerable:!0,configurable:!0,writable:!0}):P[R]=N,P}var i=$r,o=Symbol("lastResolve"),s=Symbol("lastReject"),a=Symbol("error"),h=Symbol("ended"),f=Symbol("lastPromise"),g=Symbol("handlePromise"),c=Symbol("stream");function y(P,R){return{value:P,done:R}}function w(P){var R=P[o];if(R!==null){var N=P[c].read();N!==null&&(P[f]=null,P[o]=null,P[s]=null,R(y(N,!1)))}}function b(P){X.nextTick(w,P)}function A(P,R){return function(N,$){P.then(function(){if(R[h]){N(y(void 0,!0));return}R[g](N,$)},$)}}var O=Object.getPrototypeOf(function(){}),C=Object.setPrototypeOf((n={get stream(){return this[c]},next:function(){var R=this,N=this[a];if(N!==null)return Promise.reject(N);if(this[h])return Promise.resolve(y(void 0,!0));if(this[c].destroyed)return new Promise(function(vt,st){X.nextTick(function(){R[a]?st(R[a]):vt(y(void 0,!0))})});var $=this[f],V;if($)V=new Promise(A($,this));else{var gt=this[c].read();if(gt!==null)return Promise.resolve(y(gt,!1));V=new Promise(this[g])}return this[f]=V,V}},e(n,Symbol.asyncIterator,function(){return this}),e(n,"return",function(){var R=this;return new Promise(function(N,$){R[c].destroy(null,function(V){if(V){$(V);return}N(y(void 0,!0))})})}),n),O),Z=function(R){var N,$=Object.create(C,(N={},e(N,c,{value:R,writable:!0}),e(N,o,{value:null,writable:!0}),e(N,s,{value:null,writable:!0}),e(N,a,{value:null,writable:!0}),e(N,h,{value:R._readableState.endEmitted,writable:!0}),e(N,g,{value:function(gt,vt){var st=$[c].read();st?($[f]=null,$[o]=null,$[s]=null,gt(y(st,!1))):($[o]=gt,$[s]=vt)},writable:!0}),N));return $[f]=null,i(R,function(V){if(V&&V.code!=="ERR_STREAM_PREMATURE_CLOSE"){var gt=$[s];gt!==null&&($[f]=null,$[o]=null,$[s]=null,gt(V)),$[a]=V;return}var vt=$[o];vt!==null&&($[f]=null,$[o]=null,$[s]=null,vt(y(void 0,!0))),$[h]=!0}),R.on("readable",b.bind(null,$)),$};return Er=Z,Er}var Sr,ds;function Jh(){return ds||(ds=1,Sr=function(){throw new Error("Readable.from is not available in the browser")}),Sr}var Tr,ps;function oa(){if(ps)return Tr;ps=1,Tr=it;var n;it.ReadableState=st,Vi.EventEmitter;var e=function(E,F){return E.listeners(F).length},i=Js,o=W.Buffer,s=vi.Uint8Array||function(){};function a(x){return o.from(x)}function h(x){return o.isBuffer(x)||x instanceof s}var f=yi,g;f&&f.debuglog?g=f.debuglog("stream"):g=function(){};var c=Oh(),y=ta,w=ia,b=w.getHighWaterMark,A=Xe.codes,O=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,Z=A.ERR_METHOD_NOT_IMPLEMENTED,P=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,N,$;xe.exports(it,i);var V=y.errorOrDestroy,gt=["error","close","destroy","pause","resume"];function vt(x,E,F){if(typeof x.prependListener=="function")return x.prependListener(E,F);!x._events||!x._events[E]?x.on(E,F):Array.isArray(x._events[E])?x._events[E].unshift(F):x._events[E]=[F,x._events[E]]}function st(x,E,F){n=n||wi(),x=x||{},typeof F!="boolean"&&(F=E instanceof n),this.objectMode=!!x.objectMode,F&&(this.objectMode=this.objectMode||!!x.readableObjectMode),this.highWaterMark=b(this,x,"readableHighWaterMark",F),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=x.emitClose!==!1,this.autoDestroy=!!x.autoDestroy,this.destroyed=!1,this.defaultEncoding=x.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,x.encoding&&(R||(R=ls().StringDecoder),this.decoder=new R(x.encoding),this.encoding=x.encoding)}function it(x){if(n=n||wi(),!(this instanceof it))return new it(x);var E=this instanceof n;this._readableState=new st(x,this,E),this.readable=!0,x&&(typeof x.read=="function"&&(this._read=x.read),typeof x.destroy=="function"&&(this._destroy=x.destroy)),i.call(this)}Object.defineProperty(it.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(E){!this._readableState||(this._readableState.destroyed=E)}}),it.prototype.destroy=y.destroy,it.prototype._undestroy=y.undestroy,it.prototype._destroy=function(x,E){E(x)},it.prototype.push=function(x,E){var F=this._readableState,K;return F.objectMode?K=!0:typeof x=="string"&&(E=E||F.defaultEncoding,E!==F.encoding&&(x=o.from(x,E),E=""),K=!0),ue(this,x,E,!1,K)},it.prototype.unshift=function(x){return ue(this,x,null,!0,!1)};function ue(x,E,F,K,Pt){g("readableAddChunk",E);var v=x._readableState;if(E===null)v.reading=!1,kt(x,v);else{var d;if(Pt||(d=Rt(v,E)),d)V(x,d);else if(v.objectMode||E&&E.length>0)if(typeof E!="string"&&!v.objectMode&&Object.getPrototypeOf(E)!==o.prototype&&(E=a(E)),K)v.endEmitted?V(x,new P):Bt(x,v,E,!0);else if(v.ended)V(x,new C);else{if(v.destroyed)return!1;v.reading=!1,v.decoder&&!F?(E=v.decoder.write(E),v.objectMode||E.length!==0?Bt(x,v,E,!1):Qt(x,v)):Bt(x,v,E,!1)}else K||(v.reading=!1,Qt(x,v))}return!v.ended&&(v.length<v.highWaterMark||v.length===0)}function Bt(x,E,F,K){E.flowing&&E.length===0&&!E.sync?(E.awaitDrain=0,x.emit("data",F)):(E.length+=E.objectMode?1:F.length,K?E.buffer.unshift(F):E.buffer.push(F),E.needReadable&&Zt(x)),Qt(x,E)}function Rt(x,E){var F;return!h(E)&&typeof E!="string"&&E!==void 0&&!x.objectMode&&(F=new O("chunk",["string","Buffer","Uint8Array"],E)),F}it.prototype.isPaused=function(){return this._readableState.flowing===!1},it.prototype.setEncoding=function(x){R||(R=ls().StringDecoder);var E=new R(x);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,K="";F!==null;)K+=E.write(F.data),F=F.next;return this._readableState.buffer.clear(),K!==""&&this._readableState.buffer.push(K),this._readableState.length=K.length,this};var ee=1073741824;function Dt(x){return x>=ee?x=ee:(x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++),x}function ie(x,E){return x<=0||E.length===0&&E.ended?0:E.objectMode?1:x!==x?E.flowing&&E.length?E.buffer.head.data.length:E.length:(x>E.highWaterMark&&(E.highWaterMark=Dt(x)),x<=E.length?x:E.ended?E.length:(E.needReadable=!0,0))}it.prototype.read=function(x){g("read",x),x=parseInt(x,10);var E=this._readableState,F=x;if(x!==0&&(E.emittedReadable=!1),x===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return g("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?q(this):Zt(this),null;if(x=ie(x,E),x===0&&E.ended)return E.length===0&&q(this),null;var K=E.needReadable;g("need readable",K),(E.length===0||E.length-x<E.highWaterMark)&&(K=!0,g("length less than watermark",K)),E.ended||E.reading?(K=!1,g("reading or ended",K)):K&&(g("do read"),E.reading=!0,E.sync=!0,E.length===0&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(x=ie(F,E)));var Pt;return x>0?Pt=M(x,E):Pt=null,Pt===null?(E.needReadable=E.length<=E.highWaterMark,x=0):(E.length-=x,E.awaitDrain=0),E.length===0&&(E.ended||(E.needReadable=!0),F!==x&&E.ended&&q(this)),Pt!==null&&this.emit("data",Pt),Pt};function kt(x,E){if(g("onEofChunk"),!E.ended){if(E.decoder){var F=E.decoder.end();F&&F.length&&(E.buffer.push(F),E.length+=E.objectMode?1:F.length)}E.ended=!0,E.sync?Zt(x):(E.needReadable=!1,E.emittedReadable||(E.emittedReadable=!0,Y(x)))}}function Zt(x){var E=x._readableState;g("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(g("emitReadable",E.flowing),E.emittedReadable=!0,X.nextTick(Y,x))}function Y(x){var E=x._readableState;g("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&(E.length||E.ended)&&(x.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,B(x)}function Qt(x,E){E.readingMore||(E.readingMore=!0,X.nextTick(ot,x,E))}function ot(x,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){var F=E.length;if(g("maybeReadMore read 0"),x.read(0),F===E.length)break}E.readingMore=!1}it.prototype._read=function(x){V(this,new Z("_read()"))},it.prototype.pipe=function(x,E){var F=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=x;break;case 1:K.pipes=[K.pipes,x];break;default:K.pipes.push(x);break}K.pipesCount+=1,g("pipe count=%d opts=%j",K.pipesCount,E);var Pt=(!E||E.end!==!1)&&x!==X.stdout&&x!==X.stderr,v=Pt?_:Lt;K.endEmitted?X.nextTick(v):F.once("end",v),x.on("unpipe",d);function d(yt,Xt){g("onunpipe"),yt===F&&Xt&&Xt.hasUnpiped===!1&&(Xt.hasUnpiped=!0,U())}function _(){g("onend"),x.end()}var S=tt(F);x.on("drain",S);var I=!1;function U(){g("cleanup"),x.removeListener("close",mt),x.removeListener("finish",Et),x.removeListener("drain",S),x.removeListener("error",ht),x.removeListener("unpipe",d),F.removeListener("end",_),F.removeListener("end",Lt),F.removeListener("data",H),I=!0,K.awaitDrain&&(!x._writableState||x._writableState.needDrain)&&S()}F.on("data",H);function H(yt){g("ondata");var Xt=x.write(yt);g("dest.write",Xt),Xt===!1&&((K.pipesCount===1&&K.pipes===x||K.pipesCount>1&&at(K.pipes,x)!==-1)&&!I&&(g("false write response, pause",K.awaitDrain),K.awaitDrain++),F.pause())}function ht(yt){g("onerror",yt),Lt(),x.removeListener("error",ht),e(x,"error")===0&&V(x,yt)}vt(x,"error",ht);function mt(){x.removeListener("finish",Et),Lt()}x.once("close",mt);function Et(){g("onfinish"),x.removeListener("close",mt),Lt()}x.once("finish",Et);function Lt(){g("unpipe"),F.unpipe(x)}return x.emit("pipe",F),K.flowing||(g("pipe resume"),F.resume()),x};function tt(x){return function(){var F=x._readableState;g("pipeOnDrain",F.awaitDrain),F.awaitDrain&&F.awaitDrain--,F.awaitDrain===0&&e(x,"data")&&(F.flowing=!0,B(x))}}it.prototype.unpipe=function(x){var E=this._readableState,F={hasUnpiped:!1};if(E.pipesCount===0)return this;if(E.pipesCount===1)return x&&x!==E.pipes?this:(x||(x=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,x&&x.emit("unpipe",this,F),this);if(!x){var K=E.pipes,Pt=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var v=0;v<Pt;v++)K[v].emit("unpipe",this,{hasUnpiped:!1});return this}var d=at(E.pipes,x);return d===-1?this:(E.pipes.splice(d,1),E.pipesCount-=1,E.pipesCount===1&&(E.pipes=E.pipes[0]),x.emit("unpipe",this,F),this)},it.prototype.on=function(x,E){var F=i.prototype.on.call(this,x,E),K=this._readableState;return x==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):x==="readable"&&!K.endEmitted&&!K.readableListening&&(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,g("on readable",K.length,K.reading),K.length?Zt(this):K.reading||X.nextTick(Ct,this)),F},it.prototype.addListener=it.prototype.on,it.prototype.removeListener=function(x,E){var F=i.prototype.removeListener.call(this,x,E);return x==="readable"&&X.nextTick(xt,this),F},it.prototype.removeAllListeners=function(x){var E=i.prototype.removeAllListeners.apply(this,arguments);return(x==="readable"||x===void 0)&&X.nextTick(xt,this),E};function xt(x){var E=x._readableState;E.readableListening=x.listenerCount("readable")>0,E.resumeScheduled&&!E.paused?E.flowing=!0:x.listenerCount("data")>0&&x.resume()}function Ct(x){g("readable nexttick read 0"),x.read(0)}it.prototype.resume=function(){var x=this._readableState;return x.flowing||(g("resume"),x.flowing=!x.readableListening,Mt(this,x)),x.paused=!1,this};function Mt(x,E){E.resumeScheduled||(E.resumeScheduled=!0,X.nextTick(dt,x,E))}function dt(x,E){g("resume",E.reading),E.reading||x.read(0),E.resumeScheduled=!1,x.emit("resume"),B(x),E.flowing&&!E.reading&&x.read(0)}it.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function B(x){var E=x._readableState;for(g("flow",E.flowing);E.flowing&&x.read()!==null;);}it.prototype.wrap=function(x){var E=this,F=this._readableState,K=!1;x.on("end",function(){if(g("wrapped end"),F.decoder&&!F.ended){var d=F.decoder.end();d&&d.length&&E.push(d)}E.push(null)}),x.on("data",function(d){if(g("wrapped data"),F.decoder&&(d=F.decoder.write(d)),!(F.objectMode&&d==null)&&!(!F.objectMode&&(!d||!d.length))){var _=E.push(d);_||(K=!0,x.pause())}});for(var Pt in x)this[Pt]===void 0&&typeof x[Pt]=="function"&&(this[Pt]=function(_){return function(){return x[_].apply(x,arguments)}}(Pt));for(var v=0;v<gt.length;v++)x.on(gt[v],this.emit.bind(this,gt[v]));return this._read=function(d){g("wrapped _read",d),K&&(K=!1,x.resume())},this},typeof Symbol=="function"&&(it.prototype[Symbol.asyncIterator]=function(){return N===void 0&&(N=Yh()),N(this)}),Object.defineProperty(it.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(it.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(it.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),it._fromList=M,Object.defineProperty(it.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function M(x,E){if(E.length===0)return null;var F;return E.objectMode?F=E.buffer.shift():!x||x>=E.length?(E.decoder?F=E.buffer.join(""):E.buffer.length===1?F=E.buffer.first():F=E.buffer.concat(E.length),E.buffer.clear()):F=E.buffer.consume(x,E.decoder),F}function q(x){var E=x._readableState;g("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,X.nextTick(J,E,x))}function J(x,E){if(g("endReadableNT",x.endEmitted,x.length),!x.endEmitted&&x.length===0&&(x.endEmitted=!0,E.readable=!1,E.emit("end"),x.autoDestroy)){var F=E._writableState;(!F||F.autoDestroy&&F.finished)&&E.destroy()}}typeof Symbol=="function"&&(it.from=function(x,E){return $===void 0&&($=Jh()),$(it,x,E)});function at(x,E){for(var F=0,K=x.length;F<K;F++)if(x[F]===E)return F;return-1}return Tr}var sa=ke,Rn=Xe.codes,Xh=Rn.ERR_METHOD_NOT_IMPLEMENTED,tl=Rn.ERR_MULTIPLE_CALLBACK,el=Rn.ERR_TRANSFORM_ALREADY_TRANSFORMING,il=Rn.ERR_TRANSFORM_WITH_LENGTH_0,Dn=wi();xe.exports(ke,Dn);function nl(n,e){var i=this._transformState;i.transforming=!1;var o=i.writecb;if(o===null)return this.emit("error",new tl);i.writechunk=null,i.writecb=null,e!=null&&this.push(e),o(n);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function ke(n){if(!(this instanceof ke))return new ke(n);Dn.call(this,n),this._transformState={afterTransform:nl.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",rl)}function rl(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,i){_s(n,e,i)}):_s(this,null,null)}ke.prototype.push=function(n,e){return this._transformState.needTransform=!1,Dn.prototype.push.call(this,n,e)};ke.prototype._transform=function(n,e,i){i(new Xh("_transform()"))};ke.prototype._write=function(n,e,i){var o=this._transformState;if(o.writecb=i,o.writechunk=n,o.writeencoding=e,!o.transforming){var s=this._readableState;(o.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};ke.prototype._read=function(n){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ke.prototype._destroy=function(n,e){Dn.prototype._destroy.call(this,n,function(i){e(i)})};function _s(n,e,i){if(e)return n.emit("error",e);if(i!=null&&n.push(i),n._writableState.length)throw new il;if(n._transformState.transforming)throw new el;return n.push(null)}var ol=qi,aa=sa;xe.exports(qi,aa);function qi(n){if(!(this instanceof qi))return new qi(n);aa.call(this,n)}qi.prototype._transform=function(n,e,i){i(null,n)};var Pr;function sl(n){var e=!1;return function(){e||(e=!0,n.apply(void 0,arguments))}}var ua=Xe.codes,al=ua.ERR_MISSING_ARGS,ul=ua.ERR_STREAM_DESTROYED;function gs(n){if(n)throw n}function hl(n){return n.setHeader&&typeof n.abort=="function"}function ll(n,e,i,o){o=sl(o);var s=!1;n.on("close",function(){s=!0}),Pr===void 0&&(Pr=$r),Pr(n,{readable:e,writable:i},function(h){if(h)return o(h);s=!0,o()});var a=!1;return function(h){if(!s&&!a){if(a=!0,hl(n))return n.abort();if(typeof n.destroy=="function")return n.destroy();o(h||new ul("pipe"))}}}function ms(n){n()}function fl(n,e){return n.pipe(e)}function cl(n){return!n.length||typeof n[n.length-1]!="function"?gs:n.pop()}function dl(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];var o=cl(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new al("streams");var s,a=e.map(function(h,f){var g=f<e.length-1,c=f>0;return ll(h,g,c,function(y){s||(s=y),y&&a.forEach(ms),!g&&(a.forEach(ms),o(s))})});return e.reduce(fl)}var pl=dl;(function(n,e){e=n.exports=oa(),e.Stream=e,e.Readable=e,e.Writable=na(),e.Duplex=wi(),e.Transform=sa,e.PassThrough=ol,e.finished=$r,e.pipeline=pl})(Me,Me.exports);const _l=Wr,gl=Me.exports.Readable,ml={objectMode:!0},vl={clean:!0};function ze(n){if(!(this instanceof ze))return new ze(n);this.options=n||{},this.options=_l(vl,n),this._inflights=new Map}ze.prototype.put=function(n,e){return this._inflights.set(n.messageId,n),e&&e(),this};ze.prototype.createStream=function(){const n=new gl(ml),e=[];let i=!1,o=0;return this._inflights.forEach(function(s,a){e.push(s)}),n._read=function(){!i&&o<e.length?this.push(e[o++]):this.push(null)},n.destroy=function(){if(i)return;const s=this;i=!0,setTimeout(function(){s.emit("close")},0)},n};ze.prototype.del=function(n,e){return n=this._inflights.get(n.messageId),n?(this._inflights.delete(n.messageId),e(null,n)):e&&e(new Error("missing packet")),this};ze.prototype.get=function(n,e){return n=this._inflights.get(n.messageId),n?e(null,n):e&&e(new Error("missing packet")),this};ze.prototype.close=function(n){this.options.clean&&(this._inflights=null),n&&n()};var ha=ze;function bi(n){if(!(this instanceof bi))return new bi(n);this.aliasToTopic={},this.max=n}bi.prototype.put=function(n,e){return e===0||e>this.max?!1:(this.aliasToTopic[e]=n,this.length=Object.keys(this.aliasToTopic).length,!0)};bi.prototype.getTopicByAlias=function(n){return this.aliasToTopic[n]};bi.prototype.clear=function(){this.aliasToTopic={}};var yl=bi,Lr,vs;function wl(){return vs||(vs=1,Lr=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Lr}var bl=bt;bt.Node=Ye;bt.create=bt;function bt(n){var e=this;if(e instanceof bt||(e=new bt),e.tail=null,e.head=null,e.length=0,n&&typeof n.forEach=="function")n.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var i=0,o=arguments.length;i<o;i++)e.push(arguments[i]);return e}bt.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var e=n.next,i=n.prev;return e&&(e.prev=i),i&&(i.next=e),n===this.head&&(this.head=e),n===this.tail&&(this.tail=i),n.list.length--,n.next=null,n.prev=null,n.list=null,e};bt.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&&(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};bt.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&&(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};bt.prototype.push=function(){for(var n=0,e=arguments.length;n<e;n++)El(this,arguments[n]);return this.length};bt.prototype.unshift=function(){for(var n=0,e=arguments.length;n<e;n++)Sl(this,arguments[n]);return this.length};bt.prototype.pop=function(){if(!!this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};bt.prototype.shift=function(){if(!!this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};bt.prototype.forEach=function(n,e){e=e||this;for(var i=this.head,o=0;i!==null;o++)n.call(e,i.value,o,this),i=i.next};bt.prototype.forEachReverse=function(n,e){e=e||this;for(var i=this.tail,o=this.length-1;i!==null;o--)n.call(e,i.value,o,this),i=i.prev};bt.prototype.get=function(n){for(var e=0,i=this.head;i!==null&&e<n;e++)i=i.next;if(e===n&&i!==null)return i.value};bt.prototype.getReverse=function(n){for(var e=0,i=this.tail;i!==null&&e<n;e++)i=i.prev;if(e===n&&i!==null)return i.value};bt.prototype.map=function(n,e){e=e||this;for(var i=new bt,o=this.head;o!==null;)i.push(n.call(e,o.value,this)),o=o.next;return i};bt.prototype.mapReverse=function(n,e){e=e||this;for(var i=new bt,o=this.tail;o!==null;)i.push(n.call(e,o.value,this)),o=o.prev;return i};bt.prototype.reduce=function(n,e){var i,o=this.head;if(arguments.length>1)i=e;else if(this.head)o=this.head.next,i=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;o!==null;s++)i=n(i,o.value,s),o=o.next;return i};bt.prototype.reduceReverse=function(n,e){var i,o=this.tail;if(arguments.length>1)i=e;else if(this.tail)o=this.tail.prev,i=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;o!==null;s--)i=n(i,o.value,s),o=o.prev;return i};bt.prototype.toArray=function(){for(var n=new Array(this.length),e=0,i=this.head;i!==null;e++)n[e]=i.value,i=i.next;return n};bt.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,i=this.tail;i!==null;e++)n[e]=i.value,i=i.prev;return n};bt.prototype.slice=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var i=new bt;if(e<n||e<0)return i;n<0&&(n=0),e>this.length&&(e=this.length);for(var o=0,s=this.head;s!==null&&o<n;o++)s=s.next;for(;s!==null&&o<e;o++,s=s.next)i.push(s.value);return i};bt.prototype.sliceReverse=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var i=new bt;if(e<n||e<0)return i;n<0&&(n=0),e>this.length&&(e=this.length);for(var o=this.length,s=this.tail;s!==null&&o>e;o--)s=s.prev;for(;s!==null&&o>n;o--,s=s.prev)i.push(s.value);return i};bt.prototype.splice=function(n,e,...i){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var o=0,s=this.head;s!==null&&o<n;o++)s=s.next;for(var a=[],o=0;s&&o<e;o++)a.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var o=0;o<i.length;o++)s=xl(this,s,i[o]);return a};bt.prototype.reverse=function(){for(var n=this.head,e=this.tail,i=n;i!==null;i=i.prev){var o=i.prev;i.prev=i.next,i.next=o}return this.head=e,this.tail=n,this};function xl(n,e,i){var o=e===n.head?new Ye(i,null,e,n):new Ye(i,e,e.next,n);return o.next===null&&(n.tail=o),o.prev===null&&(n.head=o),n.length++,o}function El(n,e){n.tail=new Ye(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function Sl(n,e){n.head=new Ye(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function Ye(n,e,i,o){if(!(this instanceof Ye))return new Ye(n,e,i,o);this.list=o,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}try{wl()(bt)}catch{}const Tl=bl,Ge=Symbol("max"),Ce=Symbol("length"),li=Symbol("lengthCalculator"),Ui=Symbol("allowStale"),Qe=Symbol("maxAge"),Be=Symbol("dispose"),ys=Symbol("noDisposeOnSet"),qt=Symbol("lruList"),fe=Symbol("cache"),la=Symbol("updateAgeOnGet"),Ar=()=>1;class Pl{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[Ge]=e.max||1/0;const i=e.length||Ar;if(this[li]=typeof i!="function"?Ar:i,this[Ui]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Qe]=e.maxAge||0,this[Be]=e.dispose,this[ys]=e.noDisposeOnSet||!1,this[la]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Ge]=e||1/0,Di(this)}get max(){return this[Ge]}set allowStale(e){this[Ui]=!!e}get allowStale(){return this[Ui]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Qe]=e,Di(this)}get maxAge(){return this[Qe]}set lengthCalculator(e){typeof e!="function"&&(e=Ar),e!==this[li]&&(this[li]=e,this[Ce]=0,this[qt].forEach(i=>{i.length=this[li](i.value,i.key),this[Ce]+=i.length})),Di(this)}get lengthCalculator(){return this[li]}get length(){return this[Ce]}get itemCount(){return this[qt].length}rforEach(e,i){i=i||this;for(let o=this[qt].tail;o!==null;){const s=o.prev;ws(this,e,o,i),o=s}}forEach(e,i){i=i||this;for(let o=this[qt].head;o!==null;){const s=o.next;ws(this,e,o,i),o=s}}keys(){return this[qt].toArray().map(e=>e.key)}values(){return this[qt].toArray().map(e=>e.value)}reset(){this[Be]&&this[qt]&&this[qt].length&&this[qt].forEach(e=>this[Be](e.key,e.value)),this[fe]=new Map,this[qt]=new Tl,this[Ce]=0}dump(){return this[qt].map(e=>Pn(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[qt]}set(e,i,o){if(o=o||this[Qe],o&&typeof o!="number")throw new TypeError("maxAge must be a number");const s=o?Date.now():0,a=this[li](i,e);if(this[fe].has(e)){if(a>this[Ge])return _i(this,this[fe].get(e)),!1;const g=this[fe].get(e).value;return this[Be]&&(this[ys]||this[Be](e,g.value)),g.now=s,g.maxAge=o,g.value=i,this[Ce]+=a-g.length,g.length=a,this.get(e),Di(this),!0}const h=new Ll(e,i,a,s,o);return h.length>this[Ge]?(this[Be]&&this[Be](e,i),!1):(this[Ce]+=h.length,this[qt].unshift(h),this[fe].set(e,this[qt].head),Di(this),!0)}has(e){if(!this[fe].has(e))return!1;const i=this[fe].get(e).value;return!Pn(this,i)}get(e){return Ir(this,e,!0)}peek(e){return Ir(this,e,!1)}pop(){const e=this[qt].tail;return e?(_i(this,e),e.value):null}del(e){_i(this,this[fe].get(e))}load(e){this.reset();const i=Date.now();for(let o=e.length-1;o>=0;o--){const s=e[o],a=s.e||0;if(a===0)this.set(s.k,s.v);else{const h=a-i;h>0&&this.set(s.k,s.v,h)}}}prune(){this[fe].forEach((e,i)=>Ir(this,i,!1))}}const Ir=(n,e,i)=>{const o=n[fe].get(e);if(o){const s=o.value;if(Pn(n,s)){if(_i(n,o),!n[Ui])return}else i&&(n[la]&&(o.value.now=Date.now()),n[qt].unshiftNode(o));return s.value}},Pn=(n,e)=>{if(!e||!e.maxAge&&!n[Qe])return!1;const i=Date.now()-e.now;return e.maxAge?i>e.maxAge:n[Qe]&&i>n[Qe]},Di=n=>{if(n[Ce]>n[Ge])for(let e=n[qt].tail;n[Ce]>n[Ge]&&e!==null;){const i=e.prev;_i(n,e),e=i}},_i=(n,e)=>{if(e){const i=e.value;n[Be]&&n[Be](i.key,i.value),n[Ce]-=i.length,n[fe].delete(i.key),n[qt].removeNode(e)}};class Ll{constructor(e,i,o,s,a){this.key=e,this.value=i,this.length=o,this.now=s,this.maxAge=a||0}}const ws=(n,e,i,o)=>{let s=i.value;Pn(n,s)&&(_i(n,i),n[Ui]||(s=void 0)),s&&e.call(o,s.value,s.key,n)};var Al=Pl,fa={},Il=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vt=function(){function n(e){e===void 0&&(e=n.NORMAL),this.iteratorType=e}return n.NORMAL=!1,n.REVERSE=!0,n}(),$i=function(){function n(){this.length=0}return n.prototype.size=function(){return this.length},n.prototype.empty=function(){return this.length===0},n}(),Kr=function(n){Il(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}($i),Bl=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Cl=function(n){Bl(e,n);function e(i){i===void 0&&(i=[]);var o=n.call(this)||this;return o.stack=[],i.forEach(function(s){return o.push(s)}),o}return e.prototype.clear=function(){this.length=0,this.stack.length=0},e.prototype.push=function(i){this.stack.push(i),this.length+=1},e.prototype.pop=function(){this.stack.pop(),this.length>0&&(this.length-=1)},e.prototype.top=function(){return this.stack[this.length-1]},e}($i);const Ml=Cl;var kl=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ol=function(n){kl(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Kr);const Nn=Ol;function Ht(n,e,i){if(n<e||n>i)throw new RangeError}var Rl=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),ca=function(n){Rl(e,n);function e(i,o,s,a,h){var f=n.call(this,h)||this;return f.node=i,f.size=o,f.getElementByPos=s,f.setElementByPos=a,f.iteratorType===Vt.NORMAL?(f.pre=function(){if(this.node===0)throw new RangeError("Deque iterator access denied!");return this.node-=1,this},f.next=function(){if(this.node===this.size())throw new RangeError("Deque Iterator access denied!");return this.node+=1,this}):(f.pre=function(){if(this.node===this.size()-1)throw new RangeError("Deque iterator access denied!");return this.node+=1,this},f.next=function(){if(this.node===-1)throw new RangeError("Deque iterator access denied!");return this.node-=1,this}),f}return Object.defineProperty(e.prototype,"pointer",{get:function(){return Ht(this.node,0,this.size()-1),this.getElementByPos(this.node)},set:function(i){Ht(this.node,0,this.size()-1),this.setElementByPos(this.node,i)},enumerable:!1,configurable:!0}),e.prototype.equals=function(i){return this.node===i.node},e}(Vt),da=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Dl=globalThis&&globalThis.__generator||function(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(y){return g([c,y])}}function g(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(y){c=[6,y],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Nl=globalThis&&globalThis.__read||function(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var o=i.call(n),s,a=[],h;try{for(;(e===void 0||e-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return a},zl=globalThis&&globalThis.__spreadArray||function(n,e,i){if(i||arguments.length===2)for(var o=0,s=e.length,a;o<s;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))},fi=function(n){da(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.copy=function(){return new e(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)},e}(ca),Fl=function(n){da(e,n);function e(i,o){i===void 0&&(i=[]),o===void 0&&(o=1<<12);var s=n.call(this)||this;s.first=0,s.curFirst=0,s.last=0,s.curLast=0,s.bucketNum=0,s.map=[];var a;if("size"in i)typeof i.size=="number"?a=i.size:a=i.size();else if("length"in i)a=i.length;else throw new RangeError("Can't get container's size!");s.bucketSize=o,s.bucketNum=Math.max(Math.ceil(a/s.bucketSize),1);for(var h=0;h<s.bucketNum;++h)s.map.push(new Array(s.bucketSize));var f=Math.ceil(a/s.bucketSize);return s.first=s.last=(s.bucketNum>>1)-(f>>1),s.curFirst=s.curLast=s.bucketSize-a%s.bucketSize>>1,i.forEach(function(g){return s.pushBack(g)}),s.size=s.size.bind(s),s.getElementByPos=s.getElementByPos.bind(s),s.setElementByPos=s.setElementByPos.bind(s),s}return e.prototype.reAllocate=function(){for(var i=[],o=Math.max(this.bucketNum>>1,1),s=0;s<o;++s)i[s]=new Array(this.bucketSize);for(var s=this.first;s<this.bucketNum;++s)i[i.length]=this.map[s];for(var s=0;s<this.last;++s)i[i.length]=this.map[s];i[i.length]=zl([],Nl(this.map[this.last]),!1),this.first=o,this.last=i.length-1;for(var s=0;s<o;++s)i[i.length]=new Array(this.bucketSize);this.map=i,this.bucketNum=i.length},e.prototype.getElementIndex=function(i){var o=this.curFirst+i+1,s=o%this.bucketSize,a=s-1,h=this.first+(o-s)/this.bucketSize;return s===0&&(h-=1),h%=this.bucketNum,a<0&&(a+=this.bucketSize),{curNodeBucketIndex:h,curNodePointerIndex:a}},e.prototype.clear=function(){this.map=[[]],this.bucketNum=1,this.first=this.last=this.length=0,this.curFirst=this.curLast=this.bucketSize>>1},e.prototype.front=function(){return this.map[this.first][this.curFirst]},e.prototype.back=function(){return this.map[this.last][this.curLast]},e.prototype.begin=function(){return new fi(0,this.size,this.getElementByPos,this.setElementByPos)},e.prototype.end=function(){return new fi(this.length,this.size,this.getElementByPos,this.setElementByPos)},e.prototype.rBegin=function(){return new fi(this.length-1,this.size,this.getElementByPos,this.setElementByPos,Vt.REVERSE)},e.prototype.rEnd=function(){return new fi(-1,this.size,this.getElementByPos,this.setElementByPos,Vt.REVERSE)},e.prototype.pushBack=function(i){this.length&&(this.curLast<this.bucketSize-1?this.curLast+=1:this.last<this.bucketNum-1?(this.last+=1,this.curLast=0):(this.last=0,this.curLast=0),this.last===this.first&&this.curLast===this.curFirst&&this.reAllocate()),this.length+=1,this.map[this.last][this.curLast]=i},e.prototype.popBack=function(){!this.length||(this.map[this.last][this.curLast]=void 0,this.length!==1&&(this.curLast>0?this.curLast-=1:this.last>0?(this.last-=1,this.curLast=this.bucketSize-1):(this.last=this.bucketNum-1,this.curLast=this.bucketSize-1)),this.length-=1)},e.prototype.pushFront=function(i){this.length&&(this.curFirst>0?this.curFirst-=1:this.first>0?(this.first-=1,this.curFirst=this.bucketSize-1):(this.first=this.bucketNum-1,this.curFirst=this.bucketSize-1),this.first===this.last&&this.curFirst===this.curLast&&this.reAllocate()),this.length+=1,this.map[this.first][this.curFirst]=i},e.prototype.popFront=function(){!this.length||(this.map[this.first][this.curFirst]=void 0,this.length!==1&&(this.curFirst<this.bucketSize-1?this.curFirst+=1:this.first<this.bucketNum-1?(this.first+=1,this.curFirst=0):(this.first=0,this.curFirst=0)),this.length-=1)},e.prototype.forEach=function(i){for(var o=0;o<this.length;++o)i(this.getElementByPos(o),o)},e.prototype.getElementByPos=function(i){Ht(i,0,this.length-1);var o=this.getElementIndex(i),s=o.curNodeBucketIndex,a=o.curNodePointerIndex;return this.map[s][a]},e.prototype.setElementByPos=function(i,o){Ht(i,0,this.length-1);var s=this.getElementIndex(i),a=s.curNodeBucketIndex,h=s.curNodePointerIndex;this.map[a][h]=o},e.prototype.insert=function(i,o,s){if(s===void 0&&(s=1),Ht(i,0,this.length),i===0)for(;s--;)this.pushFront(o);else if(i===this.length)for(;s--;)this.pushBack(o);else{for(var a=[],h=i;h<this.length;++h)a.push(this.getElementByPos(h));this.cut(i-1);for(var h=0;h<s;++h)this.pushBack(o);for(var h=0;h<a.length;++h)this.pushBack(a[h])}},e.prototype.cut=function(i){if(i<0){this.clear();return}var o=this.getElementIndex(i),s=o.curNodeBucketIndex,a=o.curNodePointerIndex;this.last=s,this.curLast=a,this.length=i+1},e.prototype.eraseElementByPos=function(i){var o=this;if(Ht(i,0,this.length-1),i===0)this.popFront();else if(i===this.length-1)this.popBack();else{for(var s=[],a=i+1;a<this.length;++a)s.push(this.getElementByPos(a));this.cut(i),this.popBack(),s.forEach(function(h){return o.pushBack(h)})}},e.prototype.eraseElementByValue=function(i){if(!!this.length){for(var o=[],s=0;s<this.length;++s){var a=this.getElementByPos(s);a!==i&&o.push(a)}for(var h=o.length,s=0;s<h;++s)this.setElementByPos(s,o[s]);this.cut(h-1)}},e.prototype.eraseElementByIterator=function(i){var o=i.node;return this.eraseElementByPos(o),i=i.next(),i},e.prototype.find=function(i){for(var o=0;o<this.length;++o)if(this.getElementByPos(o)===i)return new fi(o,this.size,this.getElementByPos,this.setElementByPos);return this.end()},e.prototype.reverse=function(){for(var i=0,o=this.length-1;i<o;){var s=this.getElementByPos(i);this.setElementByPos(i,this.getElementByPos(o)),this.setElementByPos(o,s),i+=1,o-=1}},e.prototype.unique=function(){if(!(this.length<=1)){for(var i=1,o=this.getElementByPos(0),s=1;s<this.length;++s){var a=this.getElementByPos(s);a!==o&&(o=a,this.setElementByPos(i++,a))}for(;this.length>i;)this.popBack()}},e.prototype.sort=function(i){for(var o=[],s=0;s<this.length;++s)o.push(this.getElementByPos(s));o.sort(i);for(var s=0;s<this.length;++s)this.setElementByPos(s,o[s])},e.prototype.shrinkToFit=function(){if(!!this.length){var i=[];this.forEach(function(s){return i.push(s)}),this.bucketNum=Math.max(Math.ceil(this.length/this.bucketSize),1),this.length=this.first=this.last=this.curFirst=this.curLast=0,this.map=[];for(var o=0;o<this.bucketNum;++o)this.map.push(new Array(this.bucketSize));for(var o=0;o<i.length;++o)this.pushBack(i[o])}},e.prototype[Symbol.iterator]=function(){return function(){var i;return Dl(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<this.length?[4,this.getElementByPos(i)]:[3,4];case 2:o.sent(),o.label=3;case 3:return++i,[3,1];case 4:return[2]}})}.bind(this)()},e}(Nn);const pa=Fl;var Ul=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Zl=function(n){Ul(e,n);function e(i){i===void 0&&(i=[]);var o=n.call(this)||this;return o.queue=new pa(i),o.length=o.queue.size(),o}return e.prototype.clear=function(){this.queue.clear(),this.length=0},e.prototype.push=function(i){this.queue.pushBack(i),this.length+=1},e.prototype.pop=function(){this.queue.popFront(),this.length&&(this.length-=1)},e.prototype.front=function(){return this.queue.front()},e}($i);const ql=Zl;var jl=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),vn=globalThis&&globalThis.__read||function(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var o=i.call(n),s,a=[],h;try{for(;(e===void 0||e-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return a},Hl=globalThis&&globalThis.__spreadArray||function(n,e,i){if(i||arguments.length===2)for(var o=0,s=e.length,a;o<s;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))},Wl=function(n){jl(e,n);function e(i,o,s){var a;i===void 0&&(i=[]),o===void 0&&(o=function(A,O){return A>O?-1:A<O?1:0}),s===void 0&&(s=!0);var h=n.call(this)||this;h.cmp=o,Array.isArray(i)?h.priorityQueue=s?Hl([],vn(i),!1):i:(h.priorityQueue=[],i.forEach(function(A){return h.priorityQueue.push(A)})),h.length=h.priorityQueue.length;for(var f=h.length-1>>1;f>=0;--f)for(var g=f,c=g<<1|1;c<h.length;){var y=c,w=y+1,b=y;if(w<h.length&&h.cmp(h.priorityQueue[y],h.priorityQueue[w])>0&&(b=w),h.cmp(h.priorityQueue[g],h.priorityQueue[b])<=0)break;a=vn([h.priorityQueue[b],h.priorityQueue[g]],2),h.priorityQueue[g]=a[0],h.priorityQueue[b]=a[1],g=b,c=g<<1|1}return h}return e.prototype.adjust=function(i){var o,s,a=i<<1|1,h=(i<<1)+2;a<this.length&&this.cmp(this.priorityQueue[i],this.priorityQueue[a])>0&&(o=vn([this.priorityQueue[a],this.priorityQueue[i]],2),this.priorityQueue[i]=o[0],this.priorityQueue[a]=o[1]),h<this.length&&this.cmp(this.priorityQueue[i],this.priorityQueue[h])>0&&(s=vn([this.priorityQueue[h],this.priorityQueue[i]],2),this.priorityQueue[i]=s[0],this.priorityQueue[h]=s[1])},e.prototype.clear=function(){this.length=0,this.priorityQueue.length=0},e.prototype.push=function(i){if(this.priorityQueue.push(i),this.length+=1,this.length!==1)for(var o=this.length-1;o>0;){var s=o-1>>1;if(this.cmp(this.priorityQueue[s],i)<=0)break;this.adjust(s),o=s}},e.prototype.pop=function(){if(!!this.length){var i=this.priorityQueue[this.length-1];this.length-=1;for(var o=0;o<this.length;){var s=o<<1|1,a=(o<<1)+2;if(s>=this.length)break;var h=s;if(a<this.length&&this.cmp(this.priorityQueue[s],this.priorityQueue[a])>0&&(h=a),this.cmp(this.priorityQueue[h],i)>=0)break;this.priorityQueue[o]=this.priorityQueue[h],o=h}this.priorityQueue[o]=i,this.priorityQueue.pop()}},e.prototype.top=function(){return this.priorityQueue[0]},e}($i);const Vl=Wl;var _a=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),$l=globalThis&&globalThis.__generator||function(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(y){return g([c,y])}}function g(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(y){c=[6,y],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},bs=globalThis&&globalThis.__read||function(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var o=i.call(n),s,a=[],h;try{for(;(e===void 0||e-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return a},xs=globalThis&&globalThis.__spreadArray||function(n,e,i){if(i||arguments.length===2)for(var o=0,s=e.length,a;o<s;o++)(a||!(o in e))&&(a||(a=Array.prototype.slice.call(e,0,o)),a[o]=e[o]);return n.concat(a||Array.prototype.slice.call(e))},Kl=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ci=function(n){_a(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.copy=function(){return new e(this.node,this.size,this.getElementByPos,this.setElementByPos,this.iteratorType)},e}(ca),Gl=function(n){_a(e,n);function e(i,o){i===void 0&&(i=[]),o===void 0&&(o=!0);var s=n.call(this)||this;return Array.isArray(i)?(s.vector=o?xs([],bs(i),!1):i,s.length=i.length):(s.vector=[],i.forEach(function(a){return s.pushBack(a)})),s.size=s.size.bind(s),s.getElementByPos=s.getElementByPos.bind(s),s.setElementByPos=s.setElementByPos.bind(s),s}return e.prototype.clear=function(){this.length=0,this.vector.length=0},e.prototype.begin=function(){return new ci(0,this.size,this.getElementByPos,this.setElementByPos)},e.prototype.end=function(){return new ci(this.length,this.size,this.getElementByPos,this.setElementByPos)},e.prototype.rBegin=function(){return new ci(this.length-1,this.size,this.getElementByPos,this.setElementByPos,Vt.REVERSE)},e.prototype.rEnd=function(){return new ci(-1,this.size,this.getElementByPos,this.setElementByPos,Vt.REVERSE)},e.prototype.front=function(){return this.vector[0]},e.prototype.back=function(){return this.vector[this.length-1]},e.prototype.forEach=function(i){for(var o=0;o<this.length;++o)i(this.vector[o],o)},e.prototype.getElementByPos=function(i){return Ht(i,0,this.length-1),this.vector[i]},e.prototype.eraseElementByPos=function(i){Ht(i,0,this.length-1),this.vector.splice(i,1),this.length-=1},e.prototype.eraseElementByValue=function(i){for(var o=0,s=0;s<this.length;++s)this.vector[s]!==i&&(this.vector[o++]=this.vector[s]);this.length=this.vector.length=o},e.prototype.eraseElementByIterator=function(i){var o=i.node;return i=i.next(),this.eraseElementByPos(o),i},e.prototype.pushBack=function(i){this.vector.push(i),this.length+=1},e.prototype.popBack=function(){!this.length||(this.vector.pop(),this.length-=1)},e.prototype.setElementByPos=function(i,o){Ht(i,0,this.length-1),this.vector[i]=o},e.prototype.insert=function(i,o,s){var a;s===void 0&&(s=1),Ht(i,0,this.length),(a=this.vector).splice.apply(a,xs([i,0],bs(new Array(s).fill(o)),!1)),this.length+=s},e.prototype.find=function(i){for(var o=0;o<this.length;++o)if(this.vector[o]===i)return new ci(o,this.size,this.getElementByPos,this.getElementByPos);return this.end()},e.prototype.reverse=function(){this.vector.reverse()},e.prototype.unique=function(){for(var i=1,o=1;o<this.length;++o)this.vector[o]!==this.vector[o-1]&&(this.vector[i++]=this.vector[o]);this.length=this.vector.length=i},e.prototype.sort=function(i){this.vector.sort(i)},e.prototype[Symbol.iterator]=function(){return function(){return $l(this,function(i){switch(i.label){case 0:return[5,Kl(this.vector)];case 1:return[2,i.sent()]}})}.bind(this)()},e}(Nn);const Ut=Gl;var ga=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ql=globalThis&&globalThis.__generator||function(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(y){return g([c,y])}}function g(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(y){c=[6,y],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ni=function(){function n(e){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=e}return n}(),di=function(n){ga(e,n);function e(i,o,s){var a=n.call(this,s)||this;return a.node=i,a.header=o,a.iteratorType===Vt.NORMAL?(a.pre=function(){if(this.node.pre===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre,this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next,this}):(a.pre=function(){if(this.node.next===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next,this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre,this}),a}return Object.defineProperty(e.prototype,"pointer",{get:function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node.value},set:function(i){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");this.node.value=i},enumerable:!1,configurable:!0}),e.prototype.equals=function(i){return this.node===i.node},e.prototype.copy=function(){return new e(this.node,this.header,this.iteratorType)},e}(Vt),Yl=function(n){ga(e,n);function e(i){i===void 0&&(i=[]);var o=n.call(this)||this;return o.header=new Ni,o.head=void 0,o.tail=void 0,i.forEach(function(s){return o.pushBack(s)}),o}return e.prototype.clear=function(){this.length=0,this.head=this.tail=void 0,this.header.pre=this.header.next=void 0},e.prototype.begin=function(){return new di(this.head||this.header,this.header)},e.prototype.end=function(){return new di(this.header,this.header)},e.prototype.rBegin=function(){return new di(this.tail||this.header,this.header,Vt.REVERSE)},e.prototype.rEnd=function(){return new di(this.header,this.header,Vt.REVERSE)},e.prototype.front=function(){return this.head?this.head.value:void 0},e.prototype.back=function(){return this.tail?this.tail.value:void 0},e.prototype.forEach=function(i){if(!!this.length)for(var o=this.head,s=0;o!==this.header;)i(o.value,s++),o=o.next},e.prototype.getElementByPos=function(i){Ht(i,0,this.length-1);for(var o=this.head;i--;)o=o.next;return o.value},e.prototype.eraseElementByPos=function(i){if(Ht(i,0,this.length-1),i===0)this.popFront();else if(i===this.length-1)this.popBack();else{for(var o=this.head;i--;)o=o.next;o=o;var s=o.pre,a=o.next;a.pre=s,s.next=a,this.length-=1}},e.prototype.eraseElementByValue=function(i){for(;this.head&&this.head.value===i;)this.popFront();for(;this.tail&&this.tail.value===i;)this.popBack();if(!!this.head)for(var o=this.head;o!==this.header;){if(o.value===i){var s=o.pre,a=o.next;a&&(a.pre=s),s&&(s.next=a),this.length-=1}o=o.next}},e.prototype.eraseElementByIterator=function(i){var o=i.node;if(o===this.header)throw new RangeError("Invalid iterator");if(i=i.next(),this.head===o)this.popFront();else if(this.tail===o)this.popBack();else{var s=o.pre,a=o.next;a&&(a.pre=s),s&&(s.next=a),this.length-=1}return i},e.prototype.pushBack=function(i){this.length+=1;var o=new Ni(i);this.tail?(this.tail.next=o,o.pre=this.tail,this.tail=o):(this.head=this.tail=o,this.header.next=this.head,this.head.pre=this.header),this.tail.next=this.header,this.header.pre=this.tail},e.prototype.popBack=function(){!this.tail||(this.length-=1,this.head===this.tail?(this.head=this.tail=void 0,this.header.next=void 0):(this.tail=this.tail.pre,this.tail&&(this.tail.next=void 0)),this.header.pre=this.tail,this.tail&&(this.tail.next=this.header))},e.prototype.setElementByPos=function(i,o){Ht(i,0,this.length-1);for(var s=this.head;i--;)s=s.next;s.value=o},e.prototype.insert=function(i,o,s){if(s===void 0&&(s=1),Ht(i,0,this.length),!(s<=0))if(i===0)for(;s--;)this.pushFront(o);else if(i===this.length)for(;s--;)this.pushBack(o);else{for(var a=this.head,h=1;h<i;++h)a=a.next;var f=a.next;for(this.length+=s;s--;)a.next=new Ni(o),a.next.pre=a,a=a.next;a.next=f,f&&(f.pre=a)}},e.prototype.find=function(i){if(!this.head)return this.end();for(var o=this.head;o!==this.header;){if(o.value===i)return new di(o,this.header);o=o.next}return this.end()},e.prototype.reverse=function(){if(!(this.length<=1))for(var i=this.head,o=this.tail,s=0;s<<1<this.length;){var a=i.value;i.value=o.value,o.value=a,i=i.next,o=o.pre,s+=1}},e.prototype.unique=function(){if(!(this.length<=1))for(var i=this.head;i!==this.header;){for(var o=i;o.next&&o.value===o.next.value;)o=o.next,this.length-=1;i.next=o.next,i.next&&(i.next.pre=i),i=i.next}},e.prototype.sort=function(i){if(!(this.length<=1)){var o=[];this.forEach(function(a){return o.push(a)}),o.sort(i);var s=this.head;o.forEach(function(a){s.value=a,s=s.next})}},e.prototype.pushFront=function(i){this.length+=1;var o=new Ni(i);this.head?(o.next=this.head,this.head.pre=o,this.head=o):(this.head=this.tail=o,this.tail.next=this.header,this.header.pre=this.tail),this.header.next=this.head,this.head.pre=this.header},e.prototype.popFront=function(){!this.head||(this.length-=1,this.head===this.tail?(this.head=this.tail=void 0,this.header.pre=this.tail):(this.head=this.head.next,this.head&&(this.head.pre=this.header)),this.header.next=this.head)},e.prototype.merge=function(i){var o=this;if(!this.head){i.forEach(function(a){return o.pushBack(a)});return}var s=this.head;i.forEach(function(a){for(;s&&s!==o.header&&s.value<=a;)s=s.next;if(s===o.header)o.pushBack(a),s=o.tail;else if(s===o.head)o.pushFront(a),s=o.head;else{o.length+=1;var h=s.pre;h.next=new Ni(a),h.next.pre=h,h.next.next=s,s.pre=h.next}})},e.prototype[Symbol.iterator]=function(){return function(){var i;return Ql(this,function(o){switch(o.label){case 0:if(!this.head)return[2];i=this.head,o.label=1;case 1:return i===this.header?[3,3]:[4,i.value];case 2:return o.sent(),i=i.next,[3,1];case 3:return[2]}})}.bind(this)()},e}(Nn);const Jl=Yl;var Xl=function(){function n(e,i){this.color=!0,this.key=void 0,this.value=void 0,this.left=void 0,this.right=void 0,this.parent=void 0,this.key=e,this.value=i}return n.prototype.pre=function(){var e=this;if(e.color===n.RED&&e.parent.parent===e)e=e.right;else if(e.left)for(e=e.left;e.right;)e=e.right;else{for(var i=e.parent;i.left===e;)e=i,i=e.parent;e=i}return e},n.prototype.next=function(){var e=this;if(e.right)for(e=e.right;e.left;)e=e.left;else{for(var i=e.parent;i.right===e;)e=i,i=e.parent;e.right!==i&&(e=i)}return e},n.prototype.rotateLeft=function(){var e=this.parent,i=this.right,o=i.left;return e.parent===this?e.parent=i:e.left===this?e.left=i:e.right=i,i.parent=e,i.left=this,this.parent=i,this.right=o,o&&(o.parent=this),i},n.prototype.rotateRight=function(){var e=this.parent,i=this.left,o=i.right;return e.parent===this?e.parent=i:e.left===this?e.left=i:e.right=i,i.parent=e,i.right=this,this.parent=i,this.left=o,o&&(o.parent=this),i},n.prototype.remove=function(){var e=this.parent;this===e.left?e.left=void 0:e.right=void 0},n.RED=!0,n.BLACK=!1,n}();const nt=Xl;var tf=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),Es=globalThis&&globalThis.__read||function(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var o=i.call(n),s,a=[],h;try{for(;(e===void 0||e-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return a},ef=function(n){tf(e,n);function e(i){i===void 0&&(i=function(s,a){return s<a?-1:s>a?1:0});var o=n.call(this)||this;return o.root=void 0,o.header=new nt,o.inOrderTraversal=function(s,a){if(s===void 0)return!1;var h=o.inOrderTraversal(s.left,a);return h||a(s)?!0:o.inOrderTraversal(s.right,a)},o.cmp=i,o}return e.prototype._lowerBound=function(i,o){for(var s;i;){var a=this.cmp(i.key,o);if(a<0)i=i.right;else if(a>0)s=i,i=i.left;else return i}return s===void 0?this.header:s},e.prototype._upperBound=function(i,o){for(var s;i;){var a=this.cmp(i.key,o);a<=0?i=i.right:a>0&&(s=i,i=i.left)}return s===void 0?this.header:s},e.prototype._reverseLowerBound=function(i,o){for(var s;i;){var a=this.cmp(i.key,o);if(a<0)s=i,i=i.right;else if(a>0)i=i.left;else return i}return s===void 0?this.header:s},e.prototype._reverseUpperBound=function(i,o){for(var s;i;){var a=this.cmp(i.key,o);a<0?(s=i,i=i.right):a>=0&&(i=i.left)}return s===void 0?this.header:s},e.prototype.eraseNodeSelfBalance=function(i){for(;;){var o=i.parent;if(o===this.header)return;if(i.color===nt.RED){i.color=nt.BLACK;return}if(i===o.left){var s=o.right;if(s.color===nt.RED)s.color=nt.BLACK,o.color=nt.RED,o===this.root?this.root=o.rotateLeft():o.rotateLeft();else if(s.color===nt.BLACK)if(s.right&&s.right.color===nt.RED){s.color=o.color,o.color=nt.BLACK,s.right.color=nt.BLACK,o===this.root?this.root=o.rotateLeft():o.rotateLeft();return}else s.left&&s.left.color===nt.RED?(s.color=nt.RED,s.left.color=nt.BLACK,s.rotateRight()):(s.color=nt.RED,i=o)}else{var s=o.left;if(s.color===nt.RED)s.color=nt.BLACK,o.color=nt.RED,o===this.root?this.root=o.rotateRight():o.rotateRight();else if(s.left&&s.left.color===nt.RED){s.color=o.color,o.color=nt.BLACK,s.left.color=nt.BLACK,o===this.root?this.root=o.rotateRight():o.rotateRight();return}else s.right&&s.right.color===nt.RED?(s.color=nt.RED,s.right.color=nt.BLACK,s.rotateLeft()):(s.color=nt.RED,i=o)}}},e.prototype.eraseNode=function(i){var o,s;if(this.length===1){this.clear();return}for(var a=i;a.left||a.right;){if(a.right)for(a=a.right;a.left;)a=a.left;else a.left&&(a=a.left);o=Es([a.key,i.key],2),i.key=o[0],a.key=o[1],s=Es([a.value,i.value],2),i.value=s[0],a.value=s[1],i=a}this.header.left===a?this.header.left=a.parent:this.header.right===a&&(this.header.right=a.parent),this.eraseNodeSelfBalance(a),a.remove(),this.length-=1,this.root.color=nt.BLACK},e.prototype.insertNodeSelfBalance=function(i){for(;;){var o=i.parent;if(o.color===nt.BLACK)return;var s=o.parent;if(o===s.left){var a=s.right;if(a&&a.color===nt.RED){if(a.color=o.color=nt.BLACK,s===this.root)return;s.color=nt.RED,i=s;continue}else if(i===o.right){if(i.color=nt.BLACK,i.left&&(i.left.parent=o),i.right&&(i.right.parent=s),o.right=i.left,s.left=i.right,i.left=o,i.right=s,s===this.root)this.root=i,this.header.parent=i;else{var h=s.parent;h.left===s?h.left=i:h.right=i}i.parent=s.parent,o.parent=i,s.parent=i}else o.color=nt.BLACK,s===this.root?this.root=s.rotateRight():s.rotateRight();s.color=nt.RED}else{var a=s.left;if(a&&a.color===nt.RED){if(a.color=o.color=nt.BLACK,s===this.root)return;s.color=nt.RED,i=s;continue}else if(i===o.left){if(i.color=nt.BLACK,i.left&&(i.left.parent=s),i.right&&(i.right.parent=o),s.right=i.left,o.left=i.right,i.left=s,i.right=o,s===this.root)this.root=i,this.header.parent=i;else{var h=s.parent;h.left===s?h.left=i:h.right=i}i.parent=s.parent,o.parent=i,s.parent=i}else o.color=nt.BLACK,s===this.root?this.root=s.rotateLeft():s.rotateLeft();s.color=nt.RED}return}},e.prototype.findElementNode=function(i,o){for(;i;){var s=this.cmp(i.key,o);if(s<0)i=i.right;else if(s>0)i=i.left;else return i}return i},e.prototype.set=function(i,o,s){if(this.root===void 0){this.length+=1,this.root=new nt(i,o),this.root.color=nt.BLACK,this.root.parent=this.header,this.header.parent=this.root,this.header.left=this.root,this.header.right=this.root;return}var a,h=this.header.left,f=this.cmp(h.key,i);if(f===0){h.value=o;return}else if(f>0)h.left=new nt(i,o),h.left.parent=h,a=h.left,this.header.left=a;else{var g=this.header.right,c=this.cmp(g.key,i);if(c===0){g.value=o;return}else if(c<0)g.right=new nt(i,o),g.right.parent=g,a=g.right,this.header.right=a;else{if(s!==void 0){var y=s.node;if(y!==this.header){var w=this.cmp(y.key,i);if(w===0){y.value=o;return}else if(w>0){var b=y.pre(),A=this.cmp(b.key,i);if(A===0){b.value=o;return}else A<0&&(a=new nt(i,o),b.right===void 0?(b.right=a,a.parent=b):(y.left=a,a.parent=y))}}}if(a===void 0)for(a=this.root;;){var O=this.cmp(a.key,i);if(O>0){if(a.left===void 0){a.left=new nt(i,o),a.left.parent=a,a=a.left;break}a=a.left}else if(O<0){if(a.right===void 0){a.right=new nt(i,o),a.right.parent=a,a=a.right;break}a=a.right}else{a.value=o;return}}}}this.length+=1,this.insertNodeSelfBalance(a)},e.prototype.clear=function(){this.length=0,this.root=void 0,this.header.parent=void 0,this.header.left=this.header.right=void 0},e.prototype.updateKeyByIterator=function(i,o){var s=i.node;if(s===this.header)throw new TypeError("Invalid iterator!");if(this.length===1)return s.key=o,!0;if(s===this.header.left)return this.cmp(s.next().key,o)>0?(s.key=o,!0):!1;if(s===this.header.right)return this.cmp(s.pre().key,o)<0?(s.key=o,!0):!1;var a=s.pre().key;if(this.cmp(a,o)>=0)return!1;var h=s.next().key;return this.cmp(h,o)<=0?!1:(s.key=o,!0)},e.prototype.eraseElementByPos=function(i){var o=this;Ht(i,0,this.length-1);var s=0;this.inOrderTraversal(this.root,function(a){return i===s?(o.eraseNode(a),!0):(s+=1,!1)})},e.prototype.eraseElementByKey=function(i){if(!!this.length){var o=this.findElementNode(this.root,i);o!==void 0&&this.eraseNode(o)}},e.prototype.eraseElementByIterator=function(i){var o=i.node;if(o===this.header)throw new RangeError("Invalid iterator");return o.right===void 0&&(i=i.next()),this.eraseNode(o),i},e.prototype.getHeight=function(){if(!this.length)return 0;var i=function(o){return o?Math.max(i(o.left),i(o.right))+1:0};return i(this.root)},e}(Kr);const Gr=ef;var nf=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),rf=function(n){nf(e,n);function e(i,o,s){var a=n.call(this,s)||this;return a.node=i,a.header=o,a.iteratorType===Vt.NORMAL?(a.pre=function(){if(this.node===this.header.left)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre(),this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next(),this}):(a.pre=function(){if(this.node===this.header.right)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.next(),this},a.next=function(){if(this.node===this.header)throw new RangeError("LinkList iterator access denied!");return this.node=this.node.pre(),this}),a}return e.prototype.equals=function(i){return this.node===i.node},e}(Vt);const ma=rf;var va=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),of=globalThis&&globalThis.__generator||function(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(y){return g([c,y])}}function g(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(y){c=[6,y],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},yn=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ve=function(n){va(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"pointer",{get:function(){if(this.node===this.header)throw new RangeError("OrderedSet iterator access denied!");return this.node.key},enumerable:!1,configurable:!0}),e.prototype.copy=function(){return new e(this.node,this.header,this.iteratorType)},e}(ma),sf=function(n){va(e,n);function e(i,o){i===void 0&&(i=[]);var s=n.call(this,o)||this;return s.iterationFunc=function(a){return of(this,function(h){switch(h.label){case 0:return a===void 0?[2]:[5,yn(this.iterationFunc(a.left))];case 1:return h.sent(),[4,a.key];case 2:return h.sent(),[5,yn(this.iterationFunc(a.right))];case 3:return h.sent(),[2]}})},i.forEach(function(a){return s.insert(a)}),s.iterationFunc=s.iterationFunc.bind(s),s}return e.prototype.begin=function(){return new ve(this.header.left||this.header,this.header)},e.prototype.end=function(){return new ve(this.header,this.header)},e.prototype.rBegin=function(){return new ve(this.header.right||this.header,this.header,Vt.REVERSE)},e.prototype.rEnd=function(){return new ve(this.header,this.header,Vt.REVERSE)},e.prototype.front=function(){return this.header.left?this.header.left.key:void 0},e.prototype.back=function(){return this.header.right?this.header.right.key:void 0},e.prototype.forEach=function(i){var o,s,a=0;try{for(var h=yn(this),f=h.next();!f.done;f=h.next()){var g=f.value;i(g,a++)}}catch(c){o={error:c}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}},e.prototype.getElementByPos=function(i){var o,s;Ht(i,0,this.length-1);var a,h=0;try{for(var f=yn(this),g=f.next();!g.done;g=f.next()){var c=g.value;h===i&&(a=c),h+=1}}catch(y){o={error:y}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return a},e.prototype.insert=function(i,o){this.set(i,void 0,o)},e.prototype.find=function(i){var o=this.findElementNode(this.root,i);return o!==void 0?new ve(o,this.header):this.end()},e.prototype.lowerBound=function(i){var o=this._lowerBound(this.root,i);return new ve(o,this.header)},e.prototype.upperBound=function(i){var o=this._upperBound(this.root,i);return new ve(o,this.header)},e.prototype.reverseLowerBound=function(i){var o=this._reverseLowerBound(this.root,i);return new ve(o,this.header)},e.prototype.reverseUpperBound=function(i){var o=this._reverseUpperBound(this.root,i);return new ve(o,this.header)},e.prototype.union=function(i){var o=this;i.forEach(function(s){return o.insert(s)})},e.prototype[Symbol.iterator]=function(){return this.iterationFunc(this.root)},e}(Gr);const Ke=sf;var ya=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),af=globalThis&&globalThis.__generator||function(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(y){return g([c,y])}}function g(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(y){c=[6,y],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ss=globalThis&&globalThis.__read||function(n,e){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var o=i.call(n),s,a=[],h;try{for(;(e===void 0||e-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(h)throw h.error}}return a},wn=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ye=function(n){ya(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"pointer",{get:function(){var i=this;if(this.node===this.header)throw new RangeError("OrderedMap iterator access denied");return new Proxy([],{get:function(o,s){if(s==="0")return i.node.key;if(s==="1")return i.node.value},set:function(o,s,a){if(s!=="1")throw new TypeError("props must be 1");return i.node.value=a,!0}})},enumerable:!1,configurable:!0}),e.prototype.copy=function(){return new e(this.node,this.header,this.iteratorType)},e}(ma),uf=function(n){ya(e,n);function e(i,o){i===void 0&&(i=[]);var s=n.call(this,o)||this;return s.iterationFunc=function(a){return af(this,function(h){switch(h.label){case 0:return a===void 0?[2]:[5,wn(this.iterationFunc(a.left))];case 1:return h.sent(),[4,[a.key,a.value]];case 2:return h.sent(),[5,wn(this.iterationFunc(a.right))];case 3:return h.sent(),[2]}})},s.iterationFunc=s.iterationFunc.bind(s),i.forEach(function(a){var h=Ss(a,2),f=h[0],g=h[1];return s.setElement(f,g)}),s}return e.prototype.begin=function(){return new ye(this.header.left||this.header,this.header)},e.prototype.end=function(){return new ye(this.header,this.header)},e.prototype.rBegin=function(){return new ye(this.header.right||this.header,this.header,Vt.REVERSE)},e.prototype.rEnd=function(){return new ye(this.header,this.header,Vt.REVERSE)},e.prototype.front=function(){if(!!this.length){var i=this.header.left;return[i.key,i.value]}},e.prototype.back=function(){if(!!this.length){var i=this.header.right;return[i.key,i.value]}},e.prototype.forEach=function(i){var o,s,a=0;try{for(var h=wn(this),f=h.next();!f.done;f=h.next()){var g=f.value;i(g,a++)}}catch(c){o={error:c}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}},e.prototype.lowerBound=function(i){var o=this._lowerBound(this.root,i);return new ye(o,this.header)},e.prototype.upperBound=function(i){var o=this._upperBound(this.root,i);return new ye(o,this.header)},e.prototype.reverseLowerBound=function(i){var o=this._reverseLowerBound(this.root,i);return new ye(o,this.header)},e.prototype.reverseUpperBound=function(i){var o=this._reverseUpperBound(this.root,i);return new ye(o,this.header)},e.prototype.setElement=function(i,o,s){this.set(i,o,s)},e.prototype.find=function(i){var o=this.findElementNode(this.root,i);return o!==void 0?new ye(o,this.header):this.end()},e.prototype.getElementByKey=function(i){var o=this.findElementNode(this.root,i);return o?o.value:void 0},e.prototype.getElementByPos=function(i){var o,s;Ht(i,0,this.length-1);var a,h=0;try{for(var f=wn(this),g=f.next();!g.done;g=f.next()){var c=g.value;if(h===i){a=c;break}h+=1}}catch(y){o={error:y}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return a},e.prototype.union=function(i){var o=this;i.forEach(function(s){var a=Ss(s,2),h=a[0],f=a[1];return o.setElement(h,f)})},e.prototype[Symbol.iterator]=function(){return this.iterationFunc(this.root)},e}(Gr);const Ie=uf;var hf=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),lf=function(n){hf(e,n);function e(i,o){i===void 0&&(i=16),o===void 0&&(o=function(a){var h;typeof a!="string"?h=JSON.stringify(a):h=a;for(var f=0,g=h.length,c=0;c<g;c++){var y=h.charCodeAt(c);f=(f<<5)-f+y,f|=0}return f>>>0});var s=n.call(this)||this;if(i<16||(i&i-1)!==0)throw new RangeError("InitBucketNum range error");return s.bucketNum=s.initBucketNum=i,s.hashFunc=o,s}return e.prototype.clear=function(){this.length=0,this.bucketNum=this.initBucketNum,this.hashTable=[]},e.sigma=.75,e.treeifyThreshold=8,e.untreeifyThreshold=6,e.minTreeifySize=64,e.maxBucketNum=1<<30,e}($i);const jt=lf;var ff=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),cf=globalThis&&globalThis.__generator||function(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(y){return g([c,y])}}function g(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(y){c=[6,y],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},df=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pf=function(n){ff(e,n);function e(i,o,s){i===void 0&&(i=[]);var a=n.call(this,o,s)||this;return a.hashTable=[],i.forEach(function(h){return a.insert(h)}),a}return e.prototype.reAllocate=function(){var i=this;if(!(this.bucketNum>=jt.maxBucketNum)){var o=[],s=this.bucketNum;this.bucketNum<<=1;for(var a=Object.keys(this.hashTable),h=a.length,f=function(y){var w=parseInt(a[y]),b=g.hashTable[w],A=b.size();if(A===0)return"continue";if(A===1){var O=b.front();return o[g.hashFunc(O)&g.bucketNum-1]=new Ut([O],!1),"continue"}var C=[],Z=[];b.forEach(function(P){var R=i.hashFunc(P);(R&s)===0?C.push(P):Z.push(P)}),b instanceof Ke?(C.length>jt.untreeifyThreshold?o[w]=new Ke(C):C.length&&(o[w]=new Ut(C,!1)),Z.length>jt.untreeifyThreshold?o[w+s]=new Ke(Z):Z.length&&(o[w+s]=new Ut(Z,!1))):(C.length>=jt.treeifyThreshold?o[w]=new Ke(C):C.length&&(o[w]=new Ut(C,!1)),Z.length>=jt.treeifyThreshold?o[w+s]=new Ke(Z):Z.length&&(o[w+s]=new Ut(Z,!1)))},g=this,c=0;c<h;++c)f(c);this.hashTable=o}},e.prototype.forEach=function(i){for(var o=Object.values(this.hashTable),s=o.length,a=0,h=0;h<s;++h)o[h].forEach(function(f){return i(f,a++)})},e.prototype.insert=function(i){var o=this.hashFunc(i)&this.bucketNum-1,s=this.hashTable[o];if(!s)this.hashTable[o]=new Ut([i],!1),this.length+=1;else{var a=s.size();if(s instanceof Ut){if(!s.find(i).equals(s.end()))return;if(s.pushBack(i),a+1>=jt.treeifyThreshold){if(this.bucketNum<=jt.minTreeifySize){this.length+=1,this.reAllocate();return}this.hashTable[o]=new Ke(s)}this.length+=1}else{s.insert(i);var h=s.size();this.length+=h-a}}this.length>this.bucketNum*jt.sigma&&this.reAllocate()},e.prototype.eraseElementByKey=function(i){var o=this.hashFunc(i)&this.bucketNum-1,s=this.hashTable[o];if(!!s){var a=s.size();if(a!==0)if(s instanceof Ut){s.eraseElementByValue(i);var h=s.size();this.length+=h-a}else{s.eraseElementByKey(i);var h=s.size();this.length+=h-a,h<=jt.untreeifyThreshold&&(this.hashTable[o]=new Ut(s))}}},e.prototype.find=function(i){var o=this.hashFunc(i)&this.bucketNum-1,s=this.hashTable[o];return s?!s.find(i).equals(s.end()):!1},e.prototype[Symbol.iterator]=function(){return function(){var i,o,s,a,h,f,g,c,y,w;return cf(this,function(b){switch(b.label){case 0:i=Object.values(this.hashTable),o=i.length,s=0,b.label=1;case 1:if(!(s<o))return[3,10];a=i[s],b.label=2;case 2:b.trys.push([2,7,8,9]),h=(y=void 0,df(a)),f=h.next(),b.label=3;case 3:return f.done?[3,6]:(g=f.value,[4,g]);case 4:b.sent(),b.label=5;case 5:return f=h.next(),[3,3];case 6:return[3,9];case 7:return c=b.sent(),y={error:c},[3,9];case 8:try{f&&!f.done&&(w=h.return)&&w.call(h)}finally{if(y)throw y.error}return[7];case 9:return++s,[3,1];case 10:return[2]}})}.bind(this)()},e}(jt);const _f=pf;var gf=globalThis&&globalThis.__extends||function(){var n=function(e,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])},n(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),mf=globalThis&&globalThis.__generator||function(n,e){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(c){return function(y){return g([c,y])}}function g(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=c[0]&2?s.return:c[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,c[1])).done)return a;switch(s=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,s=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(c[0]===6&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(y){c=[6,y],s=0}finally{o=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},zi=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],o=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vf=function(n){gf(e,n);function e(i,o,s){i===void 0&&(i=[]);var a=n.call(this,o,s)||this;return a.hashTable=[],i.forEach(function(h){return a.setElement(h[0],h[1])}),a}return e.prototype.reAllocate=function(){var i=this;if(!(this.bucketNum>=jt.maxBucketNum)){var o=[],s=this.bucketNum;this.bucketNum<<=1;for(var a=Object.keys(this.hashTable),h=a.length,f=function(y){var w=parseInt(a[y]),b=g.hashTable[w],A=b.size();if(A===0)return"continue";if(A===1){var O=b.front();return o[g.hashFunc(O[0])&g.bucketNum-1]=new Ut([O],!1),"continue"}var C=[],Z=[];b.forEach(function(P){var R=i.hashFunc(P[0]);(R&s)===0?C.push(P):Z.push(P)}),b instanceof Ie?(C.length>jt.untreeifyThreshold?o[w]=new Ie(C):C.length&&(o[w]=new Ut(C,!1)),Z.length>jt.untreeifyThreshold?o[w+s]=new Ie(Z):Z.length&&(o[w+s]=new Ut(Z,!1))):(C.length>=jt.treeifyThreshold?o[w]=new Ie(C):C.length&&(o[w]=new Ut(C,!1)),Z.length>=jt.treeifyThreshold?o[w+s]=new Ie(Z):Z.length&&(o[w+s]=new Ut(Z,!1)))},g=this,c=0;c<h;++c)f(c);this.hashTable=o}},e.prototype.forEach=function(i){for(var o=Object.values(this.hashTable),s=o.length,a=0,h=0;h<s;++h)o[h].forEach(function(f){return i(f,a++)})},e.prototype.setElement=function(i,o){var s,a,h=this.hashFunc(i)&this.bucketNum-1,f=this.hashTable[h];if(!f)this.length+=1,this.hashTable[h]=new Ut([[i,o]],!1);else{var g=f.size();if(f instanceof Ut){try{for(var c=zi(f),y=c.next();!y.done;y=c.next()){var w=y.value;if(w[0]===i){w[1]=o;return}}}catch(A){s={error:A}}finally{try{y&&!y.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(f.pushBack([i,o]),g+1>=e.treeifyThreshold){if(this.bucketNum<=e.minTreeifySize){this.length+=1,this.reAllocate();return}this.hashTable[h]=new Ie(this.hashTable[h])}this.length+=1}else{f.setElement(i,o);var b=f.size();this.length+=b-g}}this.length>this.bucketNum*e.sigma&&this.reAllocate()},e.prototype.getElementByKey=function(i){var o,s,a=this.hashFunc(i)&this.bucketNum-1,h=this.hashTable[a];if(!!h){if(h instanceof Ie)return h.getElementByKey(i);try{for(var f=zi(h),g=f.next();!g.done;g=f.next()){var c=g.value;if(c[0]===i)return c[1]}}catch(y){o={error:y}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}}},e.prototype.eraseElementByKey=function(i){var o,s,a=this.hashFunc(i)&this.bucketNum-1,h=this.hashTable[a];if(!!h)if(h instanceof Ut){var f=0;try{for(var g=zi(h),c=g.next();!c.done;c=g.next()){var y=c.value;if(y[0]===i){h.eraseElementByPos(f),this.length-=1;return}f+=1}}catch(A){o={error:A}}finally{try{c&&!c.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}}else{var w=h.size();h.eraseElementByKey(i);var b=h.size();this.length+=b-w,b<=jt.untreeifyThreshold&&(this.hashTable[a]=new Ut(h))}},e.prototype.find=function(i){var o,s,a=this.hashFunc(i)&this.bucketNum-1,h=this.hashTable[a];if(!h)return!1;if(h instanceof Ie)return!h.find(i).equals(h.end());try{for(var f=zi(h),g=f.next();!g.done;g=f.next()){var c=g.value;if(c[0]===i)return!0}}catch(y){o={error:y}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return!1},e.prototype[Symbol.iterator]=function(){return function(){var i,o,s,a,h,f,g,c,y,w;return mf(this,function(b){switch(b.label){case 0:i=Object.values(this.hashTable),o=i.length,s=0,b.label=1;case 1:if(!(s<o))return[3,10];a=i[s],b.label=2;case 2:b.trys.push([2,7,8,9]),h=(y=void 0,zi(a)),f=h.next(),b.label=3;case 3:return f.done?[3,6]:(g=f.value,[4,g]);case 4:b.sent(),b.label=5;case 5:return f=h.next(),[3,3];case 6:return[3,9];case 7:return c=b.sent(),y={error:c},[3,9];case 8:try{f&&!f.done&&(w=h.return)&&w.call(h)}finally{if(y)throw y.error}return[7];case 9:return++s,[3,1];case 10:return[2]}})}.bind(this)()},e}(jt);const yf=vf,wf=Object.freeze(Object.defineProperty({__proto__:null,Stack:Ml,Queue:ql,PriorityQueue:Vl,Vector:Ut,VectorIterator:ci,LinkList:Jl,LinkListIterator:di,Deque:pa,DequeIterator:fi,OrderedSet:Ke,OrderedSetIterator:ve,OrderedMap:Ie,OrderedMapIterator:ye,HashSet:_f,HashMap:yf,Container:Kr,ContainerIterator:Vt,SequentialContainer:Nn,TreeContainer:Gr,HashContainer:jt},Symbol.toStringTag,{value:"Module"})),bf=jr(wf);var de={exports:{}},Br,Ts;function xf(){if(Ts)return Br;Ts=1;var n=1e3,e=n*60,i=e*60,o=i*24,s=o*7,a=o*365.25;Br=function(y,w){w=w||{};var b=typeof y;if(b==="string"&&y.length>0)return h(y);if(b==="number"&&isFinite(y))return w.long?g(y):f(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function h(y){if(y=String(y),!(y.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(!!w){var b=parseFloat(w[1]),A=(w[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*s;case"days":case"day":case"d":return b*o;case"hours":case"hour":case"hrs":case"hr":case"h":return b*i;case"minutes":case"minute":case"mins":case"min":case"m":return b*e;case"seconds":case"second":case"secs":case"sec":case"s":return b*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function f(y){var w=Math.abs(y);return w>=o?Math.round(y/o)+"d":w>=i?Math.round(y/i)+"h":w>=e?Math.round(y/e)+"m":w>=n?Math.round(y/n)+"s":y+"ms"}function g(y){var w=Math.abs(y);return w>=o?c(y,w,o,"day"):w>=i?c(y,w,i,"hour"):w>=e?c(y,w,e,"minute"):w>=n?c(y,w,n,"second"):y+" ms"}function c(y,w,b,A){var O=w>=b*1.5;return Math.round(y/b)+" "+A+(O?"s":"")}return Br}function Ef(n){i.debug=i,i.default=i,i.coerce=g,i.disable=a,i.enable=s,i.enabled=h,i.humanize=xf(),i.destroy=c,Object.keys(n).forEach(y=>{i[y]=n[y]}),i.names=[],i.skips=[],i.formatters={};function e(y){let w=0;for(let b=0;b<y.length;b++)w=(w<<5)-w+y.charCodeAt(b),w|=0;return i.colors[Math.abs(w)%i.colors.length]}i.selectColor=e;function i(y){let w,b=null,A,O;function C(...Z){if(!C.enabled)return;const P=C,R=Number(new Date),N=R-(w||R);P.diff=N,P.prev=w,P.curr=R,w=R,Z[0]=i.coerce(Z[0]),typeof Z[0]!="string"&&Z.unshift("%O");let $=0;Z[0]=Z[0].replace(/%([a-zA-Z%])/g,(gt,vt)=>{if(gt==="%%")return"%";$++;const st=i.formatters[vt];if(typeof st=="function"){const it=Z[$];gt=st.call(P,it),Z.splice($,1),$--}return gt}),i.formatArgs.call(P,Z),(P.log||i.log).apply(P,Z)}return C.namespace=y,C.useColors=i.useColors(),C.color=i.selectColor(y),C.extend=o,C.destroy=i.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(A!==i.namespaces&&(A=i.namespaces,O=i.enabled(y)),O),set:Z=>{b=Z}}),typeof i.init=="function"&&i.init(C),C}function o(y,w){const b=i(this.namespace+(typeof w>"u"?":":w)+y);return b.log=this.log,b}function s(y){i.save(y),i.namespaces=y,i.names=[],i.skips=[];let w;const b=(typeof y=="string"?y:"").split(/[\s,]+/),A=b.length;for(w=0;w<A;w++)!b[w]||(y=b[w].replace(/\*/g,".*?"),y[0]==="-"?i.skips.push(new RegExp("^"+y.slice(1)+"$")):i.names.push(new RegExp("^"+y+"$")))}function a(){const y=[...i.names.map(f),...i.skips.map(f).map(w=>"-"+w)].join(",");return i.enable(""),y}function h(y){if(y[y.length-1]==="*")return!0;let w,b;for(w=0,b=i.skips.length;w<b;w++)if(i.skips[w].test(y))return!1;for(w=0,b=i.names.length;w<b;w++)if(i.names[w].test(y))return!0;return!1}function f(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function g(y){return y instanceof Error?y.stack||y.message:y}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var Sf=Ef;(function(n,e){e.formatArgs=o,e.save=s,e.load=a,e.useColors=i,e.storage=h(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;g.splice(1,0,c,"color: inherit");let y=0,w=0;g[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(y++,b==="%c"&&(w=y))}),g.splice(w,0,c)}e.log=console.debug||console.log||(()=>{});function s(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function a(){let g;try{g=e.storage.getItem("debug")}catch{}return!g&&typeof X<"u"&&"env"in X&&(g=X.env.DEBUG),g}function h(){try{return localStorage}catch{}}n.exports=Sf(e);const{formatters:f}=n.exports;f.j=function(g){try{return JSON.stringify(g)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(de,de.exports);const Tf=bf.OrderedSet,be=de.exports("number-allocator:trace"),Pf=de.exports("number-allocator:error");function Yt(n,e){this.low=n,this.high=e}Yt.prototype.equals=function(n){return this.low===n.low&&this.high===n.high};Yt.prototype.compare=function(n){return this.low<n.low&&this.high<n.low?-1:n.low<this.low&&n.high<this.low?1:0};function Ee(n,e){if(!(this instanceof Ee))return new Ee(n,e);this.min=n,this.max=e,this.ss=new Tf([],(i,o)=>i.compare(o)),be("Create"),this.clear()}Ee.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low};Ee.prototype.alloc=function(){if(this.ss.size()===0)return be("alloc():empty"),null;const n=this.ss.begin(),e=n.pointer.low,i=n.pointer.high,o=e;return o+1<=i?this.ss.updateKeyByIterator(n,new Yt(e+1,i)):this.ss.eraseElementByPos(0),be("alloc():"+o),o};Ee.prototype.use=function(n){const e=new Yt(n,n),i=this.ss.lowerBound(e);if(!i.equals(this.ss.end())){const o=i.pointer.low,s=i.pointer.high;return i.pointer.equals(e)?(this.ss.eraseElementByIterator(i),be("use():"+n),!0):o>n?!1:o===n?(this.ss.updateKeyByIterator(i,new Yt(o+1,s)),be("use():"+n),!0):s===n?(this.ss.updateKeyByIterator(i,new Yt(o,s-1)),be("use():"+n),!0):(this.ss.updateKeyByIterator(i,new Yt(n+1,s)),this.ss.insert(new Yt(o,n-1)),be("use():"+n),!0)}return be("use():failed"),!1};Ee.prototype.free=function(n){if(n<this.min||n>this.max){Pf("free():"+n+" is out of range");return}const e=new Yt(n,n),i=this.ss.upperBound(e);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin())){this.ss.insert(e);return}i.pre();const o=i.pointer.high;i.pointer.high+1===n?this.ss.updateKeyByIterator(i,new Yt(o,n)):this.ss.insert(e)}else if(i.equals(this.ss.begin()))if(n+1===i.pointer.low){const o=i.pointer.high-1,s=i.pointer.high;this.ss.updateKeyByIterator(i,new Yt(o,s))}else this.ss.insert(e);else{const o=i.pointer.low,s=i.pointer.high;i.pre();const a=i.pointer.low;if(i.pointer.high+1===n)if(n+1===o){this.ss.eraseElementByIterator(i);const f=i.pointer.high;this.ss.updateKeyByIterator(i,new Yt(a,f))}else this.ss.updateKeyByIterator(i,new Yt(a,n));else n+1===o?(this.ss.eraseElementByIterator(i.next()),this.ss.insert(new Yt(n,s))):this.ss.insert(e)}be("free():"+n)};Ee.prototype.clear=function(){be("clear()"),this.ss.clear(),this.ss.insert(new Yt(this.min,this.max))};Ee.prototype.intervalCount=function(){return this.ss.size()};Ee.prototype.dump=function(){console.log("length:"+this.ss.size());for(const n of this.ss)console.log(n)};var Lf=Ee;const Af=Lf;fa.NumberAllocator=Af;const If=Al,Bf=fa.NumberAllocator;function Fe(n){if(!(this instanceof Fe))return new Fe(n);n>0&&(this.aliasToTopic=new If({max:n}),this.topicToAlias={},this.numberAllocator=new Bf(1,n),this.max=n,this.length=0)}Fe.prototype.put=function(n,e){if(e===0||e>this.max)return!1;const i=this.aliasToTopic.get(e);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(e,n),this.topicToAlias[n]=e,this.numberAllocator.use(e),this.length=this.aliasToTopic.length,!0};Fe.prototype.getTopicByAlias=function(n){return this.aliasToTopic.get(n)};Fe.prototype.getAliasByTopic=function(n){const e=this.topicToAlias[n];return typeof e<"u"&&this.aliasToTopic.get(e),e};Fe.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0};Fe.prototype.getLruAlias=function(){const n=this.numberAllocator.firstVacant();return n||this.aliasToTopic.keys()[this.aliasToTopic.length-1]};var Cf=Fe,zn={},Fn={exports:{}};const{Buffer:ce}=W,wa=Symbol.for("BufferList");function It(n){if(!(this instanceof It))return new It(n);It._init.call(this,n)}It._init=function(e){Object.defineProperty(this,wa,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};It.prototype._new=function(e){return new It(e)};It.prototype._offset=function(e){if(e===0)return[0,0];let i=0;for(let o=0;o<this._bufs.length;o++){const s=i+this._bufs[o].length;if(e<s||o===this._bufs.length-1)return[o,e-i];i=s}};It.prototype._reverseOffset=function(n){const e=n[0];let i=n[1];for(let o=0;o<e;o++)i+=this._bufs[o].length;return i};It.prototype.get=function(e){if(e>this.length||e<0)return;const i=this._offset(e);return this._bufs[i[0]][i[1]]};It.prototype.slice=function(e,i){return typeof e=="number"&&e<0&&(e+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,e,i)};It.prototype.copy=function(e,i,o,s){if((typeof o!="number"||o<0)&&(o=0),(typeof s!="number"||s>this.length)&&(s=this.length),o>=this.length||s<=0)return e||ce.alloc(0);const a=!!e,h=this._offset(o),f=s-o;let g=f,c=a&&i||0,y=h[1];if(o===0&&s===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:ce.concat(this._bufs,this.length);for(let w=0;w<this._bufs.length;w++)this._bufs[w].copy(e,c),c+=this._bufs[w].length;return e}if(g<=this._bufs[h[0]].length-y)return a?this._bufs[h[0]].copy(e,i,y,y+g):this._bufs[h[0]].slice(y,y+g);a||(e=ce.allocUnsafe(f));for(let w=h[0];w<this._bufs.length;w++){const b=this._bufs[w].length-y;if(g>b)this._bufs[w].copy(e,c,y),c+=b;else{this._bufs[w].copy(e,c,y,y+g),c+=b;break}g-=b,y&&(y=0)}return e.length>c?e.slice(0,c):e};It.prototype.shallowSlice=function(e,i){if(e=e||0,i=typeof i!="number"?this.length:i,e<0&&(e+=this.length),i<0&&(i+=this.length),e===i)return this._new();const o=this._offset(e),s=this._offset(i),a=this._bufs.slice(o[0],s[0]+1);return s[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,s[1]),o[1]!==0&&(a[0]=a[0].slice(o[1])),this._new(a)};It.prototype.toString=function(e,i,o){return this.slice(i,o).toString(e)};It.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};It.prototype.duplicate=function(){const e=this._new();for(let i=0;i<this._bufs.length;i++)e.append(this._bufs[i]);return e};It.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(ce.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let i=0;i<e.length;i++)this.append(e[i]);else if(this._isBufferList(e))for(let i=0;i<e._bufs.length;i++)this.append(e._bufs[i]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(ce.from(e));return this};It.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};It.prototype.indexOf=function(n,e,i){if(i===void 0&&typeof e=="string"&&(i=e,e=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=ce.from([n]):typeof n=="string"?n=ce.from(n,i):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=ce.from(n.buffer,n.byteOffset,n.byteLength):ce.isBuffer(n)||(n=ce.from(n)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),n.length===0)return e>this.length?this.length:e;const o=this._offset(e);let s=o[0],a=o[1];for(;s<this._bufs.length;s++){const h=this._bufs[s];for(;a<h.length;)if(h.length-a>=n.length){const g=h.indexOf(n,a);if(g!==-1)return this._reverseOffset([s,g]);a=h.length-n.length+1}else{const g=this._reverseOffset([s,a]);if(this._match(g,n))return g;a++}a=0}return-1};It.prototype._match=function(n,e){if(this.length-n<e.length)return!1;for(let i=0;i<e.length;i++)if(this.get(n+i)!==e[i])return!1;return!0};(function(){const n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in n)(function(i){n[i]===null?It.prototype[i]=function(o,s){return this.slice(o,o+s)[i](0,s)}:It.prototype[i]=function(o=0){return this.slice(o,o+n[i])[i](0)}})(e)})();It.prototype._isBufferList=function(e){return e instanceof It||It.isBufferList(e)};It.isBufferList=function(e){return e!=null&&e[wa]};var Mf=It;const Qr=Me.exports.Duplex,kf=xe.exports,Ki=Mf;function Gt(n){if(!(this instanceof Gt))return new Gt(n);if(typeof n=="function"){this._callback=n;const e=function(o){this._callback&&(this._callback(o),this._callback=null)}.bind(this);this.on("pipe",function(o){o.on("error",e)}),this.on("unpipe",function(o){o.removeListener("error",e)}),n=null}Ki._init.call(this,n),Qr.call(this)}kf(Gt,Qr);Object.assign(Gt.prototype,Ki.prototype);Gt.prototype._new=function(e){return new Gt(e)};Gt.prototype._write=function(e,i,o){this._appendBuffer(e),typeof o=="function"&&o()};Gt.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};Gt.prototype.end=function(e){Qr.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};Gt.prototype._destroy=function(e,i){this._bufs.length=0,this.length=0,i(e)};Gt.prototype._isBufferList=function(e){return e instanceof Gt||e instanceof Ki||Gt.isBufferList(e)};Gt.isBufferList=Ki.isBufferList;Fn.exports=Gt;Fn.exports.BufferListStream=Gt;Fn.exports.BufferList=Ki;class Of{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}var Rf=Of,Yr={exports:{}};(function(n){const e=n.exports;e.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},e.codes={};for(const o in e.types){const s=e.types[o];e.codes[s]=o}e.CMD_SHIFT=4,e.CMD_MASK=240,e.DUP_MASK=8,e.QOS_MASK=3,e.QOS_SHIFT=1,e.RETAIN_MASK=1,e.VARBYTEINT_MASK=127,e.VARBYTEINT_FIN_MASK=128,e.VARBYTEINT_MAX=268435455,e.SESSIONPRESENT_MASK=1,e.SESSIONPRESENT_HEADER=W.Buffer.from([e.SESSIONPRESENT_MASK]),e.CONNACK_HEADER=W.Buffer.from([e.codes.connack<<e.CMD_SHIFT]),e.USERNAME_MASK=128,e.PASSWORD_MASK=64,e.WILL_RETAIN_MASK=32,e.WILL_QOS_MASK=24,e.WILL_QOS_SHIFT=3,e.WILL_FLAG_MASK=4,e.CLEAN_SESSION_MASK=2,e.CONNECT_HEADER=W.Buffer.from([e.codes.connect<<e.CMD_SHIFT]),e.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},e.propertiesCodes={};for(const o in e.properties){const s=e.properties[o];e.propertiesCodes[s]=o}e.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function i(o){return[0,1,2].map(s=>[0,1].map(a=>[0,1].map(h=>{const f=W.Buffer.alloc(1);return f.writeUInt8(e.codes[o]<<e.CMD_SHIFT|(a?e.DUP_MASK:0)|s<<e.QOS_SHIFT|h,0,!0),f})))}e.PUBLISH_HEADER=i("publish"),e.SUBSCRIBE_HEADER=i("subscribe"),e.SUBSCRIBE_OPTIONS_QOS_MASK=3,e.SUBSCRIBE_OPTIONS_NL_MASK=1,e.SUBSCRIBE_OPTIONS_NL_SHIFT=2,e.SUBSCRIBE_OPTIONS_RAP_MASK=1,e.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,e.SUBSCRIBE_OPTIONS_RH_MASK=3,e.SUBSCRIBE_OPTIONS_RH_SHIFT=4,e.SUBSCRIBE_OPTIONS_RH=[0,16,32],e.SUBSCRIBE_OPTIONS_NL=4,e.SUBSCRIBE_OPTIONS_RAP=8,e.SUBSCRIBE_OPTIONS_QOS=[0,1,2],e.UNSUBSCRIBE_HEADER=i("unsubscribe"),e.ACKS={unsuback:i("unsuback"),puback:i("puback"),pubcomp:i("pubcomp"),pubrel:i("pubrel"),pubrec:i("pubrec")},e.SUBACK_HEADER=W.Buffer.from([e.codes.suback<<e.CMD_SHIFT]),e.VERSION3=W.Buffer.from([3]),e.VERSION4=W.Buffer.from([4]),e.VERSION5=W.Buffer.from([5]),e.VERSION131=W.Buffer.from([131]),e.VERSION132=W.Buffer.from([132]),e.QOS=[0,1,2].map(o=>W.Buffer.from([o])),e.EMPTY={pingreq:W.Buffer.from([e.codes.pingreq<<4,0]),pingresp:W.Buffer.from([e.codes.pingresp<<4,0]),disconnect:W.Buffer.from([e.codes.disconnect<<4,0])}})(Yr);const Df=Fn.exports,Nf=Vi,Ps=Rf,St=Yr.exports,et=de.exports("mqtt-packet:parser");class Ln extends Nf{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof Ln?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Ln().parser(e)}_resetState(){et("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new Ps,this.error=null,this._list=Df(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),et("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,et("parse: state complete. _stateCounter is now: %d",this._stateCounter),et("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return et("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=St.types[e>>St.CMD_SHIFT],this.packet.retain=(e&St.RETAIN_MASK)!==0,this.packet.qos=e>>St.QOS_SHIFT&St.QOS_MASK,this.packet.dup=(e&St.DUP_MASK)!==0,et("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),et("_parseLength %d",e.value),!!e}_parsePayload(){et("_parsePayload: payload %O",this._list);let e=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return et("_parsePayload complete result: %s",e),e}_parseConnect(){et("_parseConnect");let e,i,o,s;const a={},h=this.packet,f=this._parseString();if(f===null)return this._emitError(new Error("Cannot parse protocolId"));if(f!=="MQTT"&&f!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(h.protocolId=f,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(h.protocolVersion=this._list.readUInt8(this._pos),h.protocolVersion>=128&&(h.bridgeMode=!0,h.protocolVersion=h.protocolVersion-128),h.protocolVersion!==3&&h.protocolVersion!==4&&h.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.username=this._list.readUInt8(this._pos)&St.USERNAME_MASK,a.password=this._list.readUInt8(this._pos)&St.PASSWORD_MASK,a.will=this._list.readUInt8(this._pos)&St.WILL_FLAG_MASK,a.will&&(h.will={},h.will.retain=(this._list.readUInt8(this._pos)&St.WILL_RETAIN_MASK)!==0,h.will.qos=(this._list.readUInt8(this._pos)&St.WILL_QOS_MASK)>>St.WILL_QOS_SHIFT),h.clean=(this._list.readUInt8(this._pos)&St.CLEAN_SESSION_MASK)!==0,this._pos++,h.keepalive=this._parseNum(),h.keepalive===-1)return this._emitError(new Error("Packet too short"));if(h.protocolVersion===5){const c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.properties=c)}const g=this._parseString();if(g===null)return this._emitError(new Error("Packet too short"));if(h.clientId=g,et("_parseConnect: packet.clientId: %s",h.clientId),a.will){if(h.protocolVersion===5){const c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(h.will.properties=c)}if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse will topic"));if(h.will.topic=e,et("_parseConnect: packet.will.topic: %s",h.will.topic),i=this._parseBuffer(),i===null)return this._emitError(new Error("Cannot parse will payload"));h.will.payload=i,et("_parseConnect: packet.will.paylaod: %s",h.will.payload)}if(a.username){if(s=this._parseString(),s===null)return this._emitError(new Error("Cannot parse username"));h.username=s,et("_parseConnect: packet.username: %s",h.username)}if(a.password){if(o=this._parseBuffer(),o===null)return this._emitError(new Error("Cannot parse password"));h.password=o}return this.settings=h,et("_parseConnect: complete"),h}_parseConnack(){et("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&St.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(e.properties=i)}et("_parseConnack: complete")}_parsePublish(){et("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(e.properties=i)}e.payload=this._list.slice(this._pos,e.length),et("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){et("_parseSubscribe");const e=this.packet;let i,o,s,a,h,f,g;if(e.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(e.properties=c)}for(;this._pos<e.length;){if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));o=this._parseByte(),s=o&St.SUBSCRIBE_OPTIONS_QOS_MASK,f=(o>>St.SUBSCRIBE_OPTIONS_NL_SHIFT&St.SUBSCRIBE_OPTIONS_NL_MASK)!==0,h=(o>>St.SUBSCRIBE_OPTIONS_RAP_SHIFT&St.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,a=o>>St.SUBSCRIBE_OPTIONS_RH_SHIFT&St.SUBSCRIBE_OPTIONS_RH_MASK,g={topic:i,qos:s},this.settings.protocolVersion===5?(g.nl=f,g.rap=h,g.rh=a):this.settings.bridgeMode&&(g.rh=0,g.rap=!0,g.nl=!0),et("_parseSubscribe: push subscription `%s` to subscription",g),e.subscriptions.push(g)}}}_parseSuback(){et("_parseSuback");const e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(e.properties=i)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){et("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(e.properties=i)}for(;this._pos<e.length;){const i=this._parseString();if(i===null)return this._emitError(new Error("Cannot parse topic"));et("_parseUnsubscribe: push topic `%s` to unsubscriptions",i),e.unsubscriptions.push(i)}}}_parseUnsuback(){et("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const i=this._parseProperties();for(Object.getOwnPropertyNames(i).length&&(e.properties=i),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){et("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(e.length>2?(e.reasonCode=this._parseByte(),et("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,e.length>3)){const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(e.properties=i)}return!0}_parseDisconnect(){const e=this.packet;if(et("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?e.reasonCode=this._parseByte():e.reasonCode=0;const i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(e.properties=i)}return et("_parseDisconnect result: true"),!0}_parseAuth(){et("_parseAuth");const e=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const i=this._parseProperties();return Object.getOwnPropertyNames(i).length&&(e.properties=i),et("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),e.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(et("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const i=this._parseNum(),o=i+this._pos;if(i===-1||o>this._list.length||o>this.packet.length)return null;const s=this._list.toString("utf8",this._pos,o);return this._pos+=i,et("_parseString: result: %s",s),s}_parseStringPair(){return et("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),i=e+this._pos;if(e===-1||i>this._list.length||i>this.packet.length)return null;const o=this._list.slice(this._pos,i);return this._pos+=e,et("_parseBuffer: result: %o",o),o}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,et("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,et("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){et("_parseVarByteNum");const i=4;let o=0,s=1,a=0,h=!1,f;const g=this._pos?this._pos:0;for(;o<i&&g+o<this._list.length;){if(f=this._list.readUInt8(g+o++),a+=s*(f&St.VARBYTEINT_MASK),s*=128,(f&St.VARBYTEINT_FIN_MASK)===0){h=!0;break}if(this._list.length<=o)break}return!h&&o===i&&this._list.length>=o&&this._emitError(new Error("Invalid variable byte integer")),g&&(this._pos+=o),h=h?e?{bytes:o,value:a}:a:!1,et("_parseVarByteNum: result: %o",h),h}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),et("_parseByte: result: %o",e),e}_parseByType(e){switch(et("_parseByType: type: %s",e),e){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){et("_parseProperties");const e=this._parseVarByteNum(),o=this._pos+e,s={};for(;this._pos<o;){const a=this._parseByte();if(!a)return this._emitError(new Error("Cannot parse property code type")),!1;const h=St.propertiesCodes[a];if(!h)return this._emitError(new Error("Unknown property")),!1;if(h==="userProperties"){s[h]||(s[h]=Object.create(null));const f=this._parseByType(St.propertiesTypes[h]);if(s[h][f.name])if(Array.isArray(s[h][f.name]))s[h][f.name].push(f.value);else{const g=s[h][f.name];s[h][f.name]=[g],s[h][f.name].push(f.value)}else s[h][f.name]=f.value;continue}s[h]?Array.isArray(s[h])?s[h].push(this._parseByType(St.propertiesTypes[h])):(s[h]=[s[h]],s[h].push(this._parseByType(St.propertiesTypes[h]))):s[h]=this._parseByType(St.propertiesTypes[h])}return s}_newPacket(){return et("_newPacket"),this.packet&&(this._list.consume(this.packet.length),et("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),et("_newPacket: new packet"),this.packet=new Ps,this._pos=0,!0}_emitError(e){et("_emitError"),this.error=e,this.emit("error",e)}}var zf=Ln;const Ff=65536,ba={},Uf=W.Buffer.isBuffer(W.Buffer.from([1,2]).subarray(0,1));function xa(n){const e=W.Buffer.allocUnsafe(2);return e.writeUInt8(n>>8,0),e.writeUInt8(n&255,0+1),e}function Zf(){for(let n=0;n<Ff;n++)ba[n]=xa(n)}function qf(n){let i=0,o=0;const s=W.Buffer.allocUnsafe(4);do i=n%128|0,n=n/128|0,n>0&&(i=i|128),s.writeUInt8(i,o++);while(n>0&&o<4);return n>0&&(o=0),Uf?s.subarray(0,o):s.slice(0,o)}function jf(n){const e=W.Buffer.allocUnsafe(4);return e.writeUInt32BE(n,0),e}var Hf={cache:ba,generateCache:Zf,generateNumber:xa,genBufVariableByteInt:qf,generate4ByteBuffer:jf},zr={exports:{}};typeof X>"u"||!X.version||X.version.indexOf("v0.")===0||X.version.indexOf("v1.")===0&&X.version.indexOf("v1.8.")!==0?zr.exports={nextTick:Wf}:zr.exports=X;function Wf(n,e,i,o){if(typeof n!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,a,h;switch(s){case 0:case 1:return X.nextTick(n);case 2:return X.nextTick(function(){n.call(null,e)});case 3:return X.nextTick(function(){n.call(null,e,i)});case 4:return X.nextTick(function(){n.call(null,e,i,o)});default:for(a=new Array(s-1),h=0;h<a.length;)a[h++]=arguments[h];return X.nextTick(function(){n.apply(null,a)})}}const rt=Yr.exports,Vf=W.Buffer.allocUnsafe(0),$f=W.Buffer.from([0]),Gi=Hf,Kf=zr.exports.nextTick,oe=de.exports("mqtt-packet:writeToStream"),An=Gi.cache,Gf=Gi.generateNumber,Qf=Gi.generateCache,Fr=Gi.genBufVariableByteInt,Yf=Gi.generate4ByteBuffer;let Jt=Ur,In=!0;function Ea(n,e,i){switch(oe("generate called"),e.cork&&(e.cork(),Kf(Jf,e)),In&&(In=!1,Qf()),oe("generate: packet.cmd: %s",n.cmd),n.cmd){case"connect":return Xf(n,e);case"connack":return tc(n,e,i);case"publish":return ec(n,e,i);case"puback":case"pubrec":case"pubrel":case"pubcomp":return ic(n,e,i);case"subscribe":return nc(n,e,i);case"suback":return rc(n,e,i);case"unsubscribe":return oc(n,e,i);case"unsuback":return sc(n,e,i);case"pingreq":case"pingresp":return ac(n,e);case"disconnect":return uc(n,e,i);case"auth":return hc(n,e,i);default:return e.emit("error",new Error("Unknown command")),!1}}Object.defineProperty(Ea,"cacheNumbers",{get(){return Jt===Ur},set(n){n?((!An||Object.keys(An).length===0)&&(In=!0),Jt=Ur):(In=!1,Jt=lc)}});function Jf(n){n.uncork()}function Xf(n,e,i){const o=n||{},s=o.protocolId||"MQTT";let a=o.protocolVersion||4;const h=o.will;let f=o.clean;const g=o.keepalive||0,c=o.clientId||"",y=o.username,w=o.password,b=o.properties;f===void 0&&(f=!0);let A=0;if(!s||typeof s!="string"&&!W.Buffer.isBuffer(s))return e.emit("error",new Error("Invalid protocolId")),!1;if(A+=s.length+2,a!==3&&a!==4&&a!==5)return e.emit("error",new Error("Invalid protocol version")),!1;if(A+=1,(typeof c=="string"||W.Buffer.isBuffer(c))&&(c||a>=4)&&(c||f))A+=W.Buffer.byteLength(c)+2;else{if(a<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(f*1===0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof g!="number"||g<0||g>65535||g%1!==0)return e.emit("error",new Error("Invalid keepalive")),!1;if(A+=2,A+=1,a===5){var O=Ue(e,b);if(!O)return!1;A+=O.length}if(h){if(typeof h!="object")return e.emit("error",new Error("Invalid will")),!1;if(!h.topic||typeof h.topic!="string")return e.emit("error",new Error("Invalid will topic")),!1;if(A+=W.Buffer.byteLength(h.topic)+2,A+=2,h.payload)if(h.payload.length>=0)typeof h.payload=="string"?A+=W.Buffer.byteLength(h.payload):A+=h.payload.length;else return e.emit("error",new Error("Invalid will payload")),!1;var C={};if(a===5){if(C=Ue(e,h.properties),!C)return!1;A+=C.length}}let Z=!1;if(y!=null)if(Cs(y))Z=!0,A+=W.Buffer.byteLength(y)+2;else return e.emit("error",new Error("Invalid username")),!1;if(w!=null){if(!Z)return e.emit("error",new Error("Username is required to use password")),!1;if(Cs(w))A+=Sa(w)+2;else return e.emit("error",new Error("Invalid password")),!1}e.write(rt.CONNECT_HEADER),ae(e,A),pi(e,s),o.bridgeMode&&(a+=128),e.write(a===131?rt.VERSION131:a===132?rt.VERSION132:a===4?rt.VERSION4:a===5?rt.VERSION5:rt.VERSION3);let P=0;return P|=y!=null?rt.USERNAME_MASK:0,P|=w!=null?rt.PASSWORD_MASK:0,P|=h&&h.retain?rt.WILL_RETAIN_MASK:0,P|=h&&h.qos?h.qos<<rt.WILL_QOS_SHIFT:0,P|=h?rt.WILL_FLAG_MASK:0,P|=f?rt.CLEAN_SESSION_MASK:0,e.write(W.Buffer.from([P])),Jt(e,g),a===5&&O.write(),pi(e,c),h&&(a===5&&C.write(),Je(e,h.topic),pi(e,h.payload)),y!=null&&pi(e,y),w!=null&&pi(e,w),!0}function tc(n,e,i){const o=i?i.protocolVersion:4,s=n||{},a=o===5?s.reasonCode:s.returnCode,h=s.properties;let f=2;if(typeof a!="number")return e.emit("error",new Error("Invalid return code")),!1;let g=null;if(o===5){if(g=Ue(e,h),!g)return!1;f+=g.length}return e.write(rt.CONNACK_HEADER),ae(e,f),e.write(s.sessionPresent?rt.SESSIONPRESENT_HEADER:$f),e.write(W.Buffer.from([a])),g!=null&&g.write(),!0}function ec(n,e,i){oe("publish: packet: %o",n);const o=i?i.protocolVersion:4,s=n||{},a=s.qos||0,h=s.retain?rt.RETAIN_MASK:0,f=s.topic,g=s.payload||Vf,c=s.messageId,y=s.properties;let w=0;if(typeof f=="string")w+=W.Buffer.byteLength(f)+2;else if(W.Buffer.isBuffer(f))w+=f.length+2;else return e.emit("error",new Error("Invalid topic")),!1;if(W.Buffer.isBuffer(g)?w+=g.length:w+=W.Buffer.byteLength(g),a&&typeof c!="number")return e.emit("error",new Error("Invalid messageId")),!1;a&&(w+=2);let b=null;if(o===5){if(b=Ue(e,y),!b)return!1;w+=b.length}return e.write(rt.PUBLISH_HEADER[a][s.dup?1:0][h?1:0]),ae(e,w),Jt(e,Sa(f)),e.write(f),a>0&&Jt(e,c),b!=null&&b.write(),oe("publish: payload: %o",g),e.write(g)}function ic(n,e,i){const o=i?i.protocolVersion:4,s=n||{},a=s.cmd||"puback",h=s.messageId,f=s.dup&&a==="pubrel"?rt.DUP_MASK:0;let g=0;const c=s.reasonCode,y=s.properties;let w=o===5?3:2;if(a==="pubrel"&&(g=1),typeof h!="number")return e.emit("error",new Error("Invalid messageId")),!1;let b=null;if(o===5&&typeof y=="object"){if(b=Qi(e,y,i,w),!b)return!1;w+=b.length}return e.write(rt.ACKS[a][g][f][0]),ae(e,w),Jt(e,h),o===5&&e.write(W.Buffer.from([c])),b!==null&&b.write(),!0}function nc(n,e,i){oe("subscribe: packet: ");const o=i?i.protocolVersion:4,s=n||{},a=s.dup?rt.DUP_MASK:0,h=s.messageId,f=s.subscriptions,g=s.properties;let c=0;if(typeof h!="number")return e.emit("error",new Error("Invalid messageId")),!1;c+=2;let y=null;if(o===5){if(y=Ue(e,g),!y)return!1;c+=y.length}if(typeof f=="object"&&f.length)for(let b=0;b<f.length;b+=1){const A=f[b].topic,O=f[b].qos;if(typeof A!="string")return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof O!="number")return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(o===5){if(typeof(f[b].nl||!1)!="boolean")return e.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(f[b].rap||!1)!="boolean")return e.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const P=f[b].rh||0;if(typeof P!="number"||P>2)return e.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}c+=W.Buffer.byteLength(A)+2+1}else return e.emit("error",new Error("Invalid subscriptions")),!1;oe("subscribe: writing to stream: %o",rt.SUBSCRIBE_HEADER),e.write(rt.SUBSCRIBE_HEADER[1][a?1:0][0]),ae(e,c),Jt(e,h),y!==null&&y.write();let w=!0;for(const b of f){const A=b.topic,O=b.qos,C=+b.nl,Z=+b.rap,P=b.rh;let R;Je(e,A),R=rt.SUBSCRIBE_OPTIONS_QOS[O],o===5&&(R|=C?rt.SUBSCRIBE_OPTIONS_NL:0,R|=Z?rt.SUBSCRIBE_OPTIONS_RAP:0,R|=P?rt.SUBSCRIBE_OPTIONS_RH[P]:0),w=e.write(W.Buffer.from([R]))}return w}function rc(n,e,i){const o=i?i.protocolVersion:4,s=n||{},a=s.messageId,h=s.granted,f=s.properties;let g=0;if(typeof a!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(g+=2,typeof h=="object"&&h.length)for(let y=0;y<h.length;y+=1){if(typeof h[y]!="number")return e.emit("error",new Error("Invalid qos vector")),!1;g+=1}else return e.emit("error",new Error("Invalid qos vector")),!1;let c=null;if(o===5){if(c=Qi(e,f,i,g),!c)return!1;g+=c.length}return e.write(rt.SUBACK_HEADER),ae(e,g),Jt(e,a),c!==null&&c.write(),e.write(W.Buffer.from(h))}function oc(n,e,i){const o=i?i.protocolVersion:4,s=n||{},a=s.messageId,h=s.dup?rt.DUP_MASK:0,f=s.unsubscriptions,g=s.properties;let c=0;if(typeof a!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(c+=2,typeof f=="object"&&f.length)for(let b=0;b<f.length;b+=1){if(typeof f[b]!="string")return e.emit("error",new Error("Invalid unsubscriptions")),!1;c+=W.Buffer.byteLength(f[b])+2}else return e.emit("error",new Error("Invalid unsubscriptions")),!1;let y=null;if(o===5){if(y=Ue(e,g),!y)return!1;c+=y.length}e.write(rt.UNSUBSCRIBE_HEADER[1][h?1:0][0]),ae(e,c),Jt(e,a),y!==null&&y.write();let w=!0;for(let b=0;b<f.length;b++)w=Je(e,f[b]);return w}function sc(n,e,i){const o=i?i.protocolVersion:4,s=n||{},a=s.messageId,h=s.dup?rt.DUP_MASK:0,f=s.granted,g=s.properties,c=s.cmd,y=0;let w=2;if(typeof a!="number")return e.emit("error",new Error("Invalid messageId")),!1;if(o===5)if(typeof f=="object"&&f.length)for(let A=0;A<f.length;A+=1){if(typeof f[A]!="number")return e.emit("error",new Error("Invalid qos vector")),!1;w+=1}else return e.emit("error",new Error("Invalid qos vector")),!1;let b=null;if(o===5){if(b=Qi(e,g,i,w),!b)return!1;w+=b.length}return e.write(rt.ACKS[c][y][h][0]),ae(e,w),Jt(e,a),b!==null&&b.write(),o===5&&e.write(W.Buffer.from(f)),!0}function ac(n,e,i){return e.write(rt.EMPTY[n.cmd])}function uc(n,e,i){const o=i?i.protocolVersion:4,s=n||{},a=s.reasonCode,h=s.properties;let f=o===5?1:0,g=null;if(o===5){if(g=Qi(e,h,i,f),!g)return!1;f+=g.length}return e.write(W.Buffer.from([rt.codes.disconnect<<4])),ae(e,f),o===5&&e.write(W.Buffer.from([a])),g!==null&&g.write(),!0}function hc(n,e,i){const o=i?i.protocolVersion:4,s=n||{},a=s.reasonCode,h=s.properties;let f=o===5?1:0;o!==5&&e.emit("error",new Error("Invalid mqtt version for auth packet"));const g=Qi(e,h,i,f);return g?(f+=g.length,e.write(W.Buffer.from([rt.codes.auth<<4])),ae(e,f),e.write(W.Buffer.from([a])),g!==null&&g.write(),!0):!1}const Ls={};function ae(n,e){if(e>rt.VARBYTEINT_MAX)return n.emit("error",new Error(`Invalid variable byte integer: ${e}`)),!1;let i=Ls[e];return i||(i=Fr(e),e<16384&&(Ls[e]=i)),oe("writeVarByteInt: writing to stream: %o",i),n.write(i)}function Je(n,e){const i=W.Buffer.byteLength(e);return Jt(n,i),oe("writeString: %s",e),n.write(e,"utf8")}function As(n,e,i){Je(n,e),Je(n,i)}function Ur(n,e){return oe("writeNumberCached: number: %d",e),oe("writeNumberCached: %o",An[e]),n.write(An[e])}function lc(n,e){const i=Gf(e);return oe("writeNumberGenerated: %o",i),n.write(i)}function fc(n,e){const i=Yf(e);return oe("write4ByteNumber: %o",i),n.write(i)}function pi(n,e){typeof e=="string"?Je(n,e):e?(Jt(n,e.length),n.write(e)):Jt(n,0)}function Ue(n,e){if(typeof e!="object"||e.length!=null)return{length:1,write(){Bs(n,{},0)}};let i=0;function o(a,h){const f=rt.propertiesTypes[a];let g=0;switch(f){case"byte":{if(typeof h!="boolean")return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=1+1;break}case"int8":{if(typeof h!="number"||h<0||h>255)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=1+1;break}case"binary":{if(h&&h===null)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=1+W.Buffer.byteLength(h)+2;break}case"int16":{if(typeof h!="number"||h<0||h>65535)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=1+2;break}case"int32":{if(typeof h!="number"||h<0||h>4294967295)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=1+4;break}case"var":{if(typeof h!="number"||h<0||h>268435455)return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=1+W.Buffer.byteLength(Fr(h));break}case"string":{if(typeof h!="string")return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=1+2+W.Buffer.byteLength(h.toString());break}case"pair":{if(typeof h!="object")return n.emit("error",new Error(`Invalid ${a}: ${h}`)),!1;g+=Object.getOwnPropertyNames(h).reduce((c,y)=>{const w=h[y];return Array.isArray(w)?c+=w.reduce((b,A)=>(b+=1+2+W.Buffer.byteLength(y.toString())+2+W.Buffer.byteLength(A.toString()),b),0):c+=1+2+W.Buffer.byteLength(y.toString())+2+W.Buffer.byteLength(h[y].toString()),c},0);break}default:return n.emit("error",new Error(`Invalid property ${a}: ${h}`)),!1}return g}if(e)for(const a in e){let h=0,f=0;const g=e[a];if(Array.isArray(g))for(let c=0;c<g.length;c++){if(f=o(a,g[c]),!f)return!1;h+=f}else{if(f=o(a,g),!f)return!1;h=f}if(!h)return!1;i+=h}return{length:W.Buffer.byteLength(Fr(i))+i,write(){Bs(n,e,i)}}}function Qi(n,e,i,o){const s=["reasonString","userProperties"],a=i&&i.properties&&i.properties.maximumPacketSize?i.properties.maximumPacketSize:0;let h=Ue(n,e);if(a)for(;o+h.length>a;){const f=s.shift();if(f&&e[f])delete e[f],h=Ue(n,e);else return!1}return h}function Is(n,e,i){switch(rt.propertiesTypes[e]){case"byte":{n.write(W.Buffer.from([rt.properties[e]])),n.write(W.Buffer.from([+i]));break}case"int8":{n.write(W.Buffer.from([rt.properties[e]])),n.write(W.Buffer.from([i]));break}case"binary":{n.write(W.Buffer.from([rt.properties[e]])),pi(n,i);break}case"int16":{n.write(W.Buffer.from([rt.properties[e]])),Jt(n,i);break}case"int32":{n.write(W.Buffer.from([rt.properties[e]])),fc(n,i);break}case"var":{n.write(W.Buffer.from([rt.properties[e]])),ae(n,i);break}case"string":{n.write(W.Buffer.from([rt.properties[e]])),Je(n,i);break}case"pair":{Object.getOwnPropertyNames(i).forEach(s=>{const a=i[s];Array.isArray(a)?a.forEach(h=>{n.write(W.Buffer.from([rt.properties[e]])),As(n,s.toString(),h.toString())}):(n.write(W.Buffer.from([rt.properties[e]])),As(n,s.toString(),a.toString()))});break}default:return n.emit("error",new Error(`Invalid property ${e} value: ${i}`)),!1}}function Bs(n,e,i){ae(n,i);for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==null){const s=e[o];if(Array.isArray(s))for(let a=0;a<s.length;a++)Is(n,o,s[a]);else Is(n,o,s)}}function Sa(n){return n?n instanceof W.Buffer?n.length:W.Buffer.byteLength(n):0}function Cs(n){return typeof n=="string"||n instanceof W.Buffer}var Ta=Ea;const cc=Ta,dc=Vi;function pc(n,e){const i=new _c;return cc(n,i,e),i.concat()}class _c extends dc{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const i=new Array(this._array.length),o=this._array;let s=0,a;for(a=0;a<o.length&&o[a]!==void 0;a++)typeof o[a]!="string"?i[a]=o[a].length:i[a]=W.Buffer.byteLength(o[a]),e+=i[a];const h=W.Buffer.allocUnsafe(e);for(a=0;a<o.length&&o[a]!==void 0;a++)typeof o[a]!="string"?(o[a].copy(h,s),s+=i[a]):(h.write(o[a],s),s+=i[a]);return h}}var gc=pc;zn.parser=zf.parser;zn.generate=gc;zn.writeToStream=Ta;function Ze(){if(!(this instanceof Ze))return new Ze;this.nextId=Math.max(1,Math.floor(Math.random()*65535))}Ze.prototype.allocate=function(){const n=this.nextId++;return this.nextId===65536&&(this.nextId=1),n};Ze.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1};Ze.prototype.register=function(n){return!0};Ze.prototype.deallocate=function(n){};Ze.prototype.clear=function(){};var mc=Ze;function vc(n,e,i){var o=this;this._callback=n,this._args=i,this._interval=setInterval(n,e,this._args),this.reschedule=function(s){s||(s=o._interval),o._interval&&clearInterval(o._interval),o._interval=setInterval(o._callback,s,o._args)},this.clear=function(){o._interval&&(clearInterval(o._interval),o._interval=void 0)},this.destroy=function(){o._interval&&clearInterval(o._interval),o._callback=void 0,o._interval=void 0,o._args=void 0}}function yc(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var n;if(arguments.length>0){n=new Array(arguments.length-2);for(var e=0;e<n.length;e++)n[e]=arguments[e+2]}return new vc(arguments[0],arguments[1],n)}var wc=yc,bc=xc;function gi(n){return n instanceof W.Buffer?W.Buffer.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function xc(n){if(n=n||{},n.circles)return Ec(n);return n.proto?o:i;function e(s,a){for(var h=Object.keys(s),f=new Array(h.length),g=0;g<h.length;g++){var c=h[g],y=s[c];typeof y!="object"||y===null?f[c]=y:y instanceof Date?f[c]=new Date(y):ArrayBuffer.isView(y)?f[c]=gi(y):f[c]=a(y)}return f}function i(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return e(s,i);if(s instanceof Map)return new Map(e(Array.from(s),i));if(s instanceof Set)return new Set(e(Array.from(s),i));var a={};for(var h in s)if(Object.hasOwnProperty.call(s,h)!==!1){var f=s[h];typeof f!="object"||f===null?a[h]=f:f instanceof Date?a[h]=new Date(f):f instanceof Map?a[h]=new Map(e(Array.from(f),i)):f instanceof Set?a[h]=new Set(e(Array.from(f),i)):ArrayBuffer.isView(f)?a[h]=gi(f):a[h]=i(f)}return a}function o(s){if(typeof s!="object"||s===null)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return e(s,o);if(s instanceof Map)return new Map(e(Array.from(s),o));if(s instanceof Set)return new Set(e(Array.from(s),o));var a={};for(var h in s){var f=s[h];typeof f!="object"||f===null?a[h]=f:f instanceof Date?a[h]=new Date(f):f instanceof Map?a[h]=new Map(e(Array.from(f),o)):f instanceof Set?a[h]=new Set(e(Array.from(f),o)):ArrayBuffer.isView(f)?a[h]=gi(f):a[h]=o(f)}return a}}function Ec(n){var e=[],i=[];return n.proto?a:s;function o(h,f){for(var g=Object.keys(h),c=new Array(g.length),y=0;y<g.length;y++){var w=g[y],b=h[w];if(typeof b!="object"||b===null)c[w]=b;else if(b instanceof Date)c[w]=new Date(b);else if(ArrayBuffer.isView(b))c[w]=gi(b);else{var A=e.indexOf(b);A!==-1?c[w]=i[A]:c[w]=f(b)}}return c}function s(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return o(h,s);if(h instanceof Map)return new Map(o(Array.from(h),s));if(h instanceof Set)return new Set(o(Array.from(h),s));var f={};e.push(h),i.push(f);for(var g in h)if(Object.hasOwnProperty.call(h,g)!==!1){var c=h[g];if(typeof c!="object"||c===null)f[g]=c;else if(c instanceof Date)f[g]=new Date(c);else if(c instanceof Map)f[g]=new Map(o(Array.from(c),s));else if(c instanceof Set)f[g]=new Set(o(Array.from(c),s));else if(ArrayBuffer.isView(c))f[g]=gi(c);else{var y=e.indexOf(c);y!==-1?f[g]=i[y]:f[g]=s(c)}}return e.pop(),i.pop(),f}function a(h){if(typeof h!="object"||h===null)return h;if(h instanceof Date)return new Date(h);if(Array.isArray(h))return o(h,a);if(h instanceof Map)return new Map(o(Array.from(h),a));if(h instanceof Set)return new Set(o(Array.from(h),a));var f={};e.push(h),i.push(f);for(var g in h){var c=h[g];if(typeof c!="object"||c===null)f[g]=c;else if(c instanceof Date)f[g]=new Date(c);else if(c instanceof Map)f[g]=new Map(o(Array.from(c),a));else if(c instanceof Set)f[g]=new Set(o(Array.from(c),a));else if(ArrayBuffer.isView(c))f[g]=gi(c);else{var y=e.indexOf(c);y!==-1?f[g]=i[y]:f[g]=a(c)}}return e.pop(),i.pop(),f}}var Sc=bc();function Tc(n){const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i]!=="+"){if(e[i]==="#")return i===e.length-1;if(e[i].indexOf("+")!==-1||e[i].indexOf("#")!==-1)return!1}return!0}function Pc(n){if(n.length===0)return"empty_topic_list";for(let e=0;e<n.length;e++)if(!Tc(n[e]))return n[e];return null}var Lc={validateTopics:Pc};const Pa=Vi.EventEmitter,Bn=ha,Ac=yl,Ic=Cf,La=zn,Bc=mc,Cc=Me.exports.Writable,Mc=xe.exports,kc=wc,Aa=Sc,Ia=Lc,Un=Wr,z=de.exports("mqttjs:client"),Jr=X?X.nextTick:function(n){setTimeout(n,0)},Xr=vi.setImmediate||function(n){Jr(n)},Ms={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0},Oc=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],Cn={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function Rc(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function Dc(n,e){if(n.options.protocolVersion===5&&e.cmd==="publish"){let i;e.properties&&(i=e.properties.topicAlias);const o=e.topic.toString();if(n.topicAliasSend)if(i){if(o.length!==0&&(z("applyTopicAlias :: register topic: %s - alias: %d",o,i),!n.topicAliasSend.put(o,i)))return z("applyTopicAlias :: error out of range. topic: %s - alias: %d",o,i),new Error("Sending Topic Alias out of range")}else o.length!==0&&(n.options.autoAssignTopicAlias?(i=n.topicAliasSend.getAliasByTopic(o),i?(e.topic="",e.properties={...e.properties,topicAlias:i},z("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",o,i)):(i=n.topicAliasSend.getLruAlias(),n.topicAliasSend.put(o,i),e.properties={...e.properties,topicAlias:i},z("applyTopicAlias :: auto assign topic: %s - alias: %d",o,i))):n.options.autoUseTopicAlias&&(i=n.topicAliasSend.getAliasByTopic(o),i&&(e.topic="",e.properties={...e.properties,topicAlias:i},z("applyTopicAlias :: auto use topic: %s - alias: %d",o,i))));else if(i)return z("applyTopicAlias :: error out of range. topic: %s - alias: %d",o,i),new Error("Sending Topic Alias out of range")}}function Ba(n,e){let i;e.properties&&(i=e.properties.topicAlias);let o=e.topic.toString();if(o.length===0){if(typeof i>"u")return new Error("Unregistered Topic Alias");if(o=n.topicAliasSend.getTopicByAlias(i),typeof o>"u")return new Error("Unregistered Topic Alias");e.topic=o}i&&delete e.properties.topicAlias}function mi(n,e,i){z("sendPacket :: packet: %O",e),z("sendPacket :: emitting `packetsend`"),n.emit("packetsend",e),z("sendPacket :: writing to stream");const o=La.writeToStream(e,n.stream,n.options);z("sendPacket :: writeToStream result %s",o),!o&&i&&i!==Wt?(z("sendPacket :: handle events on `drain` once through callback."),n.stream.once("drain",i)):i&&(z("sendPacket :: invoking cb"),i())}function Nc(n){n&&(z("flush: queue exists? %b",!!n),Object.keys(n).forEach(function(e){typeof n[e].cb=="function"&&(n[e].cb(new Error("Connection closed")),delete n[e])}))}function zc(n){n&&(z("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(n).forEach(function(e){n[e].volatile&&typeof n[e].cb=="function"&&(n[e].cb(new Error("Connection closed")),delete n[e])}))}function ks(n,e,i,o){z("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let s=e,a;if(s.cmd==="publish"&&(s=Aa(e),a=Ba(n,s),a))return i&&i(a);n.outgoingStore.put(s,function(f){if(f)return i&&i(f);o(),mi(n,e,i)})}function Wt(n){z("nop ::",n)}function ct(n,e){let i;const o=this;if(!(this instanceof ct))return new ct(n,e);this.options=e||{};for(i in Ms)typeof this.options[i]>"u"?this.options[i]=Ms[i]:this.options[i]=e[i];z("MqttClient :: options.protocol",e.protocol),z("MqttClient :: options.protocolVersion",e.protocolVersion),z("MqttClient :: options.username",e.username),z("MqttClient :: options.keepalive",e.keepalive),z("MqttClient :: options.reconnectPeriod",e.reconnectPeriod),z("MqttClient :: options.rejectUnauthorized",e.rejectUnauthorized),z("MqttClient :: options.topicAliasMaximum",e.topicAliasMaximum),this.options.clientId=typeof e.clientId=="string"?e.clientId:Rc(),z("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=e.protocolVersion===5&&e.customHandleAcks?e.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=n,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new Bc:this.options.messageIdProvider,this.outgoingStore=e.outgoingStore||new Bn,this.incomingStore=e.incomingStore||new Bn,this.queueQoSZero=e.queueQoSZero===void 0?!0:e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,e.topicAliasMaximum>0&&(e.topicAliasMaximum>65535?z("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new Ac(e.topicAliasMaximum)),this.on("connect",function(){const s=this.queue;function a(){const h=s.shift();z("deliver :: entry %o",h);let f=null;if(!h){o._resubscribe();return}f=h.packet,z("deliver :: call _sendPacket for %o",f);let g=!0;f.messageId&&f.messageId!==0&&(o.messageIdProvider.register(f.messageId)||(g=!1)),g?o._sendPacket(f,function(c){h.cb&&h.cb(c),a()}):(z("messageId: %d has already used. The message is skipped and removed.",f.messageId),a())}z("connect :: sending queued packets"),a()}),this.on("close",function(){z("close :: connected set to `false`"),this.connected=!1,z("close :: clearing connackTimer"),clearTimeout(this.connackTimer),z("close :: clearing ping timer"),o.pingTimer!==null&&(o.pingTimer.clear(),o.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),z("close :: calling _setupReconnect"),this._setupReconnect()}),Pa.call(this),z("MqttClient :: setting up stream"),this._setupStream()}Mc(ct,Pa);ct.prototype._setupStream=function(){const n=this,e=new Cc,i=La.parser(this.options);let o=null;const s=[];z("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),z("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),i.on("packet",function(c){z("parser :: on packet push to packets array."),s.push(c)});function a(){if(s.length)Jr(h);else{const c=o;o=null,c()}}function h(){z("work :: getting next packet in queue");const c=s.shift();if(c)z("work :: packet pulled from queue"),n._handlePacket(c,a);else{z("work :: no packets in queue");const y=o;o=null,z("work :: done flag is %s",!!y),y&&y()}}e._write=function(c,y,w){o=w,z("writable stream :: parsing buffer"),i.parse(c),h()};function f(c){z("streamErrorHandler :: error",c.message),Oc.includes(c.code)?(z("streamErrorHandler :: emitting error"),n.emit("error",c)):Wt(c)}z("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",f),this.stream.on("close",function(){z("(%s)stream :: on close",n.options.clientId),zc(n.outgoing),z("stream: emit close to MqttClient"),n.emit("close")}),z("_setupStream: sending packet `connect`");const g=Object.create(this.options);if(g.cmd="connect",this.topicAliasRecv&&(g.properties||(g.properties={}),this.topicAliasRecv&&(g.properties.topicAliasMaximum=this.topicAliasRecv.max)),mi(this,g),i.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return n.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const c=Un({cmd:"auth",reasonCode:0},this.options.authPacket);mi(this,c)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){z("!!connectTimeout hit!! Calling _cleanUp with force `true`"),n._cleanUp(!0)},this.options.connectTimeout)};ct.prototype._handlePacket=function(n,e){const i=this.options;if(i.protocolVersion===5&&i.properties&&i.properties.maximumPacketSize&&i.properties.maximumPacketSize<n.length)return this.emit("error",new Error("exceeding packets size "+n.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(z("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",n),n.cmd){case"publish":this._handlePublish(n,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(n),e();break;case"pubrel":this._handlePubrel(n,e);break;case"connack":this._handleConnack(n),e();break;case"auth":this._handleAuth(n),e();break;case"pingresp":this._handlePingresp(n),e();break;case"disconnect":this._handleDisconnect(n),e();break}};ct.prototype._checkDisconnecting=function(n){return this.disconnecting&&(n&&n!==Wt?n(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting};ct.prototype.publish=function(n,e,i,o){z("publish :: message `%s` to topic `%s`",e,n);const s=this.options;if(typeof i=="function"&&(o=i,i=null),i=Un({qos:0,retain:!1,dup:!1},i),this._checkDisconnecting(o))return this;const h=this,f=function(){let g=0;if((i.qos===1||i.qos===2)&&(g=h._nextId(),g===null))return z("No messageId left"),!1;const c={cmd:"publish",topic:n,payload:e,qos:i.qos,retain:i.retain,messageId:g,dup:i.dup};switch(s.protocolVersion===5&&(c.properties=i.properties),z("publish :: qos",i.qos),i.qos){case 1:case 2:h.outgoing[c.messageId]={volatile:!1,cb:o||Wt},z("MqttClient:publish: packet cmd: %s",c.cmd),h._sendPacket(c,void 0,i.cbStorePut);break;default:z("MqttClient:publish: packet cmd: %s",c.cmd),h._sendPacket(c,o,i.cbStorePut);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!f())&&this._storeProcessingQueue.push({invoke:f,cbStorePut:i.cbStorePut,callback:o}),this};ct.prototype.subscribe=function(){const n=this,e=new Array(arguments.length);for(let w=0;w<arguments.length;w++)e[w]=arguments[w];const i=[];let o=e.shift();const s=o.resubscribe;let a=e.pop()||Wt,h=e.pop();const f=this.options.protocolVersion;delete o.resubscribe,typeof o=="string"&&(o=[o]),typeof a!="function"&&(h=a,a=Wt);const g=Ia.validateTopics(o);if(g!==null)return Xr(a,new Error("Invalid topic "+g)),this;if(this._checkDisconnecting(a))return z("subscribe: discconecting true"),this;const c={qos:0};if(f===5&&(c.nl=!1,c.rap=!1,c.rh=0),h=Un(c,h),Array.isArray(o)?o.forEach(function(w){if(z("subscribe: array topic %s",w),!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,w)||n._resubscribeTopics[w].qos<h.qos||s){const b={topic:w,qos:h.qos};f===5&&(b.nl=h.nl,b.rap=h.rap,b.rh=h.rh,b.properties=h.properties),z("subscribe: pushing topic `%s` and qos `%s` to subs list",b.topic,b.qos),i.push(b)}}):Object.keys(o).forEach(function(w){if(z("subscribe: object topic %s",w),!Object.prototype.hasOwnProperty.call(n._resubscribeTopics,w)||n._resubscribeTopics[w].qos<o[w].qos||s){const b={topic:w,qos:o[w].qos};f===5&&(b.nl=o[w].nl,b.rap=o[w].rap,b.rh=o[w].rh,b.properties=h.properties),z("subscribe: pushing `%s` to subs list",b),i.push(b)}}),!i.length)return a(null,[]),this;const y=function(){const w=n._nextId();if(w===null)return z("No messageId left"),!1;const b={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:w};if(h.properties&&(b.properties=h.properties),n.options.resubscribe){z("subscribe :: resubscribe true");const A=[];i.forEach(function(O){if(n.options.reconnectPeriod>0){const C={qos:O.qos};f===5&&(C.nl=O.nl||!1,C.rap=O.rap||!1,C.rh=O.rh||0,C.properties=O.properties),n._resubscribeTopics[O.topic]=C,A.push(O.topic)}}),n.messageIdToTopic[b.messageId]=A}return n.outgoing[b.messageId]={volatile:!0,cb:function(A,O){if(!A){const C=O.granted;for(let Z=0;Z<C.length;Z+=1)i[Z].qos=C[Z]}a(A,i)}},z("subscribe :: call _sendPacket"),n._sendPacket(b),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!y())&&this._storeProcessingQueue.push({invoke:y,callback:a}),this};ct.prototype.unsubscribe=function(){const n=this,e=new Array(arguments.length);for(let f=0;f<arguments.length;f++)e[f]=arguments[f];let i=e.shift(),o=e.pop()||Wt,s=e.pop();typeof i=="string"&&(i=[i]),typeof o!="function"&&(s=o,o=Wt);const a=Ia.validateTopics(i);if(a!==null)return Xr(o,new Error("Invalid topic "+a)),this;if(n._checkDisconnecting(o))return this;const h=function(){const f=n._nextId();if(f===null)return z("No messageId left"),!1;const g={cmd:"unsubscribe",qos:1,messageId:f};return typeof i=="string"?g.unsubscriptions=[i]:Array.isArray(i)&&(g.unsubscriptions=i),n.options.resubscribe&&g.unsubscriptions.forEach(function(c){delete n._resubscribeTopics[c]}),typeof s=="object"&&s.properties&&(g.properties=s.properties),n.outgoing[g.messageId]={volatile:!0,cb:o},z("unsubscribe: call _sendPacket"),n._sendPacket(g),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!h())&&this._storeProcessingQueue.push({invoke:h,callback:o}),this};ct.prototype.end=function(n,e,i){const o=this;z("end :: (%s)",this.options.clientId),(n==null||typeof n!="boolean")&&(i=e||Wt,e=n,n=!1,typeof e!="object"&&(i=e,e=null,typeof i!="function"&&(i=Wt))),typeof e!="object"&&(i=e,e=null),z("end :: cb? %s",!!i),i=i||Wt;function s(){z("end :: closeStores: closing incoming and outgoing stores"),o.disconnected=!0,o.incomingStore.close(function(h){o.outgoingStore.close(function(f){if(z("end :: closeStores: emitting end"),o.emit("end"),i){const g=h||f;z("end :: closeStores: invoking callback with args"),i(g)}})}),o._deferredReconnect&&o._deferredReconnect()}function a(){z("end :: (%s) :: finish :: calling _cleanUp with force %s",o.options.clientId,n),o._cleanUp(n,()=>{z("end :: finish :: calling process.nextTick on closeStores"),Jr(s.bind(o))},e)}return this.disconnecting?(i(),this):(this._clearReconnect(),this.disconnecting=!0,!n&&Object.keys(this.outgoing).length>0?(z("end :: (%s) :: calling finish in 10ms once outgoing is empty",o.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,a,10))):(z("end :: (%s) :: immediately calling finish",o.options.clientId),a()),this)};ct.prototype.removeOutgoingMessage=function(n){const e=this.outgoing[n]?this.outgoing[n].cb:null;return delete this.outgoing[n],this.outgoingStore.del({messageId:n},function(){e(new Error("Message removed"))}),this};ct.prototype.reconnect=function(n){z("client reconnect");const e=this,i=function(){n?(e.options.incomingStore=n.incomingStore,e.options.outgoingStore=n.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new Bn,e.outgoingStore=e.options.outgoingStore||new Bn,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=i:i(),this};ct.prototype._reconnect=function(){z("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),z("client already connected. disconnecting first.")):(z("_reconnect: calling _setupStream"),this._setupStream())};ct.prototype._setupReconnect=function(){const n=this;!n.disconnecting&&!n.reconnectTimer&&n.options.reconnectPeriod>0?(this.reconnecting||(z("_setupReconnect :: emit `offline` state"),this.emit("offline"),z("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),z("_setupReconnect :: setting reconnectTimer for %d ms",n.options.reconnectPeriod),n.reconnectTimer=setInterval(function(){z("reconnectTimer :: reconnect triggered!"),n._reconnect()},n.options.reconnectPeriod)):z("_setupReconnect :: doing nothing...")};ct.prototype._clearReconnect=function(){z("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)};ct.prototype._cleanUp=function(n,e){const i=arguments[2];if(e&&(z("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",e)),z("_cleanUp :: forced? %s",n),n)this.options.reconnectPeriod===0&&this.options.clean&&Nc(this.outgoing),z("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const o=Un({cmd:"disconnect"},i);z("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(o,Xr.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(z("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(z("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(z("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())};ct.prototype._sendPacket=function(n,e,i){z("_sendPacket :: (%s) ::  start",this.options.clientId),i=i||Wt,e=e||Wt;const o=Dc(this,n);if(o){e(o);return}if(!this.connected){if(n.cmd==="auth"){this._shiftPingInterval(),mi(this,n,e);return}z("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(n,e,i);return}switch(this._shiftPingInterval(),n.cmd){case"publish":break;case"pubrel":ks(this,n,e,i);return;default:mi(this,n,e);return}switch(n.qos){case 2:case 1:ks(this,n,e,i);break;case 0:default:mi(this,n,e);break}z("_sendPacket :: (%s) ::  end",this.options.clientId)};ct.prototype._storePacket=function(n,e,i){z("_storePacket :: packet: %o",n),z("_storePacket :: cb? %s",!!e),i=i||Wt;let o=n;if(o.cmd==="publish"){o=Aa(n);const s=Ba(this,o);if(s)return e&&e(s)}(o.qos||0)===0&&this.queueQoSZero||o.cmd!=="publish"?this.queue.push({packet:o,cb:e}):o.qos>0?(e=this.outgoing[o.messageId]?this.outgoing[o.messageId].cb:null,this.outgoingStore.put(o,function(s){if(s)return e&&e(s);i()})):e&&e(new Error("No connection to broker"))};ct.prototype._setupPingTimer=function(){z("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const n=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=kc(function(){n._checkPing()},this.options.keepalive*1e3))};ct.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)};ct.prototype._checkPing=function(){z("_checkPing :: checking ping..."),this.pingResp?(z("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(z("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))};ct.prototype._handlePingresp=function(){this.pingResp=!0};ct.prototype._handleConnack=function(n){z("_handleConnack");const e=this.options,o=e.protocolVersion===5?n.reasonCode:n.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,n.properties){if(n.properties.topicAliasMaximum){if(n.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}n.properties.topicAliasMaximum>0&&(this.topicAliasSend=new Ic(n.properties.topicAliasMaximum))}n.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=n.properties.serverKeepAlive,this._shiftPingInterval()),n.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=n.properties.maximumPacketSize)}if(o===0)this.reconnecting=!1,this._onConnect(n);else if(o>0){const s=new Error("Connection refused: "+Cn[o]);s.code=o,this.emit("error",s)}};ct.prototype._handleAuth=function(n){const i=this.options.protocolVersion,o=i===5?n.reasonCode:n.returnCode;if(i!==5){const a=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+i);a.code=o,this.emit("error",a);return}const s=this;this.handleAuth(n,function(a,h){if(a){s.emit("error",a);return}if(o===24)s.reconnecting=!1,s._sendPacket(h);else{const f=new Error("Connection refused: "+Cn[o]);a.code=o,s.emit("error",f)}})};ct.prototype.handleAuth=function(n,e){e()};ct.prototype._handlePublish=function(n,e){z("_handlePublish: packet %o",n),e=typeof e<"u"?e:Wt;let i=n.topic.toString();const o=n.payload,s=n.qos,a=n.messageId,h=this,f=this.options,g=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let c;if(n.properties&&(c=n.properties.topicAlias),typeof c<"u")if(i.length===0)if(c>0&&c<=65535){const y=this.topicAliasRecv.getTopicByAlias(c);if(y)i=y,z("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,c);else{z("_handlePublish :: unregistered topic alias. alias: %d",c),this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{z("_handlePublish :: topic alias out of range. alias: %d",c),this.emit("error",new Error("Received Topic Alias is out of range"));return}else if(this.topicAliasRecv.put(i,c))z("_handlePublish :: registered topic: %s - alias: %d",i,c);else{z("_handlePublish :: topic alias out of range. alias: %d",c),this.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(z("_handlePublish: qos %d",s),s){case 2:{f.customHandleAcks(i,o,n,function(c,y){if(c instanceof Error||(y=c,c=null),c)return h.emit("error",c);if(g.indexOf(y)===-1)return h.emit("error",new Error("Wrong reason code for pubrec"));y?h._sendPacket({cmd:"pubrec",messageId:a,reasonCode:y},e):h.incomingStore.put(n,function(){h._sendPacket({cmd:"pubrec",messageId:a},e)})});break}case 1:{f.customHandleAcks(i,o,n,function(c,y){if(c instanceof Error||(y=c,c=null),c)return h.emit("error",c);if(g.indexOf(y)===-1)return h.emit("error",new Error("Wrong reason code for puback"));y||h.emit("message",i,o,n),h.handleMessage(n,function(w){if(w)return e&&e(w);h._sendPacket({cmd:"puback",messageId:a,reasonCode:y},e)})});break}case 0:this.emit("message",i,o,n),this.handleMessage(n,e);break;default:z("_handlePublish: unknown QoS. Doing nothing.");break}};ct.prototype.handleMessage=function(n,e){e()};ct.prototype._handleAck=function(n){const e=n.messageId,i=n.cmd;let o=null;const s=this.outgoing[e]?this.outgoing[e].cb:null,a=this;let h;if(!s){z("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(z("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{const f=n.reasonCode;f&&f>0&&f!==16&&(h=new Error("Publish error: "+Cn[f]),h.code=f,s(h,n)),delete this.outgoing[e],this.outgoingStore.del(n,s),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue();break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:e};const f=n.reasonCode;f&&f>0&&f!==16?(h=new Error("Publish error: "+Cn[f]),h.code=f,s(h,n)):this._sendPacket(o);break}case"suback":{delete this.outgoing[e],this.messageIdProvider.deallocate(e);for(let f=0;f<n.granted.length;f++)if((n.granted[f]&128)!==0){const g=this.messageIdToTopic[e];g&&g.forEach(function(c){delete a._resubscribeTopics[c]})}this._invokeStoreProcessingQueue(),s(null,n);break}case"unsuback":{delete this.outgoing[e],this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue(),s(null);break}default:a.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")};ct.prototype._handlePubrel=function(n,e){z("handling pubrel packet"),e=typeof e<"u"?e:Wt;const i=n.messageId,o=this,s={cmd:"pubcomp",messageId:i};o.incomingStore.get(n,function(a,h){a?o._sendPacket(s,e):(o.emit("message",h.topic,h.payload,h),o.handleMessage(h,function(f){if(f)return e(f);o.incomingStore.del(h,Wt),o._sendPacket(s,e)}))})};ct.prototype._handleDisconnect=function(n){this.emit("disconnect",n)};ct.prototype._nextId=function(){return this.messageIdProvider.allocate()};ct.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()};ct.prototype._resubscribe=function(){z("_resubscribe");const n=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&n.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){z("_resubscribe: protocolVersion 5");for(let e=0;e<n.length;e++){const i={};i[n[e]]=this._resubscribeTopics[n[e]],i.resubscribe=!0,this.subscribe(i,{properties:i[n[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1};ct.prototype._onConnect=function(n){if(this.disconnected){this.emit("connect",n);return}const e=this;this.connackPacket=n,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;function i(){let o=e.outgoingStore.createStream();function s(){e._storeProcessing=!1,e._packetIdsDuringStoreProcessing={}}e.once("close",a),o.on("error",function(f){s(),e._flushStoreProcessingQueue(),e.removeListener("close",a),e.emit("error",f)});function a(){o.destroy(),o=null,e._flushStoreProcessingQueue(),s()}function h(){if(!o)return;e._storeProcessing=!0;const f=o.read(1);let g;if(!f){o.once("readable",h);return}if(e._packetIdsDuringStoreProcessing[f.messageId]){h();return}!e.disconnecting&&!e.reconnectTimer?(g=e.outgoing[f.messageId]?e.outgoing[f.messageId].cb:null,e.outgoing[f.messageId]={volatile:!1,cb:function(c,y){g&&g(c,y),h()}},e._packetIdsDuringStoreProcessing[f.messageId]=!0,e.messageIdProvider.register(f.messageId)?e._sendPacket(f):z("messageId: %d has already used.",f.messageId)):o.destroy&&o.destroy()}o.on("end",function(){let f=!0;for(const g in e._packetIdsDuringStoreProcessing)if(!e._packetIdsDuringStoreProcessing[g]){f=!1;break}f?(s(),e.removeListener("close",a),e._invokeAllStoreProcessingQueue(),e.emit("connect",n)):i()}),h()}i()};ct.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const n=this._storeProcessingQueue[0];if(n&&n.invoke())return this._storeProcessingQueue.shift(),!0}return!1};ct.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););};ct.prototype._flushStoreProcessingQueue=function(){for(const n of this._storeProcessingQueue)n.cbStorePut&&n.cbStorePut(new Error("Connection closed")),n.callback&&n.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)};var Fc=ct,Cr,Os;function Rs(){if(Os)return Cr;Os=1;const n=yi,e=de.exports("mqttjs:tcp");function i(o,s){s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";const a=s.port,h=s.hostname;return e("port %d and host %s",a,h),n.createConnection(a,h)}return Cr=i,Cr}var Mr,Ds;function kr(){if(Ds)return Mr;Ds=1;const n=yi,e=yi,i=de.exports("mqttjs:tls");function o(s,a){a.port=a.port||8883,a.host=a.hostname||a.host||"localhost",e.isIP(a.host)===0&&(a.servername=a.host),a.rejectUnauthorized=a.rejectUnauthorized!==!1,delete a.path,i("port %d host %s rejectUnauthorized %b",a.port,a.host,a.rejectUnauthorized);const h=n.connect(a);h.on("secureConnect",function(){a.rejectUnauthorized&&!h.authorized?h.emit("error",new Error("TLS not authorized")):h.removeListener("error",f)});function f(g){a.rejectUnauthorized&&s.emit("error",g),h.end()}return h.on("error",f),h}return Mr=o,Mr}var to={exports:{}},Uc=Ca;function Ca(n,e){if(n&&e)return Ca(n)(e);if(typeof n!="function")throw new TypeError("need wrapper function");return Object.keys(n).forEach(function(o){i[o]=n[o]}),i;function i(){for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];var a=n.apply(this,o),h=o[o.length-1];return typeof a=="function"&&a!==h&&Object.keys(h).forEach(function(f){a[f]=h[f]}),a}}var Ma=Uc;to.exports=Ma(Tn);to.exports.strict=Ma(ka);Tn.proto=Tn(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Tn(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ka(this)},configurable:!0})});function Tn(n){var e=function(){return e.called?e.value:(e.called=!0,e.value=n.apply(this,arguments))};return e.called=!1,e}function ka(n){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=n.apply(this,arguments)},i=n.name||"Function wrapped with `once`";return e.onceError=i+" shouldn't be called more than once",e.called=!1,e}var Zc=to.exports,qc=function(){},jc=function(n){return n.setHeader&&typeof n.abort=="function"},Hc=function(n){return n.stdio&&Array.isArray(n.stdio)&&n.stdio.length===3},Oa=function(n,e,i){if(typeof e=="function")return Oa(n,null,e);e||(e={}),i=Zc(i||qc);var o=n._writableState,s=n._readableState,a=e.readable||e.readable!==!1&&n.readable,h=e.writable||e.writable!==!1&&n.writable,f=!1,g=function(){n.writable||c()},c=function(){h=!1,a||i.call(n)},y=function(){a=!1,h||i.call(n)},w=function(Z){i.call(n,Z?new Error("exited with error code: "+Z):null)},b=function(Z){i.call(n,Z)},A=function(){X.nextTick(O)},O=function(){if(!f){if(a&&!(s&&s.ended&&!s.destroyed))return i.call(n,new Error("premature close"));if(h&&!(o&&o.ended&&!o.destroyed))return i.call(n,new Error("premature close"))}},C=function(){n.req.on("finish",c)};return jc(n)?(n.on("complete",c),n.on("abort",A),n.req?C():n.on("request",C)):h&&!o&&(n.on("end",g),n.on("close",g)),Hc(n)&&n.on("exit",w),n.on("end",y),n.on("finish",c),e.error!==!1&&n.on("error",b),n.on("close",A),function(){f=!0,n.removeListener("complete",c),n.removeListener("abort",A),n.removeListener("request",C),n.req&&n.req.removeListener("finish",c),n.removeListener("end",g),n.removeListener("close",g),n.removeListener("finish",c),n.removeListener("exit",w),n.removeListener("end",y),n.removeListener("error",b),n.removeListener("close",A)}},Wc=Oa,Vc=$c;function $c(n){var e=n._readableState;return e?e.objectMode||typeof n._duplexState=="number"?n.read():n.read(Kc(e)):null}function Kc(n){return n.buffer.length?n.buffer.head?n.buffer.head.data.length:n.buffer[0].length:n.length}var Zn=Me.exports,Ra=Wc,Gc=xe.exports,Qc=Vc,Da=W.Buffer.from&&W.Buffer.from!==Uint8Array.from?W.Buffer.from([0]):new W.Buffer([0]),Zr=function(n,e){n._corked?n.once("uncork",e):e()},Yc=function(n,e){n._autoDestroy&&n.destroy(e)},Na=function(n,e){return function(i){i?Yc(n,i.message==="premature close"?null:i):e&&!n._ended&&n.end()}},Jc=function(n,e){if(!n||n._writableState&&n._writableState.finished)return e();if(n._writableState)return n.end(e);n.end(),e()},Xc=function(){},td=function(n){return new Zn.Readable({objectMode:!0,highWaterMark:16}).wrap(n)},$t=function(n,e,i){if(!(this instanceof $t))return new $t(n,e,i);Zn.Duplex.call(this,i),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!i||i.autoDestroy!==!1,this._forwardDestroy=!i||i.destroy!==!1,this._forwardEnd=!i||i.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,n&&this.setWritable(n),e&&this.setReadable(e)};Gc($t,Zn.Duplex);$t.obj=function(n,e,i){return i||(i={}),i.objectMode=!0,i.highWaterMark=16,new $t(n,e,i)};$t.prototype.cork=function(){++this._corked===1&&this.emit("cork")};$t.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};$t.prototype.setWritable=function(n){if(this._unwrite&&this._unwrite(),this.destroyed){n&&n.destroy&&n.destroy();return}if(n===null||n===!1){this.end();return}var e=this,i=Ra(n,{writable:!0,readable:!1},Na(this,this._forwardEnd)),o=function(){var a=e._ondrain;e._ondrain=null,a&&a()},s=function(){e._writable.removeListener("drain",o),i()};this._unwrite&&X.nextTick(o),this._writable=n,this._writable.on("drain",o),this._unwrite=s,this.uncork()};$t.prototype.setReadable=function(n){if(this._unread&&this._unread(),this.destroyed){n&&n.destroy&&n.destroy();return}if(n===null||n===!1){this.push(null),this.resume();return}var e=this,i=Ra(n,{writable:!1,readable:!0},Na(this)),o=function(){e._forward()},s=function(){e.push(null)},a=function(){e._readable2.removeListener("readable",o),e._readable2.removeListener("end",s),i()};this._drained=!0,this._readable=n,this._readable2=n._readableState?n:td(n),this._readable2.on("readable",o),this._readable2.on("end",s),this._unread=a,this._forward()};$t.prototype._read=function(){this._drained=!0,this._forward()};$t.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var n;this._drained&&(n=Qc(this._readable2))!==null;)this.destroyed||(this._drained=this.push(n));this._forwarding=!1}};$t.prototype.destroy=function(n,e){if(e||(e=Xc),this.destroyed)return e(null);this.destroyed=!0;var i=this;X.nextTick(function(){i._destroy(n),e(null)})};$t.prototype._destroy=function(n){if(n){var e=this._ondrain;this._ondrain=null,e?e(n):this.emit("error",n)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};$t.prototype._write=function(n,e,i){if(!this.destroyed){if(this._corked)return Zr(this,this._write.bind(this,n,e,i));if(n===Da)return this._finish(i);if(!this._writable)return i();this._writable.write(n)===!1?this._ondrain=i:this.destroyed||i()}};$t.prototype._finish=function(n){var e=this;this.emit("preend"),Zr(this,function(){Jc(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),Zr(e,n)})})};$t.prototype.end=function(n,e,i){return typeof n=="function"?this.end(null,null,n):typeof e=="function"?this.end(n,null,e):(this._ended=!0,n&&this.write(n),!this._writableState.ending&&!this._writableState.destroyed&&this.write(Da),Zn.Writable.prototype.end.call(this,i))};var eo=$t,Or,Ns;function zs(){if(Ns)return Or;Ns=1;const{Buffer:n}=W,e=Me.exports.Transform,i=eo;let o,s,a;function h(){const w=new e;return w._write=function(b,A,O){o.send({data:b.buffer,success:function(){O()},fail:function(C){O(new Error(C))}})},w._flush=function(A){o.close({success:function(){A()}})},w}function f(w){w.hostname||(w.hostname="localhost"),w.path||(w.path="/"),w.wsOptions||(w.wsOptions={})}function g(w,b){const A=w.protocol==="wxs"?"wss":"ws";let O=A+"://"+w.hostname+w.path;return w.port&&w.port!==80&&w.port!==443&&(O=A+"://"+w.hostname+":"+w.port+w.path),typeof w.transformWsUrl=="function"&&(O=w.transformWsUrl(O,w,b)),O}function c(){o.onOpen(function(){a.setReadable(s),a.setWritable(s),a.emit("connect")}),o.onMessage(function(w){let b=w.data;b instanceof ArrayBuffer?b=n.from(b):b=n.from(b,"utf8"),s.push(b)}),o.onClose(function(){a.end(),a.destroy()}),o.onError(function(w){a.destroy(new Error(w.errMsg))})}function y(w,b){if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");const A=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";f(b);const O=g(b,w);o=wx.connectSocket({url:O,protocols:[A]}),s=h(),a=i.obj(),a._destroy=function(Z,P){o.close({success:function(){P&&P(Z)}})};const C=a.destroy;return a.destroy=function(){a.destroy=C;const Z=this;setTimeout(function(){o.close({fail:function(){Z._destroy(new Error)}})},0)}.bind(a),c(),a}return Or=y,Or}var Rr,Fs;function Us(){if(Fs)return Rr;Fs=1;const{Buffer:n}=W,e=Me.exports.Transform,i=eo;let o,s,a,h=!1;function f(){const b=new e;return b._write=function(A,O,C){o.sendSocketMessage({data:A.buffer,success:function(){C()},fail:function(){C(new Error)}})},b._flush=function(O){o.closeSocket({success:function(){O()}})},b}function g(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function c(b,A){const O=b.protocol==="alis"?"wss":"ws";let C=O+"://"+b.hostname+b.path;return b.port&&b.port!==80&&b.port!==443&&(C=O+"://"+b.hostname+":"+b.port+b.path),typeof b.transformWsUrl=="function"&&(C=b.transformWsUrl(C,b,A)),C}function y(){h||(h=!0,o.onSocketOpen(function(){a.setReadable(s),a.setWritable(s),a.emit("connect")}),o.onSocketMessage(function(b){if(typeof b.data=="string"){const A=n.from(b.data,"base64");s.push(A)}else{const A=new FileReader;A.addEventListener("load",function(){let O=A.result;O instanceof ArrayBuffer?O=n.from(O):O=n.from(O,"utf8"),s.push(O)}),A.readAsArrayBuffer(b.data)}}),o.onSocketClose(function(){a.end(),a.destroy()}),o.onSocketError(function(b){a.destroy(b)}))}function w(b,A){if(A.hostname=A.hostname||A.host,!A.hostname)throw new Error("Could not determine host. Specify host manually.");const O=A.protocolId==="MQIsdp"&&A.protocolVersion===3?"mqttv3.1":"mqtt";g(A);const C=c(A,b);return o=A.my,o.connectSocket({url:C,protocols:O}),s=f(),a=i.obj(),y(),a}return Rr=w,Rr}var Mn={exports:{}},ed=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")};const{Buffer:Fi}=W,za=ed,Zi=de.exports("mqttjs:ws"),id=eo,nd=Me.exports.Transform,rd=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],Fa=typeof X<"u"&&X.title==="browser"||typeof __webpack_require__=="function";function Ua(n,e){let i=n.protocol+"://"+n.hostname+":"+n.port+n.path;return typeof n.transformWsUrl=="function"&&(i=n.transformWsUrl(i,n,e)),i}function Za(n){const e=n;return n.hostname||(e.hostname="localhost"),n.port||(n.protocol==="wss"?e.port=443:e.port=80),n.path||(e.path="/"),n.wsOptions||(e.wsOptions={}),!Fa&&n.protocol==="wss"&&rd.forEach(function(i){Object.prototype.hasOwnProperty.call(n,i)&&!Object.prototype.hasOwnProperty.call(n.wsOptions,i)&&(e.wsOptions[i]=n[i])}),e}function od(n){const e=Za(n);if(e.hostname||(e.hostname=e.host),!e.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const i=new URL(document.URL);e.hostname=i.hostname,e.port||(e.port=i.port)}return e.objectMode===void 0&&(e.objectMode=!(e.binary===!0||e.binary===void 0)),e}function sd(n,e,i){Zi("createWebSocket"),Zi("protocol: "+i.protocolId+" "+i.protocolVersion);const o=i.protocolId==="MQIsdp"&&i.protocolVersion===3?"mqttv3.1":"mqtt";return Zi("creating new Websocket for url: "+e+" and protocol: "+o),new za(e,[o],i.wsOptions)}function ad(n,e){const i=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt",o=Ua(e,n),s=new WebSocket(o,[i]);return s.binaryType="arraybuffer",s}function ud(n,e){Zi("streamBuilder");const i=Za(e),o=Ua(i,n),s=sd(n,o,i),a=za.createWebSocketStream(s,i.wsOptions);return a.url=o,s.on("close",()=>{a.destroy()}),a}function hd(n,e){Zi("browserStreamBuilder");let i;const s=od(e).browserBufferSize||1024*512,a=e.browserBufferTimeout||1e3,h=!e.objectMode,f=ad(n,e),g=y(e,Z,P);e.objectMode||(g._writev=C),g.on("close",()=>{f.close()});const c=typeof f.addEventListener<"u";f.readyState===f.OPEN?i=g:(i=i=id(void 0,void 0,e),e.objectMode||(i._writev=C),c?f.addEventListener("open",w):f.onopen=w),i.socket=f,c?(f.addEventListener("close",b),f.addEventListener("error",A),f.addEventListener("message",O)):(f.onclose=b,f.onerror=A,f.onmessage=O);function y(R,N,$){const V=new nd({objectModeMode:R.objectMode});return V._write=N,V._flush=$,V}function w(){i.setReadable(g),i.setWritable(g),i.emit("connect")}function b(){i.end(),i.destroy()}function A(R){i.destroy(R)}function O(R){let N=R.data;N instanceof ArrayBuffer?N=Fi.from(N):N=Fi.from(N,"utf8"),g.push(N)}function C(R,N){const $=new Array(R.length);for(let V=0;V<R.length;V++)typeof R[V].chunk=="string"?$[V]=Fi.from(R[V],"utf8"):$[V]=R[V].chunk;this._write(Fi.concat($),"binary",N)}function Z(R,N,$){f.bufferedAmount>s&&setTimeout(Z,a,R,N,$),h&&typeof R=="string"&&(R=Fi.from(R,"utf8"));try{f.send(R)}catch(V){return $(V)}$()}function P(R){f.close(),R()}return i}Fa?Mn.exports=hd:Mn.exports=ud;const qa=Fc,ld=ha,fd=yi,cd=Wr,Zs=de.exports("mqttjs"),te={};typeof X<"u"&&X.title!=="browser"||typeof __webpack_require__!="function"?(te.mqtt=Rs(),te.tcp=Rs(),te.ssl=kr(),te.tls=kr(),te.mqtts=kr()):(te.wx=zs(),te.wxs=zs(),te.ali=Us(),te.alis=Us());te.ws=Mn.exports;te.wss=Mn.exports;function dd(n){let e;n.auth&&(e=n.auth.match(/^(.+):(.+)$/),e?(n.username=e[1],n.password=e[2]):n.username=n.auth)}function ja(n,e){if(Zs("connecting to an MQTT broker..."),typeof n=="object"&&!e&&(e=n,n=null),e=e||{},n){const s=fd.parse(n,!0);if(s.port!=null&&(s.port=Number(s.port)),e=cd(s,e),e.protocol===null)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(dd(e),e.query&&typeof e.query.clientId=="string"&&(e.clientId=e.query.clientId),e.cert&&e.key)if(e.protocol){if(["mqtts","wss","wxs","alis"].indexOf(e.protocol)===-1)switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}else throw new Error("Missing secure protocol key");if(!te[e.protocol]){const s=["mqtts","wss"].indexOf(e.protocol)!==-1;e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(a,h){return s&&h%2===0?!1:typeof te[a]=="function"})[0]}if(e.clean===!1&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);function i(s){return e.servers&&((!s._reconnectCount||s._reconnectCount===e.servers.length)&&(s._reconnectCount=0),e.host=e.servers[s._reconnectCount].host,e.port=e.servers[s._reconnectCount].port,e.protocol=e.servers[s._reconnectCount].protocol?e.servers[s._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,s._reconnectCount++),Zs("calling streambuilder for",e.protocol),te[e.protocol](s,e)}const o=new qa(i,e);return o.on("error",function(){}),o}Hi.exports=ja;Hi.exports.connect=ja;Hi.exports.MqttClient=qa;Hi.exports.Store=ld;var Ha=65,Wa=function(e){return e.match(/^[A-Ra-r][A-Ra-r]\d\d[A-Xa-x][A-Xa-x]/)!==null},bn=function(e){return e.toUpperCase().charCodeAt(0)-Ha},xn=function(e){return String.fromCharCode(e+Ha)},qr=function(e){if(e+="ll",!Wa(e))throw new Error("Input is not valid locator string");var i=bn(e[0])*20,o=bn(e[1])*10,s=Number.parseInt(e[2])*2,a=Number.parseInt(e[3]),h=(bn(e[4])+.5)/12,f=(bn(e[5])+.5)/24;return[o+a+f-90,i+s+h-180]},En=function(e){return e%360*Math.PI/180},pd=function(e){return e/Math.PI*180%360},Va=function(e,i){var o=qr(e),s=qr(i),a=En(s[0]-o[0]),h=En(s[1]-o[1]),f=En(o[0]),g=En(s[0]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(h/2),2)*Math.cos(f)*Math.cos(g),y=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),w=h*Math.cos(f)*Math.cos(g),b=Math.sin(g)-Math.sin(f)*Math.cos(y),A=Math.atan2(w,b);return A<0&&(A+=2*Math.PI),{km:y*6371,deg:pd(A)}},_d=function(e,i){return Va(e,i).km},gd=function(e,i){return e>=-90&&e<=90&&i>=-180&&i<=180},md=function(e,i){if(!gd(e,i))throw new Error("Input is not a valid coordinate");var o=i+180,s=e+90,a=xn(Math.floor(o/20)),h=xn(Math.floor(s/10)),f=Math.floor(o%20/2),g=Math.floor(s%10),c=xn(Math.floor(o%20%2*12)).toLowerCase(),y=xn((s%10-g)*24).toLowerCase();return a+h+f+g+c+y},qs={isValidLocatorString:Wa,locatorToLatLng:qr,distance:_d,bearingDistance:Va,latLngToLocator:md};function vd(n,e,i){i===void 0&&(i={});var o={type:"Feature"};return(i.id===0||i.id)&&(o.id=i.id),i.bbox&&(o.bbox=i.bbox),o.properties=e||{},o.geometry=n,o}function js(n,e,i){if(i===void 0&&(i={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Hs(n[0])||!Hs(n[1]))throw new Error("coordinates must contain numbers");var o={type:"Point",coordinates:n};return vd(o,e,i)}function Hs(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function Ws(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var Vs=Math.PI/180,$s=180/Math.PI,ji=function(n,e){this.lon=n,this.lat=e,this.x=Vs*n,this.y=Vs*e};ji.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};ji.prototype.antipode=function(){var n=-1*this.lat,e=this.lon<0?180+this.lon:(180-this.lon)*-1;return new ji(e,n)};var $a=function(){this.coords=[],this.length=0};$a.prototype.move_to=function(n){this.length++,this.coords.push(n)};var io=function(n){this.properties=n||{},this.geometries=[]};io.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var n=[],e=0;e<this.geometries.length;e++)n.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:n},type:"Feature",properties:this.properties}};io.prototype.wkt=function(){for(var n="",e="LINESTRING(",i=function(a){e+=a[0]+" "+a[1]+","},o=0;o<this.geometries.length;o++){if(this.geometries[o].coords.length===0)return"LINESTRING(empty)";var s=this.geometries[o].coords;s.forEach(i),n+=e.substring(0,e.length-1)+")"}return n};var no=function(n,e,i){if(!n||n.x===void 0||n.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||e.x===void 0||e.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ji(n.x,n.y),this.end=new ji(e.x,e.y),this.properties=i||{};var o=this.start.x-this.end.x,s=this.start.y-this.end.y,a=Math.pow(Math.sin(s/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(o/2),2);if(this.g=2*Math.asin(Math.sqrt(a)),this.g===Math.PI)throw new Error("it appears "+n.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+n+" and "+e)};no.prototype.interpolate=function(n){var e=Math.sin((1-n)*this.g)/Math.sin(this.g),i=Math.sin(n*this.g)/Math.sin(this.g),o=e*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),s=e*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),a=e*Math.sin(this.start.y)+i*Math.sin(this.end.y),h=$s*Math.atan2(a,Math.sqrt(Math.pow(o,2)+Math.pow(s,2))),f=$s*Math.atan2(s,o);return[f,h]};no.prototype.Arc=function(n,e){var i=[];if(!n||n<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var o=1/(n-1),s=0;s<n;++s){var a=o*s,h=this.interpolate(a);i.push(h)}for(var f=!1,g=0,c=e&&e.offset?e.offset:10,y=180-c,w=-180+c,b=360-c,A=1;A<i.length;++A){var O=i[A-1][0],C=i[A][0],Z=Math.abs(C-O);Z>b&&(C>y&&O<w||O>y&&C<w)?f=!0:Z>g&&(g=Z)}var P=[];if(f&&g<c){var R=[];P.push(R);for(var N=0;N<i.length;++N){var $=parseFloat(i[N][0]);if(N>0&&Math.abs($-i[N-1][0])>b){var V=parseFloat(i[N-1][0]),gt=parseFloat(i[N-1][1]),vt=parseFloat(i[N][0]),st=parseFloat(i[N][1]);if(V>-180&&V<w&&vt===180&&N+1<i.length&&i[N-1][0]>-180&&i[N-1][0]<w){R.push([-180,i[N][1]]),N++,R.push([i[N][0],i[N][1]]);continue}else if(V>y&&V<180&&vt===-180&&N+1<i.length&&i[N-1][0]>y&&i[N-1][0]<180){R.push([180,i[N][1]]),N++,R.push([i[N][0],i[N][1]]);continue}if(V<w&&vt>y){var it=V;V=vt,vt=it;var ue=gt;gt=st,st=ue}if(V>y&&vt<w&&(vt+=360),V<=180&&vt>=180&&V<vt){var Bt=(180-V)/(vt-V),Rt=Bt*st+(1-Bt)*gt;R.push([i[N-1][0]>y?180:-180,Rt]),R=[],R.push([i[N-1][0]>y?-180:180,Rt]),P.push(R)}else R=[],P.push(R);R.push([$,i[N][1]])}else R.push([i[N][0],i[N][1]])}}else{var ee=[];P.push(ee);for(var Dt=0;Dt<i.length;++Dt)ee.push([i[Dt][0],i[Dt][1]])}for(var ie=new io(this.properties),kt=0;kt<P.length;++kt){var Zt=new $a;ie.geometries.push(Zt);for(var Y=P[kt],Qt=0;Qt<Y.length;++Qt)Zt.move_to(Y[Qt])}return ie};function yd(n,e,i){if(i=i||{},typeof i!="object")throw new Error("options is invalid");var o=i.properties,s=i.npoints,a=i.offset;n=Ws(n),e=Ws(e),o=o||{},s=s||100,a=a||10;var h=new no({x:n[0],y:n[1]},{x:e[0],y:e[1]},o),f=h.Arc(s,{offset:a});return f.json()}const Ka=Hr.map("map").setView([0,0],3);Hr.tileLayer("https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap",maxZoom:19,noWrap:!0}).addTo(Ka);function wd(n){return{sequenceNumber:n.sq,frequency:n.f,mode:n.md,snr:n.rp,timestamp:n.t,callSender:n.sc,callReceiver:n.rc,locatorSender:n.sl,locatorReceiver:n.rl,countrySender:n.sa,countryReceiver:n.ra,band:n.b}}const bd=["70cm","2m","6m","10m","12m","15m","17m","20m","30m","40m","60m","80m","160m"],xd=["rgb(1,196,114)","rgb(226,105,138)","rgb(236,130,46)","rgb(149,73,182)","rgb(137,149,118)","rgb(54,109,165)","rgb(214,6,26)","rgb(43,25,217)","rgb(174,227,154)","rgb(252,209,7)","rgb(84,178,252)","rgb(233,210,156)","rgb(44,92,57)"],Ga="wss://mqtt.pskreporter.info:1886";console.log(`Connecting to ${Ga}`);const kn=Hi.exports.connect(Ga);kn.on("connect",()=>{kn.subscribe("pskr/filter/v2/+/FT8/#",n=>{n?console.error(`Error subscribing: ${n.message}`):console.log("Subscribed.")})});kn.on("error",n=>console.error(n));kn.on("message",(n,e)=>{var w;const i=wd(JSON.parse(e.toString())),[o,s]=qs.locatorToLatLng(i.locatorSender),[a,h]=qs.locatorToLatLng(i.locatorReceiver),f=js([s,o]),g=js([h,a]),c=yd(f,g),y=bd.indexOf(i.band);y===-1&&console.log("Band without corresponding color:",i.band),!c.geometry.coordinates.some(([b,A])=>Number.isNaN(b)||Number.isNaN(A))&&Hr.geoJSON(c).setStyle({color:(w=xd[y])!=null?w:"black",opacity:.75,weight:1}).addTo(Ka)});
